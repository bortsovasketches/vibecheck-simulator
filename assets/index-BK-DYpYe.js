var Iw=n=>{throw TypeError(n)};var Am=(n,e,t)=>e.has(n)||Iw("Cannot "+t);var Mt=(n,e,t)=>(Am(n,e,"read from private field"),t?t.call(n):e.get(n)),ps=(n,e,t)=>e.has(n)?Iw("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),ri=(n,e,t,i)=>(Am(n,e,"write to private field"),i?i.call(n,t):e.set(n,t),t),ms=(n,e,t)=>(Am(n,e,"access private method"),t);var Lw=(n,e,t,i)=>({set _(s){ri(n,e,s,t)},get _(){return Mt(n,e,i)}});function jO(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const s in i)if(s!=="default"&&!(s in n)){const r=Object.getOwnPropertyDescriptor(i,s);r&&Object.defineProperty(n,s,r.get?r:{enumerable:!0,get:()=>i[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();function zh(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Sm={exports:{}},ic={};var zw;function BO(){if(zw)return ic;zw=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,s,r){var l=null;if(r!==void 0&&(l=""+r),s.key!==void 0&&(l=""+s.key),"key"in s){r={};for(var c in s)c!=="key"&&(r[c]=s[c])}else r=s;return s=r.ref,{$$typeof:n,type:i,key:l,ref:s!==void 0?s:null,props:r}}return ic.Fragment=e,ic.jsx=t,ic.jsxs=t,ic}var jw;function FO(){return jw||(jw=1,Sm.exports=BO()),Sm.exports}var k=FO(),_m={exports:{}},Pe={};var Bw;function UO(){if(Bw)return Pe;Bw=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),r=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),v=Symbol.iterator;function b(P){return P===null||typeof P!="object"?null:(P=v&&P[v]||P["@@iterator"],typeof P=="function"?P:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,A={};function S(P,q,Z){this.props=P,this.context=q,this.refs=A,this.updater=Z||w}S.prototype.isReactComponent={},S.prototype.setState=function(P,q){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,q,"setState")},S.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function T(){}T.prototype=S.prototype;function E(P,q,Z){this.props=P,this.context=q,this.refs=A,this.updater=Z||w}var M=E.prototype=new T;M.constructor=E,x(M,S.prototype),M.isPureReactComponent=!0;var R=Array.isArray;function O(){}var L={H:null,A:null,T:null,S:null},D=Object.prototype.hasOwnProperty;function $(P,q,Z){var ne=Z.ref;return{$$typeof:n,type:P,key:q,ref:ne!==void 0?ne:null,props:Z}}function ee(P,q){return $(P.type,q,P.props)}function X(P){return typeof P=="object"&&P!==null&&P.$$typeof===n}function le(P){var q={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(Z){return q[Z]})}var de=/\/+/g;function ce(P,q){return typeof P=="object"&&P!==null&&P.key!=null?le(""+P.key):q.toString(36)}function fe(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(O,O):(P.status="pending",P.then(function(q){P.status==="pending"&&(P.status="fulfilled",P.value=q)},function(q){P.status==="pending"&&(P.status="rejected",P.reason=q)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function N(P,q,Z,ne,ae){var pe=typeof P;(pe==="undefined"||pe==="boolean")&&(P=null);var oe=!1;if(P===null)oe=!0;else switch(pe){case"bigint":case"string":case"number":oe=!0;break;case"object":switch(P.$$typeof){case n:case e:oe=!0;break;case p:return oe=P._init,N(oe(P._payload),q,Z,ne,ae)}}if(oe)return ae=ae(P),oe=ne===""?"."+ce(P,0):ne,R(ae)?(Z="",oe!=null&&(Z=oe.replace(de,"$&/")+"/"),N(ae,q,Z,"",function(Nt){return Nt})):ae!=null&&(X(ae)&&(ae=ee(ae,Z+(ae.key==null||P&&P.key===ae.key?"":(""+ae.key).replace(de,"$&/")+"/")+oe)),q.push(ae)),1;oe=0;var Ee=ne===""?".":ne+":";if(R(P))for(var De=0;De<P.length;De++)ne=P[De],pe=Ee+ce(ne,De),oe+=N(ne,q,Z,pe,ae);else if(De=b(P),typeof De=="function")for(P=De.call(P),De=0;!(ne=P.next()).done;)ne=ne.value,pe=Ee+ce(ne,De++),oe+=N(ne,q,Z,pe,ae);else if(pe==="object"){if(typeof P.then=="function")return N(fe(P),q,Z,ne,ae);throw q=String(P),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.")}return oe}function U(P,q,Z){if(P==null)return P;var ne=[],ae=0;return N(P,ne,"","",function(pe){return q.call(Z,pe,ae++)}),ne}function B(P){if(P._status===-1){var q=P._result;q=q(),q.then(function(Z){(P._status===0||P._status===-1)&&(P._status=1,P._result=Z)},function(Z){(P._status===0||P._status===-1)&&(P._status=2,P._result=Z)}),P._status===-1&&(P._status=0,P._result=q)}if(P._status===1)return P._result.default;throw P._result}var se=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)},ve={map:U,forEach:function(P,q,Z){U(P,function(){q.apply(this,arguments)},Z)},count:function(P){var q=0;return U(P,function(){q++}),q},toArray:function(P){return U(P,function(q){return q})||[]},only:function(P){if(!X(P))throw Error("React.Children.only expected to receive a single React element child.");return P}};return Pe.Activity=m,Pe.Children=ve,Pe.Component=S,Pe.Fragment=t,Pe.Profiler=s,Pe.PureComponent=E,Pe.StrictMode=i,Pe.Suspense=d,Pe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=L,Pe.__COMPILER_RUNTIME={__proto__:null,c:function(P){return L.H.useMemoCache(P)}},Pe.cache=function(P){return function(){return P.apply(null,arguments)}},Pe.cacheSignal=function(){return null},Pe.cloneElement=function(P,q,Z){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var ne=x({},P.props),ae=P.key;if(q!=null)for(pe in q.key!==void 0&&(ae=""+q.key),q)!D.call(q,pe)||pe==="key"||pe==="__self"||pe==="__source"||pe==="ref"&&q.ref===void 0||(ne[pe]=q[pe]);var pe=arguments.length-2;if(pe===1)ne.children=Z;else if(1<pe){for(var oe=Array(pe),Ee=0;Ee<pe;Ee++)oe[Ee]=arguments[Ee+2];ne.children=oe}return $(P.type,ae,ne)},Pe.createContext=function(P){return P={$$typeof:l,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:r,_context:P},P},Pe.createElement=function(P,q,Z){var ne,ae={},pe=null;if(q!=null)for(ne in q.key!==void 0&&(pe=""+q.key),q)D.call(q,ne)&&ne!=="key"&&ne!=="__self"&&ne!=="__source"&&(ae[ne]=q[ne]);var oe=arguments.length-2;if(oe===1)ae.children=Z;else if(1<oe){for(var Ee=Array(oe),De=0;De<oe;De++)Ee[De]=arguments[De+2];ae.children=Ee}if(P&&P.defaultProps)for(ne in oe=P.defaultProps,oe)ae[ne]===void 0&&(ae[ne]=oe[ne]);return $(P,pe,ae)},Pe.createRef=function(){return{current:null}},Pe.forwardRef=function(P){return{$$typeof:c,render:P}},Pe.isValidElement=X,Pe.lazy=function(P){return{$$typeof:p,_payload:{_status:-1,_result:P},_init:B}},Pe.memo=function(P,q){return{$$typeof:h,type:P,compare:q===void 0?null:q}},Pe.startTransition=function(P){var q=L.T,Z={};L.T=Z;try{var ne=P(),ae=L.S;ae!==null&&ae(Z,ne),typeof ne=="object"&&ne!==null&&typeof ne.then=="function"&&ne.then(O,se)}catch(pe){se(pe)}finally{q!==null&&Z.types!==null&&(q.types=Z.types),L.T=q}},Pe.unstable_useCacheRefresh=function(){return L.H.useCacheRefresh()},Pe.use=function(P){return L.H.use(P)},Pe.useActionState=function(P,q,Z){return L.H.useActionState(P,q,Z)},Pe.useCallback=function(P,q){return L.H.useCallback(P,q)},Pe.useContext=function(P){return L.H.useContext(P)},Pe.useDebugValue=function(){},Pe.useDeferredValue=function(P,q){return L.H.useDeferredValue(P,q)},Pe.useEffect=function(P,q){return L.H.useEffect(P,q)},Pe.useEffectEvent=function(P){return L.H.useEffectEvent(P)},Pe.useId=function(){return L.H.useId()},Pe.useImperativeHandle=function(P,q,Z){return L.H.useImperativeHandle(P,q,Z)},Pe.useInsertionEffect=function(P,q){return L.H.useInsertionEffect(P,q)},Pe.useLayoutEffect=function(P,q){return L.H.useLayoutEffect(P,q)},Pe.useMemo=function(P,q){return L.H.useMemo(P,q)},Pe.useOptimistic=function(P,q){return L.H.useOptimistic(P,q)},Pe.useReducer=function(P,q,Z){return L.H.useReducer(P,q,Z)},Pe.useRef=function(P){return L.H.useRef(P)},Pe.useState=function(P){return L.H.useState(P)},Pe.useSyncExternalStore=function(P,q,Z){return L.H.useSyncExternalStore(P,q,Z)},Pe.useTransition=function(){return L.H.useTransition()},Pe.version="19.2.4",Pe}var Fw;function wv(){return Fw||(Fw=1,_m.exports=UO()),_m.exports}var I=wv();const re=zh(I),Av=jO({__proto__:null,default:re},[I]);var Em={exports:{}},sc={},Tm={exports:{}},Cm={};var Uw;function VO(){return Uw||(Uw=1,(function(n){function e(N,U){var B=N.length;N.push(U);e:for(;0<B;){var se=B-1>>>1,ve=N[se];if(0<s(ve,U))N[se]=U,N[B]=ve,B=se;else break e}}function t(N){return N.length===0?null:N[0]}function i(N){if(N.length===0)return null;var U=N[0],B=N.pop();if(B!==U){N[0]=B;e:for(var se=0,ve=N.length,P=ve>>>1;se<P;){var q=2*(se+1)-1,Z=N[q],ne=q+1,ae=N[ne];if(0>s(Z,B))ne<ve&&0>s(ae,Z)?(N[se]=ae,N[ne]=B,se=ne):(N[se]=Z,N[q]=B,se=q);else if(ne<ve&&0>s(ae,B))N[se]=ae,N[ne]=B,se=ne;else break e}}return U}function s(N,U){var B=N.sortIndex-U.sortIndex;return B!==0?B:N.id-U.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;n.unstable_now=function(){return r.now()}}else{var l=Date,c=l.now();n.unstable_now=function(){return l.now()-c}}var d=[],h=[],p=1,m=null,v=3,b=!1,w=!1,x=!1,A=!1,S=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function M(N){for(var U=t(h);U!==null;){if(U.callback===null)i(h);else if(U.startTime<=N)i(h),U.sortIndex=U.expirationTime,e(d,U);else break;U=t(h)}}function R(N){if(x=!1,M(N),!w)if(t(d)!==null)w=!0,O||(O=!0,le());else{var U=t(h);U!==null&&fe(R,U.startTime-N)}}var O=!1,L=-1,D=5,$=-1;function ee(){return A?!0:!(n.unstable_now()-$<D)}function X(){if(A=!1,O){var N=n.unstable_now();$=N;var U=!0;try{e:{w=!1,x&&(x=!1,T(L),L=-1),b=!0;var B=v;try{t:{for(M(N),m=t(d);m!==null&&!(m.expirationTime>N&&ee());){var se=m.callback;if(typeof se=="function"){m.callback=null,v=m.priorityLevel;var ve=se(m.expirationTime<=N);if(N=n.unstable_now(),typeof ve=="function"){m.callback=ve,M(N),U=!0;break t}m===t(d)&&i(d),M(N)}else i(d);m=t(d)}if(m!==null)U=!0;else{var P=t(h);P!==null&&fe(R,P.startTime-N),U=!1}}break e}finally{m=null,v=B,b=!1}U=void 0}}finally{U?le():O=!1}}}var le;if(typeof E=="function")le=function(){E(X)};else if(typeof MessageChannel<"u"){var de=new MessageChannel,ce=de.port2;de.port1.onmessage=X,le=function(){ce.postMessage(null)}}else le=function(){S(X,0)};function fe(N,U){L=S(function(){N(n.unstable_now())},U)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(N){N.callback=null},n.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<N?Math.floor(1e3/N):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_next=function(N){switch(v){case 1:case 2:case 3:var U=3;break;default:U=v}var B=v;v=U;try{return N()}finally{v=B}},n.unstable_requestPaint=function(){A=!0},n.unstable_runWithPriority=function(N,U){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var B=v;v=N;try{return U()}finally{v=B}},n.unstable_scheduleCallback=function(N,U,B){var se=n.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?se+B:se):B=se,N){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=B+ve,N={id:p++,callback:U,priorityLevel:N,startTime:B,expirationTime:ve,sortIndex:-1},B>se?(N.sortIndex=B,e(h,N),t(d)===null&&N===t(h)&&(x?(T(L),L=-1):x=!0,fe(R,B-se))):(N.sortIndex=ve,e(d,N),w||b||(w=!0,O||(O=!0,le()))),N},n.unstable_shouldYield=ee,n.unstable_wrapCallback=function(N){var U=v;return function(){var B=v;v=U;try{return N.apply(this,arguments)}finally{v=B}}}})(Cm)),Cm}var Vw;function $O(){return Vw||(Vw=1,Tm.exports=VO()),Tm.exports}var km={exports:{}},jn={};var $w;function HO(){if($w)return jn;$w=1;var n=wv();function e(d){var h="https://react.dev/errors/"+d;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function r(d,h,p){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:m==null?null:""+m,children:d,containerInfo:h,implementation:p}}var l=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(d,h){if(d==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return jn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,jn.createPortal=function(d,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return r(d,h,null,p)},jn.flushSync=function(d){var h=l.T,p=i.p;try{if(l.T=null,i.p=2,d)return d()}finally{l.T=h,i.p=p,i.d.f()}},jn.preconnect=function(d,h){typeof d=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,i.d.C(d,h))},jn.prefetchDNS=function(d){typeof d=="string"&&i.d.D(d)},jn.preinit=function(d,h){if(typeof d=="string"&&h&&typeof h.as=="string"){var p=h.as,m=c(p,h.crossOrigin),v=typeof h.integrity=="string"?h.integrity:void 0,b=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?i.d.S(d,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:m,integrity:v,fetchPriority:b}):p==="script"&&i.d.X(d,{crossOrigin:m,integrity:v,fetchPriority:b,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},jn.preinitModule=function(d,h){if(typeof d=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=c(h.as,h.crossOrigin);i.d.M(d,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&i.d.M(d)},jn.preload=function(d,h){if(typeof d=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,m=c(p,h.crossOrigin);i.d.L(d,p,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},jn.preloadModule=function(d,h){if(typeof d=="string")if(h){var p=c(h.as,h.crossOrigin);i.d.m(d,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else i.d.m(d)},jn.requestFormReset=function(d){i.d.r(d)},jn.unstable_batchedUpdates=function(d,h){return d(h)},jn.useFormState=function(d,h,p){return l.H.useFormState(d,h,p)},jn.useFormStatus=function(){return l.H.useHostTransitionStatus()},jn.version="19.2.4",jn}var Hw;function hE(){if(Hw)return km.exports;Hw=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),km.exports=HO(),km.exports}var Gw;function GO(){if(Gw)return sc;Gw=1;var n=$O(),e=wv(),t=hE();function i(a){var o="https://react.dev/errors/"+a;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+a+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function r(a){var o=a,u=a;if(a.alternate)for(;o.return;)o=o.return;else{a=o;do o=a,(o.flags&4098)!==0&&(u=o.return),a=o.return;while(a)}return o.tag===3?u:null}function l(a){if(a.tag===13){var o=a.memoizedState;if(o===null&&(a=a.alternate,a!==null&&(o=a.memoizedState)),o!==null)return o.dehydrated}return null}function c(a){if(a.tag===31){var o=a.memoizedState;if(o===null&&(a=a.alternate,a!==null&&(o=a.memoizedState)),o!==null)return o.dehydrated}return null}function d(a){if(r(a)!==a)throw Error(i(188))}function h(a){var o=a.alternate;if(!o){if(o=r(a),o===null)throw Error(i(188));return o!==a?null:a}for(var u=a,f=o;;){var g=u.return;if(g===null)break;var y=g.alternate;if(y===null){if(f=g.return,f!==null){u=f;continue}break}if(g.child===y.child){for(y=g.child;y;){if(y===u)return d(g),a;if(y===f)return d(g),o;y=y.sibling}throw Error(i(188))}if(u.return!==f.return)u=g,f=y;else{for(var _=!1,C=g.child;C;){if(C===u){_=!0,u=g,f=y;break}if(C===f){_=!0,f=g,u=y;break}C=C.sibling}if(!_){for(C=y.child;C;){if(C===u){_=!0,u=y,f=g;break}if(C===f){_=!0,f=y,u=g;break}C=C.sibling}if(!_)throw Error(i(189))}}if(u.alternate!==f)throw Error(i(190))}if(u.tag!==3)throw Error(i(188));return u.stateNode.current===u?a:o}function p(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a;for(a=a.child;a!==null;){if(o=p(a),o!==null)return o;a=a.sibling}return null}var m=Object.assign,v=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),T=Symbol.for("react.consumer"),E=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),$=Symbol.for("react.activity"),ee=Symbol.for("react.memo_cache_sentinel"),X=Symbol.iterator;function le(a){return a===null||typeof a!="object"?null:(a=X&&a[X]||a["@@iterator"],typeof a=="function"?a:null)}var de=Symbol.for("react.client.reference");function ce(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===de?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case x:return"Fragment";case S:return"Profiler";case A:return"StrictMode";case R:return"Suspense";case O:return"SuspenseList";case $:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case w:return"Portal";case E:return a.displayName||"Context";case T:return(a._context.displayName||"Context")+".Consumer";case M:var o=a.render;return a=a.displayName,a||(a=o.displayName||o.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case L:return o=a.displayName||null,o!==null?o:ce(a.type)||"Memo";case D:o=a._payload,a=a._init;try{return ce(a(o))}catch{}}return null}var fe=Array.isArray,N=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,U=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,B={pending:!1,data:null,method:null,action:null},se=[],ve=-1;function P(a){return{current:a}}function q(a){0>ve||(a.current=se[ve],se[ve]=null,ve--)}function Z(a,o){ve++,se[ve]=a.current,a.current=o}var ne=P(null),ae=P(null),pe=P(null),oe=P(null);function Ee(a,o){switch(Z(pe,o),Z(ae,a),Z(ne,null),o.nodeType){case 9:case 11:a=(a=o.documentElement)&&(a=a.namespaceURI)?sw(a):0;break;default:if(a=o.tagName,o=o.namespaceURI)o=sw(o),a=aw(o,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}q(ne),Z(ne,a)}function De(){q(ne),q(ae),q(pe)}function Nt(a){a.memoizedState!==null&&Z(oe,a);var o=ne.current,u=aw(o,a.type);o!==u&&(Z(ae,a),Z(ne,u))}function wt(a){ae.current===a&&(q(ne),q(ae)),oe.current===a&&(q(oe),Ql._currentValue=B)}var ft,Sn;function ln(a){if(ft===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);ft=o&&o[1]||"",Sn=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ft+a+Sn}var qi=!1;function pt(a,o){if(!a||qi)return"";qi=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(o){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(W){var Y=W}Reflect.construct(a,[],ie)}else{try{ie.call()}catch(W){Y=W}a.call(ie.prototype)}}else{try{throw Error()}catch(W){Y=W}(ie=a())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(W){if(W&&Y&&typeof W.stack=="string")return[W.stack,Y.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=f.DetermineComponentFrameRoot(),_=y[0],C=y[1];if(_&&C){var z=_.split(`
`),G=C.split(`
`);for(g=f=0;f<z.length&&!z[f].includes("DetermineComponentFrameRoot");)f++;for(;g<G.length&&!G[g].includes("DetermineComponentFrameRoot");)g++;if(f===z.length||g===G.length)for(f=z.length-1,g=G.length-1;1<=f&&0<=g&&z[f]!==G[g];)g--;for(;1<=f&&0<=g;f--,g--)if(z[f]!==G[g]){if(f!==1||g!==1)do if(f--,g--,0>g||z[f]!==G[g]){var Q=`
`+z[f].replace(" at new "," at ");return a.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",a.displayName)),Q}while(1<=f&&0<=g);break}}}finally{qi=!1,Error.prepareStackTrace=u}return(u=a?a.displayName||a.name:"")?ln(u):""}function gn(a,o){switch(a.tag){case 26:case 27:case 5:return ln(a.type);case 16:return ln("Lazy");case 13:return a.child!==o&&o!==null?ln("Suspense Fallback"):ln("Suspense");case 19:return ln("SuspenseList");case 0:case 15:return pt(a.type,!1);case 11:return pt(a.type.render,!1);case 1:return pt(a.type,!0);case 31:return ln("Activity");default:return""}}function In(a){try{var o="",u=null;do o+=gn(a,u),u=a,a=a.return;while(a);return o}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}var cn=Object.prototype.hasOwnProperty,rs=n.unstable_scheduleCallback,os=n.unstable_cancelCallback,_n=n.unstable_shouldYield,ls=n.unstable_requestPaint,En=n.unstable_now,ue=n.unstable_getCurrentPriorityLevel,_e=n.unstable_ImmediatePriority,rt=n.unstable_UserBlockingPriority,ot=n.unstable_NormalPriority,Pt=n.unstable_LowPriority,Jt=n.unstable_IdlePriority,Yn=n.log,Ci=n.unstable_setDisableYieldValue,Zi=null,un=null;function Ln(a){if(typeof Yn=="function"&&Ci(a),un&&typeof un.setStrictMode=="function")try{un.setStrictMode(Zi,a)}catch{}}var Qt=Math.clz32?Math.clz32:Xn,Wa=Math.log,Ds=Math.LN2;function Xn(a){return a>>>=0,a===0?32:31-(Wa(a)/Ds|0)|0}var ca=256,Fr=262144,Ka=4194304;function cs(a){var o=a&42;if(o!==0)return o;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return a&261888;case 262144:case 524288:case 1048576:case 2097152:return a&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function Re(a,o,u){var f=a.pendingLanes;if(f===0)return 0;var g=0,y=a.suspendedLanes,_=a.pingedLanes;a=a.warmLanes;var C=f&134217727;return C!==0?(f=C&~y,f!==0?g=cs(f):(_&=C,_!==0?g=cs(_):u||(u=C&~a,u!==0&&(g=cs(u))))):(C=f&~y,C!==0?g=cs(C):_!==0?g=cs(_):u||(u=f&~a,u!==0&&(g=cs(u)))),g===0?0:o!==0&&o!==g&&(o&y)===0&&(y=g&-g,u=o&-o,y>=u||y===32&&(u&4194048)!==0)?o:g}function Ct(a,o){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&o)===0}function vn(a,o){switch(a){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zn(){var a=Ka;return Ka<<=1,(Ka&62914560)===0&&(Ka=4194304),a}function ua(a){for(var o=[],u=0;31>u;u++)o.push(a);return o}function It(a,o){a.pendingLanes|=o,o!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function Wn(a,o,u,f,g,y){var _=a.pendingLanes;a.pendingLanes=u,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=u,a.entangledLanes&=u,a.errorRecoveryDisabledLanes&=u,a.shellSuspendCounter=0;var C=a.entanglements,z=a.expirationTimes,G=a.hiddenUpdates;for(u=_&~u;0<u;){var Q=31-Qt(u),ie=1<<Q;C[Q]=0,z[Q]=-1;var Y=G[Q];if(Y!==null)for(G[Q]=null,Q=0;Q<Y.length;Q++){var W=Y[Q];W!==null&&(W.lane&=-536870913)}u&=~ie}f!==0&&Ja(a,f,0),y!==0&&g===0&&a.tag!==0&&(a.suspendedLanes|=y&~(_&~o))}function Ja(a,o,u){a.pendingLanes|=o,a.suspendedLanes&=~o;var f=31-Qt(o);a.entangledLanes|=o,a.entanglements[f]=a.entanglements[f]|1073741824|u&261930}function Kn(a,o){var u=a.entangledLanes|=o;for(a=a.entanglements;u;){var f=31-Qt(u),g=1<<f;g&o|a[f]&o&&(a[f]|=o),u&=~g}}function Jn(a,o){var u=o&-o;return u=(u&42)!==0?1:Ur(u),(u&(a.suspendedLanes|o))!==0?0:u}function Ur(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function Yi(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function hf(){var a=U.p;return a!==0?a:(a=window.event,a===void 0?32:kw(a.type))}function Hy(a,o){var u=U.p;try{return U.p=a,o()}finally{U.p=u}}var da=Math.random().toString(36).slice(2),Tn="__reactFiber$"+da,Qn="__reactProps$"+da,Vr="__reactContainer$"+da,ff="__reactEvents$"+da,CR="__reactListeners$"+da,kR="__reactHandles$"+da,Gy="__reactResources$"+da,pl="__reactMarker$"+da;function pf(a){delete a[Tn],delete a[Qn],delete a[ff],delete a[CR],delete a[kR]}function $r(a){var o=a[Tn];if(o)return o;for(var u=a.parentNode;u;){if(o=u[Vr]||u[Tn]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(a=hw(a);a!==null;){if(u=a[Tn])return u;a=hw(a)}return o}a=u,u=a.parentNode}return null}function Hr(a){if(a=a[Tn]||a[Vr]){var o=a.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return a}return null}function ml(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a.stateNode;throw Error(i(33))}function Gr(a){var o=a[Gy];return o||(o=a[Gy]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function yn(a){a[pl]=!0}var qy=new Set,Zy={};function Qa(a,o){qr(a,o),qr(a+"Capture",o)}function qr(a,o){for(Zy[a]=o,a=0;a<o.length;a++)qy.add(o[a])}var MR=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Yy={},Xy={};function RR(a){return cn.call(Xy,a)?!0:cn.call(Yy,a)?!1:MR.test(a)?Xy[a]=!0:(Yy[a]=!0,!1)}function lu(a,o,u){if(RR(o))if(u===null)a.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":a.removeAttribute(o);return;case"boolean":var f=o.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){a.removeAttribute(o);return}}a.setAttribute(o,""+u)}}function cu(a,o,u){if(u===null)a.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(o);return}a.setAttribute(o,""+u)}}function Os(a,o,u,f){if(f===null)a.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(u);return}a.setAttributeNS(o,u,""+f)}}function ki(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Wy(a){var o=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function DR(a,o,u){var f=Object.getOwnPropertyDescriptor(a.constructor.prototype,o);if(!a.hasOwnProperty(o)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var g=f.get,y=f.set;return Object.defineProperty(a,o,{configurable:!0,get:function(){return g.call(this)},set:function(_){u=""+_,y.call(this,_)}}),Object.defineProperty(a,o,{enumerable:f.enumerable}),{getValue:function(){return u},setValue:function(_){u=""+_},stopTracking:function(){a._valueTracker=null,delete a[o]}}}}function mf(a){if(!a._valueTracker){var o=Wy(a)?"checked":"value";a._valueTracker=DR(a,o,""+a[o])}}function Ky(a){if(!a)return!1;var o=a._valueTracker;if(!o)return!0;var u=o.getValue(),f="";return a&&(f=Wy(a)?a.checked?"true":"false":a.value),a=f,a!==u?(o.setValue(a),!0):!1}function uu(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var OR=/[\n"\\]/g;function Mi(a){return a.replace(OR,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function gf(a,o,u,f,g,y,_,C){a.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?a.type=_:a.removeAttribute("type"),o!=null?_==="number"?(o===0&&a.value===""||a.value!=o)&&(a.value=""+ki(o)):a.value!==""+ki(o)&&(a.value=""+ki(o)):_!=="submit"&&_!=="reset"||a.removeAttribute("value"),o!=null?vf(a,_,ki(o)):u!=null?vf(a,_,ki(u)):f!=null&&a.removeAttribute("value"),g==null&&y!=null&&(a.defaultChecked=!!y),g!=null&&(a.checked=g&&typeof g!="function"&&typeof g!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?a.name=""+ki(C):a.removeAttribute("name")}function Jy(a,o,u,f,g,y,_,C){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(a.type=y),o!=null||u!=null){if(!(y!=="submit"&&y!=="reset"||o!=null)){mf(a);return}u=u!=null?""+ki(u):"",o=o!=null?""+ki(o):u,C||o===a.value||(a.value=o),a.defaultValue=o}f=f??g,f=typeof f!="function"&&typeof f!="symbol"&&!!f,a.checked=C?a.checked:!!f,a.defaultChecked=!!f,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(a.name=_),mf(a)}function vf(a,o,u){o==="number"&&uu(a.ownerDocument)===a||a.defaultValue===""+u||(a.defaultValue=""+u)}function Zr(a,o,u,f){if(a=a.options,o){o={};for(var g=0;g<u.length;g++)o["$"+u[g]]=!0;for(u=0;u<a.length;u++)g=o.hasOwnProperty("$"+a[u].value),a[u].selected!==g&&(a[u].selected=g),g&&f&&(a[u].defaultSelected=!0)}else{for(u=""+ki(u),o=null,g=0;g<a.length;g++){if(a[g].value===u){a[g].selected=!0,f&&(a[g].defaultSelected=!0);return}o!==null||a[g].disabled||(o=a[g])}o!==null&&(o.selected=!0)}}function Qy(a,o,u){if(o!=null&&(o=""+ki(o),o!==a.value&&(a.value=o),u==null)){a.defaultValue!==o&&(a.defaultValue=o);return}a.defaultValue=u!=null?""+ki(u):""}function eb(a,o,u,f){if(o==null){if(f!=null){if(u!=null)throw Error(i(92));if(fe(f)){if(1<f.length)throw Error(i(93));f=f[0]}u=f}u==null&&(u=""),o=u}u=ki(o),a.defaultValue=u,f=a.textContent,f===u&&f!==""&&f!==null&&(a.value=f),mf(a)}function Yr(a,o){if(o){var u=a.firstChild;if(u&&u===a.lastChild&&u.nodeType===3){u.nodeValue=o;return}}a.textContent=o}var NR=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function tb(a,o,u){var f=o.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?f?a.setProperty(o,""):o==="float"?a.cssFloat="":a[o]="":f?a.setProperty(o,u):typeof u!="number"||u===0||NR.has(o)?o==="float"?a.cssFloat=u:a[o]=(""+u).trim():a[o]=u+"px"}function nb(a,o,u){if(o!=null&&typeof o!="object")throw Error(i(62));if(a=a.style,u!=null){for(var f in u)!u.hasOwnProperty(f)||o!=null&&o.hasOwnProperty(f)||(f.indexOf("--")===0?a.setProperty(f,""):f==="float"?a.cssFloat="":a[f]="");for(var g in o)f=o[g],o.hasOwnProperty(g)&&u[g]!==f&&tb(a,g,f)}else for(var y in o)o.hasOwnProperty(y)&&tb(a,y,o[y])}function yf(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var PR=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),IR=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function du(a){return IR.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}function Ns(){}var bf=null;function xf(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Xr=null,Wr=null;function ib(a){var o=Hr(a);if(o&&(a=o.stateNode)){var u=a[Qn]||null;e:switch(a=o.stateNode,o.type){case"input":if(gf(a,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),o=u.name,u.type==="radio"&&o!=null){for(u=a;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+Mi(""+o)+'"][type="radio"]'),o=0;o<u.length;o++){var f=u[o];if(f!==a&&f.form===a.form){var g=f[Qn]||null;if(!g)throw Error(i(90));gf(f,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(o=0;o<u.length;o++)f=u[o],f.form===a.form&&Ky(f)}break e;case"textarea":Qy(a,u.value,u.defaultValue);break e;case"select":o=u.value,o!=null&&Zr(a,!!u.multiple,o,!1)}}}var wf=!1;function sb(a,o,u){if(wf)return a(o,u);wf=!0;try{var f=a(o);return f}finally{if(wf=!1,(Xr!==null||Wr!==null)&&(Ju(),Xr&&(o=Xr,a=Wr,Wr=Xr=null,ib(o),a)))for(o=0;o<a.length;o++)ib(a[o])}}function gl(a,o){var u=a.stateNode;if(u===null)return null;var f=u[Qn]||null;if(f===null)return null;u=f[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(a=a.type,f=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!f;break e;default:a=!1}if(a)return null;if(u&&typeof u!="function")throw Error(i(231,o,typeof u));return u}var Ps=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Af=!1;if(Ps)try{var vl={};Object.defineProperty(vl,"passive",{get:function(){Af=!0}}),window.addEventListener("test",vl,vl),window.removeEventListener("test",vl,vl)}catch{Af=!1}var ha=null,Sf=null,hu=null;function ab(){if(hu)return hu;var a,o=Sf,u=o.length,f,g="value"in ha?ha.value:ha.textContent,y=g.length;for(a=0;a<u&&o[a]===g[a];a++);var _=u-a;for(f=1;f<=_&&o[u-f]===g[y-f];f++);return hu=g.slice(a,1<f?1-f:void 0)}function fu(a){var o=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&o===13&&(a=13)):a=o,a===10&&(a=13),32<=a||a===13?a:0}function pu(){return!0}function rb(){return!1}function ei(a){function o(u,f,g,y,_){this._reactName=u,this._targetInst=g,this.type=f,this.nativeEvent=y,this.target=_,this.currentTarget=null;for(var C in a)a.hasOwnProperty(C)&&(u=a[C],this[C]=u?u(y):y[C]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?pu:rb,this.isPropagationStopped=rb,this}return m(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=pu)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=pu)},persist:function(){},isPersistent:pu}),o}var er={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mu=ei(er),yl=m({},er,{view:0,detail:0}),LR=ei(yl),_f,Ef,bl,gu=m({},yl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cf,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==bl&&(bl&&a.type==="mousemove"?(_f=a.screenX-bl.screenX,Ef=a.screenY-bl.screenY):Ef=_f=0,bl=a),_f)},movementY:function(a){return"movementY"in a?a.movementY:Ef}}),ob=ei(gu),zR=m({},gu,{dataTransfer:0}),jR=ei(zR),BR=m({},yl,{relatedTarget:0}),Tf=ei(BR),FR=m({},er,{animationName:0,elapsedTime:0,pseudoElement:0}),UR=ei(FR),VR=m({},er,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),$R=ei(VR),HR=m({},er,{data:0}),lb=ei(HR),GR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ZR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function YR(a){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(a):(a=ZR[a])?!!o[a]:!1}function Cf(){return YR}var XR=m({},yl,{key:function(a){if(a.key){var o=GR[a.key]||a.key;if(o!=="Unidentified")return o}return a.type==="keypress"?(a=fu(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?qR[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cf,charCode:function(a){return a.type==="keypress"?fu(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?fu(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),WR=ei(XR),KR=m({},gu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cb=ei(KR),JR=m({},yl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cf}),QR=ei(JR),eD=m({},er,{propertyName:0,elapsedTime:0,pseudoElement:0}),tD=ei(eD),nD=m({},gu,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),iD=ei(nD),sD=m({},er,{newState:0,oldState:0}),aD=ei(sD),rD=[9,13,27,32],kf=Ps&&"CompositionEvent"in window,xl=null;Ps&&"documentMode"in document&&(xl=document.documentMode);var oD=Ps&&"TextEvent"in window&&!xl,ub=Ps&&(!kf||xl&&8<xl&&11>=xl),db=" ",hb=!1;function fb(a,o){switch(a){case"keyup":return rD.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pb(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Kr=!1;function lD(a,o){switch(a){case"compositionend":return pb(o);case"keypress":return o.which!==32?null:(hb=!0,db);case"textInput":return a=o.data,a===db&&hb?null:a;default:return null}}function cD(a,o){if(Kr)return a==="compositionend"||!kf&&fb(a,o)?(a=ab(),hu=Sf=ha=null,Kr=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return ub&&o.locale!=="ko"?null:o.data;default:return null}}var uD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mb(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o==="input"?!!uD[a.type]:o==="textarea"}function gb(a,o,u,f){Xr?Wr?Wr.push(f):Wr=[f]:Xr=f,o=ad(o,"onChange"),0<o.length&&(u=new mu("onChange","change",null,u,f),a.push({event:u,listeners:o}))}var wl=null,Al=null;function dD(a){Jx(a,0)}function vu(a){var o=ml(a);if(Ky(o))return a}function vb(a,o){if(a==="change")return o}var yb=!1;if(Ps){var Mf;if(Ps){var Rf="oninput"in document;if(!Rf){var bb=document.createElement("div");bb.setAttribute("oninput","return;"),Rf=typeof bb.oninput=="function"}Mf=Rf}else Mf=!1;yb=Mf&&(!document.documentMode||9<document.documentMode)}function xb(){wl&&(wl.detachEvent("onpropertychange",wb),Al=wl=null)}function wb(a){if(a.propertyName==="value"&&vu(Al)){var o=[];gb(o,Al,a,xf(a)),sb(dD,o)}}function hD(a,o,u){a==="focusin"?(xb(),wl=o,Al=u,wl.attachEvent("onpropertychange",wb)):a==="focusout"&&xb()}function fD(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return vu(Al)}function pD(a,o){if(a==="click")return vu(o)}function mD(a,o){if(a==="input"||a==="change")return vu(o)}function gD(a,o){return a===o&&(a!==0||1/a===1/o)||a!==a&&o!==o}var fi=typeof Object.is=="function"?Object.is:gD;function Sl(a,o){if(fi(a,o))return!0;if(typeof a!="object"||a===null||typeof o!="object"||o===null)return!1;var u=Object.keys(a),f=Object.keys(o);if(u.length!==f.length)return!1;for(f=0;f<u.length;f++){var g=u[f];if(!cn.call(o,g)||!fi(a[g],o[g]))return!1}return!0}function Ab(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function Sb(a,o){var u=Ab(a);a=0;for(var f;u;){if(u.nodeType===3){if(f=a+u.textContent.length,a<=o&&f>=o)return{node:u,offset:o-a};a=f}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=Ab(u)}}function _b(a,o){return a&&o?a===o?!0:a&&a.nodeType===3?!1:o&&o.nodeType===3?_b(a,o.parentNode):"contains"in a?a.contains(o):a.compareDocumentPosition?!!(a.compareDocumentPosition(o)&16):!1:!1}function Eb(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var o=uu(a.document);o instanceof a.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)a=o.contentWindow;else break;o=uu(a.document)}return o}function Df(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o&&(o==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||o==="textarea"||a.contentEditable==="true")}var vD=Ps&&"documentMode"in document&&11>=document.documentMode,Jr=null,Of=null,_l=null,Nf=!1;function Tb(a,o,u){var f=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Nf||Jr==null||Jr!==uu(f)||(f=Jr,"selectionStart"in f&&Df(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),_l&&Sl(_l,f)||(_l=f,f=ad(Of,"onSelect"),0<f.length&&(o=new mu("onSelect","select",null,o,u),a.push({event:o,listeners:f}),o.target=Jr)))}function tr(a,o){var u={};return u[a.toLowerCase()]=o.toLowerCase(),u["Webkit"+a]="webkit"+o,u["Moz"+a]="moz"+o,u}var Qr={animationend:tr("Animation","AnimationEnd"),animationiteration:tr("Animation","AnimationIteration"),animationstart:tr("Animation","AnimationStart"),transitionrun:tr("Transition","TransitionRun"),transitionstart:tr("Transition","TransitionStart"),transitioncancel:tr("Transition","TransitionCancel"),transitionend:tr("Transition","TransitionEnd")},Pf={},Cb={};Ps&&(Cb=document.createElement("div").style,"AnimationEvent"in window||(delete Qr.animationend.animation,delete Qr.animationiteration.animation,delete Qr.animationstart.animation),"TransitionEvent"in window||delete Qr.transitionend.transition);function nr(a){if(Pf[a])return Pf[a];if(!Qr[a])return a;var o=Qr[a],u;for(u in o)if(o.hasOwnProperty(u)&&u in Cb)return Pf[a]=o[u];return a}var kb=nr("animationend"),Mb=nr("animationiteration"),Rb=nr("animationstart"),yD=nr("transitionrun"),bD=nr("transitionstart"),xD=nr("transitioncancel"),Db=nr("transitionend"),Ob=new Map,If="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");If.push("scrollEnd");function Xi(a,o){Ob.set(a,o),Qa(o,[a])}var yu=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)},Ri=[],eo=0,Lf=0;function bu(){for(var a=eo,o=Lf=eo=0;o<a;){var u=Ri[o];Ri[o++]=null;var f=Ri[o];Ri[o++]=null;var g=Ri[o];Ri[o++]=null;var y=Ri[o];if(Ri[o++]=null,f!==null&&g!==null){var _=f.pending;_===null?g.next=g:(g.next=_.next,_.next=g),f.pending=g}y!==0&&Nb(u,g,y)}}function xu(a,o,u,f){Ri[eo++]=a,Ri[eo++]=o,Ri[eo++]=u,Ri[eo++]=f,Lf|=f,a.lanes|=f,a=a.alternate,a!==null&&(a.lanes|=f)}function zf(a,o,u,f){return xu(a,o,u,f),wu(a)}function ir(a,o){return xu(a,null,null,o),wu(a)}function Nb(a,o,u){a.lanes|=u;var f=a.alternate;f!==null&&(f.lanes|=u);for(var g=!1,y=a.return;y!==null;)y.childLanes|=u,f=y.alternate,f!==null&&(f.childLanes|=u),y.tag===22&&(a=y.stateNode,a===null||a._visibility&1||(g=!0)),a=y,y=y.return;return a.tag===3?(y=a.stateNode,g&&o!==null&&(g=31-Qt(u),a=y.hiddenUpdates,f=a[g],f===null?a[g]=[o]:f.push(o),o.lane=u|536870912),y):null}function wu(a){if(50<ql)throw ql=0,qp=null,Error(i(185));for(var o=a.return;o!==null;)a=o,o=a.return;return a.tag===3?a.stateNode:null}var to={};function wD(a,o,u,f){this.tag=a,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pi(a,o,u,f){return new wD(a,o,u,f)}function jf(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Is(a,o){var u=a.alternate;return u===null?(u=pi(a.tag,o,a.key,a.mode),u.elementType=a.elementType,u.type=a.type,u.stateNode=a.stateNode,u.alternate=a,a.alternate=u):(u.pendingProps=o,u.type=a.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=a.flags&65011712,u.childLanes=a.childLanes,u.lanes=a.lanes,u.child=a.child,u.memoizedProps=a.memoizedProps,u.memoizedState=a.memoizedState,u.updateQueue=a.updateQueue,o=a.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=a.sibling,u.index=a.index,u.ref=a.ref,u.refCleanup=a.refCleanup,u}function Pb(a,o){a.flags&=65011714;var u=a.alternate;return u===null?(a.childLanes=0,a.lanes=o,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=u.childLanes,a.lanes=u.lanes,a.child=u.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=u.memoizedProps,a.memoizedState=u.memoizedState,a.updateQueue=u.updateQueue,a.type=u.type,o=u.dependencies,a.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),a}function Au(a,o,u,f,g,y){var _=0;if(f=a,typeof a=="function")jf(a)&&(_=1);else if(typeof a=="string")_=TO(a,u,ne.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case $:return a=pi(31,u,o,g),a.elementType=$,a.lanes=y,a;case x:return sr(u.children,g,y,o);case A:_=8,g|=24;break;case S:return a=pi(12,u,o,g|2),a.elementType=S,a.lanes=y,a;case R:return a=pi(13,u,o,g),a.elementType=R,a.lanes=y,a;case O:return a=pi(19,u,o,g),a.elementType=O,a.lanes=y,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case E:_=10;break e;case T:_=9;break e;case M:_=11;break e;case L:_=14;break e;case D:_=16,f=null;break e}_=29,u=Error(i(130,a===null?"null":typeof a,"")),f=null}return o=pi(_,u,o,g),o.elementType=a,o.type=f,o.lanes=y,o}function sr(a,o,u,f){return a=pi(7,a,f,o),a.lanes=u,a}function Bf(a,o,u){return a=pi(6,a,null,o),a.lanes=u,a}function Ib(a){var o=pi(18,null,null,0);return o.stateNode=a,o}function Ff(a,o,u){return o=pi(4,a.children!==null?a.children:[],a.key,o),o.lanes=u,o.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},o}var Lb=new WeakMap;function Di(a,o){if(typeof a=="object"&&a!==null){var u=Lb.get(a);return u!==void 0?u:(o={value:a,source:o,stack:In(o)},Lb.set(a,o),o)}return{value:a,source:o,stack:In(o)}}var no=[],io=0,Su=null,El=0,Oi=[],Ni=0,fa=null,us=1,ds="";function Ls(a,o){no[io++]=El,no[io++]=Su,Su=a,El=o}function zb(a,o,u){Oi[Ni++]=us,Oi[Ni++]=ds,Oi[Ni++]=fa,fa=a;var f=us;a=ds;var g=32-Qt(f)-1;f&=~(1<<g),u+=1;var y=32-Qt(o)+g;if(30<y){var _=g-g%5;y=(f&(1<<_)-1).toString(32),f>>=_,g-=_,us=1<<32-Qt(o)+g|u<<g|f,ds=y+a}else us=1<<y|u<<g|f,ds=a}function Uf(a){a.return!==null&&(Ls(a,1),zb(a,1,0))}function Vf(a){for(;a===Su;)Su=no[--io],no[io]=null,El=no[--io],no[io]=null;for(;a===fa;)fa=Oi[--Ni],Oi[Ni]=null,ds=Oi[--Ni],Oi[Ni]=null,us=Oi[--Ni],Oi[Ni]=null}function jb(a,o){Oi[Ni++]=us,Oi[Ni++]=ds,Oi[Ni++]=fa,us=o.id,ds=o.overflow,fa=a}var Cn=null,At=null,qe=!1,pa=null,Pi=!1,$f=Error(i(519));function ma(a){var o=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Tl(Di(o,a)),$f}function Bb(a){var o=a.stateNode,u=a.type,f=a.memoizedProps;switch(o[Tn]=a,o[Qn]=f,u){case"dialog":$e("cancel",o),$e("close",o);break;case"iframe":case"object":case"embed":$e("load",o);break;case"video":case"audio":for(u=0;u<Yl.length;u++)$e(Yl[u],o);break;case"source":$e("error",o);break;case"img":case"image":case"link":$e("error",o),$e("load",o);break;case"details":$e("toggle",o);break;case"input":$e("invalid",o),Jy(o,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0);break;case"select":$e("invalid",o);break;case"textarea":$e("invalid",o),eb(o,f.value,f.defaultValue,f.children)}u=f.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||o.textContent===""+u||f.suppressHydrationWarning===!0||nw(o.textContent,u)?(f.popover!=null&&($e("beforetoggle",o),$e("toggle",o)),f.onScroll!=null&&$e("scroll",o),f.onScrollEnd!=null&&$e("scrollend",o),f.onClick!=null&&(o.onclick=Ns),o=!0):o=!1,o||ma(a,!0)}function Fb(a){for(Cn=a.return;Cn;)switch(Cn.tag){case 5:case 31:case 13:Pi=!1;return;case 27:case 3:Pi=!0;return;default:Cn=Cn.return}}function so(a){if(a!==Cn)return!1;if(!qe)return Fb(a),qe=!0,!1;var o=a.tag,u;if((u=o!==3&&o!==27)&&((u=o===5)&&(u=a.type,u=!(u!=="form"&&u!=="button")||om(a.type,a.memoizedProps)),u=!u),u&&At&&ma(a),Fb(a),o===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(i(317));At=dw(a)}else if(o===31){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(i(317));At=dw(a)}else o===27?(o=At,Ma(a.type)?(a=hm,hm=null,At=a):At=o):At=Cn?Li(a.stateNode.nextSibling):null;return!0}function ar(){At=Cn=null,qe=!1}function Hf(){var a=pa;return a!==null&&(si===null?si=a:si.push.apply(si,a),pa=null),a}function Tl(a){pa===null?pa=[a]:pa.push(a)}var Gf=P(null),rr=null,zs=null;function ga(a,o,u){Z(Gf,o._currentValue),o._currentValue=u}function js(a){a._currentValue=Gf.current,q(Gf)}function qf(a,o,u){for(;a!==null;){var f=a.alternate;if((a.childLanes&o)!==o?(a.childLanes|=o,f!==null&&(f.childLanes|=o)):f!==null&&(f.childLanes&o)!==o&&(f.childLanes|=o),a===u)break;a=a.return}}function Zf(a,o,u,f){var g=a.child;for(g!==null&&(g.return=a);g!==null;){var y=g.dependencies;if(y!==null){var _=g.child;y=y.firstContext;e:for(;y!==null;){var C=y;y=g;for(var z=0;z<o.length;z++)if(C.context===o[z]){y.lanes|=u,C=y.alternate,C!==null&&(C.lanes|=u),qf(y.return,u,a),f||(_=null);break e}y=C.next}}else if(g.tag===18){if(_=g.return,_===null)throw Error(i(341));_.lanes|=u,y=_.alternate,y!==null&&(y.lanes|=u),qf(_,u,a),_=null}else _=g.child;if(_!==null)_.return=g;else for(_=g;_!==null;){if(_===a){_=null;break}if(g=_.sibling,g!==null){g.return=_.return,_=g;break}_=_.return}g=_}}function ao(a,o,u,f){a=null;for(var g=o,y=!1;g!==null;){if(!y){if((g.flags&524288)!==0)y=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var _=g.alternate;if(_===null)throw Error(i(387));if(_=_.memoizedProps,_!==null){var C=g.type;fi(g.pendingProps.value,_.value)||(a!==null?a.push(C):a=[C])}}else if(g===oe.current){if(_=g.alternate,_===null)throw Error(i(387));_.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(a!==null?a.push(Ql):a=[Ql])}g=g.return}a!==null&&Zf(o,a,u,f),o.flags|=262144}function _u(a){for(a=a.firstContext;a!==null;){if(!fi(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function or(a){rr=a,zs=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function kn(a){return Ub(rr,a)}function Eu(a,o){return rr===null&&or(a),Ub(a,o)}function Ub(a,o){var u=o._currentValue;if(o={context:o,memoizedValue:u,next:null},zs===null){if(a===null)throw Error(i(308));zs=o,a.dependencies={lanes:0,firstContext:o},a.flags|=524288}else zs=zs.next=o;return u}var AD=typeof AbortController<"u"?AbortController:function(){var a=[],o=this.signal={aborted:!1,addEventListener:function(u,f){a.push(f)}};this.abort=function(){o.aborted=!0,a.forEach(function(u){return u()})}},SD=n.unstable_scheduleCallback,_D=n.unstable_NormalPriority,en={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Yf(){return{controller:new AD,data:new Map,refCount:0}}function Cl(a){a.refCount--,a.refCount===0&&SD(_D,function(){a.controller.abort()})}var kl=null,Xf=0,ro=0,oo=null;function ED(a,o){if(kl===null){var u=kl=[];Xf=0,ro=Jp(),oo={status:"pending",value:void 0,then:function(f){u.push(f)}}}return Xf++,o.then(Vb,Vb),o}function Vb(){if(--Xf===0&&kl!==null){oo!==null&&(oo.status="fulfilled");var a=kl;kl=null,ro=0,oo=null;for(var o=0;o<a.length;o++)(0,a[o])()}}function TD(a,o){var u=[],f={status:"pending",value:null,reason:null,then:function(g){u.push(g)}};return a.then(function(){f.status="fulfilled",f.value=o;for(var g=0;g<u.length;g++)(0,u[g])(o)},function(g){for(f.status="rejected",f.reason=g,g=0;g<u.length;g++)(0,u[g])(void 0)}),f}var $b=N.S;N.S=function(a,o){Tx=En(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&ED(a,o),$b!==null&&$b(a,o)};var lr=P(null);function Wf(){var a=lr.current;return a!==null?a:mt.pooledCache}function Tu(a,o){o===null?Z(lr,lr.current):Z(lr,o.pool)}function Hb(){var a=Wf();return a===null?null:{parent:en._currentValue,pool:a}}var lo=Error(i(460)),Kf=Error(i(474)),Cu=Error(i(542)),ku={then:function(){}};function Gb(a){return a=a.status,a==="fulfilled"||a==="rejected"}function qb(a,o,u){switch(u=a[u],u===void 0?a.push(o):u!==o&&(o.then(Ns,Ns),o=u),o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,Yb(a),a;default:if(typeof o.status=="string")o.then(Ns,Ns);else{if(a=mt,a!==null&&100<a.shellSuspendCounter)throw Error(i(482));a=o,a.status="pending",a.then(function(f){if(o.status==="pending"){var g=o;g.status="fulfilled",g.value=f}},function(f){if(o.status==="pending"){var g=o;g.status="rejected",g.reason=f}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,Yb(a),a}throw ur=o,lo}}function cr(a){try{var o=a._init;return o(a._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(ur=u,lo):u}}var ur=null;function Zb(){if(ur===null)throw Error(i(459));var a=ur;return ur=null,a}function Yb(a){if(a===lo||a===Cu)throw Error(i(483))}var co=null,Ml=0;function Mu(a){var o=Ml;return Ml+=1,co===null&&(co=[]),qb(co,a,o)}function Rl(a,o){o=o.props.ref,a.ref=o!==void 0?o:null}function Ru(a,o){throw o.$$typeof===v?Error(i(525)):(a=Object.prototype.toString.call(o),Error(i(31,a==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":a)))}function Xb(a){function o(V,j){if(a){var H=V.deletions;H===null?(V.deletions=[j],V.flags|=16):H.push(j)}}function u(V,j){if(!a)return null;for(;j!==null;)o(V,j),j=j.sibling;return null}function f(V){for(var j=new Map;V!==null;)V.key!==null?j.set(V.key,V):j.set(V.index,V),V=V.sibling;return j}function g(V,j){return V=Is(V,j),V.index=0,V.sibling=null,V}function y(V,j,H){return V.index=H,a?(H=V.alternate,H!==null?(H=H.index,H<j?(V.flags|=67108866,j):H):(V.flags|=67108866,j)):(V.flags|=1048576,j)}function _(V){return a&&V.alternate===null&&(V.flags|=67108866),V}function C(V,j,H,te){return j===null||j.tag!==6?(j=Bf(H,V.mode,te),j.return=V,j):(j=g(j,H),j.return=V,j)}function z(V,j,H,te){var Te=H.type;return Te===x?Q(V,j,H.props.children,te,H.key):j!==null&&(j.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===D&&cr(Te)===j.type)?(j=g(j,H.props),Rl(j,H),j.return=V,j):(j=Au(H.type,H.key,H.props,null,V.mode,te),Rl(j,H),j.return=V,j)}function G(V,j,H,te){return j===null||j.tag!==4||j.stateNode.containerInfo!==H.containerInfo||j.stateNode.implementation!==H.implementation?(j=Ff(H,V.mode,te),j.return=V,j):(j=g(j,H.children||[]),j.return=V,j)}function Q(V,j,H,te,Te){return j===null||j.tag!==7?(j=sr(H,V.mode,te,Te),j.return=V,j):(j=g(j,H),j.return=V,j)}function ie(V,j,H){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return j=Bf(""+j,V.mode,H),j.return=V,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case b:return H=Au(j.type,j.key,j.props,null,V.mode,H),Rl(H,j),H.return=V,H;case w:return j=Ff(j,V.mode,H),j.return=V,j;case D:return j=cr(j),ie(V,j,H)}if(fe(j)||le(j))return j=sr(j,V.mode,H,null),j.return=V,j;if(typeof j.then=="function")return ie(V,Mu(j),H);if(j.$$typeof===E)return ie(V,Eu(V,j),H);Ru(V,j)}return null}function Y(V,j,H,te){var Te=j!==null?j.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return Te!==null?null:C(V,j,""+H,te);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case b:return H.key===Te?z(V,j,H,te):null;case w:return H.key===Te?G(V,j,H,te):null;case D:return H=cr(H),Y(V,j,H,te)}if(fe(H)||le(H))return Te!==null?null:Q(V,j,H,te,null);if(typeof H.then=="function")return Y(V,j,Mu(H),te);if(H.$$typeof===E)return Y(V,j,Eu(V,H),te);Ru(V,H)}return null}function W(V,j,H,te,Te){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return V=V.get(H)||null,C(j,V,""+te,Te);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case b:return V=V.get(te.key===null?H:te.key)||null,z(j,V,te,Te);case w:return V=V.get(te.key===null?H:te.key)||null,G(j,V,te,Te);case D:return te=cr(te),W(V,j,H,te,Te)}if(fe(te)||le(te))return V=V.get(H)||null,Q(j,V,te,Te,null);if(typeof te.then=="function")return W(V,j,H,Mu(te),Te);if(te.$$typeof===E)return W(V,j,H,Eu(j,te),Te);Ru(j,te)}return null}function ge(V,j,H,te){for(var Te=null,Xe=null,Ae=j,je=j=0,Ge=null;Ae!==null&&je<H.length;je++){Ae.index>je?(Ge=Ae,Ae=null):Ge=Ae.sibling;var We=Y(V,Ae,H[je],te);if(We===null){Ae===null&&(Ae=Ge);break}a&&Ae&&We.alternate===null&&o(V,Ae),j=y(We,j,je),Xe===null?Te=We:Xe.sibling=We,Xe=We,Ae=Ge}if(je===H.length)return u(V,Ae),qe&&Ls(V,je),Te;if(Ae===null){for(;je<H.length;je++)Ae=ie(V,H[je],te),Ae!==null&&(j=y(Ae,j,je),Xe===null?Te=Ae:Xe.sibling=Ae,Xe=Ae);return qe&&Ls(V,je),Te}for(Ae=f(Ae);je<H.length;je++)Ge=W(Ae,V,je,H[je],te),Ge!==null&&(a&&Ge.alternate!==null&&Ae.delete(Ge.key===null?je:Ge.key),j=y(Ge,j,je),Xe===null?Te=Ge:Xe.sibling=Ge,Xe=Ge);return a&&Ae.forEach(function(Pa){return o(V,Pa)}),qe&&Ls(V,je),Te}function Me(V,j,H,te){if(H==null)throw Error(i(151));for(var Te=null,Xe=null,Ae=j,je=j=0,Ge=null,We=H.next();Ae!==null&&!We.done;je++,We=H.next()){Ae.index>je?(Ge=Ae,Ae=null):Ge=Ae.sibling;var Pa=Y(V,Ae,We.value,te);if(Pa===null){Ae===null&&(Ae=Ge);break}a&&Ae&&Pa.alternate===null&&o(V,Ae),j=y(Pa,j,je),Xe===null?Te=Pa:Xe.sibling=Pa,Xe=Pa,Ae=Ge}if(We.done)return u(V,Ae),qe&&Ls(V,je),Te;if(Ae===null){for(;!We.done;je++,We=H.next())We=ie(V,We.value,te),We!==null&&(j=y(We,j,je),Xe===null?Te=We:Xe.sibling=We,Xe=We);return qe&&Ls(V,je),Te}for(Ae=f(Ae);!We.done;je++,We=H.next())We=W(Ae,V,je,We.value,te),We!==null&&(a&&We.alternate!==null&&Ae.delete(We.key===null?je:We.key),j=y(We,j,je),Xe===null?Te=We:Xe.sibling=We,Xe=We);return a&&Ae.forEach(function(zO){return o(V,zO)}),qe&&Ls(V,je),Te}function ut(V,j,H,te){if(typeof H=="object"&&H!==null&&H.type===x&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case b:e:{for(var Te=H.key;j!==null;){if(j.key===Te){if(Te=H.type,Te===x){if(j.tag===7){u(V,j.sibling),te=g(j,H.props.children),te.return=V,V=te;break e}}else if(j.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===D&&cr(Te)===j.type){u(V,j.sibling),te=g(j,H.props),Rl(te,H),te.return=V,V=te;break e}u(V,j);break}else o(V,j);j=j.sibling}H.type===x?(te=sr(H.props.children,V.mode,te,H.key),te.return=V,V=te):(te=Au(H.type,H.key,H.props,null,V.mode,te),Rl(te,H),te.return=V,V=te)}return _(V);case w:e:{for(Te=H.key;j!==null;){if(j.key===Te)if(j.tag===4&&j.stateNode.containerInfo===H.containerInfo&&j.stateNode.implementation===H.implementation){u(V,j.sibling),te=g(j,H.children||[]),te.return=V,V=te;break e}else{u(V,j);break}else o(V,j);j=j.sibling}te=Ff(H,V.mode,te),te.return=V,V=te}return _(V);case D:return H=cr(H),ut(V,j,H,te)}if(fe(H))return ge(V,j,H,te);if(le(H)){if(Te=le(H),typeof Te!="function")throw Error(i(150));return H=Te.call(H),Me(V,j,H,te)}if(typeof H.then=="function")return ut(V,j,Mu(H),te);if(H.$$typeof===E)return ut(V,j,Eu(V,H),te);Ru(V,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,j!==null&&j.tag===6?(u(V,j.sibling),te=g(j,H),te.return=V,V=te):(u(V,j),te=Bf(H,V.mode,te),te.return=V,V=te),_(V)):u(V,j)}return function(V,j,H,te){try{Ml=0;var Te=ut(V,j,H,te);return co=null,Te}catch(Ae){if(Ae===lo||Ae===Cu)throw Ae;var Xe=pi(29,Ae,null,V.mode);return Xe.lanes=te,Xe.return=V,Xe}}}var dr=Xb(!0),Wb=Xb(!1),va=!1;function Jf(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Qf(a,o){a=a.updateQueue,o.updateQueue===a&&(o.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function ya(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function ba(a,o,u){var f=a.updateQueue;if(f===null)return null;if(f=f.shared,(Ke&2)!==0){var g=f.pending;return g===null?o.next=o:(o.next=g.next,g.next=o),f.pending=o,o=wu(a),Nb(a,null,u),o}return xu(a,f,o,u),wu(a)}function Dl(a,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194048)!==0)){var f=o.lanes;f&=a.pendingLanes,u|=f,o.lanes=u,Kn(a,u)}}function ep(a,o){var u=a.updateQueue,f=a.alternate;if(f!==null&&(f=f.updateQueue,u===f)){var g=null,y=null;if(u=u.firstBaseUpdate,u!==null){do{var _={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};y===null?g=y=_:y=y.next=_,u=u.next}while(u!==null);y===null?g=y=o:y=y.next=o}else g=y=o;u={baseState:f.baseState,firstBaseUpdate:g,lastBaseUpdate:y,shared:f.shared,callbacks:f.callbacks},a.updateQueue=u;return}a=u.lastBaseUpdate,a===null?u.firstBaseUpdate=o:a.next=o,u.lastBaseUpdate=o}var tp=!1;function Ol(){if(tp){var a=oo;if(a!==null)throw a}}function Nl(a,o,u,f){tp=!1;var g=a.updateQueue;va=!1;var y=g.firstBaseUpdate,_=g.lastBaseUpdate,C=g.shared.pending;if(C!==null){g.shared.pending=null;var z=C,G=z.next;z.next=null,_===null?y=G:_.next=G,_=z;var Q=a.alternate;Q!==null&&(Q=Q.updateQueue,C=Q.lastBaseUpdate,C!==_&&(C===null?Q.firstBaseUpdate=G:C.next=G,Q.lastBaseUpdate=z))}if(y!==null){var ie=g.baseState;_=0,Q=G=z=null,C=y;do{var Y=C.lane&-536870913,W=Y!==C.lane;if(W?(He&Y)===Y:(f&Y)===Y){Y!==0&&Y===ro&&(tp=!0),Q!==null&&(Q=Q.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var ge=a,Me=C;Y=o;var ut=u;switch(Me.tag){case 1:if(ge=Me.payload,typeof ge=="function"){ie=ge.call(ut,ie,Y);break e}ie=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=Me.payload,Y=typeof ge=="function"?ge.call(ut,ie,Y):ge,Y==null)break e;ie=m({},ie,Y);break e;case 2:va=!0}}Y=C.callback,Y!==null&&(a.flags|=64,W&&(a.flags|=8192),W=g.callbacks,W===null?g.callbacks=[Y]:W.push(Y))}else W={lane:Y,tag:C.tag,payload:C.payload,callback:C.callback,next:null},Q===null?(G=Q=W,z=ie):Q=Q.next=W,_|=Y;if(C=C.next,C===null){if(C=g.shared.pending,C===null)break;W=C,C=W.next,W.next=null,g.lastBaseUpdate=W,g.shared.pending=null}}while(!0);Q===null&&(z=ie),g.baseState=z,g.firstBaseUpdate=G,g.lastBaseUpdate=Q,y===null&&(g.shared.lanes=0),_a|=_,a.lanes=_,a.memoizedState=ie}}function Kb(a,o){if(typeof a!="function")throw Error(i(191,a));a.call(o)}function Jb(a,o){var u=a.callbacks;if(u!==null)for(a.callbacks=null,a=0;a<u.length;a++)Kb(u[a],o)}var uo=P(null),Du=P(0);function Qb(a,o){a=Zs,Z(Du,a),Z(uo,o),Zs=a|o.baseLanes}function np(){Z(Du,Zs),Z(uo,uo.current)}function ip(){Zs=Du.current,q(uo),q(Du)}var mi=P(null),Ii=null;function xa(a){var o=a.alternate;Z(Zt,Zt.current&1),Z(mi,a),Ii===null&&(o===null||uo.current!==null||o.memoizedState!==null)&&(Ii=a)}function sp(a){Z(Zt,Zt.current),Z(mi,a),Ii===null&&(Ii=a)}function e0(a){a.tag===22?(Z(Zt,Zt.current),Z(mi,a),Ii===null&&(Ii=a)):wa()}function wa(){Z(Zt,Zt.current),Z(mi,mi.current)}function gi(a){q(mi),Ii===a&&(Ii=null),q(Zt)}var Zt=P(0);function Ou(a){for(var o=a;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||um(u)||dm(u)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Bs=0,ze=null,lt=null,tn=null,Nu=!1,ho=!1,hr=!1,Pu=0,Pl=0,fo=null,CD=0;function Vt(){throw Error(i(321))}function ap(a,o){if(o===null)return!1;for(var u=0;u<o.length&&u<a.length;u++)if(!fi(a[u],o[u]))return!1;return!0}function rp(a,o,u,f,g,y){return Bs=y,ze=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,N.H=a===null||a.memoizedState===null?z0:wp,hr=!1,y=u(f,g),hr=!1,ho&&(y=n0(o,u,f,g)),t0(a),y}function t0(a){N.H=zl;var o=lt!==null&&lt.next!==null;if(Bs=0,tn=lt=ze=null,Nu=!1,Pl=0,fo=null,o)throw Error(i(300));a===null||nn||(a=a.dependencies,a!==null&&_u(a)&&(nn=!0))}function n0(a,o,u,f){ze=a;var g=0;do{if(ho&&(fo=null),Pl=0,ho=!1,25<=g)throw Error(i(301));if(g+=1,tn=lt=null,a.updateQueue!=null){var y=a.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}N.H=j0,y=o(u,f)}while(ho);return y}function kD(){var a=N.H,o=a.useState()[0];return o=typeof o.then=="function"?Il(o):o,a=a.useState()[0],(lt!==null?lt.memoizedState:null)!==a&&(ze.flags|=1024),o}function op(){var a=Pu!==0;return Pu=0,a}function lp(a,o,u){o.updateQueue=a.updateQueue,o.flags&=-2053,a.lanes&=~u}function cp(a){if(Nu){for(a=a.memoizedState;a!==null;){var o=a.queue;o!==null&&(o.pending=null),a=a.next}Nu=!1}Bs=0,tn=lt=ze=null,ho=!1,Pl=Pu=0,fo=null}function Fn(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tn===null?ze.memoizedState=tn=a:tn=tn.next=a,tn}function Yt(){if(lt===null){var a=ze.alternate;a=a!==null?a.memoizedState:null}else a=lt.next;var o=tn===null?ze.memoizedState:tn.next;if(o!==null)tn=o,lt=a;else{if(a===null)throw ze.alternate===null?Error(i(467)):Error(i(310));lt=a,a={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},tn===null?ze.memoizedState=tn=a:tn=tn.next=a}return tn}function Iu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Il(a){var o=Pl;return Pl+=1,fo===null&&(fo=[]),a=qb(fo,a,o),o=ze,(tn===null?o.memoizedState:tn.next)===null&&(o=o.alternate,N.H=o===null||o.memoizedState===null?z0:wp),a}function Lu(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return Il(a);if(a.$$typeof===E)return kn(a)}throw Error(i(438,String(a)))}function up(a){var o=null,u=ze.updateQueue;if(u!==null&&(o=u.memoCache),o==null){var f=ze.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(o={data:f.data.map(function(g){return g.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),u===null&&(u=Iu(),ze.updateQueue=u),u.memoCache=o,u=o.data[o.index],u===void 0)for(u=o.data[o.index]=Array(a),f=0;f<a;f++)u[f]=ee;return o.index++,u}function Fs(a,o){return typeof o=="function"?o(a):o}function zu(a){var o=Yt();return dp(o,lt,a)}function dp(a,o,u){var f=a.queue;if(f===null)throw Error(i(311));f.lastRenderedReducer=u;var g=a.baseQueue,y=f.pending;if(y!==null){if(g!==null){var _=g.next;g.next=y.next,y.next=_}o.baseQueue=g=y,f.pending=null}if(y=a.baseState,g===null)a.memoizedState=y;else{o=g.next;var C=_=null,z=null,G=o,Q=!1;do{var ie=G.lane&-536870913;if(ie!==G.lane?(He&ie)===ie:(Bs&ie)===ie){var Y=G.revertLane;if(Y===0)z!==null&&(z=z.next={lane:0,revertLane:0,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),ie===ro&&(Q=!0);else if((Bs&Y)===Y){G=G.next,Y===ro&&(Q=!0);continue}else ie={lane:0,revertLane:G.revertLane,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},z===null?(C=z=ie,_=y):z=z.next=ie,ze.lanes|=Y,_a|=Y;ie=G.action,hr&&u(y,ie),y=G.hasEagerState?G.eagerState:u(y,ie)}else Y={lane:ie,revertLane:G.revertLane,gesture:G.gesture,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},z===null?(C=z=Y,_=y):z=z.next=Y,ze.lanes|=ie,_a|=ie;G=G.next}while(G!==null&&G!==o);if(z===null?_=y:z.next=C,!fi(y,a.memoizedState)&&(nn=!0,Q&&(u=oo,u!==null)))throw u;a.memoizedState=y,a.baseState=_,a.baseQueue=z,f.lastRenderedState=y}return g===null&&(f.lanes=0),[a.memoizedState,f.dispatch]}function hp(a){var o=Yt(),u=o.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=a;var f=u.dispatch,g=u.pending,y=o.memoizedState;if(g!==null){u.pending=null;var _=g=g.next;do y=a(y,_.action),_=_.next;while(_!==g);fi(y,o.memoizedState)||(nn=!0),o.memoizedState=y,o.baseQueue===null&&(o.baseState=y),u.lastRenderedState=y}return[y,f]}function i0(a,o,u){var f=ze,g=Yt(),y=qe;if(y){if(u===void 0)throw Error(i(407));u=u()}else u=o();var _=!fi((lt||g).memoizedState,u);if(_&&(g.memoizedState=u,nn=!0),g=g.queue,mp(r0.bind(null,f,g,a),[a]),g.getSnapshot!==o||_||tn!==null&&tn.memoizedState.tag&1){if(f.flags|=2048,po(9,{destroy:void 0},a0.bind(null,f,g,u,o),null),mt===null)throw Error(i(349));y||(Bs&127)!==0||s0(f,o,u)}return u}function s0(a,o,u){a.flags|=16384,a={getSnapshot:o,value:u},o=ze.updateQueue,o===null?(o=Iu(),ze.updateQueue=o,o.stores=[a]):(u=o.stores,u===null?o.stores=[a]:u.push(a))}function a0(a,o,u,f){o.value=u,o.getSnapshot=f,o0(o)&&l0(a)}function r0(a,o,u){return u(function(){o0(o)&&l0(a)})}function o0(a){var o=a.getSnapshot;a=a.value;try{var u=o();return!fi(a,u)}catch{return!0}}function l0(a){var o=ir(a,2);o!==null&&ai(o,a,2)}function fp(a){var o=Fn();if(typeof a=="function"){var u=a;if(a=u(),hr){Ln(!0);try{u()}finally{Ln(!1)}}}return o.memoizedState=o.baseState=a,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fs,lastRenderedState:a},o}function c0(a,o,u,f){return a.baseState=u,dp(a,lt,typeof f=="function"?f:Fs)}function MD(a,o,u,f,g){if(Fu(a))throw Error(i(485));if(a=o.action,a!==null){var y={payload:g,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){y.listeners.push(_)}};N.T!==null?u(!0):y.isTransition=!1,f(y),u=o.pending,u===null?(y.next=o.pending=y,u0(o,y)):(y.next=u.next,o.pending=u.next=y)}}function u0(a,o){var u=o.action,f=o.payload,g=a.state;if(o.isTransition){var y=N.T,_={};N.T=_;try{var C=u(g,f),z=N.S;z!==null&&z(_,C),d0(a,o,C)}catch(G){pp(a,o,G)}finally{y!==null&&_.types!==null&&(y.types=_.types),N.T=y}}else try{y=u(g,f),d0(a,o,y)}catch(G){pp(a,o,G)}}function d0(a,o,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(f){h0(a,o,f)},function(f){return pp(a,o,f)}):h0(a,o,u)}function h0(a,o,u){o.status="fulfilled",o.value=u,f0(o),a.state=u,o=a.pending,o!==null&&(u=o.next,u===o?a.pending=null:(u=u.next,o.next=u,u0(a,u)))}function pp(a,o,u){var f=a.pending;if(a.pending=null,f!==null){f=f.next;do o.status="rejected",o.reason=u,f0(o),o=o.next;while(o!==f)}a.action=null}function f0(a){a=a.listeners;for(var o=0;o<a.length;o++)(0,a[o])()}function p0(a,o){return o}function m0(a,o){if(qe){var u=mt.formState;if(u!==null){e:{var f=ze;if(qe){if(At){t:{for(var g=At,y=Pi;g.nodeType!==8;){if(!y){g=null;break t}if(g=Li(g.nextSibling),g===null){g=null;break t}}y=g.data,g=y==="F!"||y==="F"?g:null}if(g){At=Li(g.nextSibling),f=g.data==="F!";break e}}ma(f)}f=!1}f&&(o=u[0])}}return u=Fn(),u.memoizedState=u.baseState=o,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:p0,lastRenderedState:o},u.queue=f,u=P0.bind(null,ze,f),f.dispatch=u,f=fp(!1),y=xp.bind(null,ze,!1,f.queue),f=Fn(),g={state:o,dispatch:null,action:a,pending:null},f.queue=g,u=MD.bind(null,ze,g,y,u),g.dispatch=u,f.memoizedState=a,[o,u,!1]}function g0(a){var o=Yt();return v0(o,lt,a)}function v0(a,o,u){if(o=dp(a,o,p0)[0],a=zu(Fs)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var f=Il(o)}catch(_){throw _===lo?Cu:_}else f=o;o=Yt();var g=o.queue,y=g.dispatch;return u!==o.memoizedState&&(ze.flags|=2048,po(9,{destroy:void 0},RD.bind(null,g,u),null)),[f,y,a]}function RD(a,o){a.action=o}function y0(a){var o=Yt(),u=lt;if(u!==null)return v0(o,u,a);Yt(),o=o.memoizedState,u=Yt();var f=u.queue.dispatch;return u.memoizedState=a,[o,f,!1]}function po(a,o,u,f){return a={tag:a,create:u,deps:f,inst:o,next:null},o=ze.updateQueue,o===null&&(o=Iu(),ze.updateQueue=o),u=o.lastEffect,u===null?o.lastEffect=a.next=a:(f=u.next,u.next=a,a.next=f,o.lastEffect=a),a}function b0(){return Yt().memoizedState}function ju(a,o,u,f){var g=Fn();ze.flags|=a,g.memoizedState=po(1|o,{destroy:void 0},u,f===void 0?null:f)}function Bu(a,o,u,f){var g=Yt();f=f===void 0?null:f;var y=g.memoizedState.inst;lt!==null&&f!==null&&ap(f,lt.memoizedState.deps)?g.memoizedState=po(o,y,u,f):(ze.flags|=a,g.memoizedState=po(1|o,y,u,f))}function x0(a,o){ju(8390656,8,a,o)}function mp(a,o){Bu(2048,8,a,o)}function DD(a){ze.flags|=4;var o=ze.updateQueue;if(o===null)o=Iu(),ze.updateQueue=o,o.events=[a];else{var u=o.events;u===null?o.events=[a]:u.push(a)}}function w0(a){var o=Yt().memoizedState;return DD({ref:o,nextImpl:a}),function(){if((Ke&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}function A0(a,o){return Bu(4,2,a,o)}function S0(a,o){return Bu(4,4,a,o)}function _0(a,o){if(typeof o=="function"){a=a();var u=o(a);return function(){typeof u=="function"?u():o(null)}}if(o!=null)return a=a(),o.current=a,function(){o.current=null}}function E0(a,o,u){u=u!=null?u.concat([a]):null,Bu(4,4,_0.bind(null,o,a),u)}function gp(){}function T0(a,o){var u=Yt();o=o===void 0?null:o;var f=u.memoizedState;return o!==null&&ap(o,f[1])?f[0]:(u.memoizedState=[a,o],a)}function C0(a,o){var u=Yt();o=o===void 0?null:o;var f=u.memoizedState;if(o!==null&&ap(o,f[1]))return f[0];if(f=a(),hr){Ln(!0);try{a()}finally{Ln(!1)}}return u.memoizedState=[f,o],f}function vp(a,o,u){return u===void 0||(Bs&1073741824)!==0&&(He&261930)===0?a.memoizedState=o:(a.memoizedState=u,a=kx(),ze.lanes|=a,_a|=a,u)}function k0(a,o,u,f){return fi(u,o)?u:uo.current!==null?(a=vp(a,u,f),fi(a,o)||(nn=!0),a):(Bs&42)===0||(Bs&1073741824)!==0&&(He&261930)===0?(nn=!0,a.memoizedState=u):(a=kx(),ze.lanes|=a,_a|=a,o)}function M0(a,o,u,f,g){var y=U.p;U.p=y!==0&&8>y?y:8;var _=N.T,C={};N.T=C,xp(a,!1,o,u);try{var z=g(),G=N.S;if(G!==null&&G(C,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var Q=TD(z,f);Ll(a,o,Q,bi(a))}else Ll(a,o,f,bi(a))}catch(ie){Ll(a,o,{then:function(){},status:"rejected",reason:ie},bi())}finally{U.p=y,_!==null&&C.types!==null&&(_.types=C.types),N.T=_}}function OD(){}function yp(a,o,u,f){if(a.tag!==5)throw Error(i(476));var g=R0(a).queue;M0(a,g,o,B,u===null?OD:function(){return D0(a),u(f)})}function R0(a){var o=a.memoizedState;if(o!==null)return o;o={memoizedState:B,baseState:B,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fs,lastRenderedState:B},next:null};var u={};return o.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fs,lastRenderedState:u},next:null},a.memoizedState=o,a=a.alternate,a!==null&&(a.memoizedState=o),o}function D0(a){var o=R0(a);o.next===null&&(o=a.alternate.memoizedState),Ll(a,o.next.queue,{},bi())}function bp(){return kn(Ql)}function O0(){return Yt().memoizedState}function N0(){return Yt().memoizedState}function ND(a){for(var o=a.return;o!==null;){switch(o.tag){case 24:case 3:var u=bi();a=ya(u);var f=ba(o,a,u);f!==null&&(ai(f,o,u),Dl(f,o,u)),o={cache:Yf()},a.payload=o;return}o=o.return}}function PD(a,o,u){var f=bi();u={lane:f,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Fu(a)?I0(o,u):(u=zf(a,o,u,f),u!==null&&(ai(u,a,f),L0(u,o,f)))}function P0(a,o,u){var f=bi();Ll(a,o,u,f)}function Ll(a,o,u,f){var g={lane:f,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(Fu(a))I0(o,g);else{var y=a.alternate;if(a.lanes===0&&(y===null||y.lanes===0)&&(y=o.lastRenderedReducer,y!==null))try{var _=o.lastRenderedState,C=y(_,u);if(g.hasEagerState=!0,g.eagerState=C,fi(C,_))return xu(a,o,g,0),mt===null&&bu(),!1}catch{}if(u=zf(a,o,g,f),u!==null)return ai(u,a,f),L0(u,o,f),!0}return!1}function xp(a,o,u,f){if(f={lane:2,revertLane:Jp(),gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},Fu(a)){if(o)throw Error(i(479))}else o=zf(a,u,f,2),o!==null&&ai(o,a,2)}function Fu(a){var o=a.alternate;return a===ze||o!==null&&o===ze}function I0(a,o){ho=Nu=!0;var u=a.pending;u===null?o.next=o:(o.next=u.next,u.next=o),a.pending=o}function L0(a,o,u){if((u&4194048)!==0){var f=o.lanes;f&=a.pendingLanes,u|=f,o.lanes=u,Kn(a,u)}}var zl={readContext:kn,use:Lu,useCallback:Vt,useContext:Vt,useEffect:Vt,useImperativeHandle:Vt,useLayoutEffect:Vt,useInsertionEffect:Vt,useMemo:Vt,useReducer:Vt,useRef:Vt,useState:Vt,useDebugValue:Vt,useDeferredValue:Vt,useTransition:Vt,useSyncExternalStore:Vt,useId:Vt,useHostTransitionStatus:Vt,useFormState:Vt,useActionState:Vt,useOptimistic:Vt,useMemoCache:Vt,useCacheRefresh:Vt};zl.useEffectEvent=Vt;var z0={readContext:kn,use:Lu,useCallback:function(a,o){return Fn().memoizedState=[a,o===void 0?null:o],a},useContext:kn,useEffect:x0,useImperativeHandle:function(a,o,u){u=u!=null?u.concat([a]):null,ju(4194308,4,_0.bind(null,o,a),u)},useLayoutEffect:function(a,o){return ju(4194308,4,a,o)},useInsertionEffect:function(a,o){ju(4,2,a,o)},useMemo:function(a,o){var u=Fn();o=o===void 0?null:o;var f=a();if(hr){Ln(!0);try{a()}finally{Ln(!1)}}return u.memoizedState=[f,o],f},useReducer:function(a,o,u){var f=Fn();if(u!==void 0){var g=u(o);if(hr){Ln(!0);try{u(o)}finally{Ln(!1)}}}else g=o;return f.memoizedState=f.baseState=g,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:g},f.queue=a,a=a.dispatch=PD.bind(null,ze,a),[f.memoizedState,a]},useRef:function(a){var o=Fn();return a={current:a},o.memoizedState=a},useState:function(a){a=fp(a);var o=a.queue,u=P0.bind(null,ze,o);return o.dispatch=u,[a.memoizedState,u]},useDebugValue:gp,useDeferredValue:function(a,o){var u=Fn();return vp(u,a,o)},useTransition:function(){var a=fp(!1);return a=M0.bind(null,ze,a.queue,!0,!1),Fn().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,o,u){var f=ze,g=Fn();if(qe){if(u===void 0)throw Error(i(407));u=u()}else{if(u=o(),mt===null)throw Error(i(349));(He&127)!==0||s0(f,o,u)}g.memoizedState=u;var y={value:u,getSnapshot:o};return g.queue=y,x0(r0.bind(null,f,y,a),[a]),f.flags|=2048,po(9,{destroy:void 0},a0.bind(null,f,y,u,o),null),u},useId:function(){var a=Fn(),o=mt.identifierPrefix;if(qe){var u=ds,f=us;u=(f&~(1<<32-Qt(f)-1)).toString(32)+u,o="_"+o+"R_"+u,u=Pu++,0<u&&(o+="H"+u.toString(32)),o+="_"}else u=CD++,o="_"+o+"r_"+u.toString(32)+"_";return a.memoizedState=o},useHostTransitionStatus:bp,useFormState:m0,useActionState:m0,useOptimistic:function(a){var o=Fn();o.memoizedState=o.baseState=a;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=u,o=xp.bind(null,ze,!0,u),u.dispatch=o,[a,o]},useMemoCache:up,useCacheRefresh:function(){return Fn().memoizedState=ND.bind(null,ze)},useEffectEvent:function(a){var o=Fn(),u={impl:a};return o.memoizedState=u,function(){if((Ke&2)!==0)throw Error(i(440));return u.impl.apply(void 0,arguments)}}},wp={readContext:kn,use:Lu,useCallback:T0,useContext:kn,useEffect:mp,useImperativeHandle:E0,useInsertionEffect:A0,useLayoutEffect:S0,useMemo:C0,useReducer:zu,useRef:b0,useState:function(){return zu(Fs)},useDebugValue:gp,useDeferredValue:function(a,o){var u=Yt();return k0(u,lt.memoizedState,a,o)},useTransition:function(){var a=zu(Fs)[0],o=Yt().memoizedState;return[typeof a=="boolean"?a:Il(a),o]},useSyncExternalStore:i0,useId:O0,useHostTransitionStatus:bp,useFormState:g0,useActionState:g0,useOptimistic:function(a,o){var u=Yt();return c0(u,lt,a,o)},useMemoCache:up,useCacheRefresh:N0};wp.useEffectEvent=w0;var j0={readContext:kn,use:Lu,useCallback:T0,useContext:kn,useEffect:mp,useImperativeHandle:E0,useInsertionEffect:A0,useLayoutEffect:S0,useMemo:C0,useReducer:hp,useRef:b0,useState:function(){return hp(Fs)},useDebugValue:gp,useDeferredValue:function(a,o){var u=Yt();return lt===null?vp(u,a,o):k0(u,lt.memoizedState,a,o)},useTransition:function(){var a=hp(Fs)[0],o=Yt().memoizedState;return[typeof a=="boolean"?a:Il(a),o]},useSyncExternalStore:i0,useId:O0,useHostTransitionStatus:bp,useFormState:y0,useActionState:y0,useOptimistic:function(a,o){var u=Yt();return lt!==null?c0(u,lt,a,o):(u.baseState=a,[a,u.queue.dispatch])},useMemoCache:up,useCacheRefresh:N0};j0.useEffectEvent=w0;function Ap(a,o,u,f){o=a.memoizedState,u=u(f,o),u=u==null?o:m({},o,u),a.memoizedState=u,a.lanes===0&&(a.updateQueue.baseState=u)}var Sp={enqueueSetState:function(a,o,u){a=a._reactInternals;var f=bi(),g=ya(f);g.payload=o,u!=null&&(g.callback=u),o=ba(a,g,f),o!==null&&(ai(o,a,f),Dl(o,a,f))},enqueueReplaceState:function(a,o,u){a=a._reactInternals;var f=bi(),g=ya(f);g.tag=1,g.payload=o,u!=null&&(g.callback=u),o=ba(a,g,f),o!==null&&(ai(o,a,f),Dl(o,a,f))},enqueueForceUpdate:function(a,o){a=a._reactInternals;var u=bi(),f=ya(u);f.tag=2,o!=null&&(f.callback=o),o=ba(a,f,u),o!==null&&(ai(o,a,u),Dl(o,a,u))}};function B0(a,o,u,f,g,y,_){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(f,y,_):o.prototype&&o.prototype.isPureReactComponent?!Sl(u,f)||!Sl(g,y):!0}function F0(a,o,u,f){a=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,f),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,f),o.state!==a&&Sp.enqueueReplaceState(o,o.state,null)}function fr(a,o){var u=o;if("ref"in o){u={};for(var f in o)f!=="ref"&&(u[f]=o[f])}if(a=a.defaultProps){u===o&&(u=m({},u));for(var g in a)u[g]===void 0&&(u[g]=a[g])}return u}function U0(a){yu(a)}function V0(a){console.error(a)}function $0(a){yu(a)}function Uu(a,o){try{var u=a.onUncaughtError;u(o.value,{componentStack:o.stack})}catch(f){setTimeout(function(){throw f})}}function H0(a,o,u){try{var f=a.onCaughtError;f(u.value,{componentStack:u.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function _p(a,o,u){return u=ya(u),u.tag=3,u.payload={element:null},u.callback=function(){Uu(a,o)},u}function G0(a){return a=ya(a),a.tag=3,a}function q0(a,o,u,f){var g=u.type.getDerivedStateFromError;if(typeof g=="function"){var y=f.value;a.payload=function(){return g(y)},a.callback=function(){H0(o,u,f)}}var _=u.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(a.callback=function(){H0(o,u,f),typeof g!="function"&&(Ea===null?Ea=new Set([this]):Ea.add(this));var C=f.stack;this.componentDidCatch(f.value,{componentStack:C!==null?C:""})})}function ID(a,o,u,f,g){if(u.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(o=u.alternate,o!==null&&ao(o,u,g,!0),u=mi.current,u!==null){switch(u.tag){case 31:case 13:return Ii===null?Qu():u.alternate===null&&$t===0&&($t=3),u.flags&=-257,u.flags|=65536,u.lanes=g,f===ku?u.flags|=16384:(o=u.updateQueue,o===null?u.updateQueue=new Set([f]):o.add(f),Xp(a,f,g)),!1;case 22:return u.flags|=65536,f===ku?u.flags|=16384:(o=u.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([f])},u.updateQueue=o):(u=o.retryQueue,u===null?o.retryQueue=new Set([f]):u.add(f)),Xp(a,f,g)),!1}throw Error(i(435,u.tag))}return Xp(a,f,g),Qu(),!1}if(qe)return o=mi.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=g,f!==$f&&(a=Error(i(422),{cause:f}),Tl(Di(a,u)))):(f!==$f&&(o=Error(i(423),{cause:f}),Tl(Di(o,u))),a=a.current.alternate,a.flags|=65536,g&=-g,a.lanes|=g,f=Di(f,u),g=_p(a.stateNode,f,g),ep(a,g),$t!==4&&($t=2)),!1;var y=Error(i(520),{cause:f});if(y=Di(y,u),Gl===null?Gl=[y]:Gl.push(y),$t!==4&&($t=2),o===null)return!0;f=Di(f,u),u=o;do{switch(u.tag){case 3:return u.flags|=65536,a=g&-g,u.lanes|=a,a=_p(u.stateNode,f,a),ep(u,a),!1;case 1:if(o=u.type,y=u.stateNode,(u.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Ea===null||!Ea.has(y))))return u.flags|=65536,g&=-g,u.lanes|=g,g=G0(g),q0(g,a,u,f),ep(u,g),!1}u=u.return}while(u!==null);return!1}var Ep=Error(i(461)),nn=!1;function Mn(a,o,u,f){o.child=a===null?Wb(o,null,u,f):dr(o,a.child,u,f)}function Z0(a,o,u,f,g){u=u.render;var y=o.ref;if("ref"in f){var _={};for(var C in f)C!=="ref"&&(_[C]=f[C])}else _=f;return or(o),f=rp(a,o,u,_,y,g),C=op(),a!==null&&!nn?(lp(a,o,g),Us(a,o,g)):(qe&&C&&Uf(o),o.flags|=1,Mn(a,o,f,g),o.child)}function Y0(a,o,u,f,g){if(a===null){var y=u.type;return typeof y=="function"&&!jf(y)&&y.defaultProps===void 0&&u.compare===null?(o.tag=15,o.type=y,X0(a,o,y,f,g)):(a=Au(u.type,null,f,o,o.mode,g),a.ref=o.ref,a.return=o,o.child=a)}if(y=a.child,!Np(a,g)){var _=y.memoizedProps;if(u=u.compare,u=u!==null?u:Sl,u(_,f)&&a.ref===o.ref)return Us(a,o,g)}return o.flags|=1,a=Is(y,f),a.ref=o.ref,a.return=o,o.child=a}function X0(a,o,u,f,g){if(a!==null){var y=a.memoizedProps;if(Sl(y,f)&&a.ref===o.ref)if(nn=!1,o.pendingProps=f=y,Np(a,g))(a.flags&131072)!==0&&(nn=!0);else return o.lanes=a.lanes,Us(a,o,g)}return Tp(a,o,u,f,g)}function W0(a,o,u,f){var g=f.children,y=a!==null?a.memoizedState:null;if(a===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),f.mode==="hidden"){if((o.flags&128)!==0){if(y=y!==null?y.baseLanes|u:u,a!==null){for(f=o.child=a.child,g=0;f!==null;)g=g|f.lanes|f.childLanes,f=f.sibling;f=g&~y}else f=0,o.child=null;return K0(a,o,y,u,f)}if((u&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},a!==null&&Tu(o,y!==null?y.cachePool:null),y!==null?Qb(o,y):np(),e0(o);else return f=o.lanes=536870912,K0(a,o,y!==null?y.baseLanes|u:u,u,f)}else y!==null?(Tu(o,y.cachePool),Qb(o,y),wa(),o.memoizedState=null):(a!==null&&Tu(o,null),np(),wa());return Mn(a,o,g,u),o.child}function jl(a,o){return a!==null&&a.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function K0(a,o,u,f,g){var y=Wf();return y=y===null?null:{parent:en._currentValue,pool:y},o.memoizedState={baseLanes:u,cachePool:y},a!==null&&Tu(o,null),np(),e0(o),a!==null&&ao(a,o,f,!0),o.childLanes=g,null}function Vu(a,o){return o=Hu({mode:o.mode,children:o.children},a.mode),o.ref=a.ref,a.child=o,o.return=a,o}function J0(a,o,u){return dr(o,a.child,null,u),a=Vu(o,o.pendingProps),a.flags|=2,gi(o),o.memoizedState=null,a}function LD(a,o,u){var f=o.pendingProps,g=(o.flags&128)!==0;if(o.flags&=-129,a===null){if(qe){if(f.mode==="hidden")return a=Vu(o,f),o.lanes=536870912,jl(null,a);if(sp(o),(a=At)?(a=uw(a,Pi),a=a!==null&&a.data==="&"?a:null,a!==null&&(o.memoizedState={dehydrated:a,treeContext:fa!==null?{id:us,overflow:ds}:null,retryLane:536870912,hydrationErrors:null},u=Ib(a),u.return=o,o.child=u,Cn=o,At=null)):a=null,a===null)throw ma(o);return o.lanes=536870912,null}return Vu(o,f)}var y=a.memoizedState;if(y!==null){var _=y.dehydrated;if(sp(o),g)if(o.flags&256)o.flags&=-257,o=J0(a,o,u);else if(o.memoizedState!==null)o.child=a.child,o.flags|=128,o=null;else throw Error(i(558));else if(nn||ao(a,o,u,!1),g=(u&a.childLanes)!==0,nn||g){if(f=mt,f!==null&&(_=Jn(f,u),_!==0&&_!==y.retryLane))throw y.retryLane=_,ir(a,_),ai(f,a,_),Ep;Qu(),o=J0(a,o,u)}else a=y.treeContext,At=Li(_.nextSibling),Cn=o,qe=!0,pa=null,Pi=!1,a!==null&&jb(o,a),o=Vu(o,f),o.flags|=4096;return o}return a=Is(a.child,{mode:f.mode,children:f.children}),a.ref=o.ref,o.child=a,a.return=o,a}function $u(a,o){var u=o.ref;if(u===null)a!==null&&a.ref!==null&&(o.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(i(284));(a===null||a.ref!==u)&&(o.flags|=4194816)}}function Tp(a,o,u,f,g){return or(o),u=rp(a,o,u,f,void 0,g),f=op(),a!==null&&!nn?(lp(a,o,g),Us(a,o,g)):(qe&&f&&Uf(o),o.flags|=1,Mn(a,o,u,g),o.child)}function Q0(a,o,u,f,g,y){return or(o),o.updateQueue=null,u=n0(o,f,u,g),t0(a),f=op(),a!==null&&!nn?(lp(a,o,y),Us(a,o,y)):(qe&&f&&Uf(o),o.flags|=1,Mn(a,o,u,y),o.child)}function ex(a,o,u,f,g){if(or(o),o.stateNode===null){var y=to,_=u.contextType;typeof _=="object"&&_!==null&&(y=kn(_)),y=new u(f,y),o.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Sp,o.stateNode=y,y._reactInternals=o,y=o.stateNode,y.props=f,y.state=o.memoizedState,y.refs={},Jf(o),_=u.contextType,y.context=typeof _=="object"&&_!==null?kn(_):to,y.state=o.memoizedState,_=u.getDerivedStateFromProps,typeof _=="function"&&(Ap(o,u,_,f),y.state=o.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(_=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),_!==y.state&&Sp.enqueueReplaceState(y,y.state,null),Nl(o,f,y,g),Ol(),y.state=o.memoizedState),typeof y.componentDidMount=="function"&&(o.flags|=4194308),f=!0}else if(a===null){y=o.stateNode;var C=o.memoizedProps,z=fr(u,C);y.props=z;var G=y.context,Q=u.contextType;_=to,typeof Q=="object"&&Q!==null&&(_=kn(Q));var ie=u.getDerivedStateFromProps;Q=typeof ie=="function"||typeof y.getSnapshotBeforeUpdate=="function",C=o.pendingProps!==C,Q||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(C||G!==_)&&F0(o,y,f,_),va=!1;var Y=o.memoizedState;y.state=Y,Nl(o,f,y,g),Ol(),G=o.memoizedState,C||Y!==G||va?(typeof ie=="function"&&(Ap(o,u,ie,f),G=o.memoizedState),(z=va||B0(o,u,z,f,Y,G,_))?(Q||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(o.flags|=4194308)):(typeof y.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=f,o.memoizedState=G),y.props=f,y.state=G,y.context=_,f=z):(typeof y.componentDidMount=="function"&&(o.flags|=4194308),f=!1)}else{y=o.stateNode,Qf(a,o),_=o.memoizedProps,Q=fr(u,_),y.props=Q,ie=o.pendingProps,Y=y.context,G=u.contextType,z=to,typeof G=="object"&&G!==null&&(z=kn(G)),C=u.getDerivedStateFromProps,(G=typeof C=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(_!==ie||Y!==z)&&F0(o,y,f,z),va=!1,Y=o.memoizedState,y.state=Y,Nl(o,f,y,g),Ol();var W=o.memoizedState;_!==ie||Y!==W||va||a!==null&&a.dependencies!==null&&_u(a.dependencies)?(typeof C=="function"&&(Ap(o,u,C,f),W=o.memoizedState),(Q=va||B0(o,u,Q,f,Y,W,z)||a!==null&&a.dependencies!==null&&_u(a.dependencies))?(G||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(f,W,z),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(f,W,z)),typeof y.componentDidUpdate=="function"&&(o.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof y.componentDidUpdate!="function"||_===a.memoizedProps&&Y===a.memoizedState||(o.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||_===a.memoizedProps&&Y===a.memoizedState||(o.flags|=1024),o.memoizedProps=f,o.memoizedState=W),y.props=f,y.state=W,y.context=z,f=Q):(typeof y.componentDidUpdate!="function"||_===a.memoizedProps&&Y===a.memoizedState||(o.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||_===a.memoizedProps&&Y===a.memoizedState||(o.flags|=1024),f=!1)}return y=f,$u(a,o),f=(o.flags&128)!==0,y||f?(y=o.stateNode,u=f&&typeof u.getDerivedStateFromError!="function"?null:y.render(),o.flags|=1,a!==null&&f?(o.child=dr(o,a.child,null,g),o.child=dr(o,null,u,g)):Mn(a,o,u,g),o.memoizedState=y.state,a=o.child):a=Us(a,o,g),a}function tx(a,o,u,f){return ar(),o.flags|=256,Mn(a,o,u,f),o.child}var Cp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function kp(a){return{baseLanes:a,cachePool:Hb()}}function Mp(a,o,u){return a=a!==null?a.childLanes&~u:0,o&&(a|=yi),a}function nx(a,o,u){var f=o.pendingProps,g=!1,y=(o.flags&128)!==0,_;if((_=y)||(_=a!==null&&a.memoizedState===null?!1:(Zt.current&2)!==0),_&&(g=!0,o.flags&=-129),_=(o.flags&32)!==0,o.flags&=-33,a===null){if(qe){if(g?xa(o):wa(),(a=At)?(a=uw(a,Pi),a=a!==null&&a.data!=="&"?a:null,a!==null&&(o.memoizedState={dehydrated:a,treeContext:fa!==null?{id:us,overflow:ds}:null,retryLane:536870912,hydrationErrors:null},u=Ib(a),u.return=o,o.child=u,Cn=o,At=null)):a=null,a===null)throw ma(o);return dm(a)?o.lanes=32:o.lanes=536870912,null}var C=f.children;return f=f.fallback,g?(wa(),g=o.mode,C=Hu({mode:"hidden",children:C},g),f=sr(f,g,u,null),C.return=o,f.return=o,C.sibling=f,o.child=C,f=o.child,f.memoizedState=kp(u),f.childLanes=Mp(a,_,u),o.memoizedState=Cp,jl(null,f)):(xa(o),Rp(o,C))}var z=a.memoizedState;if(z!==null&&(C=z.dehydrated,C!==null)){if(y)o.flags&256?(xa(o),o.flags&=-257,o=Dp(a,o,u)):o.memoizedState!==null?(wa(),o.child=a.child,o.flags|=128,o=null):(wa(),C=f.fallback,g=o.mode,f=Hu({mode:"visible",children:f.children},g),C=sr(C,g,u,null),C.flags|=2,f.return=o,C.return=o,f.sibling=C,o.child=f,dr(o,a.child,null,u),f=o.child,f.memoizedState=kp(u),f.childLanes=Mp(a,_,u),o.memoizedState=Cp,o=jl(null,f));else if(xa(o),dm(C)){if(_=C.nextSibling&&C.nextSibling.dataset,_)var G=_.dgst;_=G,f=Error(i(419)),f.stack="",f.digest=_,Tl({value:f,source:null,stack:null}),o=Dp(a,o,u)}else if(nn||ao(a,o,u,!1),_=(u&a.childLanes)!==0,nn||_){if(_=mt,_!==null&&(f=Jn(_,u),f!==0&&f!==z.retryLane))throw z.retryLane=f,ir(a,f),ai(_,a,f),Ep;um(C)||Qu(),o=Dp(a,o,u)}else um(C)?(o.flags|=192,o.child=a.child,o=null):(a=z.treeContext,At=Li(C.nextSibling),Cn=o,qe=!0,pa=null,Pi=!1,a!==null&&jb(o,a),o=Rp(o,f.children),o.flags|=4096);return o}return g?(wa(),C=f.fallback,g=o.mode,z=a.child,G=z.sibling,f=Is(z,{mode:"hidden",children:f.children}),f.subtreeFlags=z.subtreeFlags&65011712,G!==null?C=Is(G,C):(C=sr(C,g,u,null),C.flags|=2),C.return=o,f.return=o,f.sibling=C,o.child=f,jl(null,f),f=o.child,C=a.child.memoizedState,C===null?C=kp(u):(g=C.cachePool,g!==null?(z=en._currentValue,g=g.parent!==z?{parent:z,pool:z}:g):g=Hb(),C={baseLanes:C.baseLanes|u,cachePool:g}),f.memoizedState=C,f.childLanes=Mp(a,_,u),o.memoizedState=Cp,jl(a.child,f)):(xa(o),u=a.child,a=u.sibling,u=Is(u,{mode:"visible",children:f.children}),u.return=o,u.sibling=null,a!==null&&(_=o.deletions,_===null?(o.deletions=[a],o.flags|=16):_.push(a)),o.child=u,o.memoizedState=null,u)}function Rp(a,o){return o=Hu({mode:"visible",children:o},a.mode),o.return=a,a.child=o}function Hu(a,o){return a=pi(22,a,null,o),a.lanes=0,a}function Dp(a,o,u){return dr(o,a.child,null,u),a=Rp(o,o.pendingProps.children),a.flags|=2,o.memoizedState=null,a}function ix(a,o,u){a.lanes|=o;var f=a.alternate;f!==null&&(f.lanes|=o),qf(a.return,o,u)}function Op(a,o,u,f,g,y){var _=a.memoizedState;_===null?a.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:f,tail:u,tailMode:g,treeForkCount:y}:(_.isBackwards=o,_.rendering=null,_.renderingStartTime=0,_.last=f,_.tail=u,_.tailMode=g,_.treeForkCount=y)}function sx(a,o,u){var f=o.pendingProps,g=f.revealOrder,y=f.tail;f=f.children;var _=Zt.current,C=(_&2)!==0;if(C?(_=_&1|2,o.flags|=128):_&=1,Z(Zt,_),Mn(a,o,f,u),f=qe?El:0,!C&&a!==null&&(a.flags&128)!==0)e:for(a=o.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&ix(a,u,o);else if(a.tag===19)ix(a,u,o);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===o)break e;for(;a.sibling===null;){if(a.return===null||a.return===o)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}switch(g){case"forwards":for(u=o.child,g=null;u!==null;)a=u.alternate,a!==null&&Ou(a)===null&&(g=u),u=u.sibling;u=g,u===null?(g=o.child,o.child=null):(g=u.sibling,u.sibling=null),Op(o,!1,g,u,y,f);break;case"backwards":case"unstable_legacy-backwards":for(u=null,g=o.child,o.child=null;g!==null;){if(a=g.alternate,a!==null&&Ou(a)===null){o.child=g;break}a=g.sibling,g.sibling=u,u=g,g=a}Op(o,!0,u,null,y,f);break;case"together":Op(o,!1,null,null,void 0,f);break;default:o.memoizedState=null}return o.child}function Us(a,o,u){if(a!==null&&(o.dependencies=a.dependencies),_a|=o.lanes,(u&o.childLanes)===0)if(a!==null){if(ao(a,o,u,!1),(u&o.childLanes)===0)return null}else return null;if(a!==null&&o.child!==a.child)throw Error(i(153));if(o.child!==null){for(a=o.child,u=Is(a,a.pendingProps),o.child=u,u.return=o;a.sibling!==null;)a=a.sibling,u=u.sibling=Is(a,a.pendingProps),u.return=o;u.sibling=null}return o.child}function Np(a,o){return(a.lanes&o)!==0?!0:(a=a.dependencies,!!(a!==null&&_u(a)))}function zD(a,o,u){switch(o.tag){case 3:Ee(o,o.stateNode.containerInfo),ga(o,en,a.memoizedState.cache),ar();break;case 27:case 5:Nt(o);break;case 4:Ee(o,o.stateNode.containerInfo);break;case 10:ga(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,sp(o),null;break;case 13:var f=o.memoizedState;if(f!==null)return f.dehydrated!==null?(xa(o),o.flags|=128,null):(u&o.child.childLanes)!==0?nx(a,o,u):(xa(o),a=Us(a,o,u),a!==null?a.sibling:null);xa(o);break;case 19:var g=(a.flags&128)!==0;if(f=(u&o.childLanes)!==0,f||(ao(a,o,u,!1),f=(u&o.childLanes)!==0),g){if(f)return sx(a,o,u);o.flags|=128}if(g=o.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),Z(Zt,Zt.current),f)break;return null;case 22:return o.lanes=0,W0(a,o,u,o.pendingProps);case 24:ga(o,en,a.memoizedState.cache)}return Us(a,o,u)}function ax(a,o,u){if(a!==null)if(a.memoizedProps!==o.pendingProps)nn=!0;else{if(!Np(a,u)&&(o.flags&128)===0)return nn=!1,zD(a,o,u);nn=(a.flags&131072)!==0}else nn=!1,qe&&(o.flags&1048576)!==0&&zb(o,El,o.index);switch(o.lanes=0,o.tag){case 16:e:{var f=o.pendingProps;if(a=cr(o.elementType),o.type=a,typeof a=="function")jf(a)?(f=fr(a,f),o.tag=1,o=ex(null,o,a,f,u)):(o.tag=0,o=Tp(null,o,a,f,u));else{if(a!=null){var g=a.$$typeof;if(g===M){o.tag=11,o=Z0(null,o,a,f,u);break e}else if(g===L){o.tag=14,o=Y0(null,o,a,f,u);break e}}throw o=ce(a)||a,Error(i(306,o,""))}}return o;case 0:return Tp(a,o,o.type,o.pendingProps,u);case 1:return f=o.type,g=fr(f,o.pendingProps),ex(a,o,f,g,u);case 3:e:{if(Ee(o,o.stateNode.containerInfo),a===null)throw Error(i(387));f=o.pendingProps;var y=o.memoizedState;g=y.element,Qf(a,o),Nl(o,f,null,u);var _=o.memoizedState;if(f=_.cache,ga(o,en,f),f!==y.cache&&Zf(o,[en],u,!0),Ol(),f=_.element,y.isDehydrated)if(y={element:f,isDehydrated:!1,cache:_.cache},o.updateQueue.baseState=y,o.memoizedState=y,o.flags&256){o=tx(a,o,f,u);break e}else if(f!==g){g=Di(Error(i(424)),o),Tl(g),o=tx(a,o,f,u);break e}else for(a=o.stateNode.containerInfo,a.nodeType===9?a=a.body:a=a.nodeName==="HTML"?a.ownerDocument.body:a,At=Li(a.firstChild),Cn=o,qe=!0,pa=null,Pi=!0,u=Wb(o,null,f,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(ar(),f===g){o=Us(a,o,u);break e}Mn(a,o,f,u)}o=o.child}return o;case 26:return $u(a,o),a===null?(u=gw(o.type,null,o.pendingProps,null))?o.memoizedState=u:qe||(u=o.type,a=o.pendingProps,f=rd(pe.current).createElement(u),f[Tn]=o,f[Qn]=a,Rn(f,u,a),yn(f),o.stateNode=f):o.memoizedState=gw(o.type,a.memoizedProps,o.pendingProps,a.memoizedState),null;case 27:return Nt(o),a===null&&qe&&(f=o.stateNode=fw(o.type,o.pendingProps,pe.current),Cn=o,Pi=!0,g=At,Ma(o.type)?(hm=g,At=Li(f.firstChild)):At=g),Mn(a,o,o.pendingProps.children,u),$u(a,o),a===null&&(o.flags|=4194304),o.child;case 5:return a===null&&qe&&((g=f=At)&&(f=fO(f,o.type,o.pendingProps,Pi),f!==null?(o.stateNode=f,Cn=o,At=Li(f.firstChild),Pi=!1,g=!0):g=!1),g||ma(o)),Nt(o),g=o.type,y=o.pendingProps,_=a!==null?a.memoizedProps:null,f=y.children,om(g,y)?f=null:_!==null&&om(g,_)&&(o.flags|=32),o.memoizedState!==null&&(g=rp(a,o,kD,null,null,u),Ql._currentValue=g),$u(a,o),Mn(a,o,f,u),o.child;case 6:return a===null&&qe&&((a=u=At)&&(u=pO(u,o.pendingProps,Pi),u!==null?(o.stateNode=u,Cn=o,At=null,a=!0):a=!1),a||ma(o)),null;case 13:return nx(a,o,u);case 4:return Ee(o,o.stateNode.containerInfo),f=o.pendingProps,a===null?o.child=dr(o,null,f,u):Mn(a,o,f,u),o.child;case 11:return Z0(a,o,o.type,o.pendingProps,u);case 7:return Mn(a,o,o.pendingProps,u),o.child;case 8:return Mn(a,o,o.pendingProps.children,u),o.child;case 12:return Mn(a,o,o.pendingProps.children,u),o.child;case 10:return f=o.pendingProps,ga(o,o.type,f.value),Mn(a,o,f.children,u),o.child;case 9:return g=o.type._context,f=o.pendingProps.children,or(o),g=kn(g),f=f(g),o.flags|=1,Mn(a,o,f,u),o.child;case 14:return Y0(a,o,o.type,o.pendingProps,u);case 15:return X0(a,o,o.type,o.pendingProps,u);case 19:return sx(a,o,u);case 31:return LD(a,o,u);case 22:return W0(a,o,u,o.pendingProps);case 24:return or(o),f=kn(en),a===null?(g=Wf(),g===null&&(g=mt,y=Yf(),g.pooledCache=y,y.refCount++,y!==null&&(g.pooledCacheLanes|=u),g=y),o.memoizedState={parent:f,cache:g},Jf(o),ga(o,en,g)):((a.lanes&u)!==0&&(Qf(a,o),Nl(o,null,null,u),Ol()),g=a.memoizedState,y=o.memoizedState,g.parent!==f?(g={parent:f,cache:f},o.memoizedState=g,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=g),ga(o,en,f)):(f=y.cache,ga(o,en,f),f!==g.cache&&Zf(o,[en],u,!0))),Mn(a,o,o.pendingProps.children,u),o.child;case 29:throw o.pendingProps}throw Error(i(156,o.tag))}function Vs(a){a.flags|=4}function Pp(a,o,u,f,g){if((o=(a.mode&32)!==0)&&(o=!1),o){if(a.flags|=16777216,(g&335544128)===g)if(a.stateNode.complete)a.flags|=8192;else if(Ox())a.flags|=8192;else throw ur=ku,Kf}else a.flags&=-16777217}function rx(a,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!ww(o))if(Ox())a.flags|=8192;else throw ur=ku,Kf}function Gu(a,o){o!==null&&(a.flags|=4),a.flags&16384&&(o=a.tag!==22?zn():536870912,a.lanes|=o,yo|=o)}function Bl(a,o){if(!qe)switch(a.tailMode){case"hidden":o=a.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?a.tail=null:u.sibling=null;break;case"collapsed":u=a.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?o||a.tail===null?a.tail=null:a.tail.sibling=null:f.sibling=null}}function St(a){var o=a.alternate!==null&&a.alternate.child===a.child,u=0,f=0;if(o)for(var g=a.child;g!==null;)u|=g.lanes|g.childLanes,f|=g.subtreeFlags&65011712,f|=g.flags&65011712,g.return=a,g=g.sibling;else for(g=a.child;g!==null;)u|=g.lanes|g.childLanes,f|=g.subtreeFlags,f|=g.flags,g.return=a,g=g.sibling;return a.subtreeFlags|=f,a.childLanes=u,o}function jD(a,o,u){var f=o.pendingProps;switch(Vf(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return St(o),null;case 1:return St(o),null;case 3:return u=o.stateNode,f=null,a!==null&&(f=a.memoizedState.cache),o.memoizedState.cache!==f&&(o.flags|=2048),js(en),De(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(a===null||a.child===null)&&(so(o)?Vs(o):a===null||a.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Hf())),St(o),null;case 26:var g=o.type,y=o.memoizedState;return a===null?(Vs(o),y!==null?(St(o),rx(o,y)):(St(o),Pp(o,g,null,f,u))):y?y!==a.memoizedState?(Vs(o),St(o),rx(o,y)):(St(o),o.flags&=-16777217):(a=a.memoizedProps,a!==f&&Vs(o),St(o),Pp(o,g,a,f,u)),null;case 27:if(wt(o),u=pe.current,g=o.type,a!==null&&o.stateNode!=null)a.memoizedProps!==f&&Vs(o);else{if(!f){if(o.stateNode===null)throw Error(i(166));return St(o),null}a=ne.current,so(o)?Bb(o):(a=fw(g,f,u),o.stateNode=a,Vs(o))}return St(o),null;case 5:if(wt(o),g=o.type,a!==null&&o.stateNode!=null)a.memoizedProps!==f&&Vs(o);else{if(!f){if(o.stateNode===null)throw Error(i(166));return St(o),null}if(y=ne.current,so(o))Bb(o);else{var _=rd(pe.current);switch(y){case 1:y=_.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:y=_.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":y=_.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":y=_.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":y=_.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof f.is=="string"?_.createElement("select",{is:f.is}):_.createElement("select"),f.multiple?y.multiple=!0:f.size&&(y.size=f.size);break;default:y=typeof f.is=="string"?_.createElement(g,{is:f.is}):_.createElement(g)}}y[Tn]=o,y[Qn]=f;e:for(_=o.child;_!==null;){if(_.tag===5||_.tag===6)y.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===o)break e;for(;_.sibling===null;){if(_.return===null||_.return===o)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}o.stateNode=y;e:switch(Rn(y,g,f),g){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}f&&Vs(o)}}return St(o),Pp(o,o.type,a===null?null:a.memoizedProps,o.pendingProps,u),null;case 6:if(a&&o.stateNode!=null)a.memoizedProps!==f&&Vs(o);else{if(typeof f!="string"&&o.stateNode===null)throw Error(i(166));if(a=pe.current,so(o)){if(a=o.stateNode,u=o.memoizedProps,f=null,g=Cn,g!==null)switch(g.tag){case 27:case 5:f=g.memoizedProps}a[Tn]=o,a=!!(a.nodeValue===u||f!==null&&f.suppressHydrationWarning===!0||nw(a.nodeValue,u)),a||ma(o,!0)}else a=rd(a).createTextNode(f),a[Tn]=o,o.stateNode=a}return St(o),null;case 31:if(u=o.memoizedState,a===null||a.memoizedState!==null){if(f=so(o),u!==null){if(a===null){if(!f)throw Error(i(318));if(a=o.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(i(557));a[Tn]=o}else ar(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;St(o),a=!1}else u=Hf(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=u),a=!0;if(!a)return o.flags&256?(gi(o),o):(gi(o),null);if((o.flags&128)!==0)throw Error(i(558))}return St(o),null;case 13:if(f=o.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(g=so(o),f!==null&&f.dehydrated!==null){if(a===null){if(!g)throw Error(i(318));if(g=o.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(i(317));g[Tn]=o}else ar(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;St(o),g=!1}else g=Hf(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=g),g=!0;if(!g)return o.flags&256?(gi(o),o):(gi(o),null)}return gi(o),(o.flags&128)!==0?(o.lanes=u,o):(u=f!==null,a=a!==null&&a.memoizedState!==null,u&&(f=o.child,g=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(g=f.alternate.memoizedState.cachePool.pool),y=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(y=f.memoizedState.cachePool.pool),y!==g&&(f.flags|=2048)),u!==a&&u&&(o.child.flags|=8192),Gu(o,o.updateQueue),St(o),null);case 4:return De(),a===null&&nm(o.stateNode.containerInfo),St(o),null;case 10:return js(o.type),St(o),null;case 19:if(q(Zt),f=o.memoizedState,f===null)return St(o),null;if(g=(o.flags&128)!==0,y=f.rendering,y===null)if(g)Bl(f,!1);else{if($t!==0||a!==null&&(a.flags&128)!==0)for(a=o.child;a!==null;){if(y=Ou(a),y!==null){for(o.flags|=128,Bl(f,!1),a=y.updateQueue,o.updateQueue=a,Gu(o,a),o.subtreeFlags=0,a=u,u=o.child;u!==null;)Pb(u,a),u=u.sibling;return Z(Zt,Zt.current&1|2),qe&&Ls(o,f.treeForkCount),o.child}a=a.sibling}f.tail!==null&&En()>Wu&&(o.flags|=128,g=!0,Bl(f,!1),o.lanes=4194304)}else{if(!g)if(a=Ou(y),a!==null){if(o.flags|=128,g=!0,a=a.updateQueue,o.updateQueue=a,Gu(o,a),Bl(f,!0),f.tail===null&&f.tailMode==="hidden"&&!y.alternate&&!qe)return St(o),null}else 2*En()-f.renderingStartTime>Wu&&u!==536870912&&(o.flags|=128,g=!0,Bl(f,!1),o.lanes=4194304);f.isBackwards?(y.sibling=o.child,o.child=y):(a=f.last,a!==null?a.sibling=y:o.child=y,f.last=y)}return f.tail!==null?(a=f.tail,f.rendering=a,f.tail=a.sibling,f.renderingStartTime=En(),a.sibling=null,u=Zt.current,Z(Zt,g?u&1|2:u&1),qe&&Ls(o,f.treeForkCount),a):(St(o),null);case 22:case 23:return gi(o),ip(),f=o.memoizedState!==null,a!==null?a.memoizedState!==null!==f&&(o.flags|=8192):f&&(o.flags|=8192),f?(u&536870912)!==0&&(o.flags&128)===0&&(St(o),o.subtreeFlags&6&&(o.flags|=8192)):St(o),u=o.updateQueue,u!==null&&Gu(o,u.retryQueue),u=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),f=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==u&&(o.flags|=2048),a!==null&&q(lr),null;case 24:return u=null,a!==null&&(u=a.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),js(en),St(o),null;case 25:return null;case 30:return null}throw Error(i(156,o.tag))}function BD(a,o){switch(Vf(o),o.tag){case 1:return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 3:return js(en),De(),a=o.flags,(a&65536)!==0&&(a&128)===0?(o.flags=a&-65537|128,o):null;case 26:case 27:case 5:return wt(o),null;case 31:if(o.memoizedState!==null){if(gi(o),o.alternate===null)throw Error(i(340));ar()}return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 13:if(gi(o),a=o.memoizedState,a!==null&&a.dehydrated!==null){if(o.alternate===null)throw Error(i(340));ar()}return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 19:return q(Zt),null;case 4:return De(),null;case 10:return js(o.type),null;case 22:case 23:return gi(o),ip(),a!==null&&q(lr),a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 24:return js(en),null;case 25:return null;default:return null}}function ox(a,o){switch(Vf(o),o.tag){case 3:js(en),De();break;case 26:case 27:case 5:wt(o);break;case 4:De();break;case 31:o.memoizedState!==null&&gi(o);break;case 13:gi(o);break;case 19:q(Zt);break;case 10:js(o.type);break;case 22:case 23:gi(o),ip(),a!==null&&q(lr);break;case 24:js(en)}}function Fl(a,o){try{var u=o.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var g=f.next;u=g;do{if((u.tag&a)===a){f=void 0;var y=u.create,_=u.inst;f=y(),_.destroy=f}u=u.next}while(u!==g)}}catch(C){st(o,o.return,C)}}function Aa(a,o,u){try{var f=o.updateQueue,g=f!==null?f.lastEffect:null;if(g!==null){var y=g.next;f=y;do{if((f.tag&a)===a){var _=f.inst,C=_.destroy;if(C!==void 0){_.destroy=void 0,g=o;var z=u,G=C;try{G()}catch(Q){st(g,z,Q)}}}f=f.next}while(f!==y)}}catch(Q){st(o,o.return,Q)}}function lx(a){var o=a.updateQueue;if(o!==null){var u=a.stateNode;try{Jb(o,u)}catch(f){st(a,a.return,f)}}}function cx(a,o,u){u.props=fr(a.type,a.memoizedProps),u.state=a.memoizedState;try{u.componentWillUnmount()}catch(f){st(a,o,f)}}function Ul(a,o){try{var u=a.ref;if(u!==null){switch(a.tag){case 26:case 27:case 5:var f=a.stateNode;break;case 30:f=a.stateNode;break;default:f=a.stateNode}typeof u=="function"?a.refCleanup=u(f):u.current=f}}catch(g){st(a,o,g)}}function hs(a,o){var u=a.ref,f=a.refCleanup;if(u!==null)if(typeof f=="function")try{f()}catch(g){st(a,o,g)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(g){st(a,o,g)}else u.current=null}function ux(a){var o=a.type,u=a.memoizedProps,f=a.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":u.autoFocus&&f.focus();break e;case"img":u.src?f.src=u.src:u.srcSet&&(f.srcset=u.srcSet)}}catch(g){st(a,a.return,g)}}function Ip(a,o,u){try{var f=a.stateNode;oO(f,a.type,u,o),f[Qn]=o}catch(g){st(a,a.return,g)}}function dx(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&Ma(a.type)||a.tag===4}function Lp(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||dx(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&Ma(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function zp(a,o,u){var f=a.tag;if(f===5||f===6)a=a.stateNode,o?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(a,o):(o=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,o.appendChild(a),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=Ns));else if(f!==4&&(f===27&&Ma(a.type)&&(u=a.stateNode,o=null),a=a.child,a!==null))for(zp(a,o,u),a=a.sibling;a!==null;)zp(a,o,u),a=a.sibling}function qu(a,o,u){var f=a.tag;if(f===5||f===6)a=a.stateNode,o?u.insertBefore(a,o):u.appendChild(a);else if(f!==4&&(f===27&&Ma(a.type)&&(u=a.stateNode),a=a.child,a!==null))for(qu(a,o,u),a=a.sibling;a!==null;)qu(a,o,u),a=a.sibling}function hx(a){var o=a.stateNode,u=a.memoizedProps;try{for(var f=a.type,g=o.attributes;g.length;)o.removeAttributeNode(g[0]);Rn(o,f,u),o[Tn]=a,o[Qn]=u}catch(y){st(a,a.return,y)}}var $s=!1,sn=!1,jp=!1,fx=typeof WeakSet=="function"?WeakSet:Set,bn=null;function FD(a,o){if(a=a.containerInfo,am=fd,a=Eb(a),Df(a)){if("selectionStart"in a)var u={start:a.selectionStart,end:a.selectionEnd};else e:{u=(u=a.ownerDocument)&&u.defaultView||window;var f=u.getSelection&&u.getSelection();if(f&&f.rangeCount!==0){u=f.anchorNode;var g=f.anchorOffset,y=f.focusNode;f=f.focusOffset;try{u.nodeType,y.nodeType}catch{u=null;break e}var _=0,C=-1,z=-1,G=0,Q=0,ie=a,Y=null;t:for(;;){for(var W;ie!==u||g!==0&&ie.nodeType!==3||(C=_+g),ie!==y||f!==0&&ie.nodeType!==3||(z=_+f),ie.nodeType===3&&(_+=ie.nodeValue.length),(W=ie.firstChild)!==null;)Y=ie,ie=W;for(;;){if(ie===a)break t;if(Y===u&&++G===g&&(C=_),Y===y&&++Q===f&&(z=_),(W=ie.nextSibling)!==null)break;ie=Y,Y=ie.parentNode}ie=W}u=C===-1||z===-1?null:{start:C,end:z}}else u=null}u=u||{start:0,end:0}}else u=null;for(rm={focusedElem:a,selectionRange:u},fd=!1,bn=o;bn!==null;)if(o=bn,a=o.child,(o.subtreeFlags&1028)!==0&&a!==null)a.return=o,bn=a;else for(;bn!==null;){switch(o=bn,y=o.alternate,a=o.flags,o.tag){case 0:if((a&4)!==0&&(a=o.updateQueue,a=a!==null?a.events:null,a!==null))for(u=0;u<a.length;u++)g=a[u],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((a&1024)!==0&&y!==null){a=void 0,u=o,g=y.memoizedProps,y=y.memoizedState,f=u.stateNode;try{var ge=fr(u.type,g);a=f.getSnapshotBeforeUpdate(ge,y),f.__reactInternalSnapshotBeforeUpdate=a}catch(Me){st(u,u.return,Me)}}break;case 3:if((a&1024)!==0){if(a=o.stateNode.containerInfo,u=a.nodeType,u===9)cm(a);else if(u===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":cm(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(i(163))}if(a=o.sibling,a!==null){a.return=o.return,bn=a;break}bn=o.return}}function px(a,o,u){var f=u.flags;switch(u.tag){case 0:case 11:case 15:Gs(a,u),f&4&&Fl(5,u);break;case 1:if(Gs(a,u),f&4)if(a=u.stateNode,o===null)try{a.componentDidMount()}catch(_){st(u,u.return,_)}else{var g=fr(u.type,o.memoizedProps);o=o.memoizedState;try{a.componentDidUpdate(g,o,a.__reactInternalSnapshotBeforeUpdate)}catch(_){st(u,u.return,_)}}f&64&&lx(u),f&512&&Ul(u,u.return);break;case 3:if(Gs(a,u),f&64&&(a=u.updateQueue,a!==null)){if(o=null,u.child!==null)switch(u.child.tag){case 27:case 5:o=u.child.stateNode;break;case 1:o=u.child.stateNode}try{Jb(a,o)}catch(_){st(u,u.return,_)}}break;case 27:o===null&&f&4&&hx(u);case 26:case 5:Gs(a,u),o===null&&f&4&&ux(u),f&512&&Ul(u,u.return);break;case 12:Gs(a,u);break;case 31:Gs(a,u),f&4&&vx(a,u);break;case 13:Gs(a,u),f&4&&yx(a,u),f&64&&(a=u.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(u=XD.bind(null,u),mO(a,u))));break;case 22:if(f=u.memoizedState!==null||$s,!f){o=o!==null&&o.memoizedState!==null||sn,g=$s;var y=sn;$s=f,(sn=o)&&!y?qs(a,u,(u.subtreeFlags&8772)!==0):Gs(a,u),$s=g,sn=y}break;case 30:break;default:Gs(a,u)}}function mx(a){var o=a.alternate;o!==null&&(a.alternate=null,mx(o)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(o=a.stateNode,o!==null&&pf(o)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var kt=null,ti=!1;function Hs(a,o,u){for(u=u.child;u!==null;)gx(a,o,u),u=u.sibling}function gx(a,o,u){if(un&&typeof un.onCommitFiberUnmount=="function")try{un.onCommitFiberUnmount(Zi,u)}catch{}switch(u.tag){case 26:sn||hs(u,o),Hs(a,o,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:sn||hs(u,o);var f=kt,g=ti;Ma(u.type)&&(kt=u.stateNode,ti=!1),Hs(a,o,u),Wl(u.stateNode),kt=f,ti=g;break;case 5:sn||hs(u,o);case 6:if(f=kt,g=ti,kt=null,Hs(a,o,u),kt=f,ti=g,kt!==null)if(ti)try{(kt.nodeType===9?kt.body:kt.nodeName==="HTML"?kt.ownerDocument.body:kt).removeChild(u.stateNode)}catch(y){st(u,o,y)}else try{kt.removeChild(u.stateNode)}catch(y){st(u,o,y)}break;case 18:kt!==null&&(ti?(a=kt,lw(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,u.stateNode),To(a)):lw(kt,u.stateNode));break;case 4:f=kt,g=ti,kt=u.stateNode.containerInfo,ti=!0,Hs(a,o,u),kt=f,ti=g;break;case 0:case 11:case 14:case 15:Aa(2,u,o),sn||Aa(4,u,o),Hs(a,o,u);break;case 1:sn||(hs(u,o),f=u.stateNode,typeof f.componentWillUnmount=="function"&&cx(u,o,f)),Hs(a,o,u);break;case 21:Hs(a,o,u);break;case 22:sn=(f=sn)||u.memoizedState!==null,Hs(a,o,u),sn=f;break;default:Hs(a,o,u)}}function vx(a,o){if(o.memoizedState===null&&(a=o.alternate,a!==null&&(a=a.memoizedState,a!==null))){a=a.dehydrated;try{To(a)}catch(u){st(o,o.return,u)}}}function yx(a,o){if(o.memoizedState===null&&(a=o.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{To(a)}catch(u){st(o,o.return,u)}}function UD(a){switch(a.tag){case 31:case 13:case 19:var o=a.stateNode;return o===null&&(o=a.stateNode=new fx),o;case 22:return a=a.stateNode,o=a._retryCache,o===null&&(o=a._retryCache=new fx),o;default:throw Error(i(435,a.tag))}}function Zu(a,o){var u=UD(a);o.forEach(function(f){if(!u.has(f)){u.add(f);var g=WD.bind(null,a,f);f.then(g,g)}})}function ni(a,o){var u=o.deletions;if(u!==null)for(var f=0;f<u.length;f++){var g=u[f],y=a,_=o,C=_;e:for(;C!==null;){switch(C.tag){case 27:if(Ma(C.type)){kt=C.stateNode,ti=!1;break e}break;case 5:kt=C.stateNode,ti=!1;break e;case 3:case 4:kt=C.stateNode.containerInfo,ti=!0;break e}C=C.return}if(kt===null)throw Error(i(160));gx(y,_,g),kt=null,ti=!1,y=g.alternate,y!==null&&(y.return=null),g.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)bx(o,a),o=o.sibling}var Wi=null;function bx(a,o){var u=a.alternate,f=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:ni(o,a),ii(a),f&4&&(Aa(3,a,a.return),Fl(3,a),Aa(5,a,a.return));break;case 1:ni(o,a),ii(a),f&512&&(sn||u===null||hs(u,u.return)),f&64&&$s&&(a=a.updateQueue,a!==null&&(f=a.callbacks,f!==null&&(u=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=u===null?f:u.concat(f))));break;case 26:var g=Wi;if(ni(o,a),ii(a),f&512&&(sn||u===null||hs(u,u.return)),f&4){var y=u!==null?u.memoizedState:null;if(f=a.memoizedState,u===null)if(f===null)if(a.stateNode===null){e:{f=a.type,u=a.memoizedProps,g=g.ownerDocument||g;t:switch(f){case"title":y=g.getElementsByTagName("title")[0],(!y||y[pl]||y[Tn]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=g.createElement(f),g.head.insertBefore(y,g.querySelector("head > title"))),Rn(y,f,u),y[Tn]=a,yn(y),f=y;break e;case"link":var _=bw("link","href",g).get(f+(u.href||""));if(_){for(var C=0;C<_.length;C++)if(y=_[C],y.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&y.getAttribute("rel")===(u.rel==null?null:u.rel)&&y.getAttribute("title")===(u.title==null?null:u.title)&&y.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){_.splice(C,1);break t}}y=g.createElement(f),Rn(y,f,u),g.head.appendChild(y);break;case"meta":if(_=bw("meta","content",g).get(f+(u.content||""))){for(C=0;C<_.length;C++)if(y=_[C],y.getAttribute("content")===(u.content==null?null:""+u.content)&&y.getAttribute("name")===(u.name==null?null:u.name)&&y.getAttribute("property")===(u.property==null?null:u.property)&&y.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&y.getAttribute("charset")===(u.charSet==null?null:u.charSet)){_.splice(C,1);break t}}y=g.createElement(f),Rn(y,f,u),g.head.appendChild(y);break;default:throw Error(i(468,f))}y[Tn]=a,yn(y),f=y}a.stateNode=f}else xw(g,a.type,a.stateNode);else a.stateNode=yw(g,f,a.memoizedProps);else y!==f?(y===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):y.count--,f===null?xw(g,a.type,a.stateNode):yw(g,f,a.memoizedProps)):f===null&&a.stateNode!==null&&Ip(a,a.memoizedProps,u.memoizedProps)}break;case 27:ni(o,a),ii(a),f&512&&(sn||u===null||hs(u,u.return)),u!==null&&f&4&&Ip(a,a.memoizedProps,u.memoizedProps);break;case 5:if(ni(o,a),ii(a),f&512&&(sn||u===null||hs(u,u.return)),a.flags&32){g=a.stateNode;try{Yr(g,"")}catch(ge){st(a,a.return,ge)}}f&4&&a.stateNode!=null&&(g=a.memoizedProps,Ip(a,g,u!==null?u.memoizedProps:g)),f&1024&&(jp=!0);break;case 6:if(ni(o,a),ii(a),f&4){if(a.stateNode===null)throw Error(i(162));f=a.memoizedProps,u=a.stateNode;try{u.nodeValue=f}catch(ge){st(a,a.return,ge)}}break;case 3:if(cd=null,g=Wi,Wi=od(o.containerInfo),ni(o,a),Wi=g,ii(a),f&4&&u!==null&&u.memoizedState.isDehydrated)try{To(o.containerInfo)}catch(ge){st(a,a.return,ge)}jp&&(jp=!1,xx(a));break;case 4:f=Wi,Wi=od(a.stateNode.containerInfo),ni(o,a),ii(a),Wi=f;break;case 12:ni(o,a),ii(a);break;case 31:ni(o,a),ii(a),f&4&&(f=a.updateQueue,f!==null&&(a.updateQueue=null,Zu(a,f)));break;case 13:ni(o,a),ii(a),a.child.flags&8192&&a.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(Xu=En()),f&4&&(f=a.updateQueue,f!==null&&(a.updateQueue=null,Zu(a,f)));break;case 22:g=a.memoizedState!==null;var z=u!==null&&u.memoizedState!==null,G=$s,Q=sn;if($s=G||g,sn=Q||z,ni(o,a),sn=Q,$s=G,ii(a),f&8192)e:for(o=a.stateNode,o._visibility=g?o._visibility&-2:o._visibility|1,g&&(u===null||z||$s||sn||pr(a)),u=null,o=a;;){if(o.tag===5||o.tag===26){if(u===null){z=u=o;try{if(y=z.stateNode,g)_=y.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{C=z.stateNode;var ie=z.memoizedProps.style,Y=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;C.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(ge){st(z,z.return,ge)}}}else if(o.tag===6){if(u===null){z=o;try{z.stateNode.nodeValue=g?"":z.memoizedProps}catch(ge){st(z,z.return,ge)}}}else if(o.tag===18){if(u===null){z=o;try{var W=z.stateNode;g?cw(W,!0):cw(z.stateNode,!1)}catch(ge){st(z,z.return,ge)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===a)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break e;for(;o.sibling===null;){if(o.return===null||o.return===a)break e;u===o&&(u=null),o=o.return}u===o&&(u=null),o.sibling.return=o.return,o=o.sibling}f&4&&(f=a.updateQueue,f!==null&&(u=f.retryQueue,u!==null&&(f.retryQueue=null,Zu(a,u))));break;case 19:ni(o,a),ii(a),f&4&&(f=a.updateQueue,f!==null&&(a.updateQueue=null,Zu(a,f)));break;case 30:break;case 21:break;default:ni(o,a),ii(a)}}function ii(a){var o=a.flags;if(o&2){try{for(var u,f=a.return;f!==null;){if(dx(f)){u=f;break}f=f.return}if(u==null)throw Error(i(160));switch(u.tag){case 27:var g=u.stateNode,y=Lp(a);qu(a,y,g);break;case 5:var _=u.stateNode;u.flags&32&&(Yr(_,""),u.flags&=-33);var C=Lp(a);qu(a,C,_);break;case 3:case 4:var z=u.stateNode.containerInfo,G=Lp(a);zp(a,G,z);break;default:throw Error(i(161))}}catch(Q){st(a,a.return,Q)}a.flags&=-3}o&4096&&(a.flags&=-4097)}function xx(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var o=a;xx(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),a=a.sibling}}function Gs(a,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)px(a,o.alternate,o),o=o.sibling}function pr(a){for(a=a.child;a!==null;){var o=a;switch(o.tag){case 0:case 11:case 14:case 15:Aa(4,o,o.return),pr(o);break;case 1:hs(o,o.return);var u=o.stateNode;typeof u.componentWillUnmount=="function"&&cx(o,o.return,u),pr(o);break;case 27:Wl(o.stateNode);case 26:case 5:hs(o,o.return),pr(o);break;case 22:o.memoizedState===null&&pr(o);break;case 30:pr(o);break;default:pr(o)}a=a.sibling}}function qs(a,o,u){for(u=u&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var f=o.alternate,g=a,y=o,_=y.flags;switch(y.tag){case 0:case 11:case 15:qs(g,y,u),Fl(4,y);break;case 1:if(qs(g,y,u),f=y,g=f.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(G){st(f,f.return,G)}if(f=y,g=f.updateQueue,g!==null){var C=f.stateNode;try{var z=g.shared.hiddenCallbacks;if(z!==null)for(g.shared.hiddenCallbacks=null,g=0;g<z.length;g++)Kb(z[g],C)}catch(G){st(f,f.return,G)}}u&&_&64&&lx(y),Ul(y,y.return);break;case 27:hx(y);case 26:case 5:qs(g,y,u),u&&f===null&&_&4&&ux(y),Ul(y,y.return);break;case 12:qs(g,y,u);break;case 31:qs(g,y,u),u&&_&4&&vx(g,y);break;case 13:qs(g,y,u),u&&_&4&&yx(g,y);break;case 22:y.memoizedState===null&&qs(g,y,u),Ul(y,y.return);break;case 30:break;default:qs(g,y,u)}o=o.sibling}}function Bp(a,o){var u=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),a=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(a=o.memoizedState.cachePool.pool),a!==u&&(a!=null&&a.refCount++,u!=null&&Cl(u))}function Fp(a,o){a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&Cl(a))}function Ki(a,o,u,f){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)wx(a,o,u,f),o=o.sibling}function wx(a,o,u,f){var g=o.flags;switch(o.tag){case 0:case 11:case 15:Ki(a,o,u,f),g&2048&&Fl(9,o);break;case 1:Ki(a,o,u,f);break;case 3:Ki(a,o,u,f),g&2048&&(a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&Cl(a)));break;case 12:if(g&2048){Ki(a,o,u,f),a=o.stateNode;try{var y=o.memoizedProps,_=y.id,C=y.onPostCommit;typeof C=="function"&&C(_,o.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(z){st(o,o.return,z)}}else Ki(a,o,u,f);break;case 31:Ki(a,o,u,f);break;case 13:Ki(a,o,u,f);break;case 23:break;case 22:y=o.stateNode,_=o.alternate,o.memoizedState!==null?y._visibility&2?Ki(a,o,u,f):Vl(a,o):y._visibility&2?Ki(a,o,u,f):(y._visibility|=2,mo(a,o,u,f,(o.subtreeFlags&10256)!==0||!1)),g&2048&&Bp(_,o);break;case 24:Ki(a,o,u,f),g&2048&&Fp(o.alternate,o);break;default:Ki(a,o,u,f)}}function mo(a,o,u,f,g){for(g=g&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var y=a,_=o,C=u,z=f,G=_.flags;switch(_.tag){case 0:case 11:case 15:mo(y,_,C,z,g),Fl(8,_);break;case 23:break;case 22:var Q=_.stateNode;_.memoizedState!==null?Q._visibility&2?mo(y,_,C,z,g):Vl(y,_):(Q._visibility|=2,mo(y,_,C,z,g)),g&&G&2048&&Bp(_.alternate,_);break;case 24:mo(y,_,C,z,g),g&&G&2048&&Fp(_.alternate,_);break;default:mo(y,_,C,z,g)}o=o.sibling}}function Vl(a,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var u=a,f=o,g=f.flags;switch(f.tag){case 22:Vl(u,f),g&2048&&Bp(f.alternate,f);break;case 24:Vl(u,f),g&2048&&Fp(f.alternate,f);break;default:Vl(u,f)}o=o.sibling}}var $l=8192;function go(a,o,u){if(a.subtreeFlags&$l)for(a=a.child;a!==null;)Ax(a,o,u),a=a.sibling}function Ax(a,o,u){switch(a.tag){case 26:go(a,o,u),a.flags&$l&&a.memoizedState!==null&&CO(u,Wi,a.memoizedState,a.memoizedProps);break;case 5:go(a,o,u);break;case 3:case 4:var f=Wi;Wi=od(a.stateNode.containerInfo),go(a,o,u),Wi=f;break;case 22:a.memoizedState===null&&(f=a.alternate,f!==null&&f.memoizedState!==null?(f=$l,$l=16777216,go(a,o,u),$l=f):go(a,o,u));break;default:go(a,o,u)}}function Sx(a){var o=a.alternate;if(o!==null&&(a=o.child,a!==null)){o.child=null;do o=a.sibling,a.sibling=null,a=o;while(a!==null)}}function Hl(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var f=o[u];bn=f,Ex(f,a)}Sx(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)_x(a),a=a.sibling}function _x(a){switch(a.tag){case 0:case 11:case 15:Hl(a),a.flags&2048&&Aa(9,a,a.return);break;case 3:Hl(a);break;case 12:Hl(a);break;case 22:var o=a.stateNode;a.memoizedState!==null&&o._visibility&2&&(a.return===null||a.return.tag!==13)?(o._visibility&=-3,Yu(a)):Hl(a);break;default:Hl(a)}}function Yu(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var f=o[u];bn=f,Ex(f,a)}Sx(a)}for(a=a.child;a!==null;){switch(o=a,o.tag){case 0:case 11:case 15:Aa(8,o,o.return),Yu(o);break;case 22:u=o.stateNode,u._visibility&2&&(u._visibility&=-3,Yu(o));break;default:Yu(o)}a=a.sibling}}function Ex(a,o){for(;bn!==null;){var u=bn;switch(u.tag){case 0:case 11:case 15:Aa(8,u,o);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var f=u.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:Cl(u.memoizedState.cache)}if(f=u.child,f!==null)f.return=u,bn=f;else e:for(u=a;bn!==null;){f=bn;var g=f.sibling,y=f.return;if(mx(f),f===u){bn=null;break e}if(g!==null){g.return=y,bn=g;break e}bn=y}}}var VD={getCacheForType:function(a){var o=kn(en),u=o.data.get(a);return u===void 0&&(u=a(),o.data.set(a,u)),u},cacheSignal:function(){return kn(en).controller.signal}},$D=typeof WeakMap=="function"?WeakMap:Map,Ke=0,mt=null,Ve=null,He=0,it=0,vi=null,Sa=!1,vo=!1,Up=!1,Zs=0,$t=0,_a=0,mr=0,Vp=0,yi=0,yo=0,Gl=null,si=null,$p=!1,Xu=0,Tx=0,Wu=1/0,Ku=null,Ea=null,dn=0,Ta=null,bo=null,Ys=0,Hp=0,Gp=null,Cx=null,ql=0,qp=null;function bi(){return(Ke&2)!==0&&He!==0?He&-He:N.T!==null?Jp():hf()}function kx(){if(yi===0)if((He&536870912)===0||qe){var a=Fr;Fr<<=1,(Fr&3932160)===0&&(Fr=262144),yi=a}else yi=536870912;return a=mi.current,a!==null&&(a.flags|=32),yi}function ai(a,o,u){(a===mt&&(it===2||it===9)||a.cancelPendingCommit!==null)&&(xo(a,0),Ca(a,He,yi,!1)),It(a,u),((Ke&2)===0||a!==mt)&&(a===mt&&((Ke&2)===0&&(mr|=u),$t===4&&Ca(a,He,yi,!1)),fs(a))}function Mx(a,o,u){if((Ke&6)!==0)throw Error(i(327));var f=!u&&(o&127)===0&&(o&a.expiredLanes)===0||Ct(a,o),g=f?qD(a,o):Yp(a,o,!0),y=f;do{if(g===0){vo&&!f&&Ca(a,o,0,!1);break}else{if(u=a.current.alternate,y&&!HD(u)){g=Yp(a,o,!1),y=!1;continue}if(g===2){if(y=o,a.errorRecoveryDisabledLanes&y)var _=0;else _=a.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){o=_;e:{var C=a;g=Gl;var z=C.current.memoizedState.isDehydrated;if(z&&(xo(C,_).flags|=256),_=Yp(C,_,!1),_!==2){if(Up&&!z){C.errorRecoveryDisabledLanes|=y,mr|=y,g=4;break e}y=si,si=g,y!==null&&(si===null?si=y:si.push.apply(si,y))}g=_}if(y=!1,g!==2)continue}}if(g===1){xo(a,0),Ca(a,o,0,!0);break}e:{switch(f=a,y=g,y){case 0:case 1:throw Error(i(345));case 4:if((o&4194048)!==o)break;case 6:Ca(f,o,yi,!Sa);break e;case 2:si=null;break;case 3:case 5:break;default:throw Error(i(329))}if((o&62914560)===o&&(g=Xu+300-En(),10<g)){if(Ca(f,o,yi,!Sa),Re(f,0,!0)!==0)break e;Ys=o,f.timeoutHandle=rw(Rx.bind(null,f,u,si,Ku,$p,o,yi,mr,yo,Sa,y,"Throttled",-0,0),g);break e}Rx(f,u,si,Ku,$p,o,yi,mr,yo,Sa,y,null,-0,0)}}break}while(!0);fs(a)}function Rx(a,o,u,f,g,y,_,C,z,G,Q,ie,Y,W){if(a.timeoutHandle=-1,ie=o.subtreeFlags,ie&8192||(ie&16785408)===16785408){ie={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ns},Ax(o,y,ie);var ge=(y&62914560)===y?Xu-En():(y&4194048)===y?Tx-En():0;if(ge=kO(ie,ge),ge!==null){Ys=y,a.cancelPendingCommit=ge(jx.bind(null,a,o,y,u,f,g,_,C,z,Q,ie,null,Y,W)),Ca(a,y,_,!G);return}}jx(a,o,y,u,f,g,_,C,z)}function HD(a){for(var o=a;;){var u=o.tag;if((u===0||u===11||u===15)&&o.flags&16384&&(u=o.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var f=0;f<u.length;f++){var g=u[f],y=g.getSnapshot;g=g.value;try{if(!fi(y(),g))return!1}catch{return!1}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Ca(a,o,u,f){o&=~Vp,o&=~mr,a.suspendedLanes|=o,a.pingedLanes&=~o,f&&(a.warmLanes|=o),f=a.expirationTimes;for(var g=o;0<g;){var y=31-Qt(g),_=1<<y;f[y]=-1,g&=~_}u!==0&&Ja(a,u,o)}function Ju(){return(Ke&6)===0?(Zl(0),!1):!0}function Zp(){if(Ve!==null){if(it===0)var a=Ve.return;else a=Ve,zs=rr=null,cp(a),co=null,Ml=0,a=Ve;for(;a!==null;)ox(a.alternate,a),a=a.return;Ve=null}}function xo(a,o){var u=a.timeoutHandle;u!==-1&&(a.timeoutHandle=-1,uO(u)),u=a.cancelPendingCommit,u!==null&&(a.cancelPendingCommit=null,u()),Ys=0,Zp(),mt=a,Ve=u=Is(a.current,null),He=o,it=0,vi=null,Sa=!1,vo=Ct(a,o),Up=!1,yo=yi=Vp=mr=_a=$t=0,si=Gl=null,$p=!1,(o&8)!==0&&(o|=o&32);var f=a.entangledLanes;if(f!==0)for(a=a.entanglements,f&=o;0<f;){var g=31-Qt(f),y=1<<g;o|=a[g],f&=~y}return Zs=o,bu(),u}function Dx(a,o){ze=null,N.H=zl,o===lo||o===Cu?(o=Zb(),it=3):o===Kf?(o=Zb(),it=4):it=o===Ep?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,vi=o,Ve===null&&($t=1,Uu(a,Di(o,a.current)))}function Ox(){var a=mi.current;return a===null?!0:(He&4194048)===He?Ii===null:(He&62914560)===He||(He&536870912)!==0?a===Ii:!1}function Nx(){var a=N.H;return N.H=zl,a===null?zl:a}function Px(){var a=N.A;return N.A=VD,a}function Qu(){$t=4,Sa||(He&4194048)!==He&&mi.current!==null||(vo=!0),(_a&134217727)===0&&(mr&134217727)===0||mt===null||Ca(mt,He,yi,!1)}function Yp(a,o,u){var f=Ke;Ke|=2;var g=Nx(),y=Px();(mt!==a||He!==o)&&(Ku=null,xo(a,o)),o=!1;var _=$t;e:do try{if(it!==0&&Ve!==null){var C=Ve,z=vi;switch(it){case 8:Zp(),_=6;break e;case 3:case 2:case 9:case 6:mi.current===null&&(o=!0);var G=it;if(it=0,vi=null,wo(a,C,z,G),u&&vo){_=0;break e}break;default:G=it,it=0,vi=null,wo(a,C,z,G)}}GD(),_=$t;break}catch(Q){Dx(a,Q)}while(!0);return o&&a.shellSuspendCounter++,zs=rr=null,Ke=f,N.H=g,N.A=y,Ve===null&&(mt=null,He=0,bu()),_}function GD(){for(;Ve!==null;)Ix(Ve)}function qD(a,o){var u=Ke;Ke|=2;var f=Nx(),g=Px();mt!==a||He!==o?(Ku=null,Wu=En()+500,xo(a,o)):vo=Ct(a,o);e:do try{if(it!==0&&Ve!==null){o=Ve;var y=vi;t:switch(it){case 1:it=0,vi=null,wo(a,o,y,1);break;case 2:case 9:if(Gb(y)){it=0,vi=null,Lx(o);break}o=function(){it!==2&&it!==9||mt!==a||(it=7),fs(a)},y.then(o,o);break e;case 3:it=7;break e;case 4:it=5;break e;case 7:Gb(y)?(it=0,vi=null,Lx(o)):(it=0,vi=null,wo(a,o,y,7));break;case 5:var _=null;switch(Ve.tag){case 26:_=Ve.memoizedState;case 5:case 27:var C=Ve;if(_?ww(_):C.stateNode.complete){it=0,vi=null;var z=C.sibling;if(z!==null)Ve=z;else{var G=C.return;G!==null?(Ve=G,ed(G)):Ve=null}break t}}it=0,vi=null,wo(a,o,y,5);break;case 6:it=0,vi=null,wo(a,o,y,6);break;case 8:Zp(),$t=6;break e;default:throw Error(i(462))}}ZD();break}catch(Q){Dx(a,Q)}while(!0);return zs=rr=null,N.H=f,N.A=g,Ke=u,Ve!==null?0:(mt=null,He=0,bu(),$t)}function ZD(){for(;Ve!==null&&!_n();)Ix(Ve)}function Ix(a){var o=ax(a.alternate,a,Zs);a.memoizedProps=a.pendingProps,o===null?ed(a):Ve=o}function Lx(a){var o=a,u=o.alternate;switch(o.tag){case 15:case 0:o=Q0(u,o,o.pendingProps,o.type,void 0,He);break;case 11:o=Q0(u,o,o.pendingProps,o.type.render,o.ref,He);break;case 5:cp(o);default:ox(u,o),o=Ve=Pb(o,Zs),o=ax(u,o,Zs)}a.memoizedProps=a.pendingProps,o===null?ed(a):Ve=o}function wo(a,o,u,f){zs=rr=null,cp(o),co=null,Ml=0;var g=o.return;try{if(ID(a,g,o,u,He)){$t=1,Uu(a,Di(u,a.current)),Ve=null;return}}catch(y){if(g!==null)throw Ve=g,y;$t=1,Uu(a,Di(u,a.current)),Ve=null;return}o.flags&32768?(qe||f===1?a=!0:vo||(He&536870912)!==0?a=!1:(Sa=a=!0,(f===2||f===9||f===3||f===6)&&(f=mi.current,f!==null&&f.tag===13&&(f.flags|=16384))),zx(o,a)):ed(o)}function ed(a){var o=a;do{if((o.flags&32768)!==0){zx(o,Sa);return}a=o.return;var u=jD(o.alternate,o,Zs);if(u!==null){Ve=u;return}if(o=o.sibling,o!==null){Ve=o;return}Ve=o=a}while(o!==null);$t===0&&($t=5)}function zx(a,o){do{var u=BD(a.alternate,a);if(u!==null){u.flags&=32767,Ve=u;return}if(u=a.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!o&&(a=a.sibling,a!==null)){Ve=a;return}Ve=a=u}while(a!==null);$t=6,Ve=null}function jx(a,o,u,f,g,y,_,C,z){a.cancelPendingCommit=null;do td();while(dn!==0);if((Ke&6)!==0)throw Error(i(327));if(o!==null){if(o===a.current)throw Error(i(177));if(y=o.lanes|o.childLanes,y|=Lf,Wn(a,u,y,_,C,z),a===mt&&(Ve=mt=null,He=0),bo=o,Ta=a,Ys=u,Hp=y,Gp=g,Cx=f,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,KD(ot,function(){return $x(),null})):(a.callbackNode=null,a.callbackPriority=0),f=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||f){f=N.T,N.T=null,g=U.p,U.p=2,_=Ke,Ke|=4;try{FD(a,o,u)}finally{Ke=_,U.p=g,N.T=f}}dn=1,Bx(),Fx(),Ux()}}function Bx(){if(dn===1){dn=0;var a=Ta,o=bo,u=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||u){u=N.T,N.T=null;var f=U.p;U.p=2;var g=Ke;Ke|=4;try{bx(o,a);var y=rm,_=Eb(a.containerInfo),C=y.focusedElem,z=y.selectionRange;if(_!==C&&C&&C.ownerDocument&&_b(C.ownerDocument.documentElement,C)){if(z!==null&&Df(C)){var G=z.start,Q=z.end;if(Q===void 0&&(Q=G),"selectionStart"in C)C.selectionStart=G,C.selectionEnd=Math.min(Q,C.value.length);else{var ie=C.ownerDocument||document,Y=ie&&ie.defaultView||window;if(Y.getSelection){var W=Y.getSelection(),ge=C.textContent.length,Me=Math.min(z.start,ge),ut=z.end===void 0?Me:Math.min(z.end,ge);!W.extend&&Me>ut&&(_=ut,ut=Me,Me=_);var V=Sb(C,Me),j=Sb(C,ut);if(V&&j&&(W.rangeCount!==1||W.anchorNode!==V.node||W.anchorOffset!==V.offset||W.focusNode!==j.node||W.focusOffset!==j.offset)){var H=ie.createRange();H.setStart(V.node,V.offset),W.removeAllRanges(),Me>ut?(W.addRange(H),W.extend(j.node,j.offset)):(H.setEnd(j.node,j.offset),W.addRange(H))}}}}for(ie=[],W=C;W=W.parentNode;)W.nodeType===1&&ie.push({element:W,left:W.scrollLeft,top:W.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<ie.length;C++){var te=ie[C];te.element.scrollLeft=te.left,te.element.scrollTop=te.top}}fd=!!am,rm=am=null}finally{Ke=g,U.p=f,N.T=u}}a.current=o,dn=2}}function Fx(){if(dn===2){dn=0;var a=Ta,o=bo,u=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||u){u=N.T,N.T=null;var f=U.p;U.p=2;var g=Ke;Ke|=4;try{px(a,o.alternate,o)}finally{Ke=g,U.p=f,N.T=u}}dn=3}}function Ux(){if(dn===4||dn===3){dn=0,ls();var a=Ta,o=bo,u=Ys,f=Cx;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?dn=5:(dn=0,bo=Ta=null,Vx(a,a.pendingLanes));var g=a.pendingLanes;if(g===0&&(Ea=null),Yi(u),o=o.stateNode,un&&typeof un.onCommitFiberRoot=="function")try{un.onCommitFiberRoot(Zi,o,void 0,(o.current.flags&128)===128)}catch{}if(f!==null){o=N.T,g=U.p,U.p=2,N.T=null;try{for(var y=a.onRecoverableError,_=0;_<f.length;_++){var C=f[_];y(C.value,{componentStack:C.stack})}}finally{N.T=o,U.p=g}}(Ys&3)!==0&&td(),fs(a),g=a.pendingLanes,(u&261930)!==0&&(g&42)!==0?a===qp?ql++:(ql=0,qp=a):ql=0,Zl(0)}}function Vx(a,o){(a.pooledCacheLanes&=o)===0&&(o=a.pooledCache,o!=null&&(a.pooledCache=null,Cl(o)))}function td(){return Bx(),Fx(),Ux(),$x()}function $x(){if(dn!==5)return!1;var a=Ta,o=Hp;Hp=0;var u=Yi(Ys),f=N.T,g=U.p;try{U.p=32>u?32:u,N.T=null,u=Gp,Gp=null;var y=Ta,_=Ys;if(dn=0,bo=Ta=null,Ys=0,(Ke&6)!==0)throw Error(i(331));var C=Ke;if(Ke|=4,_x(y.current),wx(y,y.current,_,u),Ke=C,Zl(0,!1),un&&typeof un.onPostCommitFiberRoot=="function")try{un.onPostCommitFiberRoot(Zi,y)}catch{}return!0}finally{U.p=g,N.T=f,Vx(a,o)}}function Hx(a,o,u){o=Di(u,o),o=_p(a.stateNode,o,2),a=ba(a,o,2),a!==null&&(It(a,2),fs(a))}function st(a,o,u){if(a.tag===3)Hx(a,a,u);else for(;o!==null;){if(o.tag===3){Hx(o,a,u);break}else if(o.tag===1){var f=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Ea===null||!Ea.has(f))){a=Di(u,a),u=G0(2),f=ba(o,u,2),f!==null&&(q0(u,f,o,a),It(f,2),fs(f));break}}o=o.return}}function Xp(a,o,u){var f=a.pingCache;if(f===null){f=a.pingCache=new $D;var g=new Set;f.set(o,g)}else g=f.get(o),g===void 0&&(g=new Set,f.set(o,g));g.has(u)||(Up=!0,g.add(u),a=YD.bind(null,a,o,u),o.then(a,a))}function YD(a,o,u){var f=a.pingCache;f!==null&&f.delete(o),a.pingedLanes|=a.suspendedLanes&u,a.warmLanes&=~u,mt===a&&(He&u)===u&&($t===4||$t===3&&(He&62914560)===He&&300>En()-Xu?(Ke&2)===0&&xo(a,0):Vp|=u,yo===He&&(yo=0)),fs(a)}function Gx(a,o){o===0&&(o=zn()),a=ir(a,o),a!==null&&(It(a,o),fs(a))}function XD(a){var o=a.memoizedState,u=0;o!==null&&(u=o.retryLane),Gx(a,u)}function WD(a,o){var u=0;switch(a.tag){case 31:case 13:var f=a.stateNode,g=a.memoizedState;g!==null&&(u=g.retryLane);break;case 19:f=a.stateNode;break;case 22:f=a.stateNode._retryCache;break;default:throw Error(i(314))}f!==null&&f.delete(o),Gx(a,u)}function KD(a,o){return rs(a,o)}var nd=null,Ao=null,Wp=!1,id=!1,Kp=!1,ka=0;function fs(a){a!==Ao&&a.next===null&&(Ao===null?nd=Ao=a:Ao=Ao.next=a),id=!0,Wp||(Wp=!0,QD())}function Zl(a,o){if(!Kp&&id){Kp=!0;do for(var u=!1,f=nd;f!==null;){if(a!==0){var g=f.pendingLanes;if(g===0)var y=0;else{var _=f.suspendedLanes,C=f.pingedLanes;y=(1<<31-Qt(42|a)+1)-1,y&=g&~(_&~C),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(u=!0,Xx(f,y))}else y=He,y=Re(f,f===mt?y:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(y&3)===0||Ct(f,y)||(u=!0,Xx(f,y));f=f.next}while(u);Kp=!1}}function JD(){qx()}function qx(){id=Wp=!1;var a=0;ka!==0&&cO()&&(a=ka);for(var o=En(),u=null,f=nd;f!==null;){var g=f.next,y=Zx(f,o);y===0?(f.next=null,u===null?nd=g:u.next=g,g===null&&(Ao=u)):(u=f,(a!==0||(y&3)!==0)&&(id=!0)),f=g}dn!==0&&dn!==5||Zl(a),ka!==0&&(ka=0)}function Zx(a,o){for(var u=a.suspendedLanes,f=a.pingedLanes,g=a.expirationTimes,y=a.pendingLanes&-62914561;0<y;){var _=31-Qt(y),C=1<<_,z=g[_];z===-1?((C&u)===0||(C&f)!==0)&&(g[_]=vn(C,o)):z<=o&&(a.expiredLanes|=C),y&=~C}if(o=mt,u=He,u=Re(a,a===o?u:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),f=a.callbackNode,u===0||a===o&&(it===2||it===9)||a.cancelPendingCommit!==null)return f!==null&&f!==null&&os(f),a.callbackNode=null,a.callbackPriority=0;if((u&3)===0||Ct(a,u)){if(o=u&-u,o===a.callbackPriority)return o;switch(f!==null&&os(f),Yi(u)){case 2:case 8:u=rt;break;case 32:u=ot;break;case 268435456:u=Jt;break;default:u=ot}return f=Yx.bind(null,a),u=rs(u,f),a.callbackPriority=o,a.callbackNode=u,o}return f!==null&&f!==null&&os(f),a.callbackPriority=2,a.callbackNode=null,2}function Yx(a,o){if(dn!==0&&dn!==5)return a.callbackNode=null,a.callbackPriority=0,null;var u=a.callbackNode;if(td()&&a.callbackNode!==u)return null;var f=He;return f=Re(a,a===mt?f:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),f===0?null:(Mx(a,f,o),Zx(a,En()),a.callbackNode!=null&&a.callbackNode===u?Yx.bind(null,a):null)}function Xx(a,o){if(td())return null;Mx(a,o,!0)}function QD(){dO(function(){(Ke&6)!==0?rs(_e,JD):qx()})}function Jp(){if(ka===0){var a=ro;a===0&&(a=ca,ca<<=1,(ca&261888)===0&&(ca=256)),ka=a}return ka}function Wx(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:du(""+a)}function Kx(a,o){var u=o.ownerDocument.createElement("input");return u.name=o.name,u.value=o.value,a.id&&u.setAttribute("form",a.id),o.parentNode.insertBefore(u,o),a=new FormData(a),u.parentNode.removeChild(u),a}function eO(a,o,u,f,g){if(o==="submit"&&u&&u.stateNode===g){var y=Wx((g[Qn]||null).action),_=f.submitter;_&&(o=(o=_[Qn]||null)?Wx(o.formAction):_.getAttribute("formAction"),o!==null&&(y=o,_=null));var C=new mu("action","action",null,f,g);a.push({event:C,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(ka!==0){var z=_?Kx(g,_):new FormData(g);yp(u,{pending:!0,data:z,method:g.method,action:y},null,z)}}else typeof y=="function"&&(C.preventDefault(),z=_?Kx(g,_):new FormData(g),yp(u,{pending:!0,data:z,method:g.method,action:y},y,z))},currentTarget:g}]})}}for(var Qp=0;Qp<If.length;Qp++){var em=If[Qp],tO=em.toLowerCase(),nO=em[0].toUpperCase()+em.slice(1);Xi(tO,"on"+nO)}Xi(kb,"onAnimationEnd"),Xi(Mb,"onAnimationIteration"),Xi(Rb,"onAnimationStart"),Xi("dblclick","onDoubleClick"),Xi("focusin","onFocus"),Xi("focusout","onBlur"),Xi(yD,"onTransitionRun"),Xi(bD,"onTransitionStart"),Xi(xD,"onTransitionCancel"),Xi(Db,"onTransitionEnd"),qr("onMouseEnter",["mouseout","mouseover"]),qr("onMouseLeave",["mouseout","mouseover"]),qr("onPointerEnter",["pointerout","pointerover"]),qr("onPointerLeave",["pointerout","pointerover"]),Qa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Qa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Qa("onBeforeInput",["compositionend","keypress","textInput","paste"]),Qa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Qa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Qa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),iO=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Yl));function Jx(a,o){o=(o&4)!==0;for(var u=0;u<a.length;u++){var f=a[u],g=f.event;f=f.listeners;e:{var y=void 0;if(o)for(var _=f.length-1;0<=_;_--){var C=f[_],z=C.instance,G=C.currentTarget;if(C=C.listener,z!==y&&g.isPropagationStopped())break e;y=C,g.currentTarget=G;try{y(g)}catch(Q){yu(Q)}g.currentTarget=null,y=z}else for(_=0;_<f.length;_++){if(C=f[_],z=C.instance,G=C.currentTarget,C=C.listener,z!==y&&g.isPropagationStopped())break e;y=C,g.currentTarget=G;try{y(g)}catch(Q){yu(Q)}g.currentTarget=null,y=z}}}}function $e(a,o){var u=o[ff];u===void 0&&(u=o[ff]=new Set);var f=a+"__bubble";u.has(f)||(Qx(o,a,2,!1),u.add(f))}function tm(a,o,u){var f=0;o&&(f|=4),Qx(u,a,f,o)}var sd="_reactListening"+Math.random().toString(36).slice(2);function nm(a){if(!a[sd]){a[sd]=!0,qy.forEach(function(u){u!=="selectionchange"&&(iO.has(u)||tm(u,!1,a),tm(u,!0,a))});var o=a.nodeType===9?a:a.ownerDocument;o===null||o[sd]||(o[sd]=!0,tm("selectionchange",!1,o))}}function Qx(a,o,u,f){switch(kw(o)){case 2:var g=DO;break;case 8:g=OO;break;default:g=vm}u=g.bind(null,o,u,a),g=void 0,!Af||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(g=!0),f?g!==void 0?a.addEventListener(o,u,{capture:!0,passive:g}):a.addEventListener(o,u,!0):g!==void 0?a.addEventListener(o,u,{passive:g}):a.addEventListener(o,u,!1)}function im(a,o,u,f,g){var y=f;if((o&1)===0&&(o&2)===0&&f!==null)e:for(;;){if(f===null)return;var _=f.tag;if(_===3||_===4){var C=f.stateNode.containerInfo;if(C===g)break;if(_===4)for(_=f.return;_!==null;){var z=_.tag;if((z===3||z===4)&&_.stateNode.containerInfo===g)return;_=_.return}for(;C!==null;){if(_=$r(C),_===null)return;if(z=_.tag,z===5||z===6||z===26||z===27){f=y=_;continue e}C=C.parentNode}}f=f.return}sb(function(){var G=y,Q=xf(u),ie=[];e:{var Y=Ob.get(a);if(Y!==void 0){var W=mu,ge=a;switch(a){case"keypress":if(fu(u)===0)break e;case"keydown":case"keyup":W=WR;break;case"focusin":ge="focus",W=Tf;break;case"focusout":ge="blur",W=Tf;break;case"beforeblur":case"afterblur":W=Tf;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=ob;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=jR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=QR;break;case kb:case Mb:case Rb:W=UR;break;case Db:W=tD;break;case"scroll":case"scrollend":W=LR;break;case"wheel":W=iD;break;case"copy":case"cut":case"paste":W=$R;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=cb;break;case"toggle":case"beforetoggle":W=aD}var Me=(o&4)!==0,ut=!Me&&(a==="scroll"||a==="scrollend"),V=Me?Y!==null?Y+"Capture":null:Y;Me=[];for(var j=G,H;j!==null;){var te=j;if(H=te.stateNode,te=te.tag,te!==5&&te!==26&&te!==27||H===null||V===null||(te=gl(j,V),te!=null&&Me.push(Xl(j,te,H))),ut)break;j=j.return}0<Me.length&&(Y=new W(Y,ge,null,u,Q),ie.push({event:Y,listeners:Me}))}}if((o&7)===0){e:{if(Y=a==="mouseover"||a==="pointerover",W=a==="mouseout"||a==="pointerout",Y&&u!==bf&&(ge=u.relatedTarget||u.fromElement)&&($r(ge)||ge[Vr]))break e;if((W||Y)&&(Y=Q.window===Q?Q:(Y=Q.ownerDocument)?Y.defaultView||Y.parentWindow:window,W?(ge=u.relatedTarget||u.toElement,W=G,ge=ge?$r(ge):null,ge!==null&&(ut=r(ge),Me=ge.tag,ge!==ut||Me!==5&&Me!==27&&Me!==6)&&(ge=null)):(W=null,ge=G),W!==ge)){if(Me=ob,te="onMouseLeave",V="onMouseEnter",j="mouse",(a==="pointerout"||a==="pointerover")&&(Me=cb,te="onPointerLeave",V="onPointerEnter",j="pointer"),ut=W==null?Y:ml(W),H=ge==null?Y:ml(ge),Y=new Me(te,j+"leave",W,u,Q),Y.target=ut,Y.relatedTarget=H,te=null,$r(Q)===G&&(Me=new Me(V,j+"enter",ge,u,Q),Me.target=H,Me.relatedTarget=ut,te=Me),ut=te,W&&ge)t:{for(Me=sO,V=W,j=ge,H=0,te=V;te;te=Me(te))H++;te=0;for(var Te=j;Te;Te=Me(Te))te++;for(;0<H-te;)V=Me(V),H--;for(;0<te-H;)j=Me(j),te--;for(;H--;){if(V===j||j!==null&&V===j.alternate){Me=V;break t}V=Me(V),j=Me(j)}Me=null}else Me=null;W!==null&&ew(ie,Y,W,Me,!1),ge!==null&&ut!==null&&ew(ie,ut,ge,Me,!0)}}e:{if(Y=G?ml(G):window,W=Y.nodeName&&Y.nodeName.toLowerCase(),W==="select"||W==="input"&&Y.type==="file")var Xe=vb;else if(mb(Y))if(yb)Xe=mD;else{Xe=fD;var Ae=hD}else W=Y.nodeName,!W||W.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?G&&yf(G.elementType)&&(Xe=vb):Xe=pD;if(Xe&&(Xe=Xe(a,G))){gb(ie,Xe,u,Q);break e}Ae&&Ae(a,Y,G),a==="focusout"&&G&&Y.type==="number"&&G.memoizedProps.value!=null&&vf(Y,"number",Y.value)}switch(Ae=G?ml(G):window,a){case"focusin":(mb(Ae)||Ae.contentEditable==="true")&&(Jr=Ae,Of=G,_l=null);break;case"focusout":_l=Of=Jr=null;break;case"mousedown":Nf=!0;break;case"contextmenu":case"mouseup":case"dragend":Nf=!1,Tb(ie,u,Q);break;case"selectionchange":if(vD)break;case"keydown":case"keyup":Tb(ie,u,Q)}var je;if(kf)e:{switch(a){case"compositionstart":var Ge="onCompositionStart";break e;case"compositionend":Ge="onCompositionEnd";break e;case"compositionupdate":Ge="onCompositionUpdate";break e}Ge=void 0}else Kr?fb(a,u)&&(Ge="onCompositionEnd"):a==="keydown"&&u.keyCode===229&&(Ge="onCompositionStart");Ge&&(ub&&u.locale!=="ko"&&(Kr||Ge!=="onCompositionStart"?Ge==="onCompositionEnd"&&Kr&&(je=ab()):(ha=Q,Sf="value"in ha?ha.value:ha.textContent,Kr=!0)),Ae=ad(G,Ge),0<Ae.length&&(Ge=new lb(Ge,a,null,u,Q),ie.push({event:Ge,listeners:Ae}),je?Ge.data=je:(je=pb(u),je!==null&&(Ge.data=je)))),(je=oD?lD(a,u):cD(a,u))&&(Ge=ad(G,"onBeforeInput"),0<Ge.length&&(Ae=new lb("onBeforeInput","beforeinput",null,u,Q),ie.push({event:Ae,listeners:Ge}),Ae.data=je)),eO(ie,a,G,u,Q)}Jx(ie,o)})}function Xl(a,o,u){return{instance:a,listener:o,currentTarget:u}}function ad(a,o){for(var u=o+"Capture",f=[];a!==null;){var g=a,y=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||y===null||(g=gl(a,u),g!=null&&f.unshift(Xl(a,g,y)),g=gl(a,o),g!=null&&f.push(Xl(a,g,y))),a.tag===3)return f;a=a.return}return[]}function sO(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function ew(a,o,u,f,g){for(var y=o._reactName,_=[];u!==null&&u!==f;){var C=u,z=C.alternate,G=C.stateNode;if(C=C.tag,z!==null&&z===f)break;C!==5&&C!==26&&C!==27||G===null||(z=G,g?(G=gl(u,y),G!=null&&_.unshift(Xl(u,G,z))):g||(G=gl(u,y),G!=null&&_.push(Xl(u,G,z)))),u=u.return}_.length!==0&&a.push({event:o,listeners:_})}var aO=/\r\n?/g,rO=/\u0000|\uFFFD/g;function tw(a){return(typeof a=="string"?a:""+a).replace(aO,`
`).replace(rO,"")}function nw(a,o){return o=tw(o),tw(a)===o}function ct(a,o,u,f,g,y){switch(u){case"children":typeof f=="string"?o==="body"||o==="textarea"&&f===""||Yr(a,f):(typeof f=="number"||typeof f=="bigint")&&o!=="body"&&Yr(a,""+f);break;case"className":cu(a,"class",f);break;case"tabIndex":cu(a,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":cu(a,u,f);break;case"style":nb(a,f,y);break;case"data":if(o!=="object"){cu(a,"data",f);break}case"src":case"href":if(f===""&&(o!=="a"||u!=="href")){a.removeAttribute(u);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){a.removeAttribute(u);break}f=du(""+f),a.setAttribute(u,f);break;case"action":case"formAction":if(typeof f=="function"){a.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(u==="formAction"?(o!=="input"&&ct(a,o,"name",g.name,g,null),ct(a,o,"formEncType",g.formEncType,g,null),ct(a,o,"formMethod",g.formMethod,g,null),ct(a,o,"formTarget",g.formTarget,g,null)):(ct(a,o,"encType",g.encType,g,null),ct(a,o,"method",g.method,g,null),ct(a,o,"target",g.target,g,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){a.removeAttribute(u);break}f=du(""+f),a.setAttribute(u,f);break;case"onClick":f!=null&&(a.onclick=Ns);break;case"onScroll":f!=null&&$e("scroll",a);break;case"onScrollEnd":f!=null&&$e("scrollend",a);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(i(61));if(u=f.__html,u!=null){if(g.children!=null)throw Error(i(60));a.innerHTML=u}}break;case"multiple":a.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":a.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){a.removeAttribute("xlink:href");break}u=du(""+f),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?a.setAttribute(u,""+f):a.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?a.setAttribute(u,""):a.removeAttribute(u);break;case"capture":case"download":f===!0?a.setAttribute(u,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?a.setAttribute(u,f):a.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?a.setAttribute(u,f):a.removeAttribute(u);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?a.removeAttribute(u):a.setAttribute(u,f);break;case"popover":$e("beforetoggle",a),$e("toggle",a),lu(a,"popover",f);break;case"xlinkActuate":Os(a,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":Os(a,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":Os(a,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":Os(a,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":Os(a,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":Os(a,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":Os(a,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":Os(a,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":Os(a,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":lu(a,"is",f);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=PR.get(u)||u,lu(a,u,f))}}function sm(a,o,u,f,g,y){switch(u){case"style":nb(a,f,y);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(i(61));if(u=f.__html,u!=null){if(g.children!=null)throw Error(i(60));a.innerHTML=u}}break;case"children":typeof f=="string"?Yr(a,f):(typeof f=="number"||typeof f=="bigint")&&Yr(a,""+f);break;case"onScroll":f!=null&&$e("scroll",a);break;case"onScrollEnd":f!=null&&$e("scrollend",a);break;case"onClick":f!=null&&(a.onclick=Ns);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Zy.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(g=u.endsWith("Capture"),o=u.slice(2,g?u.length-7:void 0),y=a[Qn]||null,y=y!=null?y[u]:null,typeof y=="function"&&a.removeEventListener(o,y,g),typeof f=="function")){typeof y!="function"&&y!==null&&(u in a?a[u]=null:a.hasAttribute(u)&&a.removeAttribute(u)),a.addEventListener(o,f,g);break e}u in a?a[u]=f:f===!0?a.setAttribute(u,""):lu(a,u,f)}}}function Rn(a,o,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":$e("error",a),$e("load",a);var f=!1,g=!1,y;for(y in u)if(u.hasOwnProperty(y)){var _=u[y];if(_!=null)switch(y){case"src":f=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:ct(a,o,y,_,u,null)}}g&&ct(a,o,"srcSet",u.srcSet,u,null),f&&ct(a,o,"src",u.src,u,null);return;case"input":$e("invalid",a);var C=y=_=g=null,z=null,G=null;for(f in u)if(u.hasOwnProperty(f)){var Q=u[f];if(Q!=null)switch(f){case"name":g=Q;break;case"type":_=Q;break;case"checked":z=Q;break;case"defaultChecked":G=Q;break;case"value":y=Q;break;case"defaultValue":C=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(i(137,o));break;default:ct(a,o,f,Q,u,null)}}Jy(a,y,C,z,G,_,g,!1);return;case"select":$e("invalid",a),f=_=y=null;for(g in u)if(u.hasOwnProperty(g)&&(C=u[g],C!=null))switch(g){case"value":y=C;break;case"defaultValue":_=C;break;case"multiple":f=C;default:ct(a,o,g,C,u,null)}o=y,u=_,a.multiple=!!f,o!=null?Zr(a,!!f,o,!1):u!=null&&Zr(a,!!f,u,!0);return;case"textarea":$e("invalid",a),y=g=f=null;for(_ in u)if(u.hasOwnProperty(_)&&(C=u[_],C!=null))switch(_){case"value":f=C;break;case"defaultValue":g=C;break;case"children":y=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(i(91));break;default:ct(a,o,_,C,u,null)}eb(a,f,g,y);return;case"option":for(z in u)u.hasOwnProperty(z)&&(f=u[z],f!=null)&&(z==="selected"?a.selected=f&&typeof f!="function"&&typeof f!="symbol":ct(a,o,z,f,u,null));return;case"dialog":$e("beforetoggle",a),$e("toggle",a),$e("cancel",a),$e("close",a);break;case"iframe":case"object":$e("load",a);break;case"video":case"audio":for(f=0;f<Yl.length;f++)$e(Yl[f],a);break;case"image":$e("error",a),$e("load",a);break;case"details":$e("toggle",a);break;case"embed":case"source":case"link":$e("error",a),$e("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in u)if(u.hasOwnProperty(G)&&(f=u[G],f!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:ct(a,o,G,f,u,null)}return;default:if(yf(o)){for(Q in u)u.hasOwnProperty(Q)&&(f=u[Q],f!==void 0&&sm(a,o,Q,f,u,void 0));return}}for(C in u)u.hasOwnProperty(C)&&(f=u[C],f!=null&&ct(a,o,C,f,u,null))}function oO(a,o,u,f){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,y=null,_=null,C=null,z=null,G=null,Q=null;for(W in u){var ie=u[W];if(u.hasOwnProperty(W)&&ie!=null)switch(W){case"checked":break;case"value":break;case"defaultValue":z=ie;default:f.hasOwnProperty(W)||ct(a,o,W,null,f,ie)}}for(var Y in f){var W=f[Y];if(ie=u[Y],f.hasOwnProperty(Y)&&(W!=null||ie!=null))switch(Y){case"type":y=W;break;case"name":g=W;break;case"checked":G=W;break;case"defaultChecked":Q=W;break;case"value":_=W;break;case"defaultValue":C=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(i(137,o));break;default:W!==ie&&ct(a,o,Y,W,f,ie)}}gf(a,_,C,z,G,Q,y,g);return;case"select":W=_=C=Y=null;for(y in u)if(z=u[y],u.hasOwnProperty(y)&&z!=null)switch(y){case"value":break;case"multiple":W=z;default:f.hasOwnProperty(y)||ct(a,o,y,null,f,z)}for(g in f)if(y=f[g],z=u[g],f.hasOwnProperty(g)&&(y!=null||z!=null))switch(g){case"value":Y=y;break;case"defaultValue":C=y;break;case"multiple":_=y;default:y!==z&&ct(a,o,g,y,f,z)}o=C,u=_,f=W,Y!=null?Zr(a,!!u,Y,!1):!!f!=!!u&&(o!=null?Zr(a,!!u,o,!0):Zr(a,!!u,u?[]:"",!1));return;case"textarea":W=Y=null;for(C in u)if(g=u[C],u.hasOwnProperty(C)&&g!=null&&!f.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:ct(a,o,C,null,f,g)}for(_ in f)if(g=f[_],y=u[_],f.hasOwnProperty(_)&&(g!=null||y!=null))switch(_){case"value":Y=g;break;case"defaultValue":W=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(i(91));break;default:g!==y&&ct(a,o,_,g,f,y)}Qy(a,Y,W);return;case"option":for(var ge in u)Y=u[ge],u.hasOwnProperty(ge)&&Y!=null&&!f.hasOwnProperty(ge)&&(ge==="selected"?a.selected=!1:ct(a,o,ge,null,f,Y));for(z in f)Y=f[z],W=u[z],f.hasOwnProperty(z)&&Y!==W&&(Y!=null||W!=null)&&(z==="selected"?a.selected=Y&&typeof Y!="function"&&typeof Y!="symbol":ct(a,o,z,Y,f,W));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Me in u)Y=u[Me],u.hasOwnProperty(Me)&&Y!=null&&!f.hasOwnProperty(Me)&&ct(a,o,Me,null,f,Y);for(G in f)if(Y=f[G],W=u[G],f.hasOwnProperty(G)&&Y!==W&&(Y!=null||W!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(i(137,o));break;default:ct(a,o,G,Y,f,W)}return;default:if(yf(o)){for(var ut in u)Y=u[ut],u.hasOwnProperty(ut)&&Y!==void 0&&!f.hasOwnProperty(ut)&&sm(a,o,ut,void 0,f,Y);for(Q in f)Y=f[Q],W=u[Q],!f.hasOwnProperty(Q)||Y===W||Y===void 0&&W===void 0||sm(a,o,Q,Y,f,W);return}}for(var V in u)Y=u[V],u.hasOwnProperty(V)&&Y!=null&&!f.hasOwnProperty(V)&&ct(a,o,V,null,f,Y);for(ie in f)Y=f[ie],W=u[ie],!f.hasOwnProperty(ie)||Y===W||Y==null&&W==null||ct(a,o,ie,Y,f,W)}function iw(a){switch(a){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function lO(){if(typeof performance.getEntriesByType=="function"){for(var a=0,o=0,u=performance.getEntriesByType("resource"),f=0;f<u.length;f++){var g=u[f],y=g.transferSize,_=g.initiatorType,C=g.duration;if(y&&C&&iw(_)){for(_=0,C=g.responseEnd,f+=1;f<u.length;f++){var z=u[f],G=z.startTime;if(G>C)break;var Q=z.transferSize,ie=z.initiatorType;Q&&iw(ie)&&(z=z.responseEnd,_+=Q*(z<C?1:(C-G)/(z-G)))}if(--f,o+=8*(y+_)/(g.duration/1e3),a++,10<a)break}}if(0<a)return o/a/1e6}return navigator.connection&&(a=navigator.connection.downlink,typeof a=="number")?a:5}var am=null,rm=null;function rd(a){return a.nodeType===9?a:a.ownerDocument}function sw(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function aw(a,o){if(a===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&o==="foreignObject"?0:a}function om(a,o){return a==="textarea"||a==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var lm=null;function cO(){var a=window.event;return a&&a.type==="popstate"?a===lm?!1:(lm=a,!0):(lm=null,!1)}var rw=typeof setTimeout=="function"?setTimeout:void 0,uO=typeof clearTimeout=="function"?clearTimeout:void 0,ow=typeof Promise=="function"?Promise:void 0,dO=typeof queueMicrotask=="function"?queueMicrotask:typeof ow<"u"?function(a){return ow.resolve(null).then(a).catch(hO)}:rw;function hO(a){setTimeout(function(){throw a})}function Ma(a){return a==="head"}function lw(a,o){var u=o,f=0;do{var g=u.nextSibling;if(a.removeChild(u),g&&g.nodeType===8)if(u=g.data,u==="/$"||u==="/&"){if(f===0){a.removeChild(g),To(o);return}f--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")f++;else if(u==="html")Wl(a.ownerDocument.documentElement);else if(u==="head"){u=a.ownerDocument.head,Wl(u);for(var y=u.firstChild;y;){var _=y.nextSibling,C=y.nodeName;y[pl]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&y.rel.toLowerCase()==="stylesheet"||u.removeChild(y),y=_}}else u==="body"&&Wl(a.ownerDocument.body);u=g}while(u);To(o)}function cw(a,o){var u=a;a=0;do{var f=u.nextSibling;if(u.nodeType===1?o?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(o?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),f&&f.nodeType===8)if(u=f.data,u==="/$"){if(a===0)break;a--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||a++;u=f}while(u)}function cm(a){var o=a.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var u=o;switch(o=o.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":cm(u),pf(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}a.removeChild(u)}}function fO(a,o,u,f){for(;a.nodeType===1;){var g=u;if(a.nodeName.toLowerCase()!==o.toLowerCase()){if(!f&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(f){if(!a[pl])switch(o){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(y=a.getAttribute("rel"),y==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(y!==g.rel||a.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||a.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||a.getAttribute("title")!==(g.title==null?null:g.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(y=a.getAttribute("src"),(y!==(g.src==null?null:g.src)||a.getAttribute("type")!==(g.type==null?null:g.type)||a.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&y&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(o==="input"&&a.type==="hidden"){var y=g.name==null?null:""+g.name;if(g.type==="hidden"&&a.getAttribute("name")===y)return a}else return a;if(a=Li(a.nextSibling),a===null)break}return null}function pO(a,o,u){if(o==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!u||(a=Li(a.nextSibling),a===null))return null;return a}function uw(a,o){for(;a.nodeType!==8;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!o||(a=Li(a.nextSibling),a===null))return null;return a}function um(a){return a.data==="$?"||a.data==="$~"}function dm(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState!=="loading"}function mO(a,o){var u=a.ownerDocument;if(a.data==="$~")a._reactRetry=o;else if(a.data!=="$?"||u.readyState!=="loading")o();else{var f=function(){o(),u.removeEventListener("DOMContentLoaded",f)};u.addEventListener("DOMContentLoaded",f),a._reactRetry=f}}function Li(a){for(;a!=null;a=a.nextSibling){var o=a.nodeType;if(o===1||o===3)break;if(o===8){if(o=a.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return a}var hm=null;function dw(a){a=a.nextSibling;for(var o=0;a;){if(a.nodeType===8){var u=a.data;if(u==="/$"||u==="/&"){if(o===0)return Li(a.nextSibling);o--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||o++}a=a.nextSibling}return null}function hw(a){a=a.previousSibling;for(var o=0;a;){if(a.nodeType===8){var u=a.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(o===0)return a;o--}else u!=="/$"&&u!=="/&"||o++}a=a.previousSibling}return null}function fw(a,o,u){switch(o=rd(u),a){case"html":if(a=o.documentElement,!a)throw Error(i(452));return a;case"head":if(a=o.head,!a)throw Error(i(453));return a;case"body":if(a=o.body,!a)throw Error(i(454));return a;default:throw Error(i(451))}}function Wl(a){for(var o=a.attributes;o.length;)a.removeAttributeNode(o[0]);pf(a)}var zi=new Map,pw=new Set;function od(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var Xs=U.d;U.d={f:gO,r:vO,D:yO,C:bO,L:xO,m:wO,X:SO,S:AO,M:_O};function gO(){var a=Xs.f(),o=Ju();return a||o}function vO(a){var o=Hr(a);o!==null&&o.tag===5&&o.type==="form"?D0(o):Xs.r(a)}var So=typeof document>"u"?null:document;function mw(a,o,u){var f=So;if(f&&typeof o=="string"&&o){var g=Mi(o);g='link[rel="'+a+'"][href="'+g+'"]',typeof u=="string"&&(g+='[crossorigin="'+u+'"]'),pw.has(g)||(pw.add(g),a={rel:a,crossOrigin:u,href:o},f.querySelector(g)===null&&(o=f.createElement("link"),Rn(o,"link",a),yn(o),f.head.appendChild(o)))}}function yO(a){Xs.D(a),mw("dns-prefetch",a,null)}function bO(a,o){Xs.C(a,o),mw("preconnect",a,o)}function xO(a,o,u){Xs.L(a,o,u);var f=So;if(f&&a&&o){var g='link[rel="preload"][as="'+Mi(o)+'"]';o==="image"&&u&&u.imageSrcSet?(g+='[imagesrcset="'+Mi(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(g+='[imagesizes="'+Mi(u.imageSizes)+'"]')):g+='[href="'+Mi(a)+'"]';var y=g;switch(o){case"style":y=_o(a);break;case"script":y=Eo(a)}zi.has(y)||(a=m({rel:"preload",href:o==="image"&&u&&u.imageSrcSet?void 0:a,as:o},u),zi.set(y,a),f.querySelector(g)!==null||o==="style"&&f.querySelector(Kl(y))||o==="script"&&f.querySelector(Jl(y))||(o=f.createElement("link"),Rn(o,"link",a),yn(o),f.head.appendChild(o)))}}function wO(a,o){Xs.m(a,o);var u=So;if(u&&a){var f=o&&typeof o.as=="string"?o.as:"script",g='link[rel="modulepreload"][as="'+Mi(f)+'"][href="'+Mi(a)+'"]',y=g;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Eo(a)}if(!zi.has(y)&&(a=m({rel:"modulepreload",href:a},o),zi.set(y,a),u.querySelector(g)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(Jl(y)))return}f=u.createElement("link"),Rn(f,"link",a),yn(f),u.head.appendChild(f)}}}function AO(a,o,u){Xs.S(a,o,u);var f=So;if(f&&a){var g=Gr(f).hoistableStyles,y=_o(a);o=o||"default";var _=g.get(y);if(!_){var C={loading:0,preload:null};if(_=f.querySelector(Kl(y)))C.loading=5;else{a=m({rel:"stylesheet",href:a,"data-precedence":o},u),(u=zi.get(y))&&fm(a,u);var z=_=f.createElement("link");yn(z),Rn(z,"link",a),z._p=new Promise(function(G,Q){z.onload=G,z.onerror=Q}),z.addEventListener("load",function(){C.loading|=1}),z.addEventListener("error",function(){C.loading|=2}),C.loading|=4,ld(_,o,f)}_={type:"stylesheet",instance:_,count:1,state:C},g.set(y,_)}}}function SO(a,o){Xs.X(a,o);var u=So;if(u&&a){var f=Gr(u).hoistableScripts,g=Eo(a),y=f.get(g);y||(y=u.querySelector(Jl(g)),y||(a=m({src:a,async:!0},o),(o=zi.get(g))&&pm(a,o),y=u.createElement("script"),yn(y),Rn(y,"link",a),u.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},f.set(g,y))}}function _O(a,o){Xs.M(a,o);var u=So;if(u&&a){var f=Gr(u).hoistableScripts,g=Eo(a),y=f.get(g);y||(y=u.querySelector(Jl(g)),y||(a=m({src:a,async:!0,type:"module"},o),(o=zi.get(g))&&pm(a,o),y=u.createElement("script"),yn(y),Rn(y,"link",a),u.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},f.set(g,y))}}function gw(a,o,u,f){var g=(g=pe.current)?od(g):null;if(!g)throw Error(i(446));switch(a){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(o=_o(u.href),u=Gr(g).hoistableStyles,f=u.get(o),f||(f={type:"style",instance:null,count:0,state:null},u.set(o,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){a=_o(u.href);var y=Gr(g).hoistableStyles,_=y.get(a);if(_||(g=g.ownerDocument||g,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(a,_),(y=g.querySelector(Kl(a)))&&!y._p&&(_.instance=y,_.state.loading=5),zi.has(a)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},zi.set(a,u),y||EO(g,a,u,_.state))),o&&f===null)throw Error(i(528,""));return _}if(o&&f!==null)throw Error(i(529,""));return null;case"script":return o=u.async,u=u.src,typeof u=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Eo(u),u=Gr(g).hoistableScripts,f=u.get(o),f||(f={type:"script",instance:null,count:0,state:null},u.set(o,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,a))}}function _o(a){return'href="'+Mi(a)+'"'}function Kl(a){return'link[rel="stylesheet"]['+a+"]"}function vw(a){return m({},a,{"data-precedence":a.precedence,precedence:null})}function EO(a,o,u,f){a.querySelector('link[rel="preload"][as="style"]['+o+"]")?f.loading=1:(o=a.createElement("link"),f.preload=o,o.addEventListener("load",function(){return f.loading|=1}),o.addEventListener("error",function(){return f.loading|=2}),Rn(o,"link",u),yn(o),a.head.appendChild(o))}function Eo(a){return'[src="'+Mi(a)+'"]'}function Jl(a){return"script[async]"+a}function yw(a,o,u){if(o.count++,o.instance===null)switch(o.type){case"style":var f=a.querySelector('style[data-href~="'+Mi(u.href)+'"]');if(f)return o.instance=f,yn(f),f;var g=m({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return f=(a.ownerDocument||a).createElement("style"),yn(f),Rn(f,"style",g),ld(f,u.precedence,a),o.instance=f;case"stylesheet":g=_o(u.href);var y=a.querySelector(Kl(g));if(y)return o.state.loading|=4,o.instance=y,yn(y),y;f=vw(u),(g=zi.get(g))&&fm(f,g),y=(a.ownerDocument||a).createElement("link"),yn(y);var _=y;return _._p=new Promise(function(C,z){_.onload=C,_.onerror=z}),Rn(y,"link",f),o.state.loading|=4,ld(y,u.precedence,a),o.instance=y;case"script":return y=Eo(u.src),(g=a.querySelector(Jl(y)))?(o.instance=g,yn(g),g):(f=u,(g=zi.get(y))&&(f=m({},u),pm(f,g)),a=a.ownerDocument||a,g=a.createElement("script"),yn(g),Rn(g,"link",f),a.head.appendChild(g),o.instance=g);case"void":return null;default:throw Error(i(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(f=o.instance,o.state.loading|=4,ld(f,u.precedence,a));return o.instance}function ld(a,o,u){for(var f=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=f.length?f[f.length-1]:null,y=g,_=0;_<f.length;_++){var C=f[_];if(C.dataset.precedence===o)y=C;else if(y!==g)break}y?y.parentNode.insertBefore(a,y.nextSibling):(o=u.nodeType===9?u.head:u,o.insertBefore(a,o.firstChild))}function fm(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.title==null&&(a.title=o.title)}function pm(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.integrity==null&&(a.integrity=o.integrity)}var cd=null;function bw(a,o,u){if(cd===null){var f=new Map,g=cd=new Map;g.set(u,f)}else g=cd,f=g.get(u),f||(f=new Map,g.set(u,f));if(f.has(a))return f;for(f.set(a,null),u=u.getElementsByTagName(a),g=0;g<u.length;g++){var y=u[g];if(!(y[pl]||y[Tn]||a==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var _=y.getAttribute(o)||"";_=a+_;var C=f.get(_);C?C.push(y):f.set(_,[y])}}return f}function xw(a,o,u){a=a.ownerDocument||a,a.head.insertBefore(u,o==="title"?a.querySelector("head > title"):null)}function TO(a,o,u){if(u===1||o.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;return o.rel==="stylesheet"?(a=o.disabled,typeof o.precedence=="string"&&a==null):!0;case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function ww(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}function CO(a,o,u,f){if(u.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var g=_o(f.href),y=o.querySelector(Kl(g));if(y){o=y._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(a.count++,a=ud.bind(a),o.then(a,a)),u.state.loading|=4,u.instance=y,yn(y);return}y=o.ownerDocument||o,f=vw(f),(g=zi.get(g))&&fm(f,g),y=y.createElement("link"),yn(y);var _=y;_._p=new Promise(function(C,z){_.onload=C,_.onerror=z}),Rn(y,"link",f),u.instance=y}a.stylesheets===null&&(a.stylesheets=new Map),a.stylesheets.set(u,o),(o=u.state.preload)&&(u.state.loading&3)===0&&(a.count++,u=ud.bind(a),o.addEventListener("load",u),o.addEventListener("error",u))}}var mm=0;function kO(a,o){return a.stylesheets&&a.count===0&&hd(a,a.stylesheets),0<a.count||0<a.imgCount?function(u){var f=setTimeout(function(){if(a.stylesheets&&hd(a,a.stylesheets),a.unsuspend){var y=a.unsuspend;a.unsuspend=null,y()}},6e4+o);0<a.imgBytes&&mm===0&&(mm=62500*lO());var g=setTimeout(function(){if(a.waitingForImages=!1,a.count===0&&(a.stylesheets&&hd(a,a.stylesheets),a.unsuspend)){var y=a.unsuspend;a.unsuspend=null,y()}},(a.imgBytes>mm?50:800)+o);return a.unsuspend=u,function(){a.unsuspend=null,clearTimeout(f),clearTimeout(g)}}:null}function ud(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)hd(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var dd=null;function hd(a,o){a.stylesheets=null,a.unsuspend!==null&&(a.count++,dd=new Map,o.forEach(MO,a),dd=null,ud.call(a))}function MO(a,o){if(!(o.state.loading&4)){var u=dd.get(a);if(u)var f=u.get(null);else{u=new Map,dd.set(a,u);for(var g=a.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<g.length;y++){var _=g[y];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(u.set(_.dataset.precedence,_),f=_)}f&&u.set(null,f)}g=o.instance,_=g.getAttribute("data-precedence"),y=u.get(_)||f,y===f&&u.set(null,g),u.set(_,g),this.count++,f=ud.bind(this),g.addEventListener("load",f),g.addEventListener("error",f),y?y.parentNode.insertBefore(g,y.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(g,a.firstChild)),o.state.loading|=4}}var Ql={$$typeof:E,Provider:null,Consumer:null,_currentValue:B,_currentValue2:B,_threadCount:0};function RO(a,o,u,f,g,y,_,C,z){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ua(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ua(0),this.hiddenUpdates=ua(null),this.identifierPrefix=f,this.onUncaughtError=g,this.onCaughtError=y,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=z,this.incompleteTransitions=new Map}function Aw(a,o,u,f,g,y,_,C,z,G,Q,ie){return a=new RO(a,o,u,_,z,G,Q,ie,C),o=1,y===!0&&(o|=24),y=pi(3,null,null,o),a.current=y,y.stateNode=a,o=Yf(),o.refCount++,a.pooledCache=o,o.refCount++,y.memoizedState={element:f,isDehydrated:u,cache:o},Jf(y),a}function Sw(a){return a?(a=to,a):to}function _w(a,o,u,f,g,y){g=Sw(g),f.context===null?f.context=g:f.pendingContext=g,f=ya(o),f.payload={element:u},y=y===void 0?null:y,y!==null&&(f.callback=y),u=ba(a,f,o),u!==null&&(ai(u,a,o),Dl(u,a,o))}function Ew(a,o){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var u=a.retryLane;a.retryLane=u!==0&&u<o?u:o}}function gm(a,o){Ew(a,o),(a=a.alternate)&&Ew(a,o)}function Tw(a){if(a.tag===13||a.tag===31){var o=ir(a,67108864);o!==null&&ai(o,a,67108864),gm(a,67108864)}}function Cw(a){if(a.tag===13||a.tag===31){var o=bi();o=Ur(o);var u=ir(a,o);u!==null&&ai(u,a,o),gm(a,o)}}var fd=!0;function DO(a,o,u,f){var g=N.T;N.T=null;var y=U.p;try{U.p=2,vm(a,o,u,f)}finally{U.p=y,N.T=g}}function OO(a,o,u,f){var g=N.T;N.T=null;var y=U.p;try{U.p=8,vm(a,o,u,f)}finally{U.p=y,N.T=g}}function vm(a,o,u,f){if(fd){var g=ym(f);if(g===null)im(a,o,f,pd,u),Mw(a,f);else if(PO(g,a,o,u,f))f.stopPropagation();else if(Mw(a,f),o&4&&-1<NO.indexOf(a)){for(;g!==null;){var y=Hr(g);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var _=cs(y.pendingLanes);if(_!==0){var C=y;for(C.pendingLanes|=2,C.entangledLanes|=2;_;){var z=1<<31-Qt(_);C.entanglements[1]|=z,_&=~z}fs(y),(Ke&6)===0&&(Wu=En()+500,Zl(0))}}break;case 31:case 13:C=ir(y,2),C!==null&&ai(C,y,2),Ju(),gm(y,2)}if(y=ym(f),y===null&&im(a,o,f,pd,u),y===g)break;g=y}g!==null&&f.stopPropagation()}else im(a,o,f,null,u)}}function ym(a){return a=xf(a),bm(a)}var pd=null;function bm(a){if(pd=null,a=$r(a),a!==null){var o=r(a);if(o===null)a=null;else{var u=o.tag;if(u===13){if(a=l(o),a!==null)return a;a=null}else if(u===31){if(a=c(o),a!==null)return a;a=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;a=null}else o!==a&&(a=null)}}return pd=a,null}function kw(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ue()){case _e:return 2;case rt:return 8;case ot:case Pt:return 32;case Jt:return 268435456;default:return 32}default:return 32}}var xm=!1,Ra=null,Da=null,Oa=null,ec=new Map,tc=new Map,Na=[],NO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Mw(a,o){switch(a){case"focusin":case"focusout":Ra=null;break;case"dragenter":case"dragleave":Da=null;break;case"mouseover":case"mouseout":Oa=null;break;case"pointerover":case"pointerout":ec.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":tc.delete(o.pointerId)}}function nc(a,o,u,f,g,y){return a===null||a.nativeEvent!==y?(a={blockedOn:o,domEventName:u,eventSystemFlags:f,nativeEvent:y,targetContainers:[g]},o!==null&&(o=Hr(o),o!==null&&Tw(o)),a):(a.eventSystemFlags|=f,o=a.targetContainers,g!==null&&o.indexOf(g)===-1&&o.push(g),a)}function PO(a,o,u,f,g){switch(o){case"focusin":return Ra=nc(Ra,a,o,u,f,g),!0;case"dragenter":return Da=nc(Da,a,o,u,f,g),!0;case"mouseover":return Oa=nc(Oa,a,o,u,f,g),!0;case"pointerover":var y=g.pointerId;return ec.set(y,nc(ec.get(y)||null,a,o,u,f,g)),!0;case"gotpointercapture":return y=g.pointerId,tc.set(y,nc(tc.get(y)||null,a,o,u,f,g)),!0}return!1}function Rw(a){var o=$r(a.target);if(o!==null){var u=r(o);if(u!==null){if(o=u.tag,o===13){if(o=l(u),o!==null){a.blockedOn=o,Hy(a.priority,function(){Cw(u)});return}}else if(o===31){if(o=c(u),o!==null){a.blockedOn=o,Hy(a.priority,function(){Cw(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){a.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}a.blockedOn=null}function md(a){if(a.blockedOn!==null)return!1;for(var o=a.targetContainers;0<o.length;){var u=ym(a.nativeEvent);if(u===null){u=a.nativeEvent;var f=new u.constructor(u.type,u);bf=f,u.target.dispatchEvent(f),bf=null}else return o=Hr(u),o!==null&&Tw(o),a.blockedOn=u,!1;o.shift()}return!0}function Dw(a,o,u){md(a)&&u.delete(o)}function IO(){xm=!1,Ra!==null&&md(Ra)&&(Ra=null),Da!==null&&md(Da)&&(Da=null),Oa!==null&&md(Oa)&&(Oa=null),ec.forEach(Dw),tc.forEach(Dw)}function gd(a,o){a.blockedOn===o&&(a.blockedOn=null,xm||(xm=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,IO)))}var vd=null;function Ow(a){vd!==a&&(vd=a,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){vd===a&&(vd=null);for(var o=0;o<a.length;o+=3){var u=a[o],f=a[o+1],g=a[o+2];if(typeof f!="function"){if(bm(f||u)===null)continue;break}var y=Hr(u);y!==null&&(a.splice(o,3),o-=3,yp(y,{pending:!0,data:g,method:u.method,action:f},f,g))}}))}function To(a){function o(z){return gd(z,a)}Ra!==null&&gd(Ra,a),Da!==null&&gd(Da,a),Oa!==null&&gd(Oa,a),ec.forEach(o),tc.forEach(o);for(var u=0;u<Na.length;u++){var f=Na[u];f.blockedOn===a&&(f.blockedOn=null)}for(;0<Na.length&&(u=Na[0],u.blockedOn===null);)Rw(u),u.blockedOn===null&&Na.shift();if(u=(a.ownerDocument||a).$$reactFormReplay,u!=null)for(f=0;f<u.length;f+=3){var g=u[f],y=u[f+1],_=g[Qn]||null;if(typeof y=="function")_||Ow(u);else if(_){var C=null;if(y&&y.hasAttribute("formAction")){if(g=y,_=y[Qn]||null)C=_.formAction;else if(bm(g)!==null)continue}else C=_.action;typeof C=="function"?u[f+1]=C:(u.splice(f,3),f-=3),Ow(u)}}}function Nw(){function a(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(_){return g=_})},focusReset:"manual",scroll:"manual"})}function o(){g!==null&&(g(),g=null),f||setTimeout(u,20)}function u(){if(!f&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var f=!1,g=null;return navigation.addEventListener("navigate",a),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(u,100),function(){f=!0,navigation.removeEventListener("navigate",a),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),g!==null&&(g(),g=null)}}}function wm(a){this._internalRoot=a}yd.prototype.render=wm.prototype.render=function(a){var o=this._internalRoot;if(o===null)throw Error(i(409));var u=o.current,f=bi();_w(u,f,a,o,null,null)},yd.prototype.unmount=wm.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var o=a.containerInfo;_w(a.current,2,null,a,null,null),Ju(),o[Vr]=null}};function yd(a){this._internalRoot=a}yd.prototype.unstable_scheduleHydration=function(a){if(a){var o=hf();a={blockedOn:null,target:a,priority:o};for(var u=0;u<Na.length&&o!==0&&o<Na[u].priority;u++);Na.splice(u,0,a),u===0&&Rw(a)}};var Pw=e.version;if(Pw!=="19.2.4")throw Error(i(527,Pw,"19.2.4"));U.findDOMNode=function(a){var o=a._reactInternals;if(o===void 0)throw typeof a.render=="function"?Error(i(188)):(a=Object.keys(a).join(","),Error(i(268,a)));return a=h(o),a=a!==null?p(a):null,a=a===null?null:a.stateNode,a};var LO={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:N,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bd.isDisabled&&bd.supportsFiber)try{Zi=bd.inject(LO),un=bd}catch{}}return sc.createRoot=function(a,o){if(!s(a))throw Error(i(299));var u=!1,f="",g=U0,y=V0,_=$0;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(y=o.onCaughtError),o.onRecoverableError!==void 0&&(_=o.onRecoverableError)),o=Aw(a,1,!1,null,null,u,f,null,g,y,_,Nw),a[Vr]=o.current,nm(a),new wm(o)},sc.hydrateRoot=function(a,o,u){if(!s(a))throw Error(i(299));var f=!1,g="",y=U0,_=V0,C=$0,z=null;return u!=null&&(u.unstable_strictMode===!0&&(f=!0),u.identifierPrefix!==void 0&&(g=u.identifierPrefix),u.onUncaughtError!==void 0&&(y=u.onUncaughtError),u.onCaughtError!==void 0&&(_=u.onCaughtError),u.onRecoverableError!==void 0&&(C=u.onRecoverableError),u.formState!==void 0&&(z=u.formState)),o=Aw(a,1,!0,o,u??null,f,g,z,y,_,C,Nw),o.context=Sw(null),u=o.current,f=bi(),f=Ur(f),g=ya(f),g.callback=null,ba(u,g,f),u=f,o.current.lanes=u,It(o,u),fs(o),a[Vr]=o.current,nm(a),new yd(o)},sc.version="19.2.4",sc}var qw;function qO(){if(qw)return Em.exports;qw=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Em.exports=GO(),Em.exports}var ZO=qO();const Sv=I.createContext({});function Yc(n){const e=I.useRef(null);return e.current===null&&(e.current=n()),e.current}const fE=typeof window<"u",_v=fE?I.useLayoutEffect:I.useEffect,jh=I.createContext(null);function Ev(n,e){n.indexOf(e)===-1&&n.push(e)}function th(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Ts=(n,e,t)=>t>e?e:t<n?n:t;let Tv=()=>{};const sa={},pE=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function mE(n){return typeof n=="object"&&n!==null}const gE=n=>/^0[^.\s]+$/u.test(n);function Cv(n){let e;return()=>(e===void 0&&(e=n()),e)}const Vi=n=>n,YO=(n,e)=>t=>e(n(t)),Xc=(...n)=>n.reduce(YO),Cc=(n,e,t)=>{const i=e-n;return i===0?1:(t-n)/i};class kv{constructor(){this.subscriptions=[]}add(e){return Ev(this.subscriptions,e),()=>th(this.subscriptions,e)}notify(e,t,i){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,t,i);else for(let r=0;r<s;r++){const l=this.subscriptions[r];l&&l(e,t,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const is=n=>n*1e3,Ui=n=>n/1e3;function vE(n,e){return e?n*(1e3/e):0}const yE=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,XO=1e-7,WO=12;function KO(n,e,t,i,s){let r,l,c=0;do l=e+(t-e)/2,r=yE(l,i,s)-n,r>0?t=l:e=l;while(Math.abs(r)>XO&&++c<WO);return l}function Wc(n,e,t,i){if(n===e&&t===i)return Vi;const s=r=>KO(r,0,1,n,t);return r=>r===0||r===1?r:yE(s(r),e,i)}const bE=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,xE=n=>e=>1-n(1-e),wE=Wc(.33,1.53,.69,.99),Mv=xE(wE),AE=bE(Mv),SE=n=>(n*=2)<1?.5*Mv(n):.5*(2-Math.pow(2,-10*(n-1))),Rv=n=>1-Math.sin(Math.acos(n)),_E=xE(Rv),EE=bE(Rv),JO=Wc(.42,0,1,1),QO=Wc(0,0,.58,1),TE=Wc(.42,0,.58,1),eN=n=>Array.isArray(n)&&typeof n[0]!="number",CE=n=>Array.isArray(n)&&typeof n[0]=="number",tN={linear:Vi,easeIn:JO,easeInOut:TE,easeOut:QO,circIn:Rv,circInOut:EE,circOut:_E,backIn:Mv,backInOut:AE,backOut:wE,anticipate:SE},nN=n=>typeof n=="string",Zw=n=>{if(CE(n)){Tv(n.length===4);const[e,t,i,s]=n;return Wc(e,t,i,s)}else if(nN(n))return tN[n];return n},xd=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function iN(n,e){let t=new Set,i=new Set,s=!1,r=!1;const l=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function d(p){l.has(p)&&(h.schedule(p),n()),p(c)}const h={schedule:(p,m=!1,v=!1)=>{const w=v&&s?t:i;return m&&l.add(p),w.has(p)||w.add(p),p},cancel:p=>{i.delete(p),l.delete(p)},process:p=>{if(c=p,s){r=!0;return}s=!0,[t,i]=[i,t],t.forEach(d),t.clear(),s=!1,r&&(r=!1,h.process(p))}};return h}const sN=40;function kE(n,e){let t=!1,i=!0;const s={delta:0,timestamp:0,isProcessing:!1},r=()=>t=!0,l=xd.reduce((E,M)=>(E[M]=iN(r),E),{}),{setup:c,read:d,resolveKeyframes:h,preUpdate:p,update:m,preRender:v,render:b,postRender:w}=l,x=()=>{const E=sa.useManualTiming?s.timestamp:performance.now();t=!1,sa.useManualTiming||(s.delta=i?1e3/60:Math.max(Math.min(E-s.timestamp,sN),1)),s.timestamp=E,s.isProcessing=!0,c.process(s),d.process(s),h.process(s),p.process(s),m.process(s),v.process(s),b.process(s),w.process(s),s.isProcessing=!1,t&&e&&(i=!1,n(x))},A=()=>{t=!0,i=!0,s.isProcessing||n(x)};return{schedule:xd.reduce((E,M)=>{const R=l[M];return E[M]=(O,L=!1,D=!1)=>(t||A(),R.schedule(O,L,D)),E},{}),cancel:E=>{for(let M=0;M<xd.length;M++)l[xd[M]].cancel(E)},state:s,steps:l}}const{schedule:ht,cancel:aa,state:On,steps:Mm}=kE(typeof requestAnimationFrame<"u"?requestAnimationFrame:Vi,!0);let Hd;function aN(){Hd=void 0}const Hn={now:()=>(Hd===void 0&&Hn.set(On.isProcessing||sa.useManualTiming?On.timestamp:performance.now()),Hd),set:n=>{Hd=n,queueMicrotask(aN)}},ME=n=>e=>typeof e=="string"&&e.startsWith(n),RE=ME("--"),rN=ME("var(--"),Dv=n=>rN(n)?oN.test(n.split("/*")[0].trim()):!1,oN=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function Yw(n){return typeof n!="string"?!1:n.split("/*")[0].includes("var(--")}const ol={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},kc={...ol,transform:n=>Ts(0,1,n)},wd={...ol,default:1},bc=n=>Math.round(n*1e5)/1e5,Ov=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function lN(n){return n==null}const cN=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Nv=(n,e)=>t=>!!(typeof t=="string"&&cN.test(t)&&t.startsWith(n)||e&&!lN(t)&&Object.prototype.hasOwnProperty.call(t,e)),DE=(n,e,t)=>i=>{if(typeof i!="string")return i;const[s,r,l,c]=i.match(Ov);return{[n]:parseFloat(s),[e]:parseFloat(r),[t]:parseFloat(l),alpha:c!==void 0?parseFloat(c):1}},uN=n=>Ts(0,255,n),Rm={...ol,transform:n=>Math.round(uN(n))},wr={test:Nv("rgb","red"),parse:DE("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:i=1})=>"rgba("+Rm.transform(n)+", "+Rm.transform(e)+", "+Rm.transform(t)+", "+bc(kc.transform(i))+")"};function dN(n){let e="",t="",i="",s="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),i=n.substring(5,7),s=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),i=n.substring(3,4),s=n.substring(4,5),e+=e,t+=t,i+=i,s+=s),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(i,16),alpha:s?parseInt(s,16)/255:1}}const xg={test:Nv("#"),parse:dN,transform:wr.transform},Kc=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),La=Kc("deg"),Es=Kc("%"),ye=Kc("px"),hN=Kc("vh"),fN=Kc("vw"),Xw={...Es,parse:n=>Es.parse(n)/100,transform:n=>Es.transform(n*100)},Io={test:Nv("hsl","hue"),parse:DE("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:i=1})=>"hsla("+Math.round(n)+", "+Es.transform(bc(e))+", "+Es.transform(bc(t))+", "+bc(kc.transform(i))+")"},on={test:n=>wr.test(n)||xg.test(n)||Io.test(n),parse:n=>wr.test(n)?wr.parse(n):Io.test(n)?Io.parse(n):xg.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?wr.transform(n):Io.transform(n),getAnimatableNone:n=>{const e=on.parse(n);return e.alpha=0,on.transform(e)}},pN=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function mN(n){return isNaN(n)&&typeof n=="string"&&(n.match(Ov)?.length||0)+(n.match(pN)?.length||0)>0}const OE="number",NE="color",gN="var",vN="var(",Ww="${}",yN=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Mc(n){const e=n.toString(),t=[],i={color:[],number:[],var:[]},s=[];let r=0;const c=e.replace(yN,d=>(on.test(d)?(i.color.push(r),s.push(NE),t.push(on.parse(d))):d.startsWith(vN)?(i.var.push(r),s.push(gN),t.push(d)):(i.number.push(r),s.push(OE),t.push(parseFloat(d))),++r,Ww)).split(Ww);return{values:t,split:c,indexes:i,types:s}}function PE(n){return Mc(n).values}function IE(n){const{split:e,types:t}=Mc(n),i=e.length;return s=>{let r="";for(let l=0;l<i;l++)if(r+=e[l],s[l]!==void 0){const c=t[l];c===OE?r+=bc(s[l]):c===NE?r+=on.transform(s[l]):r+=s[l]}return r}}const bN=n=>typeof n=="number"?0:on.test(n)?on.getAnimatableNone(n):n;function xN(n){const e=PE(n);return IE(n)(e.map(bN))}const Fa={test:mN,parse:PE,createTransformer:IE,getAnimatableNone:xN};function Dm(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function wN({hue:n,saturation:e,lightness:t,alpha:i}){n/=360,e/=100,t/=100;let s=0,r=0,l=0;if(!e)s=r=l=t;else{const c=t<.5?t*(1+e):t+e-t*e,d=2*t-c;s=Dm(d,c,n+1/3),r=Dm(d,c,n),l=Dm(d,c,n-1/3)}return{red:Math.round(s*255),green:Math.round(r*255),blue:Math.round(l*255),alpha:i}}function nh(n,e){return t=>t>0?e:n}const jt=(n,e,t)=>n+(e-n)*t,Om=(n,e,t)=>{const i=n*n,s=t*(e*e-i)+i;return s<0?0:Math.sqrt(s)},AN=[xg,wr,Io],SN=n=>AN.find(e=>e.test(n));function Kw(n){const e=SN(n);if(!e)return!1;let t=e.parse(n);return e===Io&&(t=wN(t)),t}const Jw=(n,e)=>{const t=Kw(n),i=Kw(e);if(!t||!i)return nh(n,e);const s={...t};return r=>(s.red=Om(t.red,i.red,r),s.green=Om(t.green,i.green,r),s.blue=Om(t.blue,i.blue,r),s.alpha=jt(t.alpha,i.alpha,r),wr.transform(s))},wg=new Set(["none","hidden"]);function _N(n,e){return wg.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function EN(n,e){return t=>jt(n,e,t)}function Pv(n){return typeof n=="number"?EN:typeof n=="string"?Dv(n)?nh:on.test(n)?Jw:kN:Array.isArray(n)?LE:typeof n=="object"?on.test(n)?Jw:TN:nh}function LE(n,e){const t=[...n],i=t.length,s=n.map((r,l)=>Pv(r)(r,e[l]));return r=>{for(let l=0;l<i;l++)t[l]=s[l](r);return t}}function TN(n,e){const t={...n,...e},i={};for(const s in t)n[s]!==void 0&&e[s]!==void 0&&(i[s]=Pv(n[s])(n[s],e[s]));return s=>{for(const r in i)t[r]=i[r](s);return t}}function CN(n,e){const t=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const r=e.types[s],l=n.indexes[r][i[r]],c=n.values[l]??0;t[s]=c,i[r]++}return t}const kN=(n,e)=>{const t=Fa.createTransformer(e),i=Mc(n),s=Mc(e);return i.indexes.var.length===s.indexes.var.length&&i.indexes.color.length===s.indexes.color.length&&i.indexes.number.length>=s.indexes.number.length?wg.has(n)&&!s.values.length||wg.has(e)&&!i.values.length?_N(n,e):Xc(LE(CN(i,s),s.values),t):nh(n,e)};function zE(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?jt(n,e,t):Pv(n)(n,e)}const MN=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>ht.update(e,t),stop:()=>aa(e),now:()=>On.isProcessing?On.timestamp:Hn.now()}},jE=(n,e,t=10)=>{let i="";const s=Math.max(Math.round(e/t),2);for(let r=0;r<s;r++)i+=Math.round(n(r/(s-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},ih=2e4;function Iv(n){let e=0;const t=50;let i=n.next(e);for(;!i.done&&e<ih;)e+=t,i=n.next(e);return e>=ih?1/0:e}function RN(n,e=100,t){const i=t({...n,keyframes:[0,e]}),s=Math.min(Iv(i),ih);return{type:"keyframes",ease:r=>i.next(s*r).value/e,duration:Ui(s)}}const DN=5;function BE(n,e,t){const i=Math.max(e-DN,0);return vE(t-n(i),e-i)}const Ht={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Nm=.001;function ON({duration:n=Ht.duration,bounce:e=Ht.bounce,velocity:t=Ht.velocity,mass:i=Ht.mass}){let s,r,l=1-e;l=Ts(Ht.minDamping,Ht.maxDamping,l),n=Ts(Ht.minDuration,Ht.maxDuration,Ui(n)),l<1?(s=h=>{const p=h*l,m=p*n,v=p-t,b=Ag(h,l),w=Math.exp(-m);return Nm-v/b*w},r=h=>{const m=h*l*n,v=m*t+t,b=Math.pow(l,2)*Math.pow(h,2)*n,w=Math.exp(-m),x=Ag(Math.pow(h,2),l);return(-s(h)+Nm>0?-1:1)*((v-b)*w)/x}):(s=h=>{const p=Math.exp(-h*n),m=(h-t)*n+1;return-Nm+p*m},r=h=>{const p=Math.exp(-h*n),m=(t-h)*(n*n);return p*m});const c=5/n,d=PN(s,r,c);if(n=is(n),isNaN(d))return{stiffness:Ht.stiffness,damping:Ht.damping,duration:n};{const h=Math.pow(d,2)*i;return{stiffness:h,damping:l*2*Math.sqrt(i*h),duration:n}}}const NN=12;function PN(n,e,t){let i=t;for(let s=1;s<NN;s++)i=i-n(i)/e(i);return i}function Ag(n,e){return n*Math.sqrt(1-e*e)}const IN=["duration","bounce"],LN=["stiffness","damping","mass"];function Qw(n,e){return e.some(t=>n[t]!==void 0)}function zN(n){let e={velocity:Ht.velocity,stiffness:Ht.stiffness,damping:Ht.damping,mass:Ht.mass,isResolvedFromDuration:!1,...n};if(!Qw(n,LN)&&Qw(n,IN))if(n.visualDuration){const t=n.visualDuration,i=2*Math.PI/(t*1.2),s=i*i,r=2*Ts(.05,1,1-(n.bounce||0))*Math.sqrt(s);e={...e,mass:Ht.mass,stiffness:s,damping:r}}else{const t=ON(n);e={...e,...t,mass:Ht.mass},e.isResolvedFromDuration=!0}return e}function sh(n=Ht.visualDuration,e=Ht.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:i,restDelta:s}=t;const r=t.keyframes[0],l=t.keyframes[t.keyframes.length-1],c={done:!1,value:r},{stiffness:d,damping:h,mass:p,duration:m,velocity:v,isResolvedFromDuration:b}=zN({...t,velocity:-Ui(t.velocity||0)}),w=v||0,x=h/(2*Math.sqrt(d*p)),A=l-r,S=Ui(Math.sqrt(d/p)),T=Math.abs(A)<5;i||(i=T?Ht.restSpeed.granular:Ht.restSpeed.default),s||(s=T?Ht.restDelta.granular:Ht.restDelta.default);let E;if(x<1){const R=Ag(S,x);E=O=>{const L=Math.exp(-x*S*O);return l-L*((w+x*S*A)/R*Math.sin(R*O)+A*Math.cos(R*O))}}else if(x===1)E=R=>l-Math.exp(-S*R)*(A+(w+S*A)*R);else{const R=S*Math.sqrt(x*x-1);E=O=>{const L=Math.exp(-x*S*O),D=Math.min(R*O,300);return l-L*((w+x*S*A)*Math.sinh(D)+R*A*Math.cosh(D))/R}}const M={calculatedDuration:b&&m||null,next:R=>{const O=E(R);if(b)c.done=R>=m;else{let L=R===0?w:0;x<1&&(L=R===0?is(w):BE(E,R,O));const D=Math.abs(L)<=i,$=Math.abs(l-O)<=s;c.done=D&&$}return c.value=c.done?l:O,c},toString:()=>{const R=Math.min(Iv(M),ih),O=jE(L=>M.next(R*L).value,R,30);return R+"ms "+O},toTransition:()=>{}};return M}sh.applyToOptions=n=>{const e=RN(n,100,sh);return n.ease=e.ease,n.duration=is(e.duration),n.type="keyframes",n};function Sg({keyframes:n,velocity:e=0,power:t=.8,timeConstant:i=325,bounceDamping:s=10,bounceStiffness:r=500,modifyTarget:l,min:c,max:d,restDelta:h=.5,restSpeed:p}){const m=n[0],v={done:!1,value:m},b=D=>c!==void 0&&D<c||d!==void 0&&D>d,w=D=>c===void 0?d:d===void 0||Math.abs(c-D)<Math.abs(d-D)?c:d;let x=t*e;const A=m+x,S=l===void 0?A:l(A);S!==A&&(x=S-m);const T=D=>-x*Math.exp(-D/i),E=D=>S+T(D),M=D=>{const $=T(D),ee=E(D);v.done=Math.abs($)<=h,v.value=v.done?S:ee};let R,O;const L=D=>{b(v.value)&&(R=D,O=sh({keyframes:[v.value,w(v.value)],velocity:BE(E,D,v.value),damping:s,stiffness:r,restDelta:h,restSpeed:p}))};return L(0),{calculatedDuration:null,next:D=>{let $=!1;return!O&&R===void 0&&($=!0,M(D),L(D)),R!==void 0&&D>=R?O.next(D-R):(!$&&M(D),v)}}}function jN(n,e,t){const i=[],s=t||sa.mix||zE,r=n.length-1;for(let l=0;l<r;l++){let c=s(n[l],n[l+1]);if(e){const d=Array.isArray(e)?e[l]||Vi:e;c=Xc(d,c)}i.push(c)}return i}function FE(n,e,{clamp:t=!0,ease:i,mixer:s}={}){const r=n.length;if(Tv(r===e.length),r===1)return()=>e[0];if(r===2&&e[0]===e[1])return()=>e[1];const l=n[0]===n[1];n[0]>n[r-1]&&(n=[...n].reverse(),e=[...e].reverse());const c=jN(e,i,s),d=c.length,h=p=>{if(l&&p<n[0])return e[0];let m=0;if(d>1)for(;m<n.length-2&&!(p<n[m+1]);m++);const v=Cc(n[m],n[m+1],p);return c[m](v)};return t?p=>h(Ts(n[0],n[r-1],p)):h}function BN(n,e){const t=n[n.length-1];for(let i=1;i<=e;i++){const s=Cc(0,e,i);n.push(jt(t,1,s))}}function FN(n){const e=[0];return BN(e,n.length-1),e}function UN(n,e){return n.map(t=>t*e)}function VN(n,e){return n.map(()=>e||TE).splice(0,n.length-1)}function xc({duration:n=300,keyframes:e,times:t,ease:i="easeInOut"}){const s=eN(i)?i.map(Zw):Zw(i),r={done:!1,value:e[0]},l=UN(t&&t.length===e.length?t:FN(e),n),c=FE(l,e,{ease:Array.isArray(s)?s:VN(e,s)});return{calculatedDuration:n,next:d=>(r.value=c(d),r.done=d>=n,r)}}const $N=n=>n!==null;function Lv(n,{repeat:e,repeatType:t="loop"},i,s=1){const r=n.filter($N),c=s<0||e&&t!=="loop"&&e%2===1?0:r.length-1;return!c||i===void 0?r[c]:i}const HN={decay:Sg,inertia:Sg,tween:xc,keyframes:xc,spring:sh};function UE(n){typeof n.type=="string"&&(n.type=HN[n.type])}class zv{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const GN=n=>n/100;class Bh extends zv{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:t}=this.options;t&&t.updatedAt!==Hn.now()&&this.tick(Hn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;UE(e);const{type:t=xc,repeat:i=0,repeatDelay:s=0,repeatType:r,velocity:l=0}=e;let{keyframes:c}=e;const d=t||xc;d!==xc&&typeof c[0]!="number"&&(this.mixKeyframes=Xc(GN,zE(c[0],c[1])),c=[0,100]);const h=d({...e,keyframes:c});r==="mirror"&&(this.mirroredGenerator=d({...e,keyframes:[...c].reverse(),velocity:-l})),h.calculatedDuration===null&&(h.calculatedDuration=Iv(h));const{calculatedDuration:p}=h;this.calculatedDuration=p,this.resolvedDuration=p+s,this.totalDuration=this.resolvedDuration*(i+1)-s,this.generator=h}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:i,totalDuration:s,mixKeyframes:r,mirroredGenerator:l,resolvedDuration:c,calculatedDuration:d}=this;if(this.startTime===null)return i.next(0);const{delay:h=0,keyframes:p,repeat:m,repeatType:v,repeatDelay:b,type:w,onUpdate:x,finalKeyframe:A}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const S=this.currentTime-h*(this.playbackSpeed>=0?1:-1),T=this.playbackSpeed>=0?S<0:S>s;this.currentTime=Math.max(S,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let E=this.currentTime,M=i;if(m){const D=Math.min(this.currentTime,s)/c;let $=Math.floor(D),ee=D%1;!ee&&D>=1&&(ee=1),ee===1&&$--,$=Math.min($,m+1),$%2&&(v==="reverse"?(ee=1-ee,b&&(ee-=b/c)):v==="mirror"&&(M=l)),E=Ts(0,1,ee)*c}const R=T?{done:!1,value:p[0]}:M.next(E);r&&(R.value=r(R.value));let{done:O}=R;!T&&d!==null&&(O=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const L=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&O);return L&&w!==Sg&&(R.value=Lv(p,this.options,A,this.speed)),x&&x(R.value),L&&this.finish(),R}then(e,t){return this.finished.then(e,t)}get duration(){return Ui(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Ui(e)}get time(){return Ui(this.currentTime)}set time(e){e=is(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Hn.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Ui(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=MN,startTime:t}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),this.options.onPlay?.();const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=t??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Hn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function qN(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const Ar=n=>n*180/Math.PI,_g=n=>{const e=Ar(Math.atan2(n[1],n[0]));return Eg(e)},ZN={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:_g,rotateZ:_g,skewX:n=>Ar(Math.atan(n[1])),skewY:n=>Ar(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},Eg=n=>(n=n%360,n<0&&(n+=360),n),eA=_g,tA=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),nA=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),YN={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:tA,scaleY:nA,scale:n=>(tA(n)+nA(n))/2,rotateX:n=>Eg(Ar(Math.atan2(n[6],n[5]))),rotateY:n=>Eg(Ar(Math.atan2(-n[2],n[0]))),rotateZ:eA,rotate:eA,skewX:n=>Ar(Math.atan(n[4])),skewY:n=>Ar(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function Tg(n){return n.includes("scale")?1:0}function Cg(n,e){if(!n||n==="none")return Tg(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,s;if(t)i=YN,s=t;else{const c=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=ZN,s=c}if(!s)return Tg(e);const r=i[e],l=s[1].split(",").map(WN);return typeof r=="function"?r(l):l[r]}const XN=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return Cg(t,e)};function WN(n){return parseFloat(n.trim())}const ll=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],cl=new Set(ll),iA=n=>n===ol||n===ye,KN=new Set(["x","y","z"]),JN=ll.filter(n=>!KN.has(n));function QN(n){const e=[];return JN.forEach(t=>{const i=n.getValue(t);i!==void 0&&(e.push([t,i.get()]),i.set(t.startsWith("scale")?1:0))}),e}const Ba={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>Cg(e,"x"),y:(n,{transform:e})=>Cg(e,"y")};Ba.translateX=Ba.x;Ba.translateY=Ba.y;const Mr=new Set;let kg=!1,Mg=!1,Rg=!1;function VE(){if(Mg){const n=Array.from(Mr).filter(i=>i.needsMeasurement),e=new Set(n.map(i=>i.element)),t=new Map;e.forEach(i=>{const s=QN(i);s.length&&(t.set(i,s),i.render())}),n.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const s=t.get(i);s&&s.forEach(([r,l])=>{i.getValue(r)?.set(l)})}),n.forEach(i=>i.measureEndState()),n.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}Mg=!1,kg=!1,Mr.forEach(n=>n.complete(Rg)),Mr.clear()}function $E(){Mr.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(Mg=!0)})}function eP(){Rg=!0,$E(),VE(),Rg=!1}class jv{constructor(e,t,i,s,r,l=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=i,this.motionValue=s,this.element=r,this.isAsync=l}scheduleResolve(){this.state="scheduled",this.isAsync?(Mr.add(this),kg||(kg=!0,ht.read($E),ht.resolveKeyframes(VE))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:i,motionValue:s}=this;if(e[0]===null){const r=s?.get(),l=e[e.length-1];if(r!==void 0)e[0]=r;else if(i&&t){const c=i.readValue(t,l);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=l),s&&r===void 0&&s.set(e[0])}qN(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Mr.delete(this)}cancel(){this.state==="scheduled"&&(Mr.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const tP=n=>n.startsWith("--");function nP(n,e,t){tP(e)?n.style.setProperty(e,t):n.style[e]=t}const iP=Cv(()=>window.ScrollTimeline!==void 0),sP={};function aP(n,e){const t=Cv(n);return()=>sP[e]??t()}const HE=aP(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),pc=([n,e,t,i])=>`cubic-bezier(${n}, ${e}, ${t}, ${i})`,sA={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:pc([0,.65,.55,1]),circOut:pc([.55,0,1,.45]),backIn:pc([.31,.01,.66,-.59]),backOut:pc([.33,1.53,.69,.99])};function GE(n,e){if(n)return typeof n=="function"?HE()?jE(n,e):"ease-out":CE(n)?pc(n):Array.isArray(n)?n.map(t=>GE(t,e)||sA.easeOut):sA[n]}function rP(n,e,t,{delay:i=0,duration:s=300,repeat:r=0,repeatType:l="loop",ease:c="easeOut",times:d}={},h=void 0){const p={[e]:t};d&&(p.offset=d);const m=GE(c,s);Array.isArray(m)&&(p.easing=m);const v={delay:i,duration:s,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:r+1,direction:l==="reverse"?"alternate":"normal"};return h&&(v.pseudoElement=h),n.animate(p,v)}function qE(n){return typeof n=="function"&&"applyToOptions"in n}function oP({type:n,...e}){return qE(n)&&HE()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class ZE extends zv{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:t,name:i,keyframes:s,pseudoElement:r,allowFlatten:l=!1,finalKeyframe:c,onComplete:d}=e;this.isPseudoElement=!!r,this.allowFlatten=l,this.options=e,Tv(typeof e.type!="string");const h=oP(e);this.animation=rP(t,i,s,h,r),h.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!r){const p=Lv(s,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(p):nP(t,i,p),this.animation.cancel()}d?.(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){const e=this.options?.element;!this.isPseudoElement&&e?.isConnected&&this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return Ui(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Ui(e)}get time(){return Ui(Number(this.animation.currentTime)||0)}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=is(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&iP()?(this.animation.timeline=e,Vi):t(this)}}const YE={anticipate:SE,backInOut:AE,circInOut:EE};function lP(n){return n in YE}function cP(n){typeof n.ease=="string"&&lP(n.ease)&&(n.ease=YE[n.ease])}const Pm=10;class uP extends ZE{constructor(e){cP(e),UE(e),super(e),e.startTime!==void 0&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:i,onComplete:s,element:r,...l}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const c=new Bh({...l,autoplay:!1}),d=Math.max(Pm,Hn.now()-this.startTime),h=Ts(0,Pm,d-Pm);t.setWithVelocity(c.sample(Math.max(0,d-h)).value,c.sample(d).value,h),c.stop()}}const aA=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(Fa.test(n)||n==="0")&&!n.startsWith("url("));function dP(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function hP(n,e,t,i){const s=n[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const r=n[n.length-1],l=aA(s,e),c=aA(r,e);return!l||!c?!1:dP(n)||(t==="spring"||qE(t))&&i}function Dg(n){n.duration=0,n.type="keyframes"}const fP=new Set(["opacity","clipPath","filter","transform"]),pP=Cv(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function mP(n){const{motionValue:e,name:t,repeatDelay:i,repeatType:s,damping:r,type:l}=n;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:h}=e.owner.getProps();return pP()&&t&&fP.has(t)&&(t!=="transform"||!h)&&!d&&!i&&s!=="mirror"&&r!==0&&l!=="inertia"}const gP=40;class vP extends zv{constructor({autoplay:e=!0,delay:t=0,type:i="keyframes",repeat:s=0,repeatDelay:r=0,repeatType:l="loop",keyframes:c,name:d,motionValue:h,element:p,...m}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Hn.now();const v={autoplay:e,delay:t,type:i,repeat:s,repeatDelay:r,repeatType:l,name:d,motionValue:h,element:p,...m},b=p?.KeyframeResolver||jv;this.keyframeResolver=new b(c,(w,x,A)=>this.onKeyframesResolved(w,x,v,!A),d,h,p),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,i,s){this.keyframeResolver=void 0;const{name:r,type:l,velocity:c,delay:d,isHandoff:h,onUpdate:p}=i;this.resolvedAt=Hn.now(),hP(e,r,l,c)||((sa.instantAnimations||!d)&&p?.(Lv(e,i,t)),e[0]=e[e.length-1],Dg(i),i.repeat=0);const v={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>gP?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...i,keyframes:e},b=!h&&mP(v),w=v.motionValue?.owner?.current,x=b?new uP({...v,element:w}):new Bh(v);x.finished.then(()=>{this.notifyFinished()}).catch(Vi),this.pendingTimeline&&(this.stopTimeline=x.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=x}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),eP()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}function XE(n,e,t,i=0,s=1){const r=Array.from(n).sort((h,p)=>h.sortNodePosition(p)).indexOf(e),l=n.size,c=(l-1)*i;return typeof t=="function"?t(r,l):s===1?r*i:c-r*i}const yP=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function bP(n){const e=yP.exec(n);if(!e)return[,];const[,t,i,s]=e;return[`--${t??i}`,s]}function WE(n,e,t=1){const[i,s]=bP(n);if(!i)return;const r=window.getComputedStyle(e).getPropertyValue(i);if(r){const l=r.trim();return pE(l)?parseFloat(l):l}return Dv(s)?WE(s,e,t+1):s}const xP={type:"spring",stiffness:500,damping:25,restSpeed:10},wP=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),AP={type:"keyframes",duration:.8},SP={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},_P=(n,{keyframes:e})=>e.length>2?AP:cl.has(n)?n.startsWith("scale")?wP(e[1]):xP:SP,EP=n=>n!==null;function TP(n,{repeat:e,repeatType:t="loop"},i){const s=n.filter(EP),r=e&&t!=="loop"&&e%2===1?0:s.length-1;return s[r]}function KE(n,e){if(n?.inherit&&e){const{inherit:t,...i}=n;return{...e,...i}}return n}function Bv(n,e){const t=n?.[e]??n?.default??n;return t!==n?KE(t,n):t}function CP({when:n,delay:e,delayChildren:t,staggerChildren:i,staggerDirection:s,repeat:r,repeatType:l,repeatDelay:c,from:d,elapsed:h,...p}){return!!Object.keys(p).length}const Fv=(n,e,t,i={},s,r)=>l=>{const c=Bv(i,n)||{},d=c.delay||i.delay||0;let{elapsed:h=0}=i;h=h-is(d);const p={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...c,delay:-h,onUpdate:v=>{e.set(v),c.onUpdate&&c.onUpdate(v)},onComplete:()=>{l(),c.onComplete&&c.onComplete()},name:n,motionValue:e,element:r?void 0:s};CP(c)||Object.assign(p,_P(n,p)),p.duration&&(p.duration=is(p.duration)),p.repeatDelay&&(p.repeatDelay=is(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let m=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(Dg(p),p.delay===0&&(m=!0)),(sa.instantAnimations||sa.skipAnimations||s?.shouldSkipAnimations)&&(m=!0,Dg(p),p.delay=0),p.allowFlatten=!c.type&&!c.ease,m&&!r&&e.get()!==void 0){const v=TP(p.keyframes,c);if(v!==void 0){ht.update(()=>{p.onUpdate(v),p.onComplete()});return}}return c.isSync?new Bh(p):new vP(p)};function rA(n){const e=[{},{}];return n?.values.forEach((t,i)=>{e[0][i]=t.get(),e[1][i]=t.getVelocity()}),e}function Uv(n,e,t,i){if(typeof e=="function"){const[s,r]=rA(i);e=e(t!==void 0?t:n.custom,s,r)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[s,r]=rA(i);e=e(t!==void 0?t:n.custom,s,r)}return e}function qo(n,e,t){const i=n.getProps();return Uv(i,e,t!==void 0?t:i.custom,n)}const JE=new Set(["width","height","top","left","right","bottom",...ll]),oA=30,kP=n=>!isNaN(parseFloat(n)),wc={current:void 0};class MP{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=i=>{const s=Hn.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const r of this.dependents)r.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Hn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=kP(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new kv);const i=this.events[e].add(t);return e==="change"?()=>{i(),ht.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,i){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return wc.current&&wc.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=Hn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>oA)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,oA);return vE(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Rr(n,e){return new MP(n,e)}const Og=n=>Array.isArray(n);function RP(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,Rr(t))}function DP(n){return Og(n)?n[n.length-1]||0:n}function OP(n,e){const t=qo(n,e);let{transitionEnd:i={},transition:s={},...r}=t||{};r={...r,...i};for(const l in r){const c=DP(r[l]);RP(n,l,c)}}const An=n=>!!(n&&n.getVelocity);function NP(n){return!!(An(n)&&n.add)}function Ng(n,e){const t=n.getValue("willChange");if(NP(t))return t.add(e);if(!t&&sa.WillChange){const i=new sa.WillChange("auto");n.addValue("willChange",i),i.add(e)}}function Vv(n){return n.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`)}const PP="framerAppearId",QE="data-"+Vv(PP);function eT(n){return n.props[QE]}function IP({protectedKeys:n,needsAnimating:e},t){const i=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,i}function tT(n,e,{delay:t=0,transitionOverride:i,type:s}={}){let{transition:r,transitionEnd:l,...c}=e;const d=n.getDefaultTransition();r=r?KE(r,d):d;const h=r?.reduceMotion;i&&(r=i);const p=[],m=s&&n.animationState&&n.animationState.getState()[s];for(const v in c){const b=n.getValue(v,n.latestValues[v]??null),w=c[v];if(w===void 0||m&&IP(m,v))continue;const x={delay:t,...Bv(r||{},v)},A=b.get();if(A!==void 0&&!b.isAnimating&&!Array.isArray(w)&&w===A&&!x.velocity)continue;let S=!1;if(window.MotionHandoffAnimation){const M=eT(n);if(M){const R=window.MotionHandoffAnimation(M,v,ht);R!==null&&(x.startTime=R,S=!0)}}Ng(n,v);const T=h??n.shouldReduceMotion;b.start(Fv(v,b,w,T&&JE.has(v)?{type:!1}:x,n,S));const E=b.animation;E&&p.push(E)}if(l){const v=()=>ht.update(()=>{l&&OP(n,l)});p.length?Promise.all(p).then(v):v()}return p}function Pg(n,e,t={}){const i=qo(n,e,t.type==="exit"?n.presenceContext?.custom:void 0);let{transition:s=n.getDefaultTransition()||{}}=i||{};t.transitionOverride&&(s=t.transitionOverride);const r=i?()=>Promise.all(tT(n,i,t)):()=>Promise.resolve(),l=n.variantChildren&&n.variantChildren.size?(d=0)=>{const{delayChildren:h=0,staggerChildren:p,staggerDirection:m}=s;return LP(n,e,d,h,p,m,t)}:()=>Promise.resolve(),{when:c}=s;if(c){const[d,h]=c==="beforeChildren"?[r,l]:[l,r];return d().then(()=>h())}else return Promise.all([r(),l(t.delay)])}function LP(n,e,t=0,i=0,s=0,r=1,l){const c=[];for(const d of n.variantChildren)d.notify("AnimationStart",e),c.push(Pg(d,e,{...l,delay:t+(typeof i=="function"?0:i)+XE(n.variantChildren,d,i,s,r)}).then(()=>d.notify("AnimationComplete",e)));return Promise.all(c)}function zP(n,e,t={}){n.notify("AnimationStart",e);let i;if(Array.isArray(e)){const s=e.map(r=>Pg(n,r,t));i=Promise.all(s)}else if(typeof e=="string")i=Pg(n,e,t);else{const s=typeof e=="function"?qo(n,e,t.custom):e;i=Promise.all(tT(n,s,t))}return i.then(()=>{n.notify("AnimationComplete",e)})}const jP={test:n=>n==="auto",parse:n=>n},nT=n=>e=>e.test(n),iT=[ol,ye,Es,La,fN,hN,jP],lA=n=>iT.find(nT(n));function BP(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||gE(n):!0}const FP=new Set(["brightness","contrast","saturate","opacity"]);function UP(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[i]=t.match(Ov)||[];if(!i)return n;const s=t.replace(i,"");let r=FP.has(e)?1:0;return i!==t&&(r*=100),e+"("+r+s+")"}const VP=/\b([a-z-]*)\(.*?\)/gu,Ig={...Fa,getAnimatableNone:n=>{const e=n.match(VP);return e?e.map(UP).join(" "):n}},cA={...ol,transform:Math.round},$P={rotate:La,rotateX:La,rotateY:La,rotateZ:La,scale:wd,scaleX:wd,scaleY:wd,scaleZ:wd,skew:La,skewX:La,skewY:La,distance:ye,translateX:ye,translateY:ye,translateZ:ye,x:ye,y:ye,z:ye,perspective:ye,transformPerspective:ye,opacity:kc,originX:Xw,originY:Xw,originZ:ye},$v={borderWidth:ye,borderTopWidth:ye,borderRightWidth:ye,borderBottomWidth:ye,borderLeftWidth:ye,borderRadius:ye,borderTopLeftRadius:ye,borderTopRightRadius:ye,borderBottomRightRadius:ye,borderBottomLeftRadius:ye,width:ye,maxWidth:ye,height:ye,maxHeight:ye,top:ye,right:ye,bottom:ye,left:ye,inset:ye,insetBlock:ye,insetBlockStart:ye,insetBlockEnd:ye,insetInline:ye,insetInlineStart:ye,insetInlineEnd:ye,padding:ye,paddingTop:ye,paddingRight:ye,paddingBottom:ye,paddingLeft:ye,paddingBlock:ye,paddingBlockStart:ye,paddingBlockEnd:ye,paddingInline:ye,paddingInlineStart:ye,paddingInlineEnd:ye,margin:ye,marginTop:ye,marginRight:ye,marginBottom:ye,marginLeft:ye,marginBlock:ye,marginBlockStart:ye,marginBlockEnd:ye,marginInline:ye,marginInlineStart:ye,marginInlineEnd:ye,fontSize:ye,backgroundPositionX:ye,backgroundPositionY:ye,...$P,zIndex:cA,fillOpacity:kc,strokeOpacity:kc,numOctaves:cA},HP={...$v,color:on,backgroundColor:on,outlineColor:on,fill:on,stroke:on,borderColor:on,borderTopColor:on,borderRightColor:on,borderBottomColor:on,borderLeftColor:on,filter:Ig,WebkitFilter:Ig},sT=n=>HP[n];function aT(n,e){let t=sT(n);return t!==Ig&&(t=Fa),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const GP=new Set(["auto","none","0"]);function qP(n,e,t){let i=0,s;for(;i<n.length&&!s;){const r=n[i];typeof r=="string"&&!GP.has(r)&&Mc(r).values.length&&(s=n[i]),i++}if(s&&t)for(const r of e)n[r]=aT(t,s)}class ZP extends jv{constructor(e,t,i,s,r){super(e,t,i,s,r,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:i}=this;if(!t||!t.current)return;super.readKeyframes();for(let p=0;p<e.length;p++){let m=e[p];if(typeof m=="string"&&(m=m.trim(),Dv(m))){const v=WE(m,t.current);v!==void 0&&(e[p]=v),p===e.length-1&&(this.finalKeyframe=m)}}if(this.resolveNoneKeyframes(),!JE.has(i)||e.length!==2)return;const[s,r]=e,l=lA(s),c=lA(r),d=Yw(s),h=Yw(r);if(d!==h&&Ba[i]){this.needsMeasurement=!0;return}if(l!==c)if(iA(l)&&iA(c))for(let p=0;p<e.length;p++){const m=e[p];typeof m=="string"&&(e[p]=parseFloat(m))}else Ba[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,i=[];for(let s=0;s<e.length;s++)(e[s]===null||BP(e[s]))&&i.push(s);i.length&&qP(e,i,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ba[i](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const s=t[t.length-1];s!==void 0&&e.getValue(i,s).jump(s,!1)}measureEndState(){const{element:e,name:t,unresolvedKeyframes:i}=this;if(!e||!e.current)return;const s=e.getValue(t);s&&s.jump(this.measuredOrigin,!1);const r=i.length-1,l=i[r];i[r]=Ba[t](e.measureViewportBox(),window.getComputedStyle(e.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),this.removedTransforms?.length&&this.removedTransforms.forEach(([c,d])=>{e.getValue(c).set(d)}),this.resolveNoneKeyframes()}}const YP=new Set(["opacity","clipPath","filter","transform"]);function rT(n,e,t){if(n==null)return[];if(n instanceof EventTarget)return[n];if(typeof n=="string"){let i=document;const s=t?.[n]??i.querySelectorAll(n);return s?Array.from(s):[]}return Array.from(n).filter(i=>i!=null)}const oT=(n,e)=>e&&typeof n=="number"?e.transform(n):n;function Lg(n){return mE(n)&&"offsetHeight"in n}const{schedule:Hv}=kE(queueMicrotask,!1),ts={x:!1,y:!1};function lT(){return ts.x||ts.y}function XP(n){return n==="x"||n==="y"?ts[n]?null:(ts[n]=!0,()=>{ts[n]=!1}):ts.x||ts.y?null:(ts.x=ts.y=!0,()=>{ts.x=ts.y=!1})}function cT(n,e){const t=rT(n),i=new AbortController,s={passive:!0,...e,signal:i.signal};return[t,s,()=>i.abort()]}function WP(n){return!(n.pointerType==="touch"||lT())}function KP(n,e,t={}){const[i,s,r]=cT(n,t);return i.forEach(l=>{let c=!1,d=!1,h;const p=()=>{l.removeEventListener("pointerleave",w)},m=A=>{h&&(h(A),h=void 0),p()},v=A=>{c=!1,window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",v),d&&(d=!1,m(A))},b=()=>{c=!0,window.addEventListener("pointerup",v,s),window.addEventListener("pointercancel",v,s)},w=A=>{if(A.pointerType!=="touch"){if(c){d=!0;return}m(A)}},x=A=>{if(!WP(A))return;d=!1;const S=e(l,A);typeof S=="function"&&(h=S,l.addEventListener("pointerleave",w,s))};l.addEventListener("pointerenter",x,s),l.addEventListener("pointerdown",b,s)}),r}const uT=(n,e)=>e?n===e?!0:uT(n,e.parentElement):!1,Gv=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,JP=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function QP(n){return JP.has(n.tagName)||n.isContentEditable===!0}const eI=new Set(["INPUT","SELECT","TEXTAREA"]);function tI(n){return eI.has(n.tagName)||n.isContentEditable===!0}const Gd=new WeakSet;function uA(n){return e=>{e.key==="Enter"&&n(e)}}function Im(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const nI=(n,e)=>{const t=n.currentTarget;if(!t)return;const i=uA(()=>{if(Gd.has(t))return;Im(t,"down");const s=uA(()=>{Im(t,"up")}),r=()=>Im(t,"cancel");t.addEventListener("keyup",s,e),t.addEventListener("blur",r,e)});t.addEventListener("keydown",i,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",i),e)};function dA(n){return Gv(n)&&!lT()}const hA=new WeakSet;function iI(n,e,t={}){const[i,s,r]=cT(n,t),l=c=>{const d=c.currentTarget;if(!dA(c)||hA.has(c))return;Gd.add(d),t.stopPropagation&&hA.add(c);const h=e(d,c),p=(b,w)=>{window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",v),Gd.has(d)&&Gd.delete(d),dA(b)&&typeof h=="function"&&h(b,{success:w})},m=b=>{p(b,d===window||d===document||t.useGlobalTarget||uT(d,b.target))},v=b=>{p(b,!1)};window.addEventListener("pointerup",m,s),window.addEventListener("pointercancel",v,s)};return i.forEach(c=>{(t.useGlobalTarget?window:c).addEventListener("pointerdown",l,s),Lg(c)&&(c.addEventListener("focus",h=>nI(h,s)),!QP(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),r}function qv(n){return mE(n)&&"ownerSVGElement"in n}const qd=new WeakMap;let Zd;const dT=(n,e,t)=>(i,s)=>s&&s[0]?s[0][n+"Size"]:qv(i)&&"getBBox"in i?i.getBBox()[e]:i[t],sI=dT("inline","width","offsetWidth"),aI=dT("block","height","offsetHeight");function rI({target:n,borderBoxSize:e}){qd.get(n)?.forEach(t=>{t(n,{get width(){return sI(n,e)},get height(){return aI(n,e)}})})}function oI(n){n.forEach(rI)}function lI(){typeof ResizeObserver>"u"||(Zd=new ResizeObserver(oI))}function cI(n,e){Zd||lI();const t=rT(n);return t.forEach(i=>{let s=qd.get(i);s||(s=new Set,qd.set(i,s)),s.add(e),Zd?.observe(i)}),()=>{t.forEach(i=>{const s=qd.get(i);s?.delete(e),s?.size||Zd?.unobserve(i)})}}const Yd=new Set;let Lo;function uI(){Lo=()=>{const n={get width(){return window.innerWidth},get height(){return window.innerHeight}};Yd.forEach(e=>e(n))},window.addEventListener("resize",Lo)}function dI(n){return Yd.add(n),Lo||uI(),()=>{Yd.delete(n),!Yd.size&&typeof Lo=="function"&&(window.removeEventListener("resize",Lo),Lo=void 0)}}function fA(n,e){return typeof n=="function"?dI(n):cI(n,e)}function hI(n){return qv(n)&&n.tagName==="svg"}function fI(...n){const e=!Array.isArray(n[0]),t=e?0:-1,i=n[0+t],s=n[1+t],r=n[2+t],l=n[3+t],c=FE(s,r,l);return e?c(i):c}function pI(n,e,t={}){const i=n.get();let s=null,r=i,l;const c=typeof i=="string"?i.replace(/[\d.-]/g,""):void 0,d=()=>{s&&(s.stop(),s=null)},h=()=>{d();const p=mA(n.get()),m=mA(r);p!==m&&(s=new Bh({keyframes:[p,m],velocity:n.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...t,onUpdate:l}))};if(n.attach((p,m)=>{r=p,l=v=>m(pA(v,c)),ht.postRender(()=>{h(),n.events.animationStart?.notify(),s?.then(()=>{n.events.animationComplete?.notify()})})},d),An(e)){const p=e.on("change",v=>n.set(pA(v,c))),m=n.on("destroy",p);return()=>{p(),m()}}return d}function pA(n,e){return e?n+e:n}function mA(n){return typeof n=="number"?n:parseFloat(n)}const mI=[...iT,on,Fa],gI=n=>mI.find(nT(n)),gA=()=>({translate:0,scale:1,origin:0,originPoint:0}),zo=()=>({x:gA(),y:gA()}),vA=()=>({min:0,max:0}),pn=()=>({x:vA(),y:vA()}),vI=new WeakMap;function Fh(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function Rc(n){return typeof n=="string"||Array.isArray(n)}const Zv=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Yv=["initial",...Zv];function Uh(n){return Fh(n.animate)||Yv.some(e=>Rc(n[e]))}function hT(n){return!!(Uh(n)||n.variants)}function yI(n,e,t){for(const i in e){const s=e[i],r=t[i];if(An(s))n.addValue(i,s);else if(An(r))n.addValue(i,Rr(s,{owner:n}));else if(r!==s)if(n.hasValue(i)){const l=n.getValue(i);l.liveStyle===!0?l.jump(s):l.hasAnimated||l.set(s)}else{const l=n.getStaticValue(i);n.addValue(i,Rr(l!==void 0?l:s,{owner:n}))}}for(const i in t)e[i]===void 0&&n.removeValue(i);return e}const zg={current:null},fT={current:!1},bI=typeof window<"u";function xI(){if(fT.current=!0,!!bI)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>zg.current=n.matches;n.addEventListener("change",e),e()}else zg.current=!1}const yA=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let ah={};function pT(n){ah=n}function wI(){return ah}class AI{scrapeMotionValuesFromProps(e,t,i){return{}}constructor({parent:e,props:t,presenceContext:i,reducedMotionConfig:s,skipAnimations:r,blockInitialAnimation:l,visualState:c},d={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.shouldSkipAnimations=!1,this.values=new Map,this.KeyframeResolver=jv,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.hasBeenMounted=!1,this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const b=Hn.now();this.renderScheduledAt<b&&(this.renderScheduledAt=b,ht.render(this.render,!1,!0))};const{latestValues:h,renderState:p}=c;this.latestValues=h,this.baseTarget={...h},this.initialValues=t.initial?{...h}:{},this.renderState=p,this.parent=e,this.props=t,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.skipAnimationsConfig=r,this.options=d,this.blockInitialAnimation=!!l,this.isControllingVariants=Uh(t),this.isVariantNode=hT(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:m,...v}=this.scrapeMotionValuesFromProps(t,{},this);for(const b in v){const w=v[b];h[b]!==void 0&&An(w)&&w.set(h[b])}}mount(e){if(this.hasBeenMounted)for(const t in this.initialValues)this.values.get(t)?.jump(this.initialValues[t]),this.latestValues[t]=this.initialValues[t];this.current=e,vI.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,i)=>this.bindToMotionValue(i,t)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(fT.current||xI(),this.shouldReduceMotion=zg.current),this.shouldSkipAnimations=this.skipAnimationsConfig??!1,this.parent?.addChild(this),this.update(this.props,this.presenceContext),this.hasBeenMounted=!0}unmount(){this.projection&&this.projection.unmount(),aa(this.notifyUpdate),aa(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){if(this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)(),t.accelerate&&YP.has(e)&&this.current instanceof HTMLElement){const{factory:l,keyframes:c,times:d,ease:h,duration:p}=t.accelerate,m=new ZE({element:this.current,name:e,keyframes:c,times:d,ease:h,duration:is(p)}),v=l(m);this.valueSubscriptions.set(e,()=>{v(),m.cancel()});return}const i=cl.has(e);i&&this.onBindTransform&&this.onBindTransform();const s=t.on("change",l=>{this.latestValues[e]=l,this.props.onUpdate&&ht.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let r;typeof window<"u"&&window.MotionCheckAppearSync&&(r=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{s(),r&&r(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in ah){const t=ah[e];if(!t)continue;const{isEnabled:i,Feature:s}=t;if(!this.features[e]&&s&&i(this.props)&&(this.features[e]=new s(this)),this.features[e]){const r=this.features[e];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):pn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let i=0;i<yA.length;i++){const s=yA[i];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const r="on"+s,l=e[r];l&&(this.propEventSubscriptions[s]=this.on(s,l))}this.prevMotionValues=yI(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const i=this.values.get(e);t!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&t!==void 0&&(i=Rr(t===null?void 0:t,{owner:this}),this.addValue(e,i)),i}readValue(e,t){let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(pE(i)||gE(i))?i=parseFloat(i):!gI(i)&&Fa.test(t)&&(i=aT(e,t)),this.setBaseTarget(e,An(i)?i.get():i)),An(i)?i.get():i}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let i;if(typeof t=="string"||typeof t=="object"){const r=Uv(this.props,t,this.presenceContext?.custom);r&&(i=r[e])}if(t&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!An(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new kv),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){Hv.render(this.render)}}class mT extends AI{constructor(){super(...arguments),this.KeyframeResolver=ZP}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){const i=e.style;return i?i[t]:void 0}removeValueFromRenderState(e,{vars:t,style:i}){delete t[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;An(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}class qa{constructor(e){this.isMounted=!1,this.node=e}update(){}}function gT({top:n,left:e,right:t,bottom:i}){return{x:{min:e,max:t},y:{min:n,max:i}}}function SI({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function _I(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),i=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:i.y,right:i.x}}function Lm(n){return n===void 0||n===1}function jg({scale:n,scaleX:e,scaleY:t}){return!Lm(n)||!Lm(e)||!Lm(t)}function br(n){return jg(n)||vT(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function vT(n){return bA(n.x)||bA(n.y)}function bA(n){return n&&n!=="0%"}function rh(n,e,t){const i=n-t,s=e*i;return t+s}function xA(n,e,t,i,s){return s!==void 0&&(n=rh(n,s,i)),rh(n,t,i)+e}function Bg(n,e=0,t=1,i,s){n.min=xA(n.min,e,t,i,s),n.max=xA(n.max,e,t,i,s)}function yT(n,{x:e,y:t}){Bg(n.x,e.translate,e.scale,e.originPoint),Bg(n.y,t.translate,t.scale,t.originPoint)}const wA=.999999999999,AA=1.0000000000001;function EI(n,e,t,i=!1){const s=t.length;if(!s)return;e.x=e.y=1;let r,l;for(let c=0;c<s;c++){r=t[c],l=r.projectionDelta;const{visualElement:d}=r.options;d&&d.props.style&&d.props.style.display==="contents"||(i&&r.options.layoutScroll&&r.scroll&&r!==r.root&&Bo(n,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,yT(n,l)),i&&br(r.latestValues)&&Bo(n,r.latestValues))}e.x<AA&&e.x>wA&&(e.x=1),e.y<AA&&e.y>wA&&(e.y=1)}function jo(n,e){n.min=n.min+e,n.max=n.max+e}function SA(n,e,t,i,s=.5){const r=jt(n.min,n.max,s);Bg(n,e,t,r,i)}function Bo(n,e){SA(n.x,e.x,e.scaleX,e.scale,e.originX),SA(n.y,e.y,e.scaleY,e.scale,e.originY)}function bT(n,e){return gT(_I(n.getBoundingClientRect(),e))}function TI(n,e,t){const i=bT(n,t),{scroll:s}=e;return s&&(jo(i.x,s.offset.x),jo(i.y,s.offset.y)),i}const CI={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},kI=ll.length;function MI(n,e,t){let i="",s=!0;for(let r=0;r<kI;r++){const l=ll[r],c=n[l];if(c===void 0)continue;let d=!0;if(typeof c=="number")d=c===(l.startsWith("scale")?1:0);else{const h=parseFloat(c);d=l.startsWith("scale")?h===1:h===0}if(!d||t){const h=oT(c,$v[l]);if(!d){s=!1;const p=CI[l]||l;i+=`${p}(${h}) `}t&&(e[l]=h)}}return i=i.trim(),t?i=t(e,s?"":i):s&&(i="none"),i}function Xv(n,e,t){const{style:i,vars:s,transformOrigin:r}=n;let l=!1,c=!1;for(const d in e){const h=e[d];if(cl.has(d)){l=!0;continue}else if(RE(d)){s[d]=h;continue}else{const p=oT(h,$v[d]);d.startsWith("origin")?(c=!0,r[d]=p):i[d]=p}}if(e.transform||(l||t?i.transform=MI(e,n.transform,t):i.transform&&(i.transform="none")),c){const{originX:d="50%",originY:h="50%",originZ:p=0}=r;i.transformOrigin=`${d} ${h} ${p}`}}function xT(n,{style:e,vars:t},i,s){const r=n.style;let l;for(l in e)r[l]=e[l];s?.applyProjectionStyles(r,i);for(l in t)r.setProperty(l,t[l])}function _A(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const ac={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(ye.test(n))n=parseFloat(n);else return n;const t=_A(n,e.target.x),i=_A(n,e.target.y);return`${t}% ${i}%`}},RI={correct:(n,{treeScale:e,projectionDelta:t})=>{const i=n,s=Fa.parse(n);if(s.length>5)return i;const r=Fa.createTransformer(n),l=typeof s[0]!="number"?1:0,c=t.x.scale*e.x,d=t.y.scale*e.y;s[0+l]/=c,s[1+l]/=d;const h=jt(c,d,.5);return typeof s[2+l]=="number"&&(s[2+l]/=h),typeof s[3+l]=="number"&&(s[3+l]/=h),r(s)}},Fg={borderRadius:{...ac,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ac,borderTopRightRadius:ac,borderBottomLeftRadius:ac,borderBottomRightRadius:ac,boxShadow:RI};function wT(n,{layout:e,layoutId:t}){return cl.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Fg[n]||n==="opacity")}function Wv(n,e,t){const i=n.style,s=e?.style,r={};if(!i)return r;for(const l in i)(An(i[l])||s&&An(s[l])||wT(l,n)||t?.getValue(l)?.liveStyle!==void 0)&&(r[l]=i[l]);return r}function DI(n){return window.getComputedStyle(n)}class OI extends mT{constructor(){super(...arguments),this.type="html",this.renderInstance=xT}readValueFromInstance(e,t){if(cl.has(t))return this.projection?.isProjecting?Tg(t):XN(e,t);{const i=DI(e),s=(RE(t)?i.getPropertyValue(t):i[t])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:t}){return bT(e,t)}build(e,t,i){Xv(e,t,i.transformTemplate)}scrapeMotionValuesFromProps(e,t,i){return Wv(e,t,i)}}const NI={offset:"stroke-dashoffset",array:"stroke-dasharray"},PI={offset:"strokeDashoffset",array:"strokeDasharray"};function II(n,e,t=1,i=0,s=!0){n.pathLength=1;const r=s?NI:PI;n[r.offset]=`${-i}`,n[r.array]=`${e} ${t}`}const LI=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function AT(n,{attrX:e,attrY:t,attrScale:i,pathLength:s,pathSpacing:r=1,pathOffset:l=0,...c},d,h,p){if(Xv(n,c,h),d){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:m,style:v}=n;m.transform&&(v.transform=m.transform,delete m.transform),(v.transform||m.transformOrigin)&&(v.transformOrigin=m.transformOrigin??"50% 50%",delete m.transformOrigin),v.transform&&(v.transformBox=p?.transformBox??"fill-box",delete m.transformBox);for(const b of LI)m[b]!==void 0&&(v[b]=m[b],delete m[b]);e!==void 0&&(m.x=e),t!==void 0&&(m.y=t),i!==void 0&&(m.scale=i),s!==void 0&&II(m,s,r,l,!1)}const ST=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),_T=n=>typeof n=="string"&&n.toLowerCase()==="svg";function zI(n,e,t,i){xT(n,e,void 0,i);for(const s in e.attrs)n.setAttribute(ST.has(s)?s:Vv(s),e.attrs[s])}function ET(n,e,t){const i=Wv(n,e,t);for(const s in n)if(An(n[s])||An(e[s])){const r=ll.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;i[r]=n[s]}return i}class jI extends mT{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=pn}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(cl.has(t)){const i=sT(t);return i&&i.default||0}return t=ST.has(t)?t:Vv(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,i){return ET(e,t,i)}build(e,t,i){AT(e,t,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(e,t,i,s){zI(e,t,i,s)}mount(e){this.isSVGTag=_T(e.tagName),super.mount(e)}}const BI=Yv.length;function TT(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?TT(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<BI;t++){const i=Yv[t],s=n.props[i];(Rc(s)||s===!1)&&(e[i]=s)}return e}function CT(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let i=0;i<t;i++)if(e[i]!==n[i])return!1;return!0}const FI=[...Zv].reverse(),UI=Zv.length;function VI(n){return e=>Promise.all(e.map(({animation:t,options:i})=>zP(n,t,i)))}function $I(n){let e=VI(n),t=EA(),i=!0;const s=d=>(h,p)=>{const m=qo(n,p,d==="exit"?n.presenceContext?.custom:void 0);if(m){const{transition:v,transitionEnd:b,...w}=m;h={...h,...w,...b}}return h};function r(d){e=d(n)}function l(d){const{props:h}=n,p=TT(n.parent)||{},m=[],v=new Set;let b={},w=1/0;for(let A=0;A<UI;A++){const S=FI[A],T=t[S],E=h[S]!==void 0?h[S]:p[S],M=Rc(E),R=S===d?T.isActive:null;R===!1&&(w=A);let O=E===p[S]&&E!==h[S]&&M;if(O&&i&&n.manuallyAnimateOnMount&&(O=!1),T.protectedKeys={...b},!T.isActive&&R===null||!E&&!T.prevProp||Fh(E)||typeof E=="boolean")continue;if(S==="exit"&&T.isActive&&R!==!0){T.prevResolvedValues&&(b={...b,...T.prevResolvedValues});continue}const L=HI(T.prevProp,E);let D=L||S===d&&T.isActive&&!O&&M||A>w&&M,$=!1;const ee=Array.isArray(E)?E:[E];let X=ee.reduce(s(S),{});R===!1&&(X={});const{prevResolvedValues:le={}}=T,de={...le,...X},ce=U=>{D=!0,v.has(U)&&($=!0,v.delete(U)),T.needsAnimating[U]=!0;const B=n.getValue(U);B&&(B.liveStyle=!1)};for(const U in de){const B=X[U],se=le[U];if(b.hasOwnProperty(U))continue;let ve=!1;Og(B)&&Og(se)?ve=!CT(B,se):ve=B!==se,ve?B!=null?ce(U):v.add(U):B!==void 0&&v.has(U)?ce(U):T.protectedKeys[U]=!0}T.prevProp=E,T.prevResolvedValues=X,T.isActive&&(b={...b,...X}),i&&n.blockInitialAnimation&&(D=!1);const fe=O&&L;D&&(!fe||$)&&m.push(...ee.map(U=>{const B={type:S};if(typeof U=="string"&&i&&!fe&&n.manuallyAnimateOnMount&&n.parent){const{parent:se}=n,ve=qo(se,U);if(se.enteringChildren&&ve){const{delayChildren:P}=ve.transition||{};B.delay=XE(se.enteringChildren,n,P)}}return{animation:U,options:B}}))}if(v.size){const A={};if(typeof h.initial!="boolean"){const S=qo(n,Array.isArray(h.initial)?h.initial[0]:h.initial);S&&S.transition&&(A.transition=S.transition)}v.forEach(S=>{const T=n.getBaseTarget(S),E=n.getValue(S);E&&(E.liveStyle=!0),A[S]=T??null}),m.push({animation:A})}let x=!!m.length;return i&&(h.initial===!1||h.initial===h.animate)&&!n.manuallyAnimateOnMount&&(x=!1),i=!1,x?e(m):Promise.resolve()}function c(d,h){if(t[d].isActive===h)return Promise.resolve();n.variantChildren?.forEach(m=>m.animationState?.setActive(d,h)),t[d].isActive=h;const p=l(d);for(const m in t)t[m].protectedKeys={};return p}return{animateChanges:l,setActive:c,setAnimateFunction:r,getState:()=>t,reset:()=>{t=EA()}}}function HI(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!CT(e,n):!1}function gr(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function EA(){return{animate:gr(!0),whileInView:gr(),whileHover:gr(),whileTap:gr(),whileDrag:gr(),whileFocus:gr(),exit:gr()}}function TA(n,e){n.min=e.min,n.max=e.max}function Ji(n,e){TA(n.x,e.x),TA(n.y,e.y)}function CA(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}const kT=1e-4,GI=1-kT,qI=1+kT,MT=.01,ZI=0-MT,YI=0+MT;function Gn(n){return n.max-n.min}function XI(n,e,t){return Math.abs(n-e)<=t}function kA(n,e,t,i=.5){n.origin=i,n.originPoint=jt(e.min,e.max,n.origin),n.scale=Gn(t)/Gn(e),n.translate=jt(t.min,t.max,n.origin)-n.originPoint,(n.scale>=GI&&n.scale<=qI||isNaN(n.scale))&&(n.scale=1),(n.translate>=ZI&&n.translate<=YI||isNaN(n.translate))&&(n.translate=0)}function Ac(n,e,t,i){kA(n.x,e.x,t.x,i?i.originX:void 0),kA(n.y,e.y,t.y,i?i.originY:void 0)}function MA(n,e,t){n.min=t.min+e.min,n.max=n.min+Gn(e)}function WI(n,e,t){MA(n.x,e.x,t.x),MA(n.y,e.y,t.y)}function RA(n,e,t){n.min=e.min-t.min,n.max=n.min+Gn(e)}function oh(n,e,t){RA(n.x,e.x,t.x),RA(n.y,e.y,t.y)}function DA(n,e,t,i,s){return n-=e,n=rh(n,1/t,i),s!==void 0&&(n=rh(n,1/s,i)),n}function KI(n,e=0,t=1,i=.5,s,r=n,l=n){if(Es.test(e)&&(e=parseFloat(e),e=jt(l.min,l.max,e/100)-l.min),typeof e!="number")return;let c=jt(r.min,r.max,i);n===r&&(c-=e),n.min=DA(n.min,e,t,c,s),n.max=DA(n.max,e,t,c,s)}function OA(n,e,[t,i,s],r,l){KI(n,e[t],e[i],e[s],e.scale,r,l)}const JI=["x","scaleX","originX"],QI=["y","scaleY","originY"];function NA(n,e,t,i){OA(n.x,e,JI,t?t.x:void 0,i?i.x:void 0),OA(n.y,e,QI,t?t.y:void 0,i?i.y:void 0)}function PA(n){return n.translate===0&&n.scale===1}function RT(n){return PA(n.x)&&PA(n.y)}function IA(n,e){return n.min===e.min&&n.max===e.max}function eL(n,e){return IA(n.x,e.x)&&IA(n.y,e.y)}function LA(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function DT(n,e){return LA(n.x,e.x)&&LA(n.y,e.y)}function zA(n){return Gn(n.x)/Gn(n.y)}function jA(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}function xs(n){return[n("x"),n("y")]}function tL(n,e,t){let i="";const s=n.x.translate/e.x,r=n.y.translate/e.y,l=t?.z||0;if((s||r||l)&&(i=`translate3d(${s}px, ${r}px, ${l}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:h,rotate:p,rotateX:m,rotateY:v,skewX:b,skewY:w}=t;h&&(i=`perspective(${h}px) ${i}`),p&&(i+=`rotate(${p}deg) `),m&&(i+=`rotateX(${m}deg) `),v&&(i+=`rotateY(${v}deg) `),b&&(i+=`skewX(${b}deg) `),w&&(i+=`skewY(${w}deg) `)}const c=n.x.scale*e.x,d=n.y.scale*e.y;return(c!==1||d!==1)&&(i+=`scale(${c}, ${d})`),i||"none"}const OT=["TopLeft","TopRight","BottomLeft","BottomRight"],nL=OT.length,BA=n=>typeof n=="string"?parseFloat(n):n,FA=n=>typeof n=="number"||ye.test(n);function iL(n,e,t,i,s,r){s?(n.opacity=jt(0,t.opacity??1,sL(i)),n.opacityExit=jt(e.opacity??1,0,aL(i))):r&&(n.opacity=jt(e.opacity??1,t.opacity??1,i));for(let l=0;l<nL;l++){const c=`border${OT[l]}Radius`;let d=UA(e,c),h=UA(t,c);if(d===void 0&&h===void 0)continue;d||(d=0),h||(h=0),d===0||h===0||FA(d)===FA(h)?(n[c]=Math.max(jt(BA(d),BA(h),i),0),(Es.test(h)||Es.test(d))&&(n[c]+="%")):n[c]=h}(e.rotate||t.rotate)&&(n.rotate=jt(e.rotate||0,t.rotate||0,i))}function UA(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const sL=NT(0,.5,_E),aL=NT(.5,.95,Vi);function NT(n,e,t){return i=>i<n?0:i>e?1:t(Cc(n,e,i))}function rL(n,e,t){const i=An(n)?n:Rr(n);return i.start(Fv("",i,e,t)),i.animation}function Dc(n,e,t,i={passive:!0}){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t)}const oL=(n,e)=>n.depth-e.depth;class lL{constructor(){this.children=[],this.isDirty=!1}add(e){Ev(this.children,e),this.isDirty=!0}remove(e){th(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(oL),this.isDirty=!1,this.children.forEach(e)}}function cL(n,e){const t=Hn.now(),i=({timestamp:s})=>{const r=s-t;r>=e&&(aa(i),n(r-e))};return ht.setup(i,!0),()=>aa(i)}function Xd(n){return An(n)?n.get():n}class uL{constructor(){this.members=[]}add(e){Ev(this.members,e);for(let t=this.members.length-1;t>=0;t--){const i=this.members[t];if(i===e||i===this.lead||i===this.prevLead)continue;const s=i.instance;s&&s.isConnected===!1&&i.isPresent!==!1&&!i.snapshot&&th(this.members,i)}e.scheduleRender()}remove(e){if(th(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(s=>e===s);if(t===0)return!1;let i;for(let s=t;s>=0;s--){const r=this.members[s],l=r.instance;if(r.isPresent!==!1&&(!l||l.isConnected!==!1)){i=r;break}}return i?(this.promote(i),!0):!1}promote(e,t){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender();const s=i.options.layoutDependency,r=e.options.layoutDependency;if(!(s!==void 0&&r!==void 0&&s===r)){const d=i.instance;d&&d.isConnected===!1&&!i.snapshot||(e.resumeFrom=i,t&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0))}const{crossfade:c}=e.options;c===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:i}=e;t.onExitComplete&&t.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const Wd={hasAnimatedSinceResize:!0,hasEverUpdated:!1},zm=["","X","Y","Z"],dL=1e3;let hL=0;function jm(n,e,t,i){const{latestValues:s}=e;s[n]&&(t[n]=s[n],e.setStaticValue(n,0),i&&(i[n]=0))}function PT(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=eT(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:s,layoutId:r}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",ht,!(s||r))}const{parent:i}=n;i&&!i.hasCheckedOptimisedAppear&&PT(i)}function IT({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:i,resetTransform:s}){return class{constructor(l={},c=e?.()){this.id=hL++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(mL),this.nodes.forEach(bL),this.nodes.forEach(xL),this.nodes.forEach(gL)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new lL)}addEventListener(l,c){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new kv),this.eventHandlers.get(l).add(c)}notifyListeners(l,...c){const d=this.eventHandlers.get(l);d&&d.notify(...c)}hasListeners(l){return this.eventHandlers.has(l)}mount(l){if(this.instance)return;this.isSVG=qv(l)&&!hI(l),this.instance=l;const{layoutId:c,layout:d,visualElement:h}=this.options;if(h&&!h.current&&h.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||c)&&(this.isLayoutDirty=!0),n){let p,m=0;const v=()=>this.root.updateBlockedByResize=!1;ht.read(()=>{m=window.innerWidth}),n(l,()=>{const b=window.innerWidth;b!==m&&(m=b,this.root.updateBlockedByResize=!0,p&&p(),p=cL(v,250),Wd.hasAnimatedSinceResize&&(Wd.hasAnimatedSinceResize=!1,this.nodes.forEach(HA)))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&h&&(c||d)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:m,hasRelativeLayoutChanged:v,layout:b})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||h.getDefaultTransition()||EL,{onLayoutAnimationStart:x,onLayoutAnimationComplete:A}=h.getProps(),S=!this.targetLayout||!DT(this.targetLayout,b),T=!m&&v;if(this.options.layoutRoot||this.resumeFrom||T||m&&(S||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const E={...Bv(w,"layout"),onPlay:x,onComplete:A};(h.shouldReduceMotion||this.options.layoutRoot)&&(E.delay=0,E.type=!1),this.startAnimation(E),this.setAnimationOrigin(p,T)}else m||HA(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=b})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),aa(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(wL),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&PT(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const m=this.path[p];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:c,layout:d}=this.options;if(c===void 0&&!d)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(VA);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach($A);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(yL),this.nodes.forEach(fL),this.nodes.forEach(pL)):this.nodes.forEach($A),this.clearAllSnapshots();const c=Hn.now();On.delta=Ts(0,1e3/60,c-On.timestamp),On.timestamp=c,On.isProcessing=!0,Mm.update.process(On),Mm.preRender.process(On),Mm.render.process(On),On.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Hv.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(vL),this.sharedNodes.forEach(AL)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ht.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ht.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Gn(this.snapshot.measuredBox.x)&&!Gn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=pn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(c=!1),c&&this.instance){const d=i(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:d,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!s)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!RT(this.projectionDelta),d=this.getTransformTemplate(),h=d?d(this.latestValues,""):void 0,p=h!==this.prevTransformTemplateValue;l&&this.instance&&(c||br(this.latestValues)||p)&&(s(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const c=this.measurePageBox();let d=this.removeElementScroll(c);return l&&(d=this.removeTransform(d)),TL(d),{animationId:this.root.animationId,measuredBox:c,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:l}=this.options;if(!l)return pn();const c=l.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(CL))){const{scroll:h}=this.root;h&&(jo(c.x,h.offset.x),jo(c.y,h.offset.y))}return c}removeElementScroll(l){const c=pn();if(Ji(c,l),this.scroll?.wasRoot)return c;for(let d=0;d<this.path.length;d++){const h=this.path[d],{scroll:p,options:m}=h;h!==this.root&&p&&m.layoutScroll&&(p.wasRoot&&Ji(c,l),jo(c.x,p.offset.x),jo(c.y,p.offset.y))}return c}applyTransform(l,c=!1){const d=pn();Ji(d,l);for(let h=0;h<this.path.length;h++){const p=this.path[h];!c&&p.options.layoutScroll&&p.scroll&&p!==p.root&&Bo(d,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),br(p.latestValues)&&Bo(d,p.latestValues)}return br(this.latestValues)&&Bo(d,this.latestValues),d}removeTransform(l){const c=pn();Ji(c,l);for(let d=0;d<this.path.length;d++){const h=this.path[d];if(!h.instance||!br(h.latestValues))continue;jg(h.latestValues)&&h.updateSnapshot();const p=pn(),m=h.measurePageBox();Ji(p,m),NA(c,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,p)}return br(this.latestValues)&&NA(c,this.latestValues),c}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==On.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==c;if(!(l||d&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:m}=this.options;if(!this.layout||!(p||m))return;this.resolvedRelativeTargetAt=On.timestamp;const v=this.getClosestProjectingParent();v&&this.linkedParentVersion!==v.layoutVersion&&!v.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(v&&v.layout?this.createRelativeTarget(v,this.layout.layoutBox,v.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=pn(),this.targetWithTransforms=pn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),WI(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ji(this.target,this.layout.layoutBox),yT(this.target,this.targetDelta)):Ji(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,v&&!!v.resumingFrom==!!this.resumingFrom&&!v.options.layoutScroll&&v.target&&this.animationProgress!==1?this.createRelativeTarget(v,this.target,v.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||jg(this.parent.latestValues)||vT(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(l,c,d){this.relativeParent=l,this.linkedParentVersion=l.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=pn(),this.relativeTargetOrigin=pn(),oh(this.relativeTargetOrigin,c,d),Ji(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const l=this.getLead(),c=!!this.resumingFrom||this!==l;let d=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(d=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===On.timestamp&&(d=!1),d)return;const{layout:h,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||p))return;Ji(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,v=this.treeScale.y;EI(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=pn());const{target:b}=l;if(!b){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(CA(this.prevProjectionDelta.x,this.projectionDelta.x),CA(this.prevProjectionDelta.y,this.projectionDelta.y)),Ac(this.projectionDelta,this.layoutCorrected,b,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==v||!jA(this.projectionDelta.x,this.prevProjectionDelta.x)||!jA(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",b))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){if(this.options.visualElement?.scheduleRender(),l){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=zo(),this.projectionDelta=zo(),this.projectionDeltaWithTransform=zo()}setAnimationOrigin(l,c=!1){const d=this.snapshot,h=d?d.latestValues:{},p={...this.latestValues},m=zo();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const v=pn(),b=d?d.source:void 0,w=this.layout?this.layout.source:void 0,x=b!==w,A=this.getStack(),S=!A||A.members.length<=1,T=!!(x&&!S&&this.options.crossfade===!0&&!this.path.some(_L));this.animationProgress=0;let E;this.mixTargetDelta=M=>{const R=M/1e3;GA(m.x,l.x,R),GA(m.y,l.y,R),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(oh(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),SL(this.relativeTarget,this.relativeTargetOrigin,v,R),E&&eL(this.relativeTarget,E)&&(this.isProjectionDirty=!1),E||(E=pn()),Ji(E,this.relativeTarget)),x&&(this.animationValues=p,iL(p,h,this.latestValues,R,T,S)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=R},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(aa(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ht.update(()=>{Wd.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Rr(0)),this.currentAnimation=rL(this.motionValue,[0,1e3],{...l,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),l.onUpdate&&l.onUpdate(c)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(dL),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:c,target:d,layout:h,latestValues:p}=l;if(!(!c||!d||!h)){if(this!==l&&this.layout&&h&&LT(this.options.animationType,this.layout.layoutBox,h.layoutBox)){d=this.target||pn();const m=Gn(this.layout.layoutBox.x);d.x.min=l.target.x.min,d.x.max=d.x.min+m;const v=Gn(this.layout.layoutBox.y);d.y.min=l.target.y.min,d.y.max=d.y.min+v}Ji(c,d),Bo(c,p),Ac(this.projectionDeltaWithTransform,this.layoutCorrected,c,p)}}registerSharedNode(l,c){this.sharedNodes.has(l)||this.sharedNodes.set(l,new uL),this.sharedNodes.get(l).add(c);const h=c.options.initialPromotionConfig;c.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(c):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){const{layoutId:l}=this.options;return l?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:l}=this.options;return l?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:c,preserveFollowOpacity:d}={}){const h=this.getStack();h&&h.promote(this,d),l&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let c=!1;const{latestValues:d}=l;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(c=!0),!c)return;const h={};d.z&&jm("z",l,h,this.animationValues);for(let p=0;p<zm.length;p++)jm(`rotate${zm[p]}`,l,h,this.animationValues),jm(`skew${zm[p]}`,l,h,this.animationValues);l.render();for(const p in h)l.setStaticValue(p,h[p]),this.animationValues&&(this.animationValues[p]=h[p]);l.scheduleRender()}applyProjectionStyles(l,c){if(!this.instance||this.isSVG)return;if(!this.isVisible){l.visibility="hidden";return}const d=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,l.visibility="",l.opacity="",l.pointerEvents=Xd(c?.pointerEvents)||"",l.transform=d?d(this.latestValues,""):"none";return}const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){this.options.layoutId&&(l.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,l.pointerEvents=Xd(c?.pointerEvents)||""),this.hasProjected&&!br(this.latestValues)&&(l.transform=d?d({},""):"none",this.hasProjected=!1);return}l.visibility="";const p=h.animationValues||h.latestValues;this.applyTransformsToTarget();let m=tL(this.projectionDeltaWithTransform,this.treeScale,p);d&&(m=d(p,m)),l.transform=m;const{x:v,y:b}=this.projectionDelta;l.transformOrigin=`${v.origin*100}% ${b.origin*100}% 0`,h.animationValues?l.opacity=h===this?p.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:l.opacity=h===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const w in Fg){if(p[w]===void 0)continue;const{correct:x,applyTo:A,isCSSVariable:S}=Fg[w],T=m==="none"?p[w]:x(p[w],h);if(A){const E=A.length;for(let M=0;M<E;M++)l[A[M]]=T}else S?this.options.visualElement.renderState.vars[w]=T:l[w]=T}this.options.layoutId&&(l.pointerEvents=h===this?Xd(c?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>l.currentAnimation?.stop()),this.root.nodes.forEach(VA),this.root.sharedNodes.clear()}}}function fL(n){n.updateLayout()}function pL(n){const e=n.resumeFrom?.snapshot||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:i}=n.layout,{animationType:s}=n.options,r=e.source!==n.layout.source;s==="size"?xs(p=>{const m=r?e.measuredBox[p]:e.layoutBox[p],v=Gn(m);m.min=t[p].min,m.max=m.min+v}):LT(s,e.layoutBox,t)&&xs(p=>{const m=r?e.measuredBox[p]:e.layoutBox[p],v=Gn(t[p]);m.max=m.min+v,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[p].max=n.relativeTarget[p].min+v)});const l=zo();Ac(l,t,e.layoutBox);const c=zo();r?Ac(c,n.applyTransform(i,!0),e.measuredBox):Ac(c,t,e.layoutBox);const d=!RT(l);let h=!1;if(!n.resumeFrom){const p=n.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:m,layout:v}=p;if(m&&v){const b=pn();oh(b,e.layoutBox,m.layoutBox);const w=pn();oh(w,t,v.layoutBox),DT(b,w)||(h=!0),p.options.layoutRoot&&(n.relativeTarget=w,n.relativeTargetOrigin=b,n.relativeParent=p)}}}n.notifyListeners("didUpdate",{layout:t,snapshot:e,delta:c,layoutDelta:l,hasLayoutChanged:d,hasRelativeLayoutChanged:h})}else if(n.isLead()){const{onExitComplete:t}=n.options;t&&t()}n.options.transition=void 0}function mL(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function gL(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function vL(n){n.clearSnapshot()}function VA(n){n.clearMeasurements()}function $A(n){n.isLayoutDirty=!1}function yL(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function HA(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function bL(n){n.resolveTargetDelta()}function xL(n){n.calcProjection()}function wL(n){n.resetSkewAndRotation()}function AL(n){n.removeLeadSnapshot()}function GA(n,e,t){n.translate=jt(e.translate,0,t),n.scale=jt(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function qA(n,e,t,i){n.min=jt(e.min,t.min,i),n.max=jt(e.max,t.max,i)}function SL(n,e,t,i){qA(n.x,e.x,t.x,i),qA(n.y,e.y,t.y,i)}function _L(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const EL={duration:.45,ease:[.4,0,.1,1]},ZA=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),YA=ZA("applewebkit/")&&!ZA("chrome/")?Math.round:Vi;function XA(n){n.min=YA(n.min),n.max=YA(n.max)}function TL(n){XA(n.x),XA(n.y)}function LT(n,e,t){return n==="position"||n==="preserve-aspect"&&!XI(zA(e),zA(t),.2)}function CL(n){return n!==n.root&&n.scroll?.wasRoot}const kL=IT({attachResizeListener:(n,e)=>Dc(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body?.scrollLeft||0,y:document.documentElement.scrollTop||document.body?.scrollTop||0}),checkIsScrollRoot:()=>!0}),Bm={current:void 0},zT=IT({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!Bm.current){const n=new kL({});n.mount(window),n.setOptions({layoutScroll:!0}),Bm.current=n}return Bm.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),Jc=I.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function WA(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function ML(...n){return e=>{let t=!1;const i=n.map(s=>{const r=WA(s,e);return!t&&typeof r=="function"&&(t=!0),r});if(t)return()=>{for(let s=0;s<i.length;s++){const r=i[s];typeof r=="function"?r():WA(n[s],null)}}}}function RL(...n){return I.useCallback(ML(...n),n)}class DL extends I.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent&&this.props.pop!==!1){const i=t.offsetParent,s=Lg(i)&&i.offsetWidth||0,r=Lg(i)&&i.offsetHeight||0,l=this.props.sizeRef.current;l.height=t.offsetHeight||0,l.width=t.offsetWidth||0,l.top=t.offsetTop,l.left=t.offsetLeft,l.right=s-l.width-l.left,l.bottom=r-l.height-l.top}return null}componentDidUpdate(){}render(){return this.props.children}}function OL({children:n,isPresent:e,anchorX:t,anchorY:i,root:s,pop:r}){const l=I.useId(),c=I.useRef(null),d=I.useRef({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:h}=I.useContext(Jc),p=n.props?.ref??n?.ref,m=RL(c,p);return I.useInsertionEffect(()=>{const{width:v,height:b,top:w,left:x,right:A,bottom:S}=d.current;if(e||r===!1||!c.current||!v||!b)return;const T=t==="left"?`left: ${x}`:`right: ${A}`,E=i==="bottom"?`bottom: ${S}`:`top: ${w}`;c.current.dataset.motionPopId=l;const M=document.createElement("style");h&&(M.nonce=h);const R=s??document.head;return R.appendChild(M),M.sheet&&M.sheet.insertRule(`
          [data-motion-pop-id="${l}"] {
            position: absolute !important;
            width: ${v}px !important;
            height: ${b}px !important;
            ${T}px !important;
            ${E}px !important;
          }
        `),()=>{R.contains(M)&&R.removeChild(M)}},[e]),k.jsx(DL,{isPresent:e,childRef:c,sizeRef:d,pop:r,children:r===!1?n:I.cloneElement(n,{ref:m})})}const NL=({children:n,initial:e,isPresent:t,onExitComplete:i,custom:s,presenceAffectsLayout:r,mode:l,anchorX:c,anchorY:d,root:h})=>{const p=Yc(PL),m=I.useId();let v=!0,b=I.useMemo(()=>(v=!1,{id:m,initial:e,isPresent:t,custom:s,onExitComplete:w=>{p.set(w,!0);for(const x of p.values())if(!x)return;i&&i()},register:w=>(p.set(w,!1),()=>p.delete(w))}),[t,p,i]);return r&&v&&(b={...b}),I.useMemo(()=>{p.forEach((w,x)=>p.set(x,!1))},[t]),I.useEffect(()=>{!t&&!p.size&&i&&i()},[t]),n=k.jsx(OL,{pop:l==="popLayout",isPresent:t,anchorX:c,anchorY:d,root:h,children:n}),k.jsx(jh.Provider,{value:b,children:n})};function PL(){return new Map}function jT(n=!0){const e=I.useContext(jh);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:i,register:s}=e,r=I.useId();I.useEffect(()=>{if(n)return s(r)},[n]);const l=I.useCallback(()=>n&&i&&i(r),[r,i,n]);return!t&&i?[!1,l]:[!0]}const Ad=n=>n.key||"";function KA(n){const e=[];return I.Children.forEach(n,t=>{I.isValidElement(t)&&e.push(t)}),e}const BT=({children:n,custom:e,initial:t=!0,onExitComplete:i,presenceAffectsLayout:s=!0,mode:r="sync",propagate:l=!1,anchorX:c="left",anchorY:d="top",root:h})=>{const[p,m]=jT(l),v=I.useMemo(()=>KA(n),[n]),b=l&&!p?[]:v.map(Ad),w=I.useRef(!0),x=I.useRef(v),A=Yc(()=>new Map),S=I.useRef(new Set),[T,E]=I.useState(v),[M,R]=I.useState(v);_v(()=>{w.current=!1,x.current=v;for(let D=0;D<M.length;D++){const $=Ad(M[D]);b.includes($)?(A.delete($),S.current.delete($)):A.get($)!==!0&&A.set($,!1)}},[M,b.length,b.join("-")]);const O=[];if(v!==T){let D=[...v];for(let $=0;$<M.length;$++){const ee=M[$],X=Ad(ee);b.includes(X)||(D.splice($,0,ee),O.push(ee))}return r==="wait"&&O.length&&(D=O),R(KA(D)),E(v),null}const{forceRender:L}=I.useContext(Sv);return k.jsx(k.Fragment,{children:M.map(D=>{const $=Ad(D),ee=l&&!p?!1:v===M||b.includes($),X=()=>{if(S.current.has($))return;if(S.current.add($),A.has($))A.set($,!0);else return;let le=!0;A.forEach(de=>{de||(le=!1)}),le&&(L?.(),R(x.current),l&&m?.(),i&&i())};return k.jsx(NL,{isPresent:ee,initial:!w.current||t?void 0:!1,custom:e,presenceAffectsLayout:s,mode:r,root:h,onExitComplete:ee?void 0:X,anchorX:c,anchorY:d,children:D},$)})})},FT=I.createContext({strict:!1}),JA={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let QA=!1;function IL(){if(QA)return;const n={};for(const e in JA)n[e]={isEnabled:t=>JA[e].some(i=>!!t[i])};pT(n),QA=!0}function UT(){return IL(),wI()}function LL(n){const e=UT();for(const t in n)e[t]={...e[t],...n[t]};pT(e)}const zL=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","propagate","ignoreStrict","viewport"]);function lh(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||zL.has(n)}let VT=n=>!lh(n);function jL(n){typeof n=="function"&&(VT=e=>e.startsWith("on")?!lh(e):n(e))}try{jL(require("@emotion/is-prop-valid").default)}catch{}function BL(n,e,t){const i={};for(const s in n)s==="values"&&typeof n.values=="object"||(VT(s)||t===!0&&lh(s)||!e&&!lh(s)||n.draggable&&s.startsWith("onDrag"))&&(i[s]=n[s]);return i}const Vh=I.createContext({});function FL(n,e){if(Uh(n)){const{initial:t,animate:i}=n;return{initial:t===!1||Rc(t)?t:void 0,animate:Rc(i)?i:void 0}}return n.inherit!==!1?e:{}}function UL(n){const{initial:e,animate:t}=FL(n,I.useContext(Vh));return I.useMemo(()=>({initial:e,animate:t}),[eS(e),eS(t)])}function eS(n){return Array.isArray(n)?n.join(" "):n}const Kv=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function $T(n,e,t){for(const i in e)!An(e[i])&&!wT(i,t)&&(n[i]=e[i])}function VL({transformTemplate:n},e){return I.useMemo(()=>{const t=Kv();return Xv(t,e,n),Object.assign({},t.vars,t.style)},[e])}function $L(n,e){const t=n.style||{},i={};return $T(i,t,n),Object.assign(i,VL(n,e)),i}function HL(n,e){const t={},i=$L(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=i,t}const HT=()=>({...Kv(),attrs:{}});function GL(n,e,t,i){const s=I.useMemo(()=>{const r=HT();return AT(r,e,_T(i),n.transformTemplate,n.style),{...r.attrs,style:{...r.style}}},[e]);if(n.style){const r={};$T(r,n.style,n),s.style={...r,...s.style}}return s}const qL=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Jv(n){return typeof n!="string"||n.includes("-")?!1:!!(qL.indexOf(n)>-1||/[A-Z]/u.test(n))}function ZL(n,e,t,{latestValues:i},s,r=!1,l){const d=(l??Jv(n)?GL:HL)(e,i,s,n),h=BL(e,typeof n=="string",r),p=n!==I.Fragment?{...h,...d,ref:t}:{},{children:m}=e,v=I.useMemo(()=>An(m)?m.get():m,[m]);return I.createElement(n,{...p,children:v})}function YL({scrapeMotionValuesFromProps:n,createRenderState:e},t,i,s){return{latestValues:XL(t,i,s,n),renderState:e()}}function XL(n,e,t,i){const s={},r=i(n,{});for(const v in r)s[v]=Xd(r[v]);let{initial:l,animate:c}=n;const d=Uh(n),h=hT(n);e&&h&&!d&&n.inherit!==!1&&(l===void 0&&(l=e.initial),c===void 0&&(c=e.animate));let p=t?t.initial===!1:!1;p=p||l===!1;const m=p?c:l;if(m&&typeof m!="boolean"&&!Fh(m)){const v=Array.isArray(m)?m:[m];for(let b=0;b<v.length;b++){const w=Uv(n,v[b]);if(w){const{transitionEnd:x,transition:A,...S}=w;for(const T in S){let E=S[T];if(Array.isArray(E)){const M=p?E.length-1:0;E=E[M]}E!==null&&(s[T]=E)}for(const T in x)s[T]=x[T]}}}return s}const GT=n=>(e,t)=>{const i=I.useContext(Vh),s=I.useContext(jh),r=()=>YL(n,e,i,s);return t?r():Yc(r)},WL=GT({scrapeMotionValuesFromProps:Wv,createRenderState:Kv}),KL=GT({scrapeMotionValuesFromProps:ET,createRenderState:HT}),JL=Symbol.for("motionComponentSymbol");function QL(n,e,t){const i=I.useRef(t);I.useInsertionEffect(()=>{i.current=t});const s=I.useRef(null);return I.useCallback(r=>{r&&n.onMount?.(r),e&&(r?e.mount(r):e.unmount());const l=i.current;if(typeof l=="function")if(r){const c=l(r);typeof c=="function"&&(s.current=c)}else s.current?(s.current(),s.current=null):l(r);else l&&(l.current=r)},[e])}const qT=I.createContext({});function Do(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function ez(n,e,t,i,s,r){const{visualElement:l}=I.useContext(Vh),c=I.useContext(FT),d=I.useContext(jh),h=I.useContext(Jc),p=h.reducedMotion,m=h.skipAnimations,v=I.useRef(null),b=I.useRef(!1);i=i||c.renderer,!v.current&&i&&(v.current=i(n,{visualState:e,parent:l,props:t,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:p,skipAnimations:m,isSVG:r}),b.current&&v.current&&(v.current.manuallyAnimateOnMount=!0));const w=v.current,x=I.useContext(qT);w&&!w.projection&&s&&(w.type==="html"||w.type==="svg")&&tz(v.current,t,s,x);const A=I.useRef(!1);I.useInsertionEffect(()=>{w&&A.current&&w.update(t,d)});const S=t[QE],T=I.useRef(!!S&&!window.MotionHandoffIsComplete?.(S)&&window.MotionHasOptimisedAnimation?.(S));return _v(()=>{b.current=!0,w&&(A.current=!0,window.MotionIsMounted=!0,w.updateFeatures(),w.scheduleRenderMicrotask(),T.current&&w.animationState&&w.animationState.animateChanges())}),I.useEffect(()=>{w&&(!T.current&&w.animationState&&w.animationState.animateChanges(),T.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(S)}),T.current=!1),w.enteringChildren=void 0)}),w}function tz(n,e,t,i){const{layoutId:s,layout:r,drag:l,dragConstraints:c,layoutScroll:d,layoutRoot:h,layoutCrossfade:p}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:ZT(n.parent)),n.projection.setOptions({layoutId:s,layout:r,alwaysMeasureLayout:!!l||c&&Do(c),visualElement:n,animationType:typeof r=="string"?r:"both",initialPromotionConfig:i,crossfade:p,layoutScroll:d,layoutRoot:h})}function ZT(n){if(n)return n.options.allowProjection!==!1?n.projection:ZT(n.parent)}function Fm(n,{forwardMotionProps:e=!1,type:t}={},i,s){i&&LL(i);const r=t?t==="svg":Jv(n),l=r?KL:WL;function c(h,p){let m;const v={...I.useContext(Jc),...h,layoutId:nz(h)},{isStatic:b}=v,w=UL(h),x=l(h,b);if(!b&&fE){iz();const A=sz(v);m=A.MeasureLayout,w.visualElement=ez(n,x,v,s,A.ProjectionNode,r)}return k.jsxs(Vh.Provider,{value:w,children:[m&&w.visualElement?k.jsx(m,{visualElement:w.visualElement,...v}):null,ZL(n,h,QL(x,w.visualElement,p),x,b,e,r)]})}c.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const d=I.forwardRef(c);return d[JL]=n,d}function nz({layoutId:n}){const e=I.useContext(Sv).id;return e&&n!==void 0?e+"-"+n:n}function iz(n,e){I.useContext(FT).strict}function sz(n){const e=UT(),{drag:t,layout:i}=e;if(!t&&!i)return{};const s={...t,...i};return{MeasureLayout:t?.isEnabled(n)||i?.isEnabled(n)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}function az(n,e){if(typeof Proxy>"u")return Fm;const t=new Map,i=(r,l)=>Fm(r,l,n,e),s=(r,l)=>i(r,l);return new Proxy(s,{get:(r,l)=>l==="create"?i:(t.has(l)||t.set(l,Fm(l,void 0,n,e)),t.get(l))})}const rz=(n,e)=>e.isSVG??Jv(n)?new jI(e):new OI(e,{allowProjection:n!==I.Fragment});class oz extends qa{constructor(e){super(e),e.animationState||(e.animationState=$I(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Fh(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let lz=0;class cz extends qa{constructor(){super(...arguments),this.id=lz++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const s=this.node.animationState.setActive("exit",!e);t&&!e&&s.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const uz={animation:{Feature:oz},exit:{Feature:cz}};function Qc(n){return{point:{x:n.pageX,y:n.pageY}}}const dz=n=>e=>Gv(e)&&n(e,Qc(e));function Sc(n,e,t,i){return Dc(n,e,dz(t),i)}const YT=({current:n})=>n?n.ownerDocument.defaultView:null,tS=(n,e)=>Math.abs(n-e);function hz(n,e){const t=tS(n.x,e.x),i=tS(n.y,e.y);return Math.sqrt(t**2+i**2)}const nS=new Set(["auto","scroll"]);class XT{constructor(e,t,{transformPagePoint:i,contextWindow:s=window,dragSnapToOrigin:r=!1,distanceThreshold:l=3,element:c}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=b=>{this.handleScroll(b.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=Vm(this.lastMoveEventInfo,this.history),w=this.startEvent!==null,x=hz(b.offset,{x:0,y:0})>=this.distanceThreshold;if(!w&&!x)return;const{point:A}=b,{timestamp:S}=On;this.history.push({...A,timestamp:S});const{onStart:T,onMove:E}=this.handlers;w||(T&&T(this.lastMoveEvent,b),this.startEvent=this.lastMoveEvent),E&&E(this.lastMoveEvent,b)},this.handlePointerMove=(b,w)=>{this.lastMoveEvent=b,this.lastMoveEventInfo=Um(w,this.transformPagePoint),ht.update(this.updatePoint,!0)},this.handlePointerUp=(b,w)=>{this.end();const{onEnd:x,onSessionEnd:A,resumeAnimation:S}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&S&&S(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const T=Vm(b.type==="pointercancel"?this.lastMoveEventInfo:Um(w,this.transformPagePoint),this.history);this.startEvent&&x&&x(b,T),A&&A(b,T)},!Gv(e))return;this.dragSnapToOrigin=r,this.handlers=t,this.transformPagePoint=i,this.distanceThreshold=l,this.contextWindow=s||window;const d=Qc(e),h=Um(d,this.transformPagePoint),{point:p}=h,{timestamp:m}=On;this.history=[{...p,timestamp:m}];const{onSessionStart:v}=t;v&&v(e,Vm(h,this.history)),this.removeListeners=Xc(Sc(this.contextWindow,"pointermove",this.handlePointerMove),Sc(this.contextWindow,"pointerup",this.handlePointerUp),Sc(this.contextWindow,"pointercancel",this.handlePointerUp)),c&&this.startScrollTracking(c)}startScrollTracking(e){let t=e.parentElement;for(;t;){const i=getComputedStyle(t);(nS.has(i.overflowX)||nS.has(i.overflowY))&&this.scrollPositions.set(t,{x:t.scrollLeft,y:t.scrollTop}),t=t.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){const t=this.scrollPositions.get(e);if(!t)return;const i=e===window,s=i?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},r={x:s.x-t.x,y:s.y-t.y};r.x===0&&r.y===0||(i?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=r.x,this.lastMoveEventInfo.point.y+=r.y):this.history.length>0&&(this.history[0].x-=r.x,this.history[0].y-=r.y),this.scrollPositions.set(e,s),ht.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),aa(this.updatePoint)}}function Um(n,e){return e?{point:e(n.point)}:n}function iS(n,e){return{x:n.x-e.x,y:n.y-e.y}}function Vm({point:n},e){return{point:n,delta:iS(n,WT(e)),offset:iS(n,fz(e)),velocity:pz(e,.1)}}function fz(n){return n[0]}function WT(n){return n[n.length-1]}function pz(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,i=null;const s=WT(n);for(;t>=0&&(i=n[t],!(s.timestamp-i.timestamp>is(e)));)t--;if(!i)return{x:0,y:0};i===n[0]&&n.length>2&&s.timestamp-i.timestamp>is(e)*2&&(i=n[1]);const r=Ui(s.timestamp-i.timestamp);if(r===0)return{x:0,y:0};const l={x:(s.x-i.x)/r,y:(s.y-i.y)/r};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function mz(n,{min:e,max:t},i){return e!==void 0&&n<e?n=i?jt(e,n,i.min):Math.max(n,e):t!==void 0&&n>t&&(n=i?jt(t,n,i.max):Math.min(n,t)),n}function sS(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function gz(n,{top:e,left:t,bottom:i,right:s}){return{x:sS(n.x,t,s),y:sS(n.y,e,i)}}function aS(n,e){let t=e.min-n.min,i=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,i]=[i,t]),{min:t,max:i}}function vz(n,e){return{x:aS(n.x,e.x),y:aS(n.y,e.y)}}function yz(n,e){let t=.5;const i=Gn(n),s=Gn(e);return s>i?t=Cc(e.min,e.max-i,n.min):i>s&&(t=Cc(n.min,n.max-s,e.min)),Ts(0,1,t)}function bz(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const Ug=.35;function xz(n=Ug){return n===!1?n=0:n===!0&&(n=Ug),{x:rS(n,"left","right"),y:rS(n,"top","bottom")}}function rS(n,e,t){return{min:oS(n,e),max:oS(n,t)}}function oS(n,e){return typeof n=="number"?n:n[e]||0}const wz=new WeakMap;class Az{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=pn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:i}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const r=m=>{t&&this.snapToCursor(Qc(m).point),this.stopAnimation()},l=(m,v)=>{const{drag:b,dragPropagation:w,onDragStart:x}=this.getProps();if(b&&!w&&(this.openDragLock&&this.openDragLock(),this.openDragLock=XP(b),!this.openDragLock))return;this.latestPointerEvent=m,this.latestPanInfo=v,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),xs(S=>{let T=this.getAxisMotionValue(S).get()||0;if(Es.test(T)){const{projection:E}=this.visualElement;if(E&&E.layout){const M=E.layout.layoutBox[S];M&&(T=Gn(M)*(parseFloat(T)/100))}}this.originPoint[S]=T}),x&&ht.update(()=>x(m,v),!1,!0),Ng(this.visualElement,"transform");const{animationState:A}=this.visualElement;A&&A.setActive("whileDrag",!0)},c=(m,v)=>{this.latestPointerEvent=m,this.latestPanInfo=v;const{dragPropagation:b,dragDirectionLock:w,onDirectionLock:x,onDrag:A}=this.getProps();if(!b&&!this.openDragLock)return;const{offset:S}=v;if(w&&this.currentDirection===null){this.currentDirection=_z(S),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",v.point,S),this.updateAxis("y",v.point,S),this.visualElement.render(),A&&ht.update(()=>A(m,v),!1,!0)},d=(m,v)=>{this.latestPointerEvent=m,this.latestPanInfo=v,this.stop(m,v),this.latestPointerEvent=null,this.latestPanInfo=null},h=()=>{const{dragSnapToOrigin:m}=this.getProps();(m||this.constraints)&&this.startAnimation({x:0,y:0})},{dragSnapToOrigin:p}=this.getProps();this.panSession=new XT(e,{onSessionStart:r,onStart:l,onMove:c,onSessionEnd:d,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:p,distanceThreshold:i,contextWindow:YT(this.visualElement),element:this.visualElement.current})}stop(e,t){const i=e||this.latestPointerEvent,s=t||this.latestPanInfo,r=this.isDragging;if(this.cancel(),!r||!s||!i)return;const{velocity:l}=s;this.startAnimation(l);const{onDragEnd:c}=this.getProps();c&&ht.postRender(()=>c(i,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(e,t,i){const{drag:s}=this.getProps();if(!i||!Sd(e,s,this.currentDirection))return;const r=this.getAxisMotionValue(e);let l=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(l=mz(l,this.constraints[e],this.elastic[e])),r.set(l)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,s=this.constraints;e&&Do(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&i?this.constraints=gz(i.layoutBox,e):this.constraints=!1,this.elastic=xz(t),s!==this.constraints&&!Do(e)&&i&&this.constraints&&!this.hasMutatedConstraints&&xs(r=>{this.constraints!==!1&&this.getAxisMotionValue(r)&&(this.constraints[r]=bz(i.layoutBox[r],this.constraints[r]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Do(e))return!1;const i=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const r=TI(i,s.root,this.visualElement.getTransformPagePoint());let l=vz(s.layout.layoutBox,r);if(t){const c=t(SI(l));this.hasMutatedConstraints=!!c,c&&(l=gT(c))}return l}startAnimation(e){const{drag:t,dragMomentum:i,dragElastic:s,dragTransition:r,dragSnapToOrigin:l,onDragTransitionEnd:c}=this.getProps(),d=this.constraints||{},h=xs(p=>{if(!Sd(p,t,this.currentDirection))return;let m=d&&d[p]||{};l&&(m={min:0,max:0});const v=s?200:1e6,b=s?40:1e7,w={type:"inertia",velocity:i?e[p]:0,bounceStiffness:v,bounceDamping:b,timeConstant:750,restDelta:1,restSpeed:10,...r,...m};return this.startAxisValueAnimation(p,w)});return Promise.all(h).then(c)}startAxisValueAnimation(e,t){const i=this.getAxisMotionValue(e);return Ng(this.visualElement,e),i.start(Fv(e,i,0,t,this.visualElement,!1))}stopAnimation(){xs(e=>this.getAxisMotionValue(e).stop())}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),s=i[t];return s||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){xs(t=>{const{drag:i}=this.getProps();if(!Sd(t,i,this.currentDirection))return;const{projection:s}=this.visualElement,r=this.getAxisMotionValue(t);if(s&&s.layout){const{min:l,max:c}=s.layout.layoutBox[t],d=r.get()||0;r.set(e[t]-jt(l,c,.5)+d)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:i}=this.visualElement;if(!Do(t)||!i||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};xs(l=>{const c=this.getAxisMotionValue(l);if(c&&this.constraints!==!1){const d=c.get();s[l]=yz({min:d,max:d},this.constraints[l])}});const{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.constraints=!1,this.resolveConstraints(),xs(l=>{if(!Sd(l,e,null))return;const c=this.getAxisMotionValue(l),{min:d,max:h}=this.constraints[l];c.set(jt(d,h,s[l]))}),this.visualElement.render()}addListeners(){if(!this.visualElement.current)return;wz.set(this.visualElement,this);const e=this.visualElement.current,t=Sc(e,"pointerdown",h=>{const{drag:p,dragListener:m=!0}=this.getProps(),v=h.target,b=v!==e&&tI(v);p&&m&&!b&&this.start(h)});let i;const s=()=>{const{dragConstraints:h}=this.getProps();Do(h)&&h.current&&(this.constraints=this.resolveRefConstraints(),i||(i=Sz(e,h.current,()=>this.scalePositionWithinConstraints())))},{projection:r}=this.visualElement,l=r.addEventListener("measure",s);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),ht.read(s);const c=Dc(window,"resize",()=>this.scalePositionWithinConstraints()),d=r.addEventListener("didUpdate",(({delta:h,hasLayoutChanged:p})=>{this.isDragging&&p&&(xs(m=>{const v=this.getAxisMotionValue(m);v&&(this.originPoint[m]+=h[m].translate,v.set(v.get()+h[m].translate))}),this.visualElement.render())}));return()=>{c(),t(),l(),d&&d(),i&&i()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:i=!1,dragPropagation:s=!1,dragConstraints:r=!1,dragElastic:l=Ug,dragMomentum:c=!0}=e;return{...e,drag:t,dragDirectionLock:i,dragPropagation:s,dragConstraints:r,dragElastic:l,dragMomentum:c}}}function lS(n){let e=!0;return()=>{if(e){e=!1;return}n()}}function Sz(n,e,t){const i=fA(n,lS(t)),s=fA(e,lS(t));return()=>{i(),s()}}function Sd(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function _z(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class Ez extends qa{constructor(e){super(e),this.removeGroupControls=Vi,this.removeListeners=Vi,this.controls=new Az(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Vi}update(){const{dragControls:e}=this.node.getProps(),{dragControls:t}=this.node.prevProps||{};e!==t&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const $m=n=>(e,t)=>{n&&ht.update(()=>n(e,t),!1,!0)};class Tz extends qa{constructor(){super(...arguments),this.removePointerDownListener=Vi}onPointerDown(e){this.session=new XT(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:YT(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:i,onPanEnd:s}=this.node.getProps();return{onSessionStart:$m(e),onStart:$m(t),onMove:$m(i),onEnd:(r,l)=>{delete this.session,s&&ht.postRender(()=>s(r,l))}}}mount(){this.removePointerDownListener=Sc(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let Hm=!1;class Cz extends I.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i,layoutId:s}=this.props,{projection:r}=e;r&&(t.group&&t.group.add(r),i&&i.register&&s&&i.register(r),Hm&&r.root.didUpdate(),r.addEventListener("animationComplete",()=>{this.safeToRemove()}),r.setOptions({...r.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),Wd.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:i,drag:s,isPresent:r}=this.props,{projection:l}=i;return l&&(l.isPresent=r,e.layoutDependency!==t&&l.setOptions({...l.options,layoutDependency:t}),Hm=!0,s||e.layoutDependency!==t||t===void 0||e.isPresent!==r?l.willUpdate():this.safeToRemove(),e.isPresent!==r&&(r?l.promote():l.relegate()||ht.postRender(()=>{const c=l.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Hv.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i}=this.props,{projection:s}=e;Hm=!0,s&&(s.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(s),i&&i.deregister&&i.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function KT(n){const[e,t]=jT(),i=I.useContext(Sv);return k.jsx(Cz,{...n,layoutGroup:i,switchLayoutGroup:I.useContext(qT),isPresent:e,safeToRemove:t})}const kz={pan:{Feature:Tz},drag:{Feature:Ez,ProjectionNode:zT,MeasureLayout:KT}};function cS(n,e,t){const{props:i}=n;n.animationState&&i.whileHover&&n.animationState.setActive("whileHover",t==="Start");const s="onHover"+t,r=i[s];r&&ht.postRender(()=>r(e,Qc(e)))}class Mz extends qa{mount(){const{current:e}=this.node;e&&(this.unmount=KP(e,(t,i)=>(cS(this.node,i,"Start"),s=>cS(this.node,s,"End"))))}unmount(){}}class Rz extends qa{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Xc(Dc(this.node.current,"focus",()=>this.onFocus()),Dc(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function uS(n,e,t){const{props:i}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&i.whileTap&&n.animationState.setActive("whileTap",t==="Start");const s="onTap"+(t==="End"?"":t),r=i[s];r&&ht.postRender(()=>r(e,Qc(e)))}class Dz extends qa{mount(){const{current:e}=this.node;if(!e)return;const{globalTapTarget:t,propagate:i}=this.node.props;this.unmount=iI(e,(s,r)=>(uS(this.node,r,"Start"),(l,{success:c})=>uS(this.node,l,c?"End":"Cancel")),{useGlobalTarget:t,stopPropagation:i?.tap===!1})}unmount(){}}const Vg=new WeakMap,Gm=new WeakMap,Oz=n=>{const e=Vg.get(n.target);e&&e(n)},Nz=n=>{n.forEach(Oz)};function Pz({root:n,...e}){const t=n||document;Gm.has(t)||Gm.set(t,{});const i=Gm.get(t),s=JSON.stringify(e);return i[s]||(i[s]=new IntersectionObserver(Nz,{root:n,...e})),i[s]}function Iz(n,e,t){const i=Pz(e);return Vg.set(n,t),i.observe(n),()=>{Vg.delete(n),i.unobserve(n)}}const Lz={some:0,all:1};class zz extends qa{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:i,amount:s="some",once:r}=e,l={root:t?t.current:void 0,rootMargin:i,threshold:typeof s=="number"?s:Lz[s]},c=d=>{const{isIntersecting:h}=d;if(this.isInView===h||(this.isInView=h,r&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:p,onViewportLeave:m}=this.node.getProps(),v=h?p:m;v&&v(d)};return Iz(this.node.current,l,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(jz(e,t))&&this.startObserver()}unmount(){}}function jz({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const Bz={inView:{Feature:zz},tap:{Feature:Dz},focus:{Feature:Rz},hover:{Feature:Mz}},Fz={layout:{ProjectionNode:zT,MeasureLayout:KT}},Uz={...uz,...Bz,...kz,...Fz},Cs=az(Uz,rz);function Qv(n){const e=Yc(()=>Rr(n)),{isStatic:t}=I.useContext(Jc);if(t){const[,i]=I.useState(n);I.useEffect(()=>e.on("change",i),[])}return e}function JT(n,e){const t=Qv(e()),i=()=>t.set(e());return i(),_v(()=>{const s=()=>ht.preRender(i,!1,!0),r=n.map(l=>l.on("change",s));return()=>{r.forEach(l=>l()),aa(i)}}),t}function Vz(n){wc.current=[],n();const e=JT(wc.current,n);return wc.current=void 0,e}function QT(n,e,t,i){if(typeof n=="function")return Vz(n);const r=typeof e=="function"?e:fI(e,t,i),l=Array.isArray(n)?dS(n,r):dS([n],([d])=>r(d)),c=Array.isArray(n)?void 0:n.accelerate;return c&&!c.isTransformed&&typeof e!="function"&&Array.isArray(t)&&i?.clamp!==!1&&(l.accelerate={...c,times:e,keyframes:t,isTransformed:!0}),l}function dS(n,e){const t=Yc(()=>[]);return JT(n,()=>{t.length=0;const i=n.length;for(let s=0;s<i;s++)t[s]=n[s].get();return e(t)})}function $z(n,e={}){const{isStatic:t}=I.useContext(Jc),i=()=>An(n)?n.get():n;if(t)return QT(i);const s=Qv(i());return I.useInsertionEffect(()=>pI(s,n,e),[s,JSON.stringify(e)]),s}function Hz(n,e={}){return $z(n,{type:"spring",...e})}const hS=n=>{let e;const t=new Set,i=(h,p)=>{const m=typeof h=="function"?h(e):h;if(!Object.is(m,e)){const v=e;e=p??(typeof m!="object"||m===null)?m:Object.assign({},e,m),t.forEach(b=>b(e,v))}},s=()=>e,c={setState:i,getState:s,getInitialState:()=>d,subscribe:h=>(t.add(h),()=>t.delete(h))},d=e=n(i,s,c);return c},Gz=(n=>n?hS(n):hS),qz=n=>n;function Zz(n,e=qz){const t=re.useSyncExternalStore(n.subscribe,re.useCallback(()=>e(n.getState()),[n,e]),re.useCallback(()=>e(n.getInitialState()),[n,e]));return re.useDebugValue(t),t}const fS=n=>{const e=Gz(n),t=i=>Zz(e,i);return Object.assign(t,e),t},eC=(n=>n?fS(n):fS);var tC="vercel.ai.error",Yz=Symbol.for(tC),pS,mS,Ue=class nC extends(mS=Error,pS=Yz,mS){constructor({name:e,message:t,cause:i}){super(t),this[pS]=!0,this.name=e,this.cause=i}static isInstance(e){return nC.hasMarker(e,tC)}static hasMarker(e,t){const i=Symbol.for(t);return e!=null&&typeof e=="object"&&i in e&&typeof e[i]=="boolean"&&e[i]===!0}},iC="AI_APICallError",sC=`vercel.ai.error.${iC}`,Xz=Symbol.for(sC),gS,vS,Bn=class extends(vS=Ue,gS=Xz,vS){constructor({message:n,url:e,requestBodyValues:t,statusCode:i,responseHeaders:s,responseBody:r,cause:l,isRetryable:c=i!=null&&(i===408||i===409||i===429||i>=500),data:d}){super({name:iC,message:n,cause:l}),this[gS]=!0,this.url=e,this.requestBodyValues=t,this.statusCode=i,this.responseHeaders=s,this.responseBody=r,this.isRetryable=c,this.data=d}static isInstance(n){return Ue.hasMarker(n,sC)}},aC="AI_EmptyResponseBodyError",rC=`vercel.ai.error.${aC}`,Wz=Symbol.for(rC),yS,bS,Kz=class extends(bS=Ue,yS=Wz,bS){constructor({message:n="Empty response body"}={}){super({name:aC,message:n}),this[yS]=!0}static isInstance(n){return Ue.hasMarker(n,rC)}};function oC(n){return n==null?"unknown error":typeof n=="string"?n:n instanceof Error?n.message:JSON.stringify(n)}var lC="AI_InvalidArgumentError",cC=`vercel.ai.error.${lC}`,Jz=Symbol.for(cC),xS,wS,uC=class extends(wS=Ue,xS=Jz,wS){constructor({message:e,cause:t,argument:i}){super({name:lC,message:e,cause:t}),this[xS]=!0,this.argument=i}static isInstance(e){return Ue.hasMarker(e,cC)}},dC="AI_InvalidPromptError",hC=`vercel.ai.error.${dC}`,Qz=Symbol.for(hC),AS,SS,Co=class extends(SS=Ue,AS=Qz,SS){constructor({prompt:n,message:e,cause:t}){super({name:dC,message:`Invalid prompt: ${e}`,cause:t}),this[AS]=!0,this.prompt=n}static isInstance(n){return Ue.hasMarker(n,hC)}},fC="AI_JSONParseError",pC=`vercel.ai.error.${fC}`,ej=Symbol.for(pC),_S,ES,Oc=class extends(ES=Ue,_S=ej,ES){constructor({text:n,cause:e}){super({name:fC,message:`JSON parsing failed: Text: ${n}.
Error message: ${oC(e)}`,cause:e}),this[_S]=!0,this.text=n}static isInstance(n){return Ue.hasMarker(n,pC)}},mC="AI_LoadAPIKeyError",gC=`vercel.ai.error.${mC}`,tj=Symbol.for(gC),TS,CS,_d=class extends(CS=Ue,TS=tj,CS){constructor({message:n}){super({name:mC,message:n}),this[TS]=!0}static isInstance(n){return Ue.hasMarker(n,gC)}},vC="AI_TooManyEmbeddingValuesForCallError",yC=`vercel.ai.error.${vC}`,nj=Symbol.for(yC),kS,MS,ij=class extends(MS=Ue,kS=nj,MS){constructor(n){super({name:vC,message:`Too many values for a single embedding call. The ${n.provider} model "${n.modelId}" can only embed up to ${n.maxEmbeddingsPerCall} values per call, but ${n.values.length} values were provided.`}),this[kS]=!0,this.provider=n.provider,this.modelId=n.modelId,this.maxEmbeddingsPerCall=n.maxEmbeddingsPerCall,this.values=n.values}static isInstance(n){return Ue.hasMarker(n,yC)}},bC="AI_TypeValidationError",xC=`vercel.ai.error.${bC}`,sj=Symbol.for(xC),RS,DS,di=class $g extends(DS=Ue,RS=sj,DS){constructor({value:e,cause:t,context:i}){let s="Type validation failed";if(i?.field&&(s+=` for ${i.field}`),i?.entityName||i?.entityId){s+=" (";const r=[];i.entityName&&r.push(i.entityName),i.entityId&&r.push(`id: "${i.entityId}"`),s+=r.join(", "),s+=")"}super({name:bC,message:`${s}: Value: ${JSON.stringify(e)}.
Error message: ${oC(t)}`,cause:t}),this[RS]=!0,this.value=e,this.context=i}static isInstance(e){return Ue.hasMarker(e,xC)}static wrap({value:e,cause:t,context:i}){var s,r,l;return $g.isInstance(t)&&t.value===e&&((s=t.context)==null?void 0:s.field)===i?.field&&((r=t.context)==null?void 0:r.entityName)===i?.entityName&&((l=t.context)==null?void 0:l.entityId)===i?.entityId?t:new $g({value:e,cause:t,context:i})}},wC="AI_UnsupportedFunctionalityError",AC=`vercel.ai.error.${wC}`,aj=Symbol.for(AC),OS,NS,Qo=class extends(NS=Ue,OS=aj,NS){constructor({functionality:n,message:e=`'${n}' functionality not supported.`}){super({name:wC,message:e}),this[OS]=!0,this.functionality=n}static isInstance(n){return Ue.hasMarker(n,AC)}};function ch(n){return n===null||typeof n=="string"||typeof n=="number"||typeof n=="boolean"?!0:Array.isArray(n)?n.every(ch):typeof n=="object"?Object.entries(n).every(([e,t])=>typeof e=="string"&&(t===void 0||ch(t))):!1}function PS(n){return Array.isArray(n)&&n.every(ch)}function uh(n){return n!=null&&typeof n=="object"&&Object.entries(n).every(([e,t])=>typeof e=="string"&&(t===void 0||ch(t)))}function J(n,e,t){function i(c,d){if(c._zod||Object.defineProperty(c,"_zod",{value:{def:d,constr:l,traits:new Set},enumerable:!1}),c._zod.traits.has(n))return;c._zod.traits.add(n),e(c,d);const h=l.prototype,p=Object.keys(h);for(let m=0;m<p.length;m++){const v=p[m];v in c||(c[v]=h[v].bind(c))}}const s=t?.Parent??Object;class r extends s{}Object.defineProperty(r,"name",{value:n});function l(c){var d;const h=t?.Parent?new r:this;i(h,c),(d=h._zod).deferred??(d.deferred=[]);for(const p of h._zod.deferred)p();return h}return Object.defineProperty(l,"init",{value:i}),Object.defineProperty(l,Symbol.hasInstance,{value:c=>t?.Parent&&c instanceof t.Parent?!0:c?._zod?.traits?.has(n)}),Object.defineProperty(l,"name",{value:n}),l}class Zo extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class SC extends Error{constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name="ZodEncodeError"}}const _C={};function Ua(n){return _C}function EC(n){const e=Object.values(n).filter(i=>typeof i=="number");return Object.entries(n).filter(([i,s])=>e.indexOf(+i)===-1).map(([i,s])=>s)}function Hg(n,e){return typeof e=="bigint"?e.toString():e}function $h(n){return{get value(){{const e=n();return Object.defineProperty(this,"value",{value:e}),e}}}}function ey(n){return n==null}function ty(n){const e=n.startsWith("^")?1:0,t=n.endsWith("$")?n.length-1:n.length;return n.slice(e,t)}function rj(n,e){const t=(n.toString().split(".")[1]||"").length,i=e.toString();let s=(i.split(".")[1]||"").length;if(s===0&&/\d?e-\d?/.test(i)){const d=i.match(/\d?e-(\d?)/);d?.[1]&&(s=Number.parseInt(d[1]))}const r=t>s?t:s,l=Number.parseInt(n.toFixed(r).replace(".","")),c=Number.parseInt(e.toFixed(r).replace(".",""));return l%c/10**r}const IS=Symbol("evaluating");function Ye(n,e,t){let i;Object.defineProperty(n,e,{get(){if(i!==IS)return i===void 0&&(i=IS,i=t()),i},set(s){Object.defineProperty(n,e,{value:s})},configurable:!0})}function Ir(n,e,t){Object.defineProperty(n,e,{value:t,writable:!0,enumerable:!0,configurable:!0})}function Za(...n){const e={};for(const t of n){const i=Object.getOwnPropertyDescriptors(t);Object.assign(e,i)}return Object.defineProperties({},e)}function LS(n){return JSON.stringify(n)}function oj(n){return n.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}const TC="captureStackTrace"in Error?Error.captureStackTrace:(...n)=>{};function Nc(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)}const lj=$h(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const n=Function;return new n(""),!0}catch{return!1}});function el(n){if(Nc(n)===!1)return!1;const e=n.constructor;if(e===void 0||typeof e!="function")return!0;const t=e.prototype;return!(Nc(t)===!1||Object.prototype.hasOwnProperty.call(t,"isPrototypeOf")===!1)}function CC(n){return el(n)?{...n}:Array.isArray(n)?[...n]:n}const cj=new Set(["string","number","symbol"]);function tl(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Ya(n,e,t){const i=new n._zod.constr(e??n._zod.def);return(!e||t?.parent)&&(i._zod.parent=n),i}function Se(n){const e=n;if(!e)return{};if(typeof e=="string")return{error:()=>e};if(e?.message!==void 0){if(e?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");e.error=e.message}return delete e.message,typeof e.error=="string"?{...e,error:()=>e.error}:e}function uj(n){return Object.keys(n).filter(e=>n[e]._zod.optin==="optional"&&n[e]._zod.optout==="optional")}const dj={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function hj(n,e){const t=n._zod.def,i=t.checks;if(i&&i.length>0)throw new Error(".pick() cannot be used on object schemas containing refinements");const r=Za(n._zod.def,{get shape(){const l={};for(const c in e){if(!(c in t.shape))throw new Error(`Unrecognized key: "${c}"`);e[c]&&(l[c]=t.shape[c])}return Ir(this,"shape",l),l},checks:[]});return Ya(n,r)}function fj(n,e){const t=n._zod.def,i=t.checks;if(i&&i.length>0)throw new Error(".omit() cannot be used on object schemas containing refinements");const r=Za(n._zod.def,{get shape(){const l={...n._zod.def.shape};for(const c in e){if(!(c in t.shape))throw new Error(`Unrecognized key: "${c}"`);e[c]&&delete l[c]}return Ir(this,"shape",l),l},checks:[]});return Ya(n,r)}function pj(n,e){if(!el(e))throw new Error("Invalid input to extend: expected a plain object");const t=n._zod.def.checks;if(t&&t.length>0){const r=n._zod.def.shape;for(const l in e)if(Object.getOwnPropertyDescriptor(r,l)!==void 0)throw new Error("Cannot overwrite keys on object schemas containing refinements. Use `.safeExtend()` instead.")}const s=Za(n._zod.def,{get shape(){const r={...n._zod.def.shape,...e};return Ir(this,"shape",r),r}});return Ya(n,s)}function mj(n,e){if(!el(e))throw new Error("Invalid input to safeExtend: expected a plain object");const t=Za(n._zod.def,{get shape(){const i={...n._zod.def.shape,...e};return Ir(this,"shape",i),i}});return Ya(n,t)}function gj(n,e){const t=Za(n._zod.def,{get shape(){const i={...n._zod.def.shape,...e._zod.def.shape};return Ir(this,"shape",i),i},get catchall(){return e._zod.def.catchall},checks:[]});return Ya(n,t)}function vj(n,e,t){const s=e._zod.def.checks;if(s&&s.length>0)throw new Error(".partial() cannot be used on object schemas containing refinements");const l=Za(e._zod.def,{get shape(){const c=e._zod.def.shape,d={...c};if(t)for(const h in t){if(!(h in c))throw new Error(`Unrecognized key: "${h}"`);t[h]&&(d[h]=n?new n({type:"optional",innerType:c[h]}):c[h])}else for(const h in c)d[h]=n?new n({type:"optional",innerType:c[h]}):c[h];return Ir(this,"shape",d),d},checks:[]});return Ya(e,l)}function yj(n,e,t){const i=Za(e._zod.def,{get shape(){const s=e._zod.def.shape,r={...s};if(t)for(const l in t){if(!(l in r))throw new Error(`Unrecognized key: "${l}"`);t[l]&&(r[l]=new n({type:"nonoptional",innerType:s[l]}))}else for(const l in s)r[l]=new n({type:"nonoptional",innerType:s[l]});return Ir(this,"shape",r),r}});return Ya(e,i)}function Fo(n,e=0){if(n.aborted===!0)return!0;for(let t=e;t<n.issues.length;t++)if(n.issues[t]?.continue!==!0)return!0;return!1}function Uo(n,e){return e.map(t=>{var i;return(i=t).path??(i.path=[]),t.path.unshift(n),t})}function Ed(n){return typeof n=="string"?n:n?.message}function Va(n,e,t){const i={...n,path:n.path??[]};if(!n.message){const s=Ed(n.inst?._zod.def?.error?.(n))??Ed(e?.error?.(n))??Ed(t.customError?.(n))??Ed(t.localeError?.(n))??"Invalid input";i.message=s}return delete i.inst,delete i.continue,e?.reportInput||delete i.input,i}function ny(n){return Array.isArray(n)?"array":typeof n=="string"?"string":"unknown"}function Pc(...n){const[e,t,i]=n;return typeof e=="string"?{message:e,code:"custom",input:t,inst:i}:{...e}}const kC=(n,e)=>{n.name="$ZodError",Object.defineProperty(n,"_zod",{value:n._zod,enumerable:!1}),Object.defineProperty(n,"issues",{value:e,enumerable:!1}),n.message=JSON.stringify(e,Hg,2),Object.defineProperty(n,"toString",{value:()=>n.message,enumerable:!1})},MC=J("$ZodError",kC),RC=J("$ZodError",kC,{Parent:Error});function bj(n,e=t=>t.message){const t={},i=[];for(const s of n.issues)s.path.length>0?(t[s.path[0]]=t[s.path[0]]||[],t[s.path[0]].push(e(s))):i.push(e(s));return{formErrors:i,fieldErrors:t}}function xj(n,e=t=>t.message){const t={_errors:[]},i=s=>{for(const r of s.issues)if(r.code==="invalid_union"&&r.errors.length)r.errors.map(l=>i({issues:l}));else if(r.code==="invalid_key")i({issues:r.issues});else if(r.code==="invalid_element")i({issues:r.issues});else if(r.path.length===0)t._errors.push(e(r));else{let l=t,c=0;for(;c<r.path.length;){const d=r.path[c];c===r.path.length-1?(l[d]=l[d]||{_errors:[]},l[d]._errors.push(e(r))):l[d]=l[d]||{_errors:[]},l=l[d],c++}}};return i(n),t}const iy=n=>(e,t,i,s)=>{const r=i?Object.assign(i,{async:!1}):{async:!1},l=e._zod.run({value:t,issues:[]},r);if(l instanceof Promise)throw new Zo;if(l.issues.length){const c=new(s?.Err??n)(l.issues.map(d=>Va(d,r,Ua())));throw TC(c,s?.callee),c}return l.value},sy=n=>async(e,t,i,s)=>{const r=i?Object.assign(i,{async:!0}):{async:!0};let l=e._zod.run({value:t,issues:[]},r);if(l instanceof Promise&&(l=await l),l.issues.length){const c=new(s?.Err??n)(l.issues.map(d=>Va(d,r,Ua())));throw TC(c,s?.callee),c}return l.value},Hh=n=>(e,t,i)=>{const s=i?{...i,async:!1}:{async:!1},r=e._zod.run({value:t,issues:[]},s);if(r instanceof Promise)throw new Zo;return r.issues.length?{success:!1,error:new(n??MC)(r.issues.map(l=>Va(l,s,Ua())))}:{success:!0,data:r.value}},wj=Hh(RC),Gh=n=>async(e,t,i)=>{const s=i?Object.assign(i,{async:!0}):{async:!0};let r=e._zod.run({value:t,issues:[]},s);return r instanceof Promise&&(r=await r),r.issues.length?{success:!1,error:new n(r.issues.map(l=>Va(l,s,Ua())))}:{success:!0,data:r.value}},Aj=Gh(RC),Sj=n=>(e,t,i)=>{const s=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return iy(n)(e,t,s)},_j=n=>(e,t,i)=>iy(n)(e,t,i),Ej=n=>async(e,t,i)=>{const s=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return sy(n)(e,t,s)},Tj=n=>async(e,t,i)=>sy(n)(e,t,i),Cj=n=>(e,t,i)=>{const s=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return Hh(n)(e,t,s)},kj=n=>(e,t,i)=>Hh(n)(e,t,i),Mj=n=>async(e,t,i)=>{const s=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return Gh(n)(e,t,s)},Rj=n=>async(e,t,i)=>Gh(n)(e,t,i),Dj=/^[cC][^\s-]{8,}$/,Oj=/^[0-9a-z]+$/,Nj=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,Pj=/^[0-9a-vA-V]{20}$/,Ij=/^[A-Za-z0-9]{27}$/,Lj=/^[a-zA-Z0-9_-]{21}$/,zj=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,jj=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,zS=n=>n?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${n}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,Bj=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,Fj="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function Uj(){return new RegExp(Fj,"u")}const Vj=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,$j=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,Hj=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,Gj=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,qj=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,DC=/^[A-Za-z0-9_-]*$/,Zj=/^\+[1-9]\d{6,14}$/,OC="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",Yj=new RegExp(`^${OC}$`);function NC(n){const e="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof n.precision=="number"?n.precision===-1?`${e}`:n.precision===0?`${e}:[0-5]\\d`:`${e}:[0-5]\\d\\.\\d{${n.precision}}`:`${e}(?::[0-5]\\d(?:\\.\\d+)?)?`}function Xj(n){return new RegExp(`^${NC(n)}$`)}function Wj(n){const e=NC({precision:n.precision}),t=["Z"];n.local&&t.push(""),n.offset&&t.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const i=`${e}(?:${t.join("|")})`;return new RegExp(`^${OC}T(?:${i})$`)}const Kj=n=>{const e=n?`[\\s\\S]{${n?.minimum??0},${n?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${e}$`)},Jj=/^-?\d+$/,PC=/^-?\d+(?:\.\d+)?$/,Qj=/^(?:true|false)$/i,eB=/^null$/i,tB=/^[^A-Z]*$/,nB=/^[^a-z]*$/,hi=J("$ZodCheck",(n,e)=>{var t;n._zod??(n._zod={}),n._zod.def=e,(t=n._zod).onattach??(t.onattach=[])}),IC={number:"number",bigint:"bigint",object:"date"},LC=J("$ZodCheckLessThan",(n,e)=>{hi.init(n,e);const t=IC[typeof e.value];n._zod.onattach.push(i=>{const s=i._zod.bag,r=(e.inclusive?s.maximum:s.exclusiveMaximum)??Number.POSITIVE_INFINITY;e.value<r&&(e.inclusive?s.maximum=e.value:s.exclusiveMaximum=e.value)}),n._zod.check=i=>{(e.inclusive?i.value<=e.value:i.value<e.value)||i.issues.push({origin:t,code:"too_big",maximum:typeof e.value=="object"?e.value.getTime():e.value,input:i.value,inclusive:e.inclusive,inst:n,continue:!e.abort})}}),zC=J("$ZodCheckGreaterThan",(n,e)=>{hi.init(n,e);const t=IC[typeof e.value];n._zod.onattach.push(i=>{const s=i._zod.bag,r=(e.inclusive?s.minimum:s.exclusiveMinimum)??Number.NEGATIVE_INFINITY;e.value>r&&(e.inclusive?s.minimum=e.value:s.exclusiveMinimum=e.value)}),n._zod.check=i=>{(e.inclusive?i.value>=e.value:i.value>e.value)||i.issues.push({origin:t,code:"too_small",minimum:typeof e.value=="object"?e.value.getTime():e.value,input:i.value,inclusive:e.inclusive,inst:n,continue:!e.abort})}}),iB=J("$ZodCheckMultipleOf",(n,e)=>{hi.init(n,e),n._zod.onattach.push(t=>{var i;(i=t._zod.bag).multipleOf??(i.multipleOf=e.value)}),n._zod.check=t=>{if(typeof t.value!=typeof e.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof t.value=="bigint"?t.value%e.value===BigInt(0):rj(t.value,e.value)===0)||t.issues.push({origin:typeof t.value,code:"not_multiple_of",divisor:e.value,input:t.value,inst:n,continue:!e.abort})}}),sB=J("$ZodCheckNumberFormat",(n,e)=>{hi.init(n,e),e.format=e.format||"float64";const t=e.format?.includes("int"),i=t?"int":"number",[s,r]=dj[e.format];n._zod.onattach.push(l=>{const c=l._zod.bag;c.format=e.format,c.minimum=s,c.maximum=r,t&&(c.pattern=Jj)}),n._zod.check=l=>{const c=l.value;if(t){if(!Number.isInteger(c)){l.issues.push({expected:i,format:e.format,code:"invalid_type",continue:!1,input:c,inst:n});return}if(!Number.isSafeInteger(c)){c>0?l.issues.push({input:c,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:n,origin:i,inclusive:!0,continue:!e.abort}):l.issues.push({input:c,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:n,origin:i,inclusive:!0,continue:!e.abort});return}}c<s&&l.issues.push({origin:"number",input:c,code:"too_small",minimum:s,inclusive:!0,inst:n,continue:!e.abort}),c>r&&l.issues.push({origin:"number",input:c,code:"too_big",maximum:r,inclusive:!0,inst:n,continue:!e.abort})}}),aB=J("$ZodCheckMaxLength",(n,e)=>{var t;hi.init(n,e),(t=n._zod.def).when??(t.when=i=>{const s=i.value;return!ey(s)&&s.length!==void 0}),n._zod.onattach.push(i=>{const s=i._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<s&&(i._zod.bag.maximum=e.maximum)}),n._zod.check=i=>{const s=i.value;if(s.length<=e.maximum)return;const l=ny(s);i.issues.push({origin:l,code:"too_big",maximum:e.maximum,inclusive:!0,input:s,inst:n,continue:!e.abort})}}),rB=J("$ZodCheckMinLength",(n,e)=>{var t;hi.init(n,e),(t=n._zod.def).when??(t.when=i=>{const s=i.value;return!ey(s)&&s.length!==void 0}),n._zod.onattach.push(i=>{const s=i._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>s&&(i._zod.bag.minimum=e.minimum)}),n._zod.check=i=>{const s=i.value;if(s.length>=e.minimum)return;const l=ny(s);i.issues.push({origin:l,code:"too_small",minimum:e.minimum,inclusive:!0,input:s,inst:n,continue:!e.abort})}}),oB=J("$ZodCheckLengthEquals",(n,e)=>{var t;hi.init(n,e),(t=n._zod.def).when??(t.when=i=>{const s=i.value;return!ey(s)&&s.length!==void 0}),n._zod.onattach.push(i=>{const s=i._zod.bag;s.minimum=e.length,s.maximum=e.length,s.length=e.length}),n._zod.check=i=>{const s=i.value,r=s.length;if(r===e.length)return;const l=ny(s),c=r>e.length;i.issues.push({origin:l,...c?{code:"too_big",maximum:e.length}:{code:"too_small",minimum:e.length},inclusive:!0,exact:!0,input:i.value,inst:n,continue:!e.abort})}}),qh=J("$ZodCheckStringFormat",(n,e)=>{var t,i;hi.init(n,e),n._zod.onattach.push(s=>{const r=s._zod.bag;r.format=e.format,e.pattern&&(r.patterns??(r.patterns=new Set),r.patterns.add(e.pattern))}),e.pattern?(t=n._zod).check??(t.check=s=>{e.pattern.lastIndex=0,!e.pattern.test(s.value)&&s.issues.push({origin:"string",code:"invalid_format",format:e.format,input:s.value,...e.pattern?{pattern:e.pattern.toString()}:{},inst:n,continue:!e.abort})}):(i=n._zod).check??(i.check=()=>{})}),lB=J("$ZodCheckRegex",(n,e)=>{qh.init(n,e),n._zod.check=t=>{e.pattern.lastIndex=0,!e.pattern.test(t.value)&&t.issues.push({origin:"string",code:"invalid_format",format:"regex",input:t.value,pattern:e.pattern.toString(),inst:n,continue:!e.abort})}}),cB=J("$ZodCheckLowerCase",(n,e)=>{e.pattern??(e.pattern=tB),qh.init(n,e)}),uB=J("$ZodCheckUpperCase",(n,e)=>{e.pattern??(e.pattern=nB),qh.init(n,e)}),dB=J("$ZodCheckIncludes",(n,e)=>{hi.init(n,e);const t=tl(e.includes),i=new RegExp(typeof e.position=="number"?`^.{${e.position}}${t}`:t);e.pattern=i,n._zod.onattach.push(s=>{const r=s._zod.bag;r.patterns??(r.patterns=new Set),r.patterns.add(i)}),n._zod.check=s=>{s.value.includes(e.includes,e.position)||s.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:e.includes,input:s.value,inst:n,continue:!e.abort})}}),hB=J("$ZodCheckStartsWith",(n,e)=>{hi.init(n,e);const t=new RegExp(`^${tl(e.prefix)}.*`);e.pattern??(e.pattern=t),n._zod.onattach.push(i=>{const s=i._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(t)}),n._zod.check=i=>{i.value.startsWith(e.prefix)||i.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:e.prefix,input:i.value,inst:n,continue:!e.abort})}}),fB=J("$ZodCheckEndsWith",(n,e)=>{hi.init(n,e);const t=new RegExp(`.*${tl(e.suffix)}$`);e.pattern??(e.pattern=t),n._zod.onattach.push(i=>{const s=i._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(t)}),n._zod.check=i=>{i.value.endsWith(e.suffix)||i.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:e.suffix,input:i.value,inst:n,continue:!e.abort})}}),pB=J("$ZodCheckOverwrite",(n,e)=>{hi.init(n,e),n._zod.check=t=>{t.value=e.tx(t.value)}});class mB{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if(typeof e=="function"){e(this,{execution:"sync"}),e(this,{execution:"async"});return}const i=e.split(`
`).filter(l=>l),s=Math.min(...i.map(l=>l.length-l.trimStart().length)),r=i.map(l=>l.slice(s)).map(l=>" ".repeat(this.indent*2)+l);for(const l of r)this.content.push(l)}compile(){const e=Function,t=this?.args,s=[...(this?.content??[""]).map(r=>`  ${r}`)];return new e(...t,s.join(`
`))}}const gB={major:4,minor:3,patch:6},yt=J("$ZodType",(n,e)=>{var t;n??(n={}),n._zod.def=e,n._zod.bag=n._zod.bag||{},n._zod.version=gB;const i=[...n._zod.def.checks??[]];n._zod.traits.has("$ZodCheck")&&i.unshift(n);for(const s of i)for(const r of s._zod.onattach)r(n);if(i.length===0)(t=n._zod).deferred??(t.deferred=[]),n._zod.deferred?.push(()=>{n._zod.run=n._zod.parse});else{const s=(l,c,d)=>{let h=Fo(l),p;for(const m of c){if(m._zod.def.when){if(!m._zod.def.when(l))continue}else if(h)continue;const v=l.issues.length,b=m._zod.check(l);if(b instanceof Promise&&d?.async===!1)throw new Zo;if(p||b instanceof Promise)p=(p??Promise.resolve()).then(async()=>{await b,l.issues.length!==v&&(h||(h=Fo(l,v)))});else{if(l.issues.length===v)continue;h||(h=Fo(l,v))}}return p?p.then(()=>l):l},r=(l,c,d)=>{if(Fo(l))return l.aborted=!0,l;const h=s(c,i,d);if(h instanceof Promise){if(d.async===!1)throw new Zo;return h.then(p=>n._zod.parse(p,d))}return n._zod.parse(h,d)};n._zod.run=(l,c)=>{if(c.skipChecks)return n._zod.parse(l,c);if(c.direction==="backward"){const h=n._zod.parse({value:l.value,issues:[]},{...c,skipChecks:!0});return h instanceof Promise?h.then(p=>r(p,l,c)):r(h,l,c)}const d=n._zod.parse(l,c);if(d instanceof Promise){if(c.async===!1)throw new Zo;return d.then(h=>s(h,i,c))}return s(d,i,c)}}Ye(n,"~standard",()=>({validate:s=>{try{const r=wj(n,s);return r.success?{value:r.data}:{issues:r.error?.issues}}catch{return Aj(n,s).then(l=>l.success?{value:l.data}:{issues:l.error?.issues})}},vendor:"zod",version:1}))}),ay=J("$ZodString",(n,e)=>{yt.init(n,e),n._zod.pattern=[...n?._zod.bag?.patterns??[]].pop()??Kj(n._zod.bag),n._zod.parse=(t,i)=>{if(e.coerce)try{t.value=String(t.value)}catch{}return typeof t.value=="string"||t.issues.push({expected:"string",code:"invalid_type",input:t.value,inst:n}),t}}),Ot=J("$ZodStringFormat",(n,e)=>{qh.init(n,e),ay.init(n,e)}),vB=J("$ZodGUID",(n,e)=>{e.pattern??(e.pattern=jj),Ot.init(n,e)}),yB=J("$ZodUUID",(n,e)=>{if(e.version){const i={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[e.version];if(i===void 0)throw new Error(`Invalid UUID version: "${e.version}"`);e.pattern??(e.pattern=zS(i))}else e.pattern??(e.pattern=zS());Ot.init(n,e)}),bB=J("$ZodEmail",(n,e)=>{e.pattern??(e.pattern=Bj),Ot.init(n,e)}),xB=J("$ZodURL",(n,e)=>{Ot.init(n,e),n._zod.check=t=>{try{const i=t.value.trim(),s=new URL(i);e.hostname&&(e.hostname.lastIndex=0,e.hostname.test(s.hostname)||t.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:e.hostname.source,input:t.value,inst:n,continue:!e.abort})),e.protocol&&(e.protocol.lastIndex=0,e.protocol.test(s.protocol.endsWith(":")?s.protocol.slice(0,-1):s.protocol)||t.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:e.protocol.source,input:t.value,inst:n,continue:!e.abort})),e.normalize?t.value=s.href:t.value=i;return}catch{t.issues.push({code:"invalid_format",format:"url",input:t.value,inst:n,continue:!e.abort})}}}),wB=J("$ZodEmoji",(n,e)=>{e.pattern??(e.pattern=Uj()),Ot.init(n,e)}),AB=J("$ZodNanoID",(n,e)=>{e.pattern??(e.pattern=Lj),Ot.init(n,e)}),SB=J("$ZodCUID",(n,e)=>{e.pattern??(e.pattern=Dj),Ot.init(n,e)}),_B=J("$ZodCUID2",(n,e)=>{e.pattern??(e.pattern=Oj),Ot.init(n,e)}),EB=J("$ZodULID",(n,e)=>{e.pattern??(e.pattern=Nj),Ot.init(n,e)}),TB=J("$ZodXID",(n,e)=>{e.pattern??(e.pattern=Pj),Ot.init(n,e)}),CB=J("$ZodKSUID",(n,e)=>{e.pattern??(e.pattern=Ij),Ot.init(n,e)}),kB=J("$ZodISODateTime",(n,e)=>{e.pattern??(e.pattern=Wj(e)),Ot.init(n,e)}),MB=J("$ZodISODate",(n,e)=>{e.pattern??(e.pattern=Yj),Ot.init(n,e)}),RB=J("$ZodISOTime",(n,e)=>{e.pattern??(e.pattern=Xj(e)),Ot.init(n,e)}),DB=J("$ZodISODuration",(n,e)=>{e.pattern??(e.pattern=zj),Ot.init(n,e)}),OB=J("$ZodIPv4",(n,e)=>{e.pattern??(e.pattern=Vj),Ot.init(n,e),n._zod.bag.format="ipv4"}),NB=J("$ZodIPv6",(n,e)=>{e.pattern??(e.pattern=$j),Ot.init(n,e),n._zod.bag.format="ipv6",n._zod.check=t=>{try{new URL(`http://[${t.value}]`)}catch{t.issues.push({code:"invalid_format",format:"ipv6",input:t.value,inst:n,continue:!e.abort})}}}),PB=J("$ZodCIDRv4",(n,e)=>{e.pattern??(e.pattern=Hj),Ot.init(n,e)}),IB=J("$ZodCIDRv6",(n,e)=>{e.pattern??(e.pattern=Gj),Ot.init(n,e),n._zod.check=t=>{const i=t.value.split("/");try{if(i.length!==2)throw new Error;const[s,r]=i;if(!r)throw new Error;const l=Number(r);if(`${l}`!==r)throw new Error;if(l<0||l>128)throw new Error;new URL(`http://[${s}]`)}catch{t.issues.push({code:"invalid_format",format:"cidrv6",input:t.value,inst:n,continue:!e.abort})}}});function jC(n){if(n==="")return!0;if(n.length%4!==0)return!1;try{return atob(n),!0}catch{return!1}}const LB=J("$ZodBase64",(n,e)=>{e.pattern??(e.pattern=qj),Ot.init(n,e),n._zod.bag.contentEncoding="base64",n._zod.check=t=>{jC(t.value)||t.issues.push({code:"invalid_format",format:"base64",input:t.value,inst:n,continue:!e.abort})}});function zB(n){if(!DC.test(n))return!1;const e=n.replace(/[-_]/g,i=>i==="-"?"+":"/"),t=e.padEnd(Math.ceil(e.length/4)*4,"=");return jC(t)}const jB=J("$ZodBase64URL",(n,e)=>{e.pattern??(e.pattern=DC),Ot.init(n,e),n._zod.bag.contentEncoding="base64url",n._zod.check=t=>{zB(t.value)||t.issues.push({code:"invalid_format",format:"base64url",input:t.value,inst:n,continue:!e.abort})}}),BB=J("$ZodE164",(n,e)=>{e.pattern??(e.pattern=Zj),Ot.init(n,e)});function FB(n,e=null){try{const t=n.split(".");if(t.length!==3)return!1;const[i]=t;if(!i)return!1;const s=JSON.parse(atob(i));return!("typ"in s&&s?.typ!=="JWT"||!s.alg||e&&(!("alg"in s)||s.alg!==e))}catch{return!1}}const UB=J("$ZodJWT",(n,e)=>{Ot.init(n,e),n._zod.check=t=>{FB(t.value,e.alg)||t.issues.push({code:"invalid_format",format:"jwt",input:t.value,inst:n,continue:!e.abort})}}),BC=J("$ZodNumber",(n,e)=>{yt.init(n,e),n._zod.pattern=n._zod.bag.pattern??PC,n._zod.parse=(t,i)=>{if(e.coerce)try{t.value=Number(t.value)}catch{}const s=t.value;if(typeof s=="number"&&!Number.isNaN(s)&&Number.isFinite(s))return t;const r=typeof s=="number"?Number.isNaN(s)?"NaN":Number.isFinite(s)?void 0:"Infinity":void 0;return t.issues.push({expected:"number",code:"invalid_type",input:s,inst:n,...r?{received:r}:{}}),t}}),VB=J("$ZodNumberFormat",(n,e)=>{sB.init(n,e),BC.init(n,e)}),$B=J("$ZodBoolean",(n,e)=>{yt.init(n,e),n._zod.pattern=Qj,n._zod.parse=(t,i)=>{if(e.coerce)try{t.value=!!t.value}catch{}const s=t.value;return typeof s=="boolean"||t.issues.push({expected:"boolean",code:"invalid_type",input:s,inst:n}),t}}),HB=J("$ZodNull",(n,e)=>{yt.init(n,e),n._zod.pattern=eB,n._zod.values=new Set([null]),n._zod.parse=(t,i)=>{const s=t.value;return s===null||t.issues.push({expected:"null",code:"invalid_type",input:s,inst:n}),t}}),GB=J("$ZodAny",(n,e)=>{yt.init(n,e),n._zod.parse=t=>t}),qB=J("$ZodUnknown",(n,e)=>{yt.init(n,e),n._zod.parse=t=>t}),ZB=J("$ZodNever",(n,e)=>{yt.init(n,e),n._zod.parse=(t,i)=>(t.issues.push({expected:"never",code:"invalid_type",input:t.value,inst:n}),t)});function jS(n,e,t){n.issues.length&&e.issues.push(...Uo(t,n.issues)),e.value[t]=n.value}const YB=J("$ZodArray",(n,e)=>{yt.init(n,e),n._zod.parse=(t,i)=>{const s=t.value;if(!Array.isArray(s))return t.issues.push({expected:"array",code:"invalid_type",input:s,inst:n}),t;t.value=Array(s.length);const r=[];for(let l=0;l<s.length;l++){const c=s[l],d=e.element._zod.run({value:c,issues:[]},i);d instanceof Promise?r.push(d.then(h=>jS(h,t,l))):jS(d,t,l)}return r.length?Promise.all(r).then(()=>t):t}});function dh(n,e,t,i,s){if(n.issues.length){if(s&&!(t in i))return;e.issues.push(...Uo(t,n.issues))}n.value===void 0?t in i&&(e.value[t]=void 0):e.value[t]=n.value}function FC(n){const e=Object.keys(n.shape);for(const i of e)if(!n.shape?.[i]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${i}": expected a Zod schema`);const t=uj(n.shape);return{...n,keys:e,keySet:new Set(e),numKeys:e.length,optionalKeys:new Set(t)}}function UC(n,e,t,i,s,r){const l=[],c=s.keySet,d=s.catchall._zod,h=d.def.type,p=d.optout==="optional";for(const m in e){if(c.has(m))continue;if(h==="never"){l.push(m);continue}const v=d.run({value:e[m],issues:[]},i);v instanceof Promise?n.push(v.then(b=>dh(b,t,m,e,p))):dh(v,t,m,e,p)}return l.length&&t.issues.push({code:"unrecognized_keys",keys:l,input:e,inst:r}),n.length?Promise.all(n).then(()=>t):t}const XB=J("$ZodObject",(n,e)=>{if(yt.init(n,e),!Object.getOwnPropertyDescriptor(e,"shape")?.get){const c=e.shape;Object.defineProperty(e,"shape",{get:()=>{const d={...c};return Object.defineProperty(e,"shape",{value:d}),d}})}const i=$h(()=>FC(e));Ye(n._zod,"propValues",()=>{const c=e.shape,d={};for(const h in c){const p=c[h]._zod;if(p.values){d[h]??(d[h]=new Set);for(const m of p.values)d[h].add(m)}}return d});const s=Nc,r=e.catchall;let l;n._zod.parse=(c,d)=>{l??(l=i.value);const h=c.value;if(!s(h))return c.issues.push({expected:"object",code:"invalid_type",input:h,inst:n}),c;c.value={};const p=[],m=l.shape;for(const v of l.keys){const b=m[v],w=b._zod.optout==="optional",x=b._zod.run({value:h[v],issues:[]},d);x instanceof Promise?p.push(x.then(A=>dh(A,c,v,h,w))):dh(x,c,v,h,w)}return r?UC(p,h,c,d,i.value,n):p.length?Promise.all(p).then(()=>c):c}}),WB=J("$ZodObjectJIT",(n,e)=>{XB.init(n,e);const t=n._zod.parse,i=$h(()=>FC(e)),s=v=>{const b=new mB(["shape","payload","ctx"]),w=i.value,x=E=>{const M=LS(E);return`shape[${M}]._zod.run({ value: input[${M}], issues: [] }, ctx)`};b.write("const input = payload.value;");const A=Object.create(null);let S=0;for(const E of w.keys)A[E]=`key_${S++}`;b.write("const newResult = {};");for(const E of w.keys){const M=A[E],R=LS(E),L=v[E]?._zod?.optout==="optional";b.write(`const ${M} = ${x(E)};`),L?b.write(`
        if (${M}.issues.length) {
          if (${R} in input) {
            payload.issues = payload.issues.concat(${M}.issues.map(iss => ({
              ...iss,
              path: iss.path ? [${R}, ...iss.path] : [${R}]
            })));
          }
        }
        
        if (${M}.value === undefined) {
          if (${R} in input) {
            newResult[${R}] = undefined;
          }
        } else {
          newResult[${R}] = ${M}.value;
        }
        
      `):b.write(`
        if (${M}.issues.length) {
          payload.issues = payload.issues.concat(${M}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${R}, ...iss.path] : [${R}]
          })));
        }
        
        if (${M}.value === undefined) {
          if (${R} in input) {
            newResult[${R}] = undefined;
          }
        } else {
          newResult[${R}] = ${M}.value;
        }
        
      `)}b.write("payload.value = newResult;"),b.write("return payload;");const T=b.compile();return(E,M)=>T(v,E,M)};let r;const l=Nc,c=!_C.jitless,h=c&&lj.value,p=e.catchall;let m;n._zod.parse=(v,b)=>{m??(m=i.value);const w=v.value;return l(w)?c&&h&&b?.async===!1&&b.jitless!==!0?(r||(r=s(e.shape)),v=r(v,b),p?UC([],w,v,b,m,n):v):t(v,b):(v.issues.push({expected:"object",code:"invalid_type",input:w,inst:n}),v)}});function BS(n,e,t,i){for(const r of n)if(r.issues.length===0)return e.value=r.value,e;const s=n.filter(r=>!Fo(r));return s.length===1?(e.value=s[0].value,s[0]):(e.issues.push({code:"invalid_union",input:e.value,inst:t,errors:n.map(r=>r.issues.map(l=>Va(l,i,Ua())))}),e)}const VC=J("$ZodUnion",(n,e)=>{yt.init(n,e),Ye(n._zod,"optin",()=>e.options.some(s=>s._zod.optin==="optional")?"optional":void 0),Ye(n._zod,"optout",()=>e.options.some(s=>s._zod.optout==="optional")?"optional":void 0),Ye(n._zod,"values",()=>{if(e.options.every(s=>s._zod.values))return new Set(e.options.flatMap(s=>Array.from(s._zod.values)))}),Ye(n._zod,"pattern",()=>{if(e.options.every(s=>s._zod.pattern)){const s=e.options.map(r=>r._zod.pattern);return new RegExp(`^(${s.map(r=>ty(r.source)).join("|")})$`)}});const t=e.options.length===1,i=e.options[0]._zod.run;n._zod.parse=(s,r)=>{if(t)return i(s,r);let l=!1;const c=[];for(const d of e.options){const h=d._zod.run({value:s.value,issues:[]},r);if(h instanceof Promise)c.push(h),l=!0;else{if(h.issues.length===0)return h;c.push(h)}}return l?Promise.all(c).then(d=>BS(d,s,n,r)):BS(c,s,n,r)}}),KB=J("$ZodDiscriminatedUnion",(n,e)=>{e.inclusive=!1,VC.init(n,e);const t=n._zod.parse;Ye(n._zod,"propValues",()=>{const s={};for(const r of e.options){const l=r._zod.propValues;if(!l||Object.keys(l).length===0)throw new Error(`Invalid discriminated union option at index "${e.options.indexOf(r)}"`);for(const[c,d]of Object.entries(l)){s[c]||(s[c]=new Set);for(const h of d)s[c].add(h)}}return s});const i=$h(()=>{const s=e.options,r=new Map;for(const l of s){const c=l._zod.propValues?.[e.discriminator];if(!c||c.size===0)throw new Error(`Invalid discriminated union option at index "${e.options.indexOf(l)}"`);for(const d of c){if(r.has(d))throw new Error(`Duplicate discriminator value "${String(d)}"`);r.set(d,l)}}return r});n._zod.parse=(s,r)=>{const l=s.value;if(!Nc(l))return s.issues.push({code:"invalid_type",expected:"object",input:l,inst:n}),s;const c=i.value.get(l?.[e.discriminator]);return c?c._zod.run(s,r):e.unionFallback?t(s,r):(s.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",discriminator:e.discriminator,input:l,path:[e.discriminator],inst:n}),s)}}),JB=J("$ZodIntersection",(n,e)=>{yt.init(n,e),n._zod.parse=(t,i)=>{const s=t.value,r=e.left._zod.run({value:s,issues:[]},i),l=e.right._zod.run({value:s,issues:[]},i);return r instanceof Promise||l instanceof Promise?Promise.all([r,l]).then(([d,h])=>FS(t,d,h)):FS(t,r,l)}});function Gg(n,e){if(n===e)return{valid:!0,data:n};if(n instanceof Date&&e instanceof Date&&+n==+e)return{valid:!0,data:n};if(el(n)&&el(e)){const t=Object.keys(e),i=Object.keys(n).filter(r=>t.indexOf(r)!==-1),s={...n,...e};for(const r of i){const l=Gg(n[r],e[r]);if(!l.valid)return{valid:!1,mergeErrorPath:[r,...l.mergeErrorPath]};s[r]=l.data}return{valid:!0,data:s}}if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return{valid:!1,mergeErrorPath:[]};const t=[];for(let i=0;i<n.length;i++){const s=n[i],r=e[i],l=Gg(s,r);if(!l.valid)return{valid:!1,mergeErrorPath:[i,...l.mergeErrorPath]};t.push(l.data)}return{valid:!0,data:t}}return{valid:!1,mergeErrorPath:[]}}function FS(n,e,t){const i=new Map;let s;for(const c of e.issues)if(c.code==="unrecognized_keys"){s??(s=c);for(const d of c.keys)i.has(d)||i.set(d,{}),i.get(d).l=!0}else n.issues.push(c);for(const c of t.issues)if(c.code==="unrecognized_keys")for(const d of c.keys)i.has(d)||i.set(d,{}),i.get(d).r=!0;else n.issues.push(c);const r=[...i].filter(([,c])=>c.l&&c.r).map(([c])=>c);if(r.length&&s&&n.issues.push({...s,keys:r}),Fo(n))return n;const l=Gg(e.value,t.value);if(!l.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(l.mergeErrorPath)}`);return n.value=l.data,n}const QB=J("$ZodRecord",(n,e)=>{yt.init(n,e),n._zod.parse=(t,i)=>{const s=t.value;if(!el(s))return t.issues.push({expected:"record",code:"invalid_type",input:s,inst:n}),t;const r=[],l=e.keyType._zod.values;if(l){t.value={};const c=new Set;for(const h of l)if(typeof h=="string"||typeof h=="number"||typeof h=="symbol"){c.add(typeof h=="number"?h.toString():h);const p=e.valueType._zod.run({value:s[h],issues:[]},i);p instanceof Promise?r.push(p.then(m=>{m.issues.length&&t.issues.push(...Uo(h,m.issues)),t.value[h]=m.value})):(p.issues.length&&t.issues.push(...Uo(h,p.issues)),t.value[h]=p.value)}let d;for(const h in s)c.has(h)||(d=d??[],d.push(h));d&&d.length>0&&t.issues.push({code:"unrecognized_keys",input:s,inst:n,keys:d})}else{t.value={};for(const c of Reflect.ownKeys(s)){if(c==="__proto__")continue;let d=e.keyType._zod.run({value:c,issues:[]},i);if(d instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(typeof c=="string"&&PC.test(c)&&d.issues.length){const m=e.keyType._zod.run({value:Number(c),issues:[]},i);if(m instanceof Promise)throw new Error("Async schemas not supported in object keys currently");m.issues.length===0&&(d=m)}if(d.issues.length){e.mode==="loose"?t.value[c]=s[c]:t.issues.push({code:"invalid_key",origin:"record",issues:d.issues.map(m=>Va(m,i,Ua())),input:c,path:[c],inst:n});continue}const p=e.valueType._zod.run({value:s[c],issues:[]},i);p instanceof Promise?r.push(p.then(m=>{m.issues.length&&t.issues.push(...Uo(c,m.issues)),t.value[d.value]=m.value})):(p.issues.length&&t.issues.push(...Uo(c,p.issues)),t.value[d.value]=p.value)}}return r.length?Promise.all(r).then(()=>t):t}}),e3=J("$ZodEnum",(n,e)=>{yt.init(n,e);const t=EC(e.entries),i=new Set(t);n._zod.values=i,n._zod.pattern=new RegExp(`^(${t.filter(s=>cj.has(typeof s)).map(s=>typeof s=="string"?tl(s):s.toString()).join("|")})$`),n._zod.parse=(s,r)=>{const l=s.value;return i.has(l)||s.issues.push({code:"invalid_value",values:t,input:l,inst:n}),s}}),t3=J("$ZodLiteral",(n,e)=>{if(yt.init(n,e),e.values.length===0)throw new Error("Cannot create literal schema with no valid values");const t=new Set(e.values);n._zod.values=t,n._zod.pattern=new RegExp(`^(${e.values.map(i=>typeof i=="string"?tl(i):i?tl(i.toString()):String(i)).join("|")})$`),n._zod.parse=(i,s)=>{const r=i.value;return t.has(r)||i.issues.push({code:"invalid_value",values:e.values,input:r,inst:n}),i}}),n3=J("$ZodTransform",(n,e)=>{yt.init(n,e),n._zod.parse=(t,i)=>{if(i.direction==="backward")throw new SC(n.constructor.name);const s=e.transform(t.value,t);if(i.async)return(s instanceof Promise?s:Promise.resolve(s)).then(l=>(t.value=l,t));if(s instanceof Promise)throw new Zo;return t.value=s,t}});function US(n,e){return n.issues.length&&e===void 0?{issues:[],value:void 0}:n}const $C=J("$ZodOptional",(n,e)=>{yt.init(n,e),n._zod.optin="optional",n._zod.optout="optional",Ye(n._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,void 0]):void 0),Ye(n._zod,"pattern",()=>{const t=e.innerType._zod.pattern;return t?new RegExp(`^(${ty(t.source)})?$`):void 0}),n._zod.parse=(t,i)=>{if(e.innerType._zod.optin==="optional"){const s=e.innerType._zod.run(t,i);return s instanceof Promise?s.then(r=>US(r,t.value)):US(s,t.value)}return t.value===void 0?t:e.innerType._zod.run(t,i)}}),i3=J("$ZodExactOptional",(n,e)=>{$C.init(n,e),Ye(n._zod,"values",()=>e.innerType._zod.values),Ye(n._zod,"pattern",()=>e.innerType._zod.pattern),n._zod.parse=(t,i)=>e.innerType._zod.run(t,i)}),s3=J("$ZodNullable",(n,e)=>{yt.init(n,e),Ye(n._zod,"optin",()=>e.innerType._zod.optin),Ye(n._zod,"optout",()=>e.innerType._zod.optout),Ye(n._zod,"pattern",()=>{const t=e.innerType._zod.pattern;return t?new RegExp(`^(${ty(t.source)}|null)$`):void 0}),Ye(n._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,null]):void 0),n._zod.parse=(t,i)=>t.value===null?t:e.innerType._zod.run(t,i)}),a3=J("$ZodDefault",(n,e)=>{yt.init(n,e),n._zod.optin="optional",Ye(n._zod,"values",()=>e.innerType._zod.values),n._zod.parse=(t,i)=>{if(i.direction==="backward")return e.innerType._zod.run(t,i);if(t.value===void 0)return t.value=e.defaultValue,t;const s=e.innerType._zod.run(t,i);return s instanceof Promise?s.then(r=>VS(r,e)):VS(s,e)}});function VS(n,e){return n.value===void 0&&(n.value=e.defaultValue),n}const r3=J("$ZodPrefault",(n,e)=>{yt.init(n,e),n._zod.optin="optional",Ye(n._zod,"values",()=>e.innerType._zod.values),n._zod.parse=(t,i)=>(i.direction==="backward"||t.value===void 0&&(t.value=e.defaultValue),e.innerType._zod.run(t,i))}),o3=J("$ZodNonOptional",(n,e)=>{yt.init(n,e),Ye(n._zod,"values",()=>{const t=e.innerType._zod.values;return t?new Set([...t].filter(i=>i!==void 0)):void 0}),n._zod.parse=(t,i)=>{const s=e.innerType._zod.run(t,i);return s instanceof Promise?s.then(r=>$S(r,n)):$S(s,n)}});function $S(n,e){return!n.issues.length&&n.value===void 0&&n.issues.push({code:"invalid_type",expected:"nonoptional",input:n.value,inst:e}),n}const l3=J("$ZodCatch",(n,e)=>{yt.init(n,e),Ye(n._zod,"optin",()=>e.innerType._zod.optin),Ye(n._zod,"optout",()=>e.innerType._zod.optout),Ye(n._zod,"values",()=>e.innerType._zod.values),n._zod.parse=(t,i)=>{if(i.direction==="backward")return e.innerType._zod.run(t,i);const s=e.innerType._zod.run(t,i);return s instanceof Promise?s.then(r=>(t.value=r.value,r.issues.length&&(t.value=e.catchValue({...t,error:{issues:r.issues.map(l=>Va(l,i,Ua()))},input:t.value}),t.issues=[]),t)):(t.value=s.value,s.issues.length&&(t.value=e.catchValue({...t,error:{issues:s.issues.map(r=>Va(r,i,Ua()))},input:t.value}),t.issues=[]),t)}}),c3=J("$ZodPipe",(n,e)=>{yt.init(n,e),Ye(n._zod,"values",()=>e.in._zod.values),Ye(n._zod,"optin",()=>e.in._zod.optin),Ye(n._zod,"optout",()=>e.out._zod.optout),Ye(n._zod,"propValues",()=>e.in._zod.propValues),n._zod.parse=(t,i)=>{if(i.direction==="backward"){const r=e.out._zod.run(t,i);return r instanceof Promise?r.then(l=>Td(l,e.in,i)):Td(r,e.in,i)}const s=e.in._zod.run(t,i);return s instanceof Promise?s.then(r=>Td(r,e.out,i)):Td(s,e.out,i)}});function Td(n,e,t){return n.issues.length?(n.aborted=!0,n):e._zod.run({value:n.value,issues:n.issues},t)}const u3=J("$ZodReadonly",(n,e)=>{yt.init(n,e),Ye(n._zod,"propValues",()=>e.innerType._zod.propValues),Ye(n._zod,"values",()=>e.innerType._zod.values),Ye(n._zod,"optin",()=>e.innerType?._zod?.optin),Ye(n._zod,"optout",()=>e.innerType?._zod?.optout),n._zod.parse=(t,i)=>{if(i.direction==="backward")return e.innerType._zod.run(t,i);const s=e.innerType._zod.run(t,i);return s instanceof Promise?s.then(HS):HS(s)}});function HS(n){return n.value=Object.freeze(n.value),n}const d3=J("$ZodLazy",(n,e)=>{yt.init(n,e),Ye(n._zod,"innerType",()=>e.getter()),Ye(n._zod,"pattern",()=>n._zod.innerType?._zod?.pattern),Ye(n._zod,"propValues",()=>n._zod.innerType?._zod?.propValues),Ye(n._zod,"optin",()=>n._zod.innerType?._zod?.optin??void 0),Ye(n._zod,"optout",()=>n._zod.innerType?._zod?.optout??void 0),n._zod.parse=(t,i)=>n._zod.innerType._zod.run(t,i)}),h3=J("$ZodCustom",(n,e)=>{hi.init(n,e),yt.init(n,e),n._zod.parse=(t,i)=>t,n._zod.check=t=>{const i=t.value,s=e.fn(i);if(s instanceof Promise)return s.then(r=>GS(r,t,i,n));GS(s,t,i,n)}});function GS(n,e,t,i){if(!n){const s={code:"custom",input:t,inst:i,path:[...i._zod.def.path??[]],continue:!i._zod.def.abort};i._zod.def.params&&(s.params=i._zod.def.params),e.issues.push(Pc(s))}}var qS;class f3{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...t){const i=t[0];return this._map.set(e,i),i&&typeof i=="object"&&"id"in i&&this._idmap.set(i.id,e),this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){const t=this._map.get(e);return t&&typeof t=="object"&&"id"in t&&this._idmap.delete(t.id),this._map.delete(e),this}get(e){const t=e._zod.parent;if(t){const i={...this.get(t)??{}};delete i.id;const s={...i,...this._map.get(e)};return Object.keys(s).length?s:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}function p3(){return new f3}(qS=globalThis).__zod_globalRegistry??(qS.__zod_globalRegistry=p3());const mc=globalThis.__zod_globalRegistry;function m3(n,e){return new n({type:"string",...Se(e)})}function g3(n,e){return new n({type:"string",format:"email",check:"string_format",abort:!1,...Se(e)})}function ZS(n,e){return new n({type:"string",format:"guid",check:"string_format",abort:!1,...Se(e)})}function v3(n,e){return new n({type:"string",format:"uuid",check:"string_format",abort:!1,...Se(e)})}function y3(n,e){return new n({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...Se(e)})}function b3(n,e){return new n({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...Se(e)})}function x3(n,e){return new n({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...Se(e)})}function w3(n,e){return new n({type:"string",format:"url",check:"string_format",abort:!1,...Se(e)})}function A3(n,e){return new n({type:"string",format:"emoji",check:"string_format",abort:!1,...Se(e)})}function S3(n,e){return new n({type:"string",format:"nanoid",check:"string_format",abort:!1,...Se(e)})}function _3(n,e){return new n({type:"string",format:"cuid",check:"string_format",abort:!1,...Se(e)})}function E3(n,e){return new n({type:"string",format:"cuid2",check:"string_format",abort:!1,...Se(e)})}function T3(n,e){return new n({type:"string",format:"ulid",check:"string_format",abort:!1,...Se(e)})}function C3(n,e){return new n({type:"string",format:"xid",check:"string_format",abort:!1,...Se(e)})}function k3(n,e){return new n({type:"string",format:"ksuid",check:"string_format",abort:!1,...Se(e)})}function M3(n,e){return new n({type:"string",format:"ipv4",check:"string_format",abort:!1,...Se(e)})}function R3(n,e){return new n({type:"string",format:"ipv6",check:"string_format",abort:!1,...Se(e)})}function D3(n,e){return new n({type:"string",format:"cidrv4",check:"string_format",abort:!1,...Se(e)})}function O3(n,e){return new n({type:"string",format:"cidrv6",check:"string_format",abort:!1,...Se(e)})}function N3(n,e){return new n({type:"string",format:"base64",check:"string_format",abort:!1,...Se(e)})}function P3(n,e){return new n({type:"string",format:"base64url",check:"string_format",abort:!1,...Se(e)})}function I3(n,e){return new n({type:"string",format:"e164",check:"string_format",abort:!1,...Se(e)})}function L3(n,e){return new n({type:"string",format:"jwt",check:"string_format",abort:!1,...Se(e)})}function z3(n,e){return new n({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...Se(e)})}function j3(n,e){return new n({type:"string",format:"date",check:"string_format",...Se(e)})}function B3(n,e){return new n({type:"string",format:"time",check:"string_format",precision:null,...Se(e)})}function F3(n,e){return new n({type:"string",format:"duration",check:"string_format",...Se(e)})}function U3(n,e){return new n({type:"number",checks:[],...Se(e)})}function V3(n,e){return new n({type:"number",check:"number_format",abort:!1,format:"safeint",...Se(e)})}function $3(n,e){return new n({type:"boolean",...Se(e)})}function H3(n,e){return new n({type:"null",...Se(e)})}function G3(n){return new n({type:"any"})}function q3(n){return new n({type:"unknown"})}function Z3(n,e){return new n({type:"never",...Se(e)})}function YS(n,e){return new LC({check:"less_than",...Se(e),value:n,inclusive:!1})}function qm(n,e){return new LC({check:"less_than",...Se(e),value:n,inclusive:!0})}function XS(n,e){return new zC({check:"greater_than",...Se(e),value:n,inclusive:!1})}function Zm(n,e){return new zC({check:"greater_than",...Se(e),value:n,inclusive:!0})}function WS(n,e){return new iB({check:"multiple_of",...Se(e),value:n})}function HC(n,e){return new aB({check:"max_length",...Se(e),maximum:n})}function hh(n,e){return new rB({check:"min_length",...Se(e),minimum:n})}function GC(n,e){return new oB({check:"length_equals",...Se(e),length:n})}function Y3(n,e){return new lB({check:"string_format",format:"regex",...Se(e),pattern:n})}function X3(n){return new cB({check:"string_format",format:"lowercase",...Se(n)})}function W3(n){return new uB({check:"string_format",format:"uppercase",...Se(n)})}function K3(n,e){return new dB({check:"string_format",format:"includes",...Se(e),includes:n})}function J3(n,e){return new hB({check:"string_format",format:"starts_with",...Se(e),prefix:n})}function Q3(n,e){return new fB({check:"string_format",format:"ends_with",...Se(e),suffix:n})}function ul(n){return new pB({check:"overwrite",tx:n})}function eF(n){return ul(e=>e.normalize(n))}function tF(){return ul(n=>n.trim())}function nF(){return ul(n=>n.toLowerCase())}function iF(){return ul(n=>n.toUpperCase())}function sF(){return ul(n=>oj(n))}function aF(n,e,t){return new n({type:"array",element:e,...Se(t)})}function rF(n,e,t){const i=Se(t);return i.abort??(i.abort=!0),new n({type:"custom",check:"custom",fn:e,...i})}function oF(n,e,t){return new n({type:"custom",check:"custom",fn:e,...Se(t)})}function lF(n){const e=cF(t=>(t.addIssue=i=>{if(typeof i=="string")t.issues.push(Pc(i,t.value,e._zod.def));else{const s=i;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=t.value),s.inst??(s.inst=e),s.continue??(s.continue=!e._zod.def.abort),t.issues.push(Pc(s))}},n(t.value,t)));return e}function cF(n,e){const t=new hi({check:"custom",...Se(e)});return t._zod.check=n,t}function fh(n){let e=n?.target??"draft-2020-12";return e==="draft-4"&&(e="draft-04"),e==="draft-7"&&(e="draft-07"),{processors:n.processors??{},metadataRegistry:n?.metadata??mc,target:e,unrepresentable:n?.unrepresentable??"throw",override:n?.override??(()=>{}),io:n?.io??"output",counter:0,seen:new Map,cycles:n?.cycles??"ref",reused:n?.reused??"inline",external:n?.external??void 0}}function vt(n,e,t={path:[],schemaPath:[]}){var i;const s=n._zod.def,r=e.seen.get(n);if(r)return r.count++,t.schemaPath.includes(n)&&(r.cycle=t.path),r.schema;const l={schema:{},count:1,cycle:void 0,path:t.path};e.seen.set(n,l);const c=n._zod.toJSONSchema?.();if(c)l.schema=c;else{const p={...t,schemaPath:[...t.schemaPath,n],path:t.path};if(n._zod.processJSONSchema)n._zod.processJSONSchema(e,l.schema,p);else{const v=l.schema,b=e.processors[s.type];if(!b)throw new Error(`[toJSONSchema]: Non-representable type encountered: ${s.type}`);b(n,e,v,p)}const m=n._zod.parent;m&&(l.ref||(l.ref=m),vt(m,e,p),e.seen.get(m).isParent=!0)}const d=e.metadataRegistry.get(n);return d&&Object.assign(l.schema,d),e.io==="input"&&Vn(n)&&(delete l.schema.examples,delete l.schema.default),e.io==="input"&&l.schema._prefault&&((i=l.schema).default??(i.default=l.schema._prefault)),delete l.schema._prefault,e.seen.get(n).schema}function ph(n,e){const t=n.seen.get(e);if(!t)throw new Error("Unprocessed schema. This is a bug in Zod.");const i=new Map;for(const l of n.seen.entries()){const c=n.metadataRegistry.get(l[0])?.id;if(c){const d=i.get(c);if(d&&d!==l[0])throw new Error(`Duplicate schema id "${c}" detected during JSON Schema conversion. Two different schemas cannot share the same id when converted together.`);i.set(c,l[0])}}const s=l=>{const c=n.target==="draft-2020-12"?"$defs":"definitions";if(n.external){const m=n.external.registry.get(l[0])?.id,v=n.external.uri??(w=>w);if(m)return{ref:v(m)};const b=l[1].defId??l[1].schema.id??`schema${n.counter++}`;return l[1].defId=b,{defId:b,ref:`${v("__shared")}#/${c}/${b}`}}if(l[1]===t)return{ref:"#"};const h=`#/${c}/`,p=l[1].schema.id??`__schema${n.counter++}`;return{defId:p,ref:h+p}},r=l=>{if(l[1].schema.$ref)return;const c=l[1],{ref:d,defId:h}=s(l);c.def={...c.schema},h&&(c.defId=h);const p=c.schema;for(const m in p)delete p[m];p.$ref=d};if(n.cycles==="throw")for(const l of n.seen.entries()){const c=l[1];if(c.cycle)throw new Error(`Cycle detected: #/${c.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const l of n.seen.entries()){const c=l[1];if(e===l[0]){r(l);continue}if(n.external){const h=n.external.registry.get(l[0])?.id;if(e!==l[0]&&h){r(l);continue}}if(n.metadataRegistry.get(l[0])?.id){r(l);continue}if(c.cycle){r(l);continue}if(c.count>1&&n.reused==="ref"){r(l);continue}}}function mh(n,e){const t=n.seen.get(e);if(!t)throw new Error("Unprocessed schema. This is a bug in Zod.");const i=l=>{const c=n.seen.get(l);if(c.ref===null)return;const d=c.def??c.schema,h={...d},p=c.ref;if(c.ref=null,p){i(p);const v=n.seen.get(p),b=v.schema;if(b.$ref&&(n.target==="draft-07"||n.target==="draft-04"||n.target==="openapi-3.0")?(d.allOf=d.allOf??[],d.allOf.push(b)):Object.assign(d,b),Object.assign(d,h),l._zod.parent===p)for(const x in d)x==="$ref"||x==="allOf"||x in h||delete d[x];if(b.$ref&&v.def)for(const x in d)x==="$ref"||x==="allOf"||x in v.def&&JSON.stringify(d[x])===JSON.stringify(v.def[x])&&delete d[x]}const m=l._zod.parent;if(m&&m!==p){i(m);const v=n.seen.get(m);if(v?.schema.$ref&&(d.$ref=v.schema.$ref,v.def))for(const b in d)b==="$ref"||b==="allOf"||b in v.def&&JSON.stringify(d[b])===JSON.stringify(v.def[b])&&delete d[b]}n.override({zodSchema:l,jsonSchema:d,path:c.path??[]})};for(const l of[...n.seen.entries()].reverse())i(l[0]);const s={};if(n.target==="draft-2020-12"?s.$schema="https://json-schema.org/draft/2020-12/schema":n.target==="draft-07"?s.$schema="http://json-schema.org/draft-07/schema#":n.target==="draft-04"?s.$schema="http://json-schema.org/draft-04/schema#":n.target,n.external?.uri){const l=n.external.registry.get(e)?.id;if(!l)throw new Error("Schema is missing an `id` property");s.$id=n.external.uri(l)}Object.assign(s,t.def??t.schema);const r=n.external?.defs??{};for(const l of n.seen.entries()){const c=l[1];c.def&&c.defId&&(r[c.defId]=c.def)}n.external||Object.keys(r).length>0&&(n.target==="draft-2020-12"?s.$defs=r:s.definitions=r);try{const l=JSON.parse(JSON.stringify(s));return Object.defineProperty(l,"~standard",{value:{...e["~standard"],jsonSchema:{input:gh(e,"input",n.processors),output:gh(e,"output",n.processors)}},enumerable:!1,writable:!1}),l}catch{throw new Error("Error converting schema to JSON.")}}function Vn(n,e){const t=e??{seen:new Set};if(t.seen.has(n))return!1;t.seen.add(n);const i=n._zod.def;if(i.type==="transform")return!0;if(i.type==="array")return Vn(i.element,t);if(i.type==="set")return Vn(i.valueType,t);if(i.type==="lazy")return Vn(i.getter(),t);if(i.type==="promise"||i.type==="optional"||i.type==="nonoptional"||i.type==="nullable"||i.type==="readonly"||i.type==="default"||i.type==="prefault")return Vn(i.innerType,t);if(i.type==="intersection")return Vn(i.left,t)||Vn(i.right,t);if(i.type==="record"||i.type==="map")return Vn(i.keyType,t)||Vn(i.valueType,t);if(i.type==="pipe")return Vn(i.in,t)||Vn(i.out,t);if(i.type==="object"){for(const s in i.shape)if(Vn(i.shape[s],t))return!0;return!1}if(i.type==="union"){for(const s of i.options)if(Vn(s,t))return!0;return!1}if(i.type==="tuple"){for(const s of i.items)if(Vn(s,t))return!0;return!!(i.rest&&Vn(i.rest,t))}return!1}const uF=(n,e={})=>t=>{const i=fh({...t,processors:e});return vt(n,i),ph(i,n),mh(i,n)},gh=(n,e,t={})=>i=>{const{libraryOptions:s,target:r}=i??{},l=fh({...s??{},target:r,io:e,processors:t});return vt(n,l),ph(l,n),mh(l,n)},dF={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},qC=(n,e,t,i)=>{const s=t;s.type="string";const{minimum:r,maximum:l,format:c,patterns:d,contentEncoding:h}=n._zod.bag;if(typeof r=="number"&&(s.minLength=r),typeof l=="number"&&(s.maxLength=l),c&&(s.format=dF[c]??c,s.format===""&&delete s.format,c==="time"&&delete s.format),h&&(s.contentEncoding=h),d&&d.size>0){const p=[...d];p.length===1?s.pattern=p[0].source:p.length>1&&(s.allOf=[...p.map(m=>({...e.target==="draft-07"||e.target==="draft-04"||e.target==="openapi-3.0"?{type:"string"}:{},pattern:m.source}))])}},ZC=(n,e,t,i)=>{const s=t,{minimum:r,maximum:l,format:c,multipleOf:d,exclusiveMaximum:h,exclusiveMinimum:p}=n._zod.bag;typeof c=="string"&&c.includes("int")?s.type="integer":s.type="number",typeof p=="number"&&(e.target==="draft-04"||e.target==="openapi-3.0"?(s.minimum=p,s.exclusiveMinimum=!0):s.exclusiveMinimum=p),typeof r=="number"&&(s.minimum=r,typeof p=="number"&&e.target!=="draft-04"&&(p>=r?delete s.minimum:delete s.exclusiveMinimum)),typeof h=="number"&&(e.target==="draft-04"||e.target==="openapi-3.0"?(s.maximum=h,s.exclusiveMaximum=!0):s.exclusiveMaximum=h),typeof l=="number"&&(s.maximum=l,typeof h=="number"&&e.target!=="draft-04"&&(h<=l?delete s.maximum:delete s.exclusiveMaximum)),typeof d=="number"&&(s.multipleOf=d)},YC=(n,e,t,i)=>{t.type="boolean"},hF=(n,e,t,i)=>{if(e.unrepresentable==="throw")throw new Error("BigInt cannot be represented in JSON Schema")},fF=(n,e,t,i)=>{if(e.unrepresentable==="throw")throw new Error("Symbols cannot be represented in JSON Schema")},XC=(n,e,t,i)=>{e.target==="openapi-3.0"?(t.type="string",t.nullable=!0,t.enum=[null]):t.type="null"},pF=(n,e,t,i)=>{if(e.unrepresentable==="throw")throw new Error("Undefined cannot be represented in JSON Schema")},mF=(n,e,t,i)=>{if(e.unrepresentable==="throw")throw new Error("Void cannot be represented in JSON Schema")},WC=(n,e,t,i)=>{t.not={}},KC=(n,e,t,i)=>{},JC=(n,e,t,i)=>{},gF=(n,e,t,i)=>{if(e.unrepresentable==="throw")throw new Error("Date cannot be represented in JSON Schema")},QC=(n,e,t,i)=>{const s=n._zod.def,r=EC(s.entries);r.every(l=>typeof l=="number")&&(t.type="number"),r.every(l=>typeof l=="string")&&(t.type="string"),t.enum=r},ek=(n,e,t,i)=>{const s=n._zod.def,r=[];for(const l of s.values)if(l===void 0){if(e.unrepresentable==="throw")throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof l=="bigint"){if(e.unrepresentable==="throw")throw new Error("BigInt literals cannot be represented in JSON Schema");r.push(Number(l))}else r.push(l);if(r.length!==0)if(r.length===1){const l=r[0];t.type=l===null?"null":typeof l,e.target==="draft-04"||e.target==="openapi-3.0"?t.enum=[l]:t.const=l}else r.every(l=>typeof l=="number")&&(t.type="number"),r.every(l=>typeof l=="string")&&(t.type="string"),r.every(l=>typeof l=="boolean")&&(t.type="boolean"),r.every(l=>l===null)&&(t.type="null"),t.enum=r},vF=(n,e,t,i)=>{if(e.unrepresentable==="throw")throw new Error("NaN cannot be represented in JSON Schema")},yF=(n,e,t,i)=>{const s=t,r=n._zod.pattern;if(!r)throw new Error("Pattern not found in template literal");s.type="string",s.pattern=r.source},bF=(n,e,t,i)=>{const s=t,r={type:"string",format:"binary",contentEncoding:"binary"},{minimum:l,maximum:c,mime:d}=n._zod.bag;l!==void 0&&(r.minLength=l),c!==void 0&&(r.maxLength=c),d?d.length===1?(r.contentMediaType=d[0],Object.assign(s,r)):(Object.assign(s,r),s.anyOf=d.map(h=>({contentMediaType:h}))):Object.assign(s,r)},xF=(n,e,t,i)=>{t.type="boolean"},tk=(n,e,t,i)=>{if(e.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema")},wF=(n,e,t,i)=>{if(e.unrepresentable==="throw")throw new Error("Function types cannot be represented in JSON Schema")},nk=(n,e,t,i)=>{if(e.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema")},AF=(n,e,t,i)=>{if(e.unrepresentable==="throw")throw new Error("Map cannot be represented in JSON Schema")},SF=(n,e,t,i)=>{if(e.unrepresentable==="throw")throw new Error("Set cannot be represented in JSON Schema")},ik=(n,e,t,i)=>{const s=t,r=n._zod.def,{minimum:l,maximum:c}=n._zod.bag;typeof l=="number"&&(s.minItems=l),typeof c=="number"&&(s.maxItems=c),s.type="array",s.items=vt(r.element,e,{...i,path:[...i.path,"items"]})},sk=(n,e,t,i)=>{const s=t,r=n._zod.def;s.type="object",s.properties={};const l=r.shape;for(const h in l)s.properties[h]=vt(l[h],e,{...i,path:[...i.path,"properties",h]});const c=new Set(Object.keys(l)),d=new Set([...c].filter(h=>{const p=r.shape[h]._zod;return e.io==="input"?p.optin===void 0:p.optout===void 0}));d.size>0&&(s.required=Array.from(d)),r.catchall?._zod.def.type==="never"?s.additionalProperties=!1:r.catchall?r.catchall&&(s.additionalProperties=vt(r.catchall,e,{...i,path:[...i.path,"additionalProperties"]})):e.io==="output"&&(s.additionalProperties=!1)},ak=(n,e,t,i)=>{const s=n._zod.def,r=s.inclusive===!1,l=s.options.map((c,d)=>vt(c,e,{...i,path:[...i.path,r?"oneOf":"anyOf",d]}));r?t.oneOf=l:t.anyOf=l},rk=(n,e,t,i)=>{const s=n._zod.def,r=vt(s.left,e,{...i,path:[...i.path,"allOf",0]}),l=vt(s.right,e,{...i,path:[...i.path,"allOf",1]}),c=h=>"allOf"in h&&Object.keys(h).length===1,d=[...c(r)?r.allOf:[r],...c(l)?l.allOf:[l]];t.allOf=d},_F=(n,e,t,i)=>{const s=t,r=n._zod.def;s.type="array";const l=e.target==="draft-2020-12"?"prefixItems":"items",c=e.target==="draft-2020-12"||e.target==="openapi-3.0"?"items":"additionalItems",d=r.items.map((v,b)=>vt(v,e,{...i,path:[...i.path,l,b]})),h=r.rest?vt(r.rest,e,{...i,path:[...i.path,c,...e.target==="openapi-3.0"?[r.items.length]:[]]}):null;e.target==="draft-2020-12"?(s.prefixItems=d,h&&(s.items=h)):e.target==="openapi-3.0"?(s.items={anyOf:d},h&&s.items.anyOf.push(h),s.minItems=d.length,h||(s.maxItems=d.length)):(s.items=d,h&&(s.additionalItems=h));const{minimum:p,maximum:m}=n._zod.bag;typeof p=="number"&&(s.minItems=p),typeof m=="number"&&(s.maxItems=m)},ok=(n,e,t,i)=>{const s=t,r=n._zod.def;s.type="object";const l=r.keyType,d=l._zod.bag?.patterns;if(r.mode==="loose"&&d&&d.size>0){const p=vt(r.valueType,e,{...i,path:[...i.path,"patternProperties","*"]});s.patternProperties={};for(const m of d)s.patternProperties[m.source]=p}else(e.target==="draft-07"||e.target==="draft-2020-12")&&(s.propertyNames=vt(r.keyType,e,{...i,path:[...i.path,"propertyNames"]})),s.additionalProperties=vt(r.valueType,e,{...i,path:[...i.path,"additionalProperties"]});const h=l._zod.values;if(h){const p=[...h].filter(m=>typeof m=="string"||typeof m=="number");p.length>0&&(s.required=p)}},lk=(n,e,t,i)=>{const s=n._zod.def,r=vt(s.innerType,e,i),l=e.seen.get(n);e.target==="openapi-3.0"?(l.ref=s.innerType,t.nullable=!0):t.anyOf=[r,{type:"null"}]},ck=(n,e,t,i)=>{const s=n._zod.def;vt(s.innerType,e,i);const r=e.seen.get(n);r.ref=s.innerType},uk=(n,e,t,i)=>{const s=n._zod.def;vt(s.innerType,e,i);const r=e.seen.get(n);r.ref=s.innerType,t.default=JSON.parse(JSON.stringify(s.defaultValue))},dk=(n,e,t,i)=>{const s=n._zod.def;vt(s.innerType,e,i);const r=e.seen.get(n);r.ref=s.innerType,e.io==="input"&&(t._prefault=JSON.parse(JSON.stringify(s.defaultValue)))},hk=(n,e,t,i)=>{const s=n._zod.def;vt(s.innerType,e,i);const r=e.seen.get(n);r.ref=s.innerType;let l;try{l=s.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}t.default=l},fk=(n,e,t,i)=>{const s=n._zod.def,r=e.io==="input"?s.in._zod.def.type==="transform"?s.out:s.in:s.out;vt(r,e,i);const l=e.seen.get(n);l.ref=r},pk=(n,e,t,i)=>{const s=n._zod.def;vt(s.innerType,e,i);const r=e.seen.get(n);r.ref=s.innerType,t.readOnly=!0},EF=(n,e,t,i)=>{const s=n._zod.def;vt(s.innerType,e,i);const r=e.seen.get(n);r.ref=s.innerType},ry=(n,e,t,i)=>{const s=n._zod.def;vt(s.innerType,e,i);const r=e.seen.get(n);r.ref=s.innerType},mk=(n,e,t,i)=>{const s=n._zod.innerType;vt(s,e,i);const r=e.seen.get(n);r.ref=s},KS={string:qC,number:ZC,boolean:YC,bigint:hF,symbol:fF,null:XC,undefined:pF,void:mF,never:WC,any:KC,unknown:JC,date:gF,enum:QC,literal:ek,nan:vF,template_literal:yF,file:bF,success:xF,custom:tk,function:wF,transform:nk,map:AF,set:SF,array:ik,object:sk,union:ak,intersection:rk,tuple:_F,record:ok,nullable:lk,nonoptional:ck,default:uk,prefault:dk,catch:hk,pipe:fk,readonly:pk,promise:EF,optional:ry,lazy:mk};function TF(n,e){if("_idmap"in n){const i=n,s=fh({...e,processors:KS}),r={};for(const d of i._idmap.entries()){const[h,p]=d;vt(p,s)}const l={},c={registry:i,uri:e?.uri,defs:r};s.external=c;for(const d of i._idmap.entries()){const[h,p]=d;ph(s,p),l[h]=mh(s,p)}if(Object.keys(r).length>0){const d=s.target==="draft-2020-12"?"$defs":"definitions";l.__shared={[d]:r}}return{schemas:l}}const t=fh({...e,processors:KS});return vt(n,t),ph(t,n),mh(t,n)}const CF=J("ZodISODateTime",(n,e)=>{kB.init(n,e),Ft.init(n,e)});function kF(n){return z3(CF,n)}const MF=J("ZodISODate",(n,e)=>{MB.init(n,e),Ft.init(n,e)});function RF(n){return j3(MF,n)}const DF=J("ZodISOTime",(n,e)=>{RB.init(n,e),Ft.init(n,e)});function OF(n){return B3(DF,n)}const NF=J("ZodISODuration",(n,e)=>{DB.init(n,e),Ft.init(n,e)});function PF(n){return F3(NF,n)}const IF=(n,e)=>{MC.init(n,e),n.name="ZodError",Object.defineProperties(n,{format:{value:t=>xj(n,t)},flatten:{value:t=>bj(n,t)},addIssue:{value:t=>{n.issues.push(t),n.message=JSON.stringify(n.issues,Hg,2)}},addIssues:{value:t=>{n.issues.push(...t),n.message=JSON.stringify(n.issues,Hg,2)}},isEmpty:{get(){return n.issues.length===0}}})},Gi=J("ZodError",IF,{Parent:Error}),LF=iy(Gi),zF=sy(Gi),jF=Hh(Gi),gk=Gh(Gi),BF=Sj(Gi),FF=_j(Gi),UF=Ej(Gi),VF=Tj(Gi),$F=Cj(Gi),HF=kj(Gi),GF=Mj(Gi),qF=Rj(Gi),bt=J("ZodType",(n,e)=>(yt.init(n,e),Object.assign(n["~standard"],{jsonSchema:{input:gh(n,"input"),output:gh(n,"output")}}),n.toJSONSchema=uF(n,{}),n.def=e,n.type=e.type,Object.defineProperty(n,"_def",{value:e}),n.check=(...t)=>n.clone(Za(e,{checks:[...e.checks??[],...t.map(i=>typeof i=="function"?{_zod:{check:i,def:{check:"custom"},onattach:[]}}:i)]}),{parent:!0}),n.with=n.check,n.clone=(t,i)=>Ya(n,t,i),n.brand=()=>n,n.register=((t,i)=>(t.add(n,i),n)),n.parse=(t,i)=>LF(n,t,i,{callee:n.parse}),n.safeParse=(t,i)=>jF(n,t,i),n.parseAsync=async(t,i)=>zF(n,t,i,{callee:n.parseAsync}),n.safeParseAsync=async(t,i)=>gk(n,t,i),n.spa=n.safeParseAsync,n.encode=(t,i)=>BF(n,t,i),n.decode=(t,i)=>FF(n,t,i),n.encodeAsync=async(t,i)=>UF(n,t,i),n.decodeAsync=async(t,i)=>VF(n,t,i),n.safeEncode=(t,i)=>$F(n,t,i),n.safeDecode=(t,i)=>HF(n,t,i),n.safeEncodeAsync=async(t,i)=>GF(n,t,i),n.safeDecodeAsync=async(t,i)=>qF(n,t,i),n.refine=(t,i)=>n.check(H4(t,i)),n.superRefine=t=>n.check(G4(t)),n.overwrite=t=>n.check(ul(t)),n.optional=()=>e1(n),n.exactOptional=()=>M4(n),n.nullable=()=>t1(n),n.nullish=()=>e1(t1(n)),n.nonoptional=t=>I4(n,t),n.array=()=>we(n),n.or=t=>qt([n,t]),n.and=t=>S4(n,t),n.transform=t=>n1(n,C4(t)),n.default=t=>O4(n,t),n.prefault=t=>P4(n,t),n.catch=t=>z4(n,t),n.pipe=t=>n1(n,t),n.readonly=()=>F4(n),n.describe=t=>{const i=n.clone();return mc.add(i,{description:t}),i},Object.defineProperty(n,"description",{get(){return mc.get(n)?.description},configurable:!0}),n.meta=(...t)=>{if(t.length===0)return mc.get(n);const i=n.clone();return mc.add(i,t[0]),i},n.isOptional=()=>n.safeParse(void 0).success,n.isNullable=()=>n.safeParse(null).success,n.apply=t=>t(n),n)),vk=J("_ZodString",(n,e)=>{ay.init(n,e),bt.init(n,e),n._zod.processJSONSchema=(i,s,r)=>qC(n,i,s);const t=n._zod.bag;n.format=t.format??null,n.minLength=t.minimum??null,n.maxLength=t.maximum??null,n.regex=(...i)=>n.check(Y3(...i)),n.includes=(...i)=>n.check(K3(...i)),n.startsWith=(...i)=>n.check(J3(...i)),n.endsWith=(...i)=>n.check(Q3(...i)),n.min=(...i)=>n.check(hh(...i)),n.max=(...i)=>n.check(HC(...i)),n.length=(...i)=>n.check(GC(...i)),n.nonempty=(...i)=>n.check(hh(1,...i)),n.lowercase=i=>n.check(X3(i)),n.uppercase=i=>n.check(W3(i)),n.trim=()=>n.check(tF()),n.normalize=(...i)=>n.check(eF(...i)),n.toLowerCase=()=>n.check(nF()),n.toUpperCase=()=>n.check(iF()),n.slugify=()=>n.check(sF())}),ZF=J("ZodString",(n,e)=>{ay.init(n,e),vk.init(n,e),n.email=t=>n.check(g3(YF,t)),n.url=t=>n.check(w3(XF,t)),n.jwt=t=>n.check(L3(u4,t)),n.emoji=t=>n.check(A3(WF,t)),n.guid=t=>n.check(ZS(JS,t)),n.uuid=t=>n.check(v3(Cd,t)),n.uuidv4=t=>n.check(y3(Cd,t)),n.uuidv6=t=>n.check(b3(Cd,t)),n.uuidv7=t=>n.check(x3(Cd,t)),n.nanoid=t=>n.check(S3(KF,t)),n.guid=t=>n.check(ZS(JS,t)),n.cuid=t=>n.check(_3(JF,t)),n.cuid2=t=>n.check(E3(QF,t)),n.ulid=t=>n.check(T3(e4,t)),n.base64=t=>n.check(N3(o4,t)),n.base64url=t=>n.check(P3(l4,t)),n.xid=t=>n.check(C3(t4,t)),n.ksuid=t=>n.check(k3(n4,t)),n.ipv4=t=>n.check(M3(i4,t)),n.ipv6=t=>n.check(R3(s4,t)),n.cidrv4=t=>n.check(D3(a4,t)),n.cidrv6=t=>n.check(O3(r4,t)),n.e164=t=>n.check(I3(c4,t)),n.datetime=t=>n.check(kF(t)),n.date=t=>n.check(RF(t)),n.time=t=>n.check(OF(t)),n.duration=t=>n.check(PF(t))});function F(n){return m3(ZF,n)}const Ft=J("ZodStringFormat",(n,e)=>{Ot.init(n,e),vk.init(n,e)}),YF=J("ZodEmail",(n,e)=>{bB.init(n,e),Ft.init(n,e)}),JS=J("ZodGUID",(n,e)=>{vB.init(n,e),Ft.init(n,e)}),Cd=J("ZodUUID",(n,e)=>{yB.init(n,e),Ft.init(n,e)}),XF=J("ZodURL",(n,e)=>{xB.init(n,e),Ft.init(n,e)}),WF=J("ZodEmoji",(n,e)=>{wB.init(n,e),Ft.init(n,e)}),KF=J("ZodNanoID",(n,e)=>{AB.init(n,e),Ft.init(n,e)}),JF=J("ZodCUID",(n,e)=>{SB.init(n,e),Ft.init(n,e)}),QF=J("ZodCUID2",(n,e)=>{_B.init(n,e),Ft.init(n,e)}),e4=J("ZodULID",(n,e)=>{EB.init(n,e),Ft.init(n,e)}),t4=J("ZodXID",(n,e)=>{TB.init(n,e),Ft.init(n,e)}),n4=J("ZodKSUID",(n,e)=>{CB.init(n,e),Ft.init(n,e)}),i4=J("ZodIPv4",(n,e)=>{OB.init(n,e),Ft.init(n,e)}),s4=J("ZodIPv6",(n,e)=>{NB.init(n,e),Ft.init(n,e)}),a4=J("ZodCIDRv4",(n,e)=>{PB.init(n,e),Ft.init(n,e)}),r4=J("ZodCIDRv6",(n,e)=>{IB.init(n,e),Ft.init(n,e)}),o4=J("ZodBase64",(n,e)=>{LB.init(n,e),Ft.init(n,e)}),l4=J("ZodBase64URL",(n,e)=>{jB.init(n,e),Ft.init(n,e)}),c4=J("ZodE164",(n,e)=>{BB.init(n,e),Ft.init(n,e)}),u4=J("ZodJWT",(n,e)=>{UB.init(n,e),Ft.init(n,e)}),yk=J("ZodNumber",(n,e)=>{BC.init(n,e),bt.init(n,e),n._zod.processJSONSchema=(i,s,r)=>ZC(n,i,s),n.gt=(i,s)=>n.check(XS(i,s)),n.gte=(i,s)=>n.check(Zm(i,s)),n.min=(i,s)=>n.check(Zm(i,s)),n.lt=(i,s)=>n.check(YS(i,s)),n.lte=(i,s)=>n.check(qm(i,s)),n.max=(i,s)=>n.check(qm(i,s)),n.int=i=>n.check(QS(i)),n.safe=i=>n.check(QS(i)),n.positive=i=>n.check(XS(0,i)),n.nonnegative=i=>n.check(Zm(0,i)),n.negative=i=>n.check(YS(0,i)),n.nonpositive=i=>n.check(qm(0,i)),n.multipleOf=(i,s)=>n.check(WS(i,s)),n.step=(i,s)=>n.check(WS(i,s)),n.finite=()=>n;const t=n._zod.bag;n.minValue=Math.max(t.minimum??Number.NEGATIVE_INFINITY,t.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,n.maxValue=Math.min(t.maximum??Number.POSITIVE_INFINITY,t.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,n.isInt=(t.format??"").includes("int")||Number.isSafeInteger(t.multipleOf??.5),n.isFinite=!0,n.format=t.format??null});function ke(n){return U3(yk,n)}const d4=J("ZodNumberFormat",(n,e)=>{VB.init(n,e),yk.init(n,e)});function QS(n){return V3(d4,n)}const h4=J("ZodBoolean",(n,e)=>{$B.init(n,e),bt.init(n,e),n._zod.processJSONSchema=(t,i,s)=>YC(n,t,i)});function na(n){return $3(h4,n)}const f4=J("ZodNull",(n,e)=>{HB.init(n,e),bt.init(n,e),n._zod.processJSONSchema=(t,i,s)=>XC(n,t,i)});function p4(n){return H3(f4,n)}const m4=J("ZodAny",(n,e)=>{GB.init(n,e),bt.init(n,e),n._zod.processJSONSchema=(t,i,s)=>KC()});function ta(){return G3(m4)}const g4=J("ZodUnknown",(n,e)=>{qB.init(n,e),bt.init(n,e),n._zod.processJSONSchema=(t,i,s)=>JC()});function ks(){return q3(g4)}const v4=J("ZodNever",(n,e)=>{ZB.init(n,e),bt.init(n,e),n._zod.processJSONSchema=(t,i,s)=>WC(n,t,i)});function y4(n){return Z3(v4,n)}const b4=J("ZodArray",(n,e)=>{YB.init(n,e),bt.init(n,e),n._zod.processJSONSchema=(t,i,s)=>ik(n,t,i,s),n.element=e.element,n.min=(t,i)=>n.check(hh(t,i)),n.nonempty=t=>n.check(hh(1,t)),n.max=(t,i)=>n.check(HC(t,i)),n.length=(t,i)=>n.check(GC(t,i)),n.unwrap=()=>n.element});function we(n,e){return aF(b4,n,e)}const x4=J("ZodObject",(n,e)=>{WB.init(n,e),bt.init(n,e),n._zod.processJSONSchema=(t,i,s)=>sk(n,t,i,s),Ye(n,"shape",()=>e.shape),n.keyof=()=>Wt(Object.keys(n._zod.def.shape)),n.catchall=t=>n.clone({...n._zod.def,catchall:t}),n.passthrough=()=>n.clone({...n._zod.def,catchall:ks()}),n.loose=()=>n.clone({...n._zod.def,catchall:ks()}),n.strict=()=>n.clone({...n._zod.def,catchall:y4()}),n.strip=()=>n.clone({...n._zod.def,catchall:void 0}),n.extend=t=>pj(n,t),n.safeExtend=t=>mj(n,t),n.merge=t=>gj(n,t),n.pick=t=>hj(n,t),n.omit=t=>fj(n,t),n.partial=(...t)=>vj(xk,n,t[0]),n.required=(...t)=>yj(wk,n,t[0])});function K(n,e){const t={type:"object",shape:n??{},...Se(e)};return new x4(t)}const bk=J("ZodUnion",(n,e)=>{VC.init(n,e),bt.init(n,e),n._zod.processJSONSchema=(t,i,s)=>ak(n,t,i,s),n.options=e.options});function qt(n,e){return new bk({type:"union",options:n,...Se(e)})}const w4=J("ZodDiscriminatedUnion",(n,e)=>{bk.init(n,e),KB.init(n,e)});function oy(n,e,t){return new w4({type:"union",options:e,discriminator:n,...Se(t)})}const A4=J("ZodIntersection",(n,e)=>{JB.init(n,e),bt.init(n,e),n._zod.processJSONSchema=(t,i,s)=>rk(n,t,i,s)});function S4(n,e){return new A4({type:"intersection",left:n,right:e})}const _4=J("ZodRecord",(n,e)=>{QB.init(n,e),bt.init(n,e),n._zod.processJSONSchema=(t,i,s)=>ok(n,t,i,s),n.keyType=e.keyType,n.valueType=e.valueType});function Ms(n,e,t){return new _4({type:"record",keyType:n,valueType:e,...Se(t)})}const qg=J("ZodEnum",(n,e)=>{e3.init(n,e),bt.init(n,e),n._zod.processJSONSchema=(i,s,r)=>QC(n,i,s),n.enum=e.entries,n.options=Object.values(e.entries);const t=new Set(Object.keys(e.entries));n.extract=(i,s)=>{const r={};for(const l of i)if(t.has(l))r[l]=e.entries[l];else throw new Error(`Key ${l} not found in enum`);return new qg({...e,checks:[],...Se(s),entries:r})},n.exclude=(i,s)=>{const r={...e.entries};for(const l of i)if(t.has(l))delete r[l];else throw new Error(`Key ${l} not found in enum`);return new qg({...e,checks:[],...Se(s),entries:r})}});function Wt(n,e){const t=Array.isArray(n)?Object.fromEntries(n.map(i=>[i,i])):n;return new qg({type:"enum",entries:t,...Se(e)})}const E4=J("ZodLiteral",(n,e)=>{t3.init(n,e),bt.init(n,e),n._zod.processJSONSchema=(t,i,s)=>ek(n,t,i),n.values=new Set(e.values),Object.defineProperty(n,"value",{get(){if(e.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return e.values[0]}})});function Fe(n,e){return new E4({type:"literal",values:Array.isArray(n)?n:[n],...Se(e)})}const T4=J("ZodTransform",(n,e)=>{n3.init(n,e),bt.init(n,e),n._zod.processJSONSchema=(t,i,s)=>nk(n,t),n._zod.parse=(t,i)=>{if(i.direction==="backward")throw new SC(n.constructor.name);t.addIssue=r=>{if(typeof r=="string")t.issues.push(Pc(r,t.value,e));else{const l=r;l.fatal&&(l.continue=!1),l.code??(l.code="custom"),l.input??(l.input=t.value),l.inst??(l.inst=n),t.issues.push(Pc(l))}};const s=e.transform(t.value,t);return s instanceof Promise?s.then(r=>(t.value=r,t)):(t.value=s,t)}});function C4(n){return new T4({type:"transform",transform:n})}const xk=J("ZodOptional",(n,e)=>{$C.init(n,e),bt.init(n,e),n._zod.processJSONSchema=(t,i,s)=>ry(n,t,i,s),n.unwrap=()=>n._zod.def.innerType});function e1(n){return new xk({type:"optional",innerType:n})}const k4=J("ZodExactOptional",(n,e)=>{i3.init(n,e),bt.init(n,e),n._zod.processJSONSchema=(t,i,s)=>ry(n,t,i,s),n.unwrap=()=>n._zod.def.innerType});function M4(n){return new k4({type:"optional",innerType:n})}const R4=J("ZodNullable",(n,e)=>{s3.init(n,e),bt.init(n,e),n._zod.processJSONSchema=(t,i,s)=>lk(n,t,i,s),n.unwrap=()=>n._zod.def.innerType});function t1(n){return new R4({type:"nullable",innerType:n})}const D4=J("ZodDefault",(n,e)=>{a3.init(n,e),bt.init(n,e),n._zod.processJSONSchema=(t,i,s)=>uk(n,t,i,s),n.unwrap=()=>n._zod.def.innerType,n.removeDefault=n.unwrap});function O4(n,e){return new D4({type:"default",innerType:n,get defaultValue(){return typeof e=="function"?e():CC(e)}})}const N4=J("ZodPrefault",(n,e)=>{r3.init(n,e),bt.init(n,e),n._zod.processJSONSchema=(t,i,s)=>dk(n,t,i,s),n.unwrap=()=>n._zod.def.innerType});function P4(n,e){return new N4({type:"prefault",innerType:n,get defaultValue(){return typeof e=="function"?e():CC(e)}})}const wk=J("ZodNonOptional",(n,e)=>{o3.init(n,e),bt.init(n,e),n._zod.processJSONSchema=(t,i,s)=>ck(n,t,i,s),n.unwrap=()=>n._zod.def.innerType});function I4(n,e){return new wk({type:"nonoptional",innerType:n,...Se(e)})}const L4=J("ZodCatch",(n,e)=>{l3.init(n,e),bt.init(n,e),n._zod.processJSONSchema=(t,i,s)=>hk(n,t,i,s),n.unwrap=()=>n._zod.def.innerType,n.removeCatch=n.unwrap});function z4(n,e){return new L4({type:"catch",innerType:n,catchValue:typeof e=="function"?e:()=>e})}const j4=J("ZodPipe",(n,e)=>{c3.init(n,e),bt.init(n,e),n._zod.processJSONSchema=(t,i,s)=>fk(n,t,i,s),n.in=e.in,n.out=e.out});function n1(n,e){return new j4({type:"pipe",in:n,out:e})}const B4=J("ZodReadonly",(n,e)=>{u3.init(n,e),bt.init(n,e),n._zod.processJSONSchema=(t,i,s)=>pk(n,t,i,s),n.unwrap=()=>n._zod.def.innerType});function F4(n){return new B4({type:"readonly",innerType:n})}const U4=J("ZodLazy",(n,e)=>{d3.init(n,e),bt.init(n,e),n._zod.processJSONSchema=(t,i,s)=>mk(n,t,i,s),n.unwrap=()=>n._zod.def.getter()});function V4(n){return new U4({type:"lazy",getter:n})}const ly=J("ZodCustom",(n,e)=>{h3.init(n,e),bt.init(n,e),n._zod.processJSONSchema=(t,i,s)=>tk(n,t)});function $4(n,e){return rF(ly,n??(()=>!0),e)}function H4(n,e={}){return oF(ly,n,e)}function G4(n){return lF(n)}function vh(n,e={}){const t=new ly({type:"custom",check:"custom",fn:i=>i instanceof n,abort:!0,...Se(e)});return t._zod.bag.Class=n,t._zod.check=i=>{i.value instanceof n||i.issues.push({code:"invalid_type",expected:n.name,input:i.value,inst:t,path:[...t._zod.def.path??[]]})},t}var Ic;(function(n){n.assertEqual=s=>{};function e(s){}n.assertIs=e;function t(s){throw new Error}n.assertNever=t,n.arrayToEnum=s=>{const r={};for(const l of s)r[l]=l;return r},n.getValidEnumValues=s=>{const r=n.objectKeys(s).filter(c=>typeof s[s[c]]!="number"),l={};for(const c of r)l[c]=s[c];return n.objectValues(l)},n.objectValues=s=>n.objectKeys(s).map(function(r){return s[r]}),n.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const r=[];for(const l in s)Object.prototype.hasOwnProperty.call(s,l)&&r.push(l);return r},n.find=(s,r)=>{for(const l of s)if(r(l))return l},n.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function i(s,r=" | "){return s.map(l=>typeof l=="string"?`'${l}'`:l).join(r)}n.joinValues=i,n.jsonStringifyReplacer=(s,r)=>typeof r=="bigint"?r.toString():r})(Ic||(Ic={}));var i1;(function(n){n.mergeShapes=(e,t)=>({...e,...t})})(i1||(i1={}));Ic.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]);Ic.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class yh extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=i=>{this.issues=[...this.issues,i]},this.addIssues=(i=[])=>{this.issues=[...this.issues,...i]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(r){return r.message},i={_errors:[]},s=r=>{for(const l of r.issues)if(l.code==="invalid_union")l.unionErrors.map(s);else if(l.code==="invalid_return_type")s(l.returnTypeError);else if(l.code==="invalid_arguments")s(l.argumentsError);else if(l.path.length===0)i._errors.push(t(l));else{let c=i,d=0;for(;d<l.path.length;){const h=l.path[d];d===l.path.length-1?(c[h]=c[h]||{_errors:[]},c[h]._errors.push(t(l))):c[h]=c[h]||{_errors:[]},c=c[h],d++}}};return s(this),i}static assert(e){if(!(e instanceof yh))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ic.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t=Object.create(null),i=[];for(const s of this.issues)if(s.path.length>0){const r=s.path[0];t[r]=t[r]||[],t[r].push(e(s))}else i.push(e(s));return{formErrors:i,fieldErrors:t}}get formErrors(){return this.flatten()}}yh.create=n=>new yh(n);var s1;(function(n){n.errToObj=e=>typeof e=="string"?{message:e}:e||{},n.toString=e=>typeof e=="string"?e:e?.message})(s1||(s1={}));var Ie;(function(n){n.ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline",n.ZodReadonly="ZodReadonly"})(Ie||(Ie={}));class a1 extends Error{constructor(e,t){super(e),this.name="ParseError",this.type=t.type,this.field=t.field,this.value=t.value,this.line=t.line}}function Ym(n){}function q4(n){if(typeof n=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");const{onEvent:e=Ym,onError:t=Ym,onRetry:i=Ym,onComment:s}=n;let r="",l=!0,c,d="",h="";function p(x){const A=l?x.replace(/^\xEF\xBB\xBF/,""):x,[S,T]=Z4(`${r}${A}`);for(const E of S)m(E);r=T,l=!1}function m(x){if(x===""){b();return}if(x.startsWith(":")){s&&s(x.slice(x.startsWith(": ")?2:1));return}const A=x.indexOf(":");if(A!==-1){const S=x.slice(0,A),T=x[A+1]===" "?2:1,E=x.slice(A+T);v(S,E,x);return}v(x,"",x)}function v(x,A,S){switch(x){case"event":h=A;break;case"data":d=`${d}${A}
`;break;case"id":c=A.includes("\0")?void 0:A;break;case"retry":/^\d+$/.test(A)?i(parseInt(A,10)):t(new a1(`Invalid \`retry\` value: "${A}"`,{type:"invalid-retry",value:A,line:S}));break;default:t(new a1(`Unknown field "${x.length>20?`${x.slice(0,20)}`:x}"`,{type:"unknown-field",field:x,value:A,line:S}));break}}function b(){d.length>0&&e({id:c,event:h||void 0,data:d.endsWith(`
`)?d.slice(0,-1):d}),c=void 0,d="",h=""}function w(x={}){r&&x.consume&&m(r),l=!0,c=void 0,d="",h="",r=""}return{feed:p,reset:w}}function Z4(n){const e=[];let t="",i=0;for(;i<n.length;){const s=n.indexOf("\r",i),r=n.indexOf(`
`,i);let l=-1;if(s!==-1&&r!==-1?l=Math.min(s,r):s!==-1?s===n.length-1?l=-1:l=s:r!==-1&&(l=r),l===-1){t=n.slice(i);break}else{const c=n.slice(i,l);e.push(c),i=l+1,n[i-1]==="\r"&&n[i]===`
`&&i++}}return[e,t]}class Y4 extends TransformStream{constructor({onError:e,onRetry:t,onComment:i}={}){let s;super({start(r){s=q4({onEvent:l=>{r.enqueue(l)},onError(l){e==="terminate"?r.error(l):typeof e=="function"&&e(l)},onRetry:t,onComment:i})},transform(r){s.feed(r)}})}}var Ak={};function ss(...n){return n.reduce((e,t)=>({...e,...t??{}}),{})}async function Sk(n,e){if(n==null)return Promise.resolve();const t=e?.abortSignal;return new Promise((i,s)=>{if(t?.aborted){s(r1());return}const r=setTimeout(()=>{l(),i()},n),l=()=>{clearTimeout(r),t?.removeEventListener("abort",c)},c=()=>{l(),s(r1())};t?.addEventListener("abort",c)})}function r1(){return new DOMException("Delay was aborted","AbortError")}function eu(n){return Object.fromEntries([...n.headers])}var{btoa:X4,atob:W4}=globalThis;function _k(n){const e=n.replace(/-/g,"+").replace(/_/g,"/"),t=W4(e);return Uint8Array.from(t,i=>i.codePointAt(0))}function nl(n){let e="";for(let t=0;t<n.length;t++)e+=String.fromCodePoint(n[t]);return X4(e)}function Zg(n){return n instanceof Uint8Array?nl(n):n}var Ek="AI_DownloadError",Tk=`vercel.ai.error.${Ek}`,K4=Symbol.for(Tk),o1,l1,_c=class extends(l1=Ue,o1=K4,l1){constructor({url:n,statusCode:e,statusText:t,cause:i,message:s=i==null?`Failed to download ${n}: ${e} ${t}`:`Failed to download ${n}: ${i}`}){super({name:Ek,message:s,cause:i}),this[o1]=!0,this.url=n,this.statusCode=e,this.statusText=t}static isInstance(n){return Ue.hasMarker(n,Tk)}},Ck=2*1024*1024*1024;async function J4({response:n,url:e,maxBytes:t=Ck}){const i=n.headers.get("content-length");if(i!=null){const p=parseInt(i,10);if(!isNaN(p)&&p>t)throw new _c({url:e,message:`Download of ${e} exceeded maximum size of ${t} bytes (Content-Length: ${p}).`})}const s=n.body;if(s==null)return new Uint8Array(0);const r=s.getReader(),l=[];let c=0;try{for(;;){const{done:p,value:m}=await r.read();if(p)break;if(c+=m.length,c>t)throw new _c({url:e,message:`Download of ${e} exceeded maximum size of ${t} bytes.`});l.push(m)}}finally{try{await r.cancel()}finally{r.releaseLock()}}const d=new Uint8Array(c);let h=0;for(const p of l)d.set(p,h),h+=p.length;return d}var tu=({prefix:n,size:e=16,alphabet:t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:i="-"}={})=>{const s=()=>{const r=t.length,l=new Array(e);for(let c=0;c<e;c++)l[c]=t[Math.random()*r|0];return l.join("")};if(n==null)return s;if(t.includes(i))throw new uC({argument:"separator",message:`The separator "${i}" must not be part of the alphabet "${t}".`});return()=>`${n}${i}${s()}`},bh=tu();function Q4(n){return n==null?"unknown error":typeof n=="string"?n:n instanceof Error?n.message:JSON.stringify(n)}function il(n){return(n instanceof Error||n instanceof DOMException)&&(n.name==="AbortError"||n.name==="ResponseAborted"||n.name==="TimeoutError")}var e5=["fetch failed","failed to fetch"],t5=["ConnectionRefused","ConnectionClosed","FailedToOpenSocket","ECONNRESET","ECONNREFUSED","ETIMEDOUT","EPIPE"];function n5(n){if(!(n instanceof Error))return!1;const e=n.code;return!!(typeof e=="string"&&t5.includes(e))}function kk({error:n,url:e,requestBodyValues:t}){if(il(n))return n;if(n instanceof TypeError&&e5.includes(n.message.toLowerCase())){const i=n.cause;if(i!=null)return new Bn({message:`Cannot connect to API: ${i.message}`,cause:i,url:e,requestBodyValues:t,isRetryable:!0})}return n5(n)?new Bn({message:`Cannot connect to API: ${n.message}`,cause:n,url:e,requestBodyValues:t,isRetryable:!0}):n}function cy(n=globalThis){var e,t,i;return n.window?"runtime/browser":(e=n.navigator)!=null&&e.userAgent?`runtime/${n.navigator.userAgent.toLowerCase()}`:(i=(t=n.process)==null?void 0:t.versions)!=null&&i.node?`runtime/node.js/${n.process.version.substring(0)}`:n.EdgeRuntime?"runtime/vercel-edge":"runtime/unknown"}function i5(n){if(n==null)return{};const e={};if(n instanceof Headers)n.forEach((t,i)=>{e[i.toLowerCase()]=t});else{Array.isArray(n)||(n=Object.entries(n));for(const[t,i]of n)i!=null&&(e[t.toLowerCase()]=i)}return e}function dl(n,...e){const t=new Headers(i5(n)),i=t.get("user-agent")||"";return t.set("user-agent",[i,...e].filter(Boolean).join(" ")),Object.fromEntries(t.entries())}var Mk="4.0.15",s5=()=>globalThis.fetch,Yg=async({url:n,headers:e={},successfulResponseHandler:t,failedResponseHandler:i,abortSignal:s,fetch:r=s5()})=>{try{const l=await r(n,{method:"GET",headers:dl(e,`ai-sdk/provider-utils/${Mk}`,cy()),signal:s}),c=eu(l);if(!l.ok){let d;try{d=await i({response:l,url:n,requestBodyValues:{}})}catch(h){throw il(h)||Bn.isInstance(h)?h:new Bn({message:"Failed to process error response",cause:h,statusCode:l.status,url:n,responseHeaders:c,requestBodyValues:{}})}throw d.value}try{return await t({response:l,url:n,requestBodyValues:{}})}catch(d){throw d instanceof Error&&(il(d)||Bn.isInstance(d))?d:new Bn({message:"Failed to process successful response",cause:d,statusCode:l.status,url:n,responseHeaders:c,requestBodyValues:{}})}}catch(l){throw kk({error:l,url:n,requestBodyValues:{}})}};function a5({mediaType:n,url:e,supportedUrls:t}){return e=e.toLowerCase(),n=n.toLowerCase(),Object.entries(t).map(([i,s])=>{const r=i.toLowerCase();return r==="*"||r==="*/*"?{mediaTypePrefix:"",regexes:s}:{mediaTypePrefix:r.replace(/\*/,""),regexes:s}}).filter(({mediaTypePrefix:i})=>n.startsWith(i)).flatMap(({regexes:i})=>i).some(i=>i.test(e))}function r5({apiKey:n,environmentVariableName:e,apiKeyParameterName:t="apiKey",description:i}){if(typeof n=="string")return n;if(n!=null)throw new _d({message:`${i} API key must be a string.`});if(typeof process>"u")throw new _d({message:`${i} API key is missing. Pass it using the '${t}' parameter. Environment variables is not supported in this environment.`});if(n=Ak[e],n==null)throw new _d({message:`${i} API key is missing. Pass it using the '${t}' parameter or the ${e} environment variable.`});if(typeof n!="string")throw new _d({message:`${i} API key must be a string. The value of the ${e} environment variable is not a string.`});return n}function Kd({settingValue:n,environmentVariableName:e}){if(typeof n=="string")return n;if(!(n!=null||typeof process>"u")&&(n=Ak[e],!(n==null||typeof n!="string")))return n}var o5=/"__proto__"\s*:/,l5=/"constructor"\s*:/;function c1(n){const e=JSON.parse(n);return e===null||typeof e!="object"||o5.test(n)===!1&&l5.test(n)===!1?e:c5(e)}function c5(n){let e=[n];for(;e.length;){const t=e;e=[];for(const i of t){if(Object.prototype.hasOwnProperty.call(i,"__proto__"))throw new SyntaxError("Object contains forbidden prototype property");if(Object.prototype.hasOwnProperty.call(i,"constructor")&&Object.prototype.hasOwnProperty.call(i.constructor,"prototype"))throw new SyntaxError("Object contains forbidden prototype property");for(const s in i){const r=i[s];r&&typeof r=="object"&&e.push(r)}}}return n}function Rk(n){const{stackTraceLimit:e}=Error;try{Error.stackTraceLimit=0}catch{return c1(n)}try{return c1(n)}finally{Error.stackTraceLimit=e}}function uy(n){if(n.type==="object"||Array.isArray(n.type)&&n.type.includes("object")){n.additionalProperties=!1;const{properties:t}=n;if(t!=null)for(const i of Object.keys(t))t[i]=vr(t[i])}n.items!=null&&(n.items=Array.isArray(n.items)?n.items.map(vr):vr(n.items)),n.anyOf!=null&&(n.anyOf=n.anyOf.map(vr)),n.allOf!=null&&(n.allOf=n.allOf.map(vr)),n.oneOf!=null&&(n.oneOf=n.oneOf.map(vr));const{definitions:e}=n;if(e!=null)for(const t of Object.keys(e))e[t]=vr(e[t]);return n}function vr(n){return typeof n=="boolean"?n:uy(n)}var u5=Symbol("Let zodToJsonSchema decide on which parser to use"),u1={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",strictUnions:!1,definitions:{},errorMessages:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},d5=n=>typeof n=="string"?{...u1,name:n}:{...u1,...n};function Ei(){return{}}function h5(n,e){var t,i,s;const r={type:"array"};return(t=n.type)!=null&&t._def&&((s=(i=n.type)==null?void 0:i._def)==null?void 0:s.typeName)!==Ie.ZodAny&&(r.items=at(n.type._def,{...e,currentPath:[...e.currentPath,"items"]})),n.minLength&&(r.minItems=n.minLength.value),n.maxLength&&(r.maxItems=n.maxLength.value),n.exactLength&&(r.minItems=n.exactLength.value,r.maxItems=n.exactLength.value),r}function f5(n){const e={type:"integer",format:"int64"};if(!n.checks)return e;for(const t of n.checks)switch(t.kind){case"min":t.inclusive?e.minimum=t.value:e.exclusiveMinimum=t.value;break;case"max":t.inclusive?e.maximum=t.value:e.exclusiveMaximum=t.value;break;case"multipleOf":e.multipleOf=t.value;break}return e}function p5(){return{type:"boolean"}}function Dk(n,e){return at(n.type._def,e)}var m5=(n,e)=>at(n.innerType._def,e);function Ok(n,e,t){const i=t??e.dateStrategy;if(Array.isArray(i))return{anyOf:i.map((s,r)=>Ok(n,e,s))};switch(i){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return g5(n)}}var g5=n=>{const e={type:"integer",format:"unix-time"};for(const t of n.checks)switch(t.kind){case"min":e.minimum=t.value;break;case"max":e.maximum=t.value;break}return e};function v5(n,e){return{...at(n.innerType._def,e),default:n.defaultValue()}}function y5(n,e){return e.effectStrategy==="input"?at(n.schema._def,e):Ei()}function b5(n){return{type:"string",enum:Array.from(n.values)}}var x5=n=>"type"in n&&n.type==="string"?!1:"allOf"in n;function w5(n,e){const t=[at(n.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),at(n.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(s=>!!s),i=[];return t.forEach(s=>{if(x5(s))i.push(...s.allOf);else{let r=s;if("additionalProperties"in s&&s.additionalProperties===!1){const{additionalProperties:l,...c}=s;r=c}i.push(r)}}),i.length?{allOf:i}:void 0}function A5(n){const e=typeof n.value;return e!=="bigint"&&e!=="number"&&e!=="boolean"&&e!=="string"?{type:Array.isArray(n.value)?"array":"object"}:{type:e==="bigint"?"integer":e,const:n.value}}var Xm=void 0,Qi={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(Xm===void 0&&(Xm=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),Xm),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function Nk(n,e){const t={type:"string"};if(n.checks)for(const i of n.checks)switch(i.kind){case"min":t.minLength=typeof t.minLength=="number"?Math.max(t.minLength,i.value):i.value;break;case"max":t.maxLength=typeof t.maxLength=="number"?Math.min(t.maxLength,i.value):i.value;break;case"email":switch(e.emailStrategy){case"format:email":es(t,"email",i.message,e);break;case"format:idn-email":es(t,"idn-email",i.message,e);break;case"pattern:zod":Un(t,Qi.email,i.message,e);break}break;case"url":es(t,"uri",i.message,e);break;case"uuid":es(t,"uuid",i.message,e);break;case"regex":Un(t,i.regex,i.message,e);break;case"cuid":Un(t,Qi.cuid,i.message,e);break;case"cuid2":Un(t,Qi.cuid2,i.message,e);break;case"startsWith":Un(t,RegExp(`^${Wm(i.value,e)}`),i.message,e);break;case"endsWith":Un(t,RegExp(`${Wm(i.value,e)}$`),i.message,e);break;case"datetime":es(t,"date-time",i.message,e);break;case"date":es(t,"date",i.message,e);break;case"time":es(t,"time",i.message,e);break;case"duration":es(t,"duration",i.message,e);break;case"length":t.minLength=typeof t.minLength=="number"?Math.max(t.minLength,i.value):i.value,t.maxLength=typeof t.maxLength=="number"?Math.min(t.maxLength,i.value):i.value;break;case"includes":{Un(t,RegExp(Wm(i.value,e)),i.message,e);break}case"ip":{i.version!=="v6"&&es(t,"ipv4",i.message,e),i.version!=="v4"&&es(t,"ipv6",i.message,e);break}case"base64url":Un(t,Qi.base64url,i.message,e);break;case"jwt":Un(t,Qi.jwt,i.message,e);break;case"cidr":{i.version!=="v6"&&Un(t,Qi.ipv4Cidr,i.message,e),i.version!=="v4"&&Un(t,Qi.ipv6Cidr,i.message,e);break}case"emoji":Un(t,Qi.emoji(),i.message,e);break;case"ulid":{Un(t,Qi.ulid,i.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{es(t,"binary",i.message,e);break}case"contentEncoding:base64":{t.contentEncoding="base64";break}case"pattern:zod":{Un(t,Qi.base64,i.message,e);break}}break}case"nanoid":Un(t,Qi.nanoid,i.message,e)}return t}function Wm(n,e){return e.patternStrategy==="escape"?_5(n):n}var S5=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function _5(n){let e="";for(let t=0;t<n.length;t++)S5.has(n[t])||(e+="\\"),e+=n[t];return e}function es(n,e,t,i){var s;n.format||(s=n.anyOf)!=null&&s.some(r=>r.format)?(n.anyOf||(n.anyOf=[]),n.format&&(n.anyOf.push({format:n.format}),delete n.format),n.anyOf.push({format:e,...t&&i.errorMessages&&{errorMessage:{format:t}}})):n.format=e}function Un(n,e,t,i){var s;n.pattern||(s=n.allOf)!=null&&s.some(r=>r.pattern)?(n.allOf||(n.allOf=[]),n.pattern&&(n.allOf.push({pattern:n.pattern}),delete n.pattern),n.allOf.push({pattern:d1(e,i),...t&&i.errorMessages&&{errorMessage:{pattern:t}}})):n.pattern=d1(e,i)}function d1(n,e){var t;if(!e.applyRegexFlags||!n.flags)return n.source;const i={i:n.flags.includes("i"),m:n.flags.includes("m"),s:n.flags.includes("s")},s=i.i?n.source.toLowerCase():n.source;let r="",l=!1,c=!1,d=!1;for(let h=0;h<s.length;h++){if(l){r+=s[h],l=!1;continue}if(i.i){if(c){if(s[h].match(/[a-z]/)){d?(r+=s[h],r+=`${s[h-2]}-${s[h]}`.toUpperCase(),d=!1):s[h+1]==="-"&&((t=s[h+2])!=null&&t.match(/[a-z]/))?(r+=s[h],d=!0):r+=`${s[h]}${s[h].toUpperCase()}`;continue}}else if(s[h].match(/[a-z]/)){r+=`[${s[h]}${s[h].toUpperCase()}]`;continue}}if(i.m){if(s[h]==="^"){r+=`(^|(?<=[\r
]))`;continue}else if(s[h]==="$"){r+=`($|(?=[\r
]))`;continue}}if(i.s&&s[h]==="."){r+=c?`${s[h]}\r
`:`[${s[h]}\r
]`;continue}r+=s[h],s[h]==="\\"?l=!0:c&&s[h]==="]"?c=!1:!c&&s[h]==="["&&(c=!0)}try{new RegExp(r)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),n.source}return r}function Pk(n,e){var t,i,s,r,l,c;const d={type:"object",additionalProperties:(t=at(n.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]}))!=null?t:e.allowedAdditionalProperties};if(((i=n.keyType)==null?void 0:i._def.typeName)===Ie.ZodString&&((s=n.keyType._def.checks)!=null&&s.length)){const{type:h,...p}=Nk(n.keyType._def,e);return{...d,propertyNames:p}}else{if(((r=n.keyType)==null?void 0:r._def.typeName)===Ie.ZodEnum)return{...d,propertyNames:{enum:n.keyType._def.values}};if(((l=n.keyType)==null?void 0:l._def.typeName)===Ie.ZodBranded&&n.keyType._def.type._def.typeName===Ie.ZodString&&((c=n.keyType._def.type._def.checks)!=null&&c.length)){const{type:h,...p}=Dk(n.keyType._def,e);return{...d,propertyNames:p}}}return d}function E5(n,e){if(e.mapStrategy==="record")return Pk(n,e);const t=at(n.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||Ei(),i=at(n.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||Ei();return{type:"array",maxItems:125,items:{type:"array",items:[t,i],minItems:2,maxItems:2}}}function T5(n){const e=n.values,i=Object.keys(n.values).filter(r=>typeof e[e[r]]!="number").map(r=>e[r]),s=Array.from(new Set(i.map(r=>typeof r)));return{type:s.length===1?s[0]==="string"?"string":"number":["string","number"],enum:i}}function C5(){return{not:Ei()}}function k5(){return{type:"null"}}var Xg={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function M5(n,e){const t=n.options instanceof Map?Array.from(n.options.values()):n.options;if(t.every(i=>i._def.typeName in Xg&&(!i._def.checks||!i._def.checks.length))){const i=t.reduce((s,r)=>{const l=Xg[r._def.typeName];return l&&!s.includes(l)?[...s,l]:s},[]);return{type:i.length>1?i:i[0]}}else if(t.every(i=>i._def.typeName==="ZodLiteral"&&!i.description)){const i=t.reduce((s,r)=>{const l=typeof r._def.value;switch(l){case"string":case"number":case"boolean":return[...s,l];case"bigint":return[...s,"integer"];case"object":if(r._def.value===null)return[...s,"null"];default:return s}},[]);if(i.length===t.length){const s=i.filter((r,l,c)=>c.indexOf(r)===l);return{type:s.length>1?s:s[0],enum:t.reduce((r,l)=>r.includes(l._def.value)?r:[...r,l._def.value],[])}}}else if(t.every(i=>i._def.typeName==="ZodEnum"))return{type:"string",enum:t.reduce((i,s)=>[...i,...s._def.values.filter(r=>!i.includes(r))],[])};return R5(n,e)}var R5=(n,e)=>{const t=(n.options instanceof Map?Array.from(n.options.values()):n.options).map((i,s)=>at(i._def,{...e,currentPath:[...e.currentPath,"anyOf",`${s}`]})).filter(i=>!!i&&(!e.strictUnions||typeof i=="object"&&Object.keys(i).length>0));return t.length?{anyOf:t}:void 0};function D5(n,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(n.innerType._def.typeName)&&(!n.innerType._def.checks||!n.innerType._def.checks.length))return{type:[Xg[n.innerType._def.typeName],"null"]};const t=at(n.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return t&&{anyOf:[t,{type:"null"}]}}function O5(n){const e={type:"number"};if(!n.checks)return e;for(const t of n.checks)switch(t.kind){case"int":e.type="integer";break;case"min":t.inclusive?e.minimum=t.value:e.exclusiveMinimum=t.value;break;case"max":t.inclusive?e.maximum=t.value:e.exclusiveMaximum=t.value;break;case"multipleOf":e.multipleOf=t.value;break}return e}function N5(n,e){const t={type:"object",properties:{}},i=[],s=n.shape();for(const l in s){let c=s[l];if(c===void 0||c._def===void 0)continue;const d=I5(c),h=at(c._def,{...e,currentPath:[...e.currentPath,"properties",l],propertyPath:[...e.currentPath,"properties",l]});h!==void 0&&(t.properties[l]=h,d||i.push(l))}i.length&&(t.required=i);const r=P5(n,e);return r!==void 0&&(t.additionalProperties=r),t}function P5(n,e){if(n.catchall._def.typeName!=="ZodNever")return at(n.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]});switch(n.unknownKeys){case"passthrough":return e.allowedAdditionalProperties;case"strict":return e.rejectedAdditionalProperties;case"strip":return e.removeAdditionalStrategy==="strict"?e.allowedAdditionalProperties:e.rejectedAdditionalProperties}}function I5(n){try{return n.isOptional()}catch{return!0}}var L5=(n,e)=>{var t;if(e.currentPath.toString()===((t=e.propertyPath)==null?void 0:t.toString()))return at(n.innerType._def,e);const i=at(n.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return i?{anyOf:[{not:Ei()},i]}:Ei()},z5=(n,e)=>{if(e.pipeStrategy==="input")return at(n.in._def,e);if(e.pipeStrategy==="output")return at(n.out._def,e);const t=at(n.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),i=at(n.out._def,{...e,currentPath:[...e.currentPath,"allOf",t?"1":"0"]});return{allOf:[t,i].filter(s=>s!==void 0)}};function j5(n,e){return at(n.type._def,e)}function B5(n,e){const i={type:"array",uniqueItems:!0,items:at(n.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return n.minSize&&(i.minItems=n.minSize.value),n.maxSize&&(i.maxItems=n.maxSize.value),i}function F5(n,e){return n.rest?{type:"array",minItems:n.items.length,items:n.items.map((t,i)=>at(t._def,{...e,currentPath:[...e.currentPath,"items",`${i}`]})).reduce((t,i)=>i===void 0?t:[...t,i],[]),additionalItems:at(n.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:n.items.length,maxItems:n.items.length,items:n.items.map((t,i)=>at(t._def,{...e,currentPath:[...e.currentPath,"items",`${i}`]})).reduce((t,i)=>i===void 0?t:[...t,i],[])}}function U5(){return{not:Ei()}}function V5(){return Ei()}var $5=(n,e)=>at(n.innerType._def,e),H5=(n,e,t)=>{switch(e){case Ie.ZodString:return Nk(n,t);case Ie.ZodNumber:return O5(n);case Ie.ZodObject:return N5(n,t);case Ie.ZodBigInt:return f5(n);case Ie.ZodBoolean:return p5();case Ie.ZodDate:return Ok(n,t);case Ie.ZodUndefined:return U5();case Ie.ZodNull:return k5();case Ie.ZodArray:return h5(n,t);case Ie.ZodUnion:case Ie.ZodDiscriminatedUnion:return M5(n,t);case Ie.ZodIntersection:return w5(n,t);case Ie.ZodTuple:return F5(n,t);case Ie.ZodRecord:return Pk(n,t);case Ie.ZodLiteral:return A5(n);case Ie.ZodEnum:return b5(n);case Ie.ZodNativeEnum:return T5(n);case Ie.ZodNullable:return D5(n,t);case Ie.ZodOptional:return L5(n,t);case Ie.ZodMap:return E5(n,t);case Ie.ZodSet:return B5(n,t);case Ie.ZodLazy:return()=>n.getter()._def;case Ie.ZodPromise:return j5(n,t);case Ie.ZodNaN:case Ie.ZodNever:return C5();case Ie.ZodEffects:return y5(n,t);case Ie.ZodAny:return Ei();case Ie.ZodUnknown:return V5();case Ie.ZodDefault:return v5(n,t);case Ie.ZodBranded:return Dk(n,t);case Ie.ZodReadonly:return $5(n,t);case Ie.ZodCatch:return m5(n,t);case Ie.ZodPipeline:return z5(n,t);case Ie.ZodFunction:case Ie.ZodVoid:case Ie.ZodSymbol:return;default:return(i=>{})()}},G5=(n,e)=>{let t=0;for(;t<n.length&&t<e.length&&n[t]===e[t];t++);return[(n.length-t).toString(),...e.slice(t)].join("/")};function at(n,e,t=!1){var i;const s=e.seen.get(n);if(e.override){const d=(i=e.override)==null?void 0:i.call(e,n,e,s,t);if(d!==u5)return d}if(s&&!t){const d=q5(s,e);if(d!==void 0)return d}const r={def:n,path:e.currentPath,jsonSchema:void 0};e.seen.set(n,r);const l=H5(n,n.typeName,e),c=typeof l=="function"?at(l(),e):l;if(c&&Z5(n,e,c),e.postProcess){const d=e.postProcess(c,n,e);return r.jsonSchema=c,d}return r.jsonSchema=c,c}var q5=(n,e)=>{switch(e.$refStrategy){case"root":return{$ref:n.path.join("/")};case"relative":return{$ref:G5(e.currentPath,n.path)};case"none":case"seen":return n.path.length<e.currentPath.length&&n.path.every((t,i)=>e.currentPath[i]===t)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),Ei()):e.$refStrategy==="seen"?Ei():void 0}},Z5=(n,e,t)=>(n.description&&(t.description=n.description),t),Y5=n=>{const e=d5(n),t=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,currentPath:t,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([i,s])=>[s._def,{def:s._def,path:[...e.basePath,e.definitionPath,i],jsonSchema:void 0}]))}},X5=(n,e)=>{var t;const i=Y5(e);let s=typeof e=="object"&&e.definitions?Object.entries(e.definitions).reduce((h,[p,m])=>{var v;return{...h,[p]:(v=at(m._def,{...i,currentPath:[...i.basePath,i.definitionPath,p]},!0))!=null?v:Ei()}},{}):void 0;const r=typeof e=="string"?e:e?.nameStrategy==="title"?void 0:e?.name,l=(t=at(n._def,r===void 0?i:{...i,currentPath:[...i.basePath,i.definitionPath,r]},!1))!=null?t:Ei(),c=typeof e=="object"&&e.name!==void 0&&e.nameStrategy==="title"?e.name:void 0;c!==void 0&&(l.title=c);const d=r===void 0?s?{...l,[i.definitionPath]:s}:l:{$ref:[...i.$refStrategy==="relative"?[]:i.basePath,i.definitionPath,r].join("/"),[i.definitionPath]:{...s,[r]:l}};return d.$schema="http://json-schema.org/draft-07/schema#",d},Wg=Symbol.for("vercel.ai.schema");function Tt(n){let e;return()=>(e==null&&(e=n()),e)}function Zh(n,{validate:e}={}){return{[Wg]:!0,_type:void 0,get jsonSchema(){return typeof n=="function"&&(n=n()),n},validate:e}}function W5(n){return typeof n=="object"&&n!==null&&Wg in n&&n[Wg]===!0&&"jsonSchema"in n&&"validate"in n}function Lc(n){return n==null?Zh({properties:{},additionalProperties:!1}):W5(n)?n:"~standard"in n?n["~standard"].vendor==="zod"?xt(n):K5(n):n()}function K5(n){return Zh(()=>uy(n["~standard"].jsonSchema.input({target:"draft-07"})),{validate:async e=>{const t=await n["~standard"].validate(e);return"value"in t?{success:!0,value:t.value}:{success:!1,error:new di({value:e,cause:t.issues})}}})}function J5(n,e){var t;const i=(t=void 0)!=null?t:!1;return Zh(()=>X5(n,{$refStrategy:i?"root":"none"}),{validate:async s=>{const r=await n.safeParseAsync(s);return r.success?{success:!0,value:r.data}:{success:!1,error:r.error}}})}function Q5(n,e){var t;const i=(t=void 0)!=null?t:!1;return Zh(()=>uy(TF(n,{target:"draft-7",io:"input",reused:i?"ref":"inline"})),{validate:async s=>{const r=await gk(n,s);return r.success?{success:!0,value:r.data}:{success:!1,error:r.error}}})}function eU(n){return"_zod"in n}function xt(n,e){return eU(n)?Q5(n):J5(n)}async function tU({value:n,schema:e,context:t}){const i=await Ti({value:n,schema:e,context:t});if(!i.success)throw di.wrap({value:n,cause:i.error,context:t});return i.value}async function Ti({value:n,schema:e,context:t}){const i=Lc(e);try{if(i.validate==null)return{success:!0,value:n,rawValue:n};const s=await i.validate(n);return s.success?{success:!0,value:s.value,rawValue:n}:{success:!1,error:di.wrap({value:n,cause:s.error,context:t}),rawValue:n}}catch(s){return{success:!1,error:di.wrap({value:n,cause:s,context:t}),rawValue:n}}}async function nU({text:n,schema:e}){try{const t=Rk(n);return e==null?t:tU({value:t,schema:e})}catch(t){throw Oc.isInstance(t)||di.isInstance(t)?t:new Oc({text:n,cause:t})}}async function ra({text:n,schema:e}){try{const t=Rk(n);return e==null?{success:!0,value:t,rawValue:t}:await Ti({value:t,schema:e})}catch(t){return{success:!1,error:Oc.isInstance(t)?t:new Oc({text:n,cause:t}),rawValue:void 0}}}function iU({stream:n,schema:e}){return n.pipeThrough(new TextDecoderStream).pipeThrough(new Y4).pipeThrough(new TransformStream({async transform({data:t},i){t!=="[DONE]"&&i.enqueue(await ra({text:t,schema:e}))}}))}async function zc({provider:n,providerOptions:e,schema:t}){if(e?.[n]==null)return;const i=await Ti({value:e[n],schema:t});if(!i.success)throw new uC({argument:"providerOptions",message:`invalid ${n} provider options`,cause:i.error});return i.value}var sU=()=>globalThis.fetch,as=async({url:n,headers:e,body:t,failedResponseHandler:i,successfulResponseHandler:s,abortSignal:r,fetch:l})=>aU({url:n,headers:{"Content-Type":"application/json",...e},body:{content:JSON.stringify(t),values:t},failedResponseHandler:i,successfulResponseHandler:s,abortSignal:r,fetch:l}),aU=async({url:n,headers:e={},body:t,successfulResponseHandler:i,failedResponseHandler:s,abortSignal:r,fetch:l=sU()})=>{try{const c=await l(n,{method:"POST",headers:dl(e,`ai-sdk/provider-utils/${Mk}`,cy()),body:t.content,signal:r}),d=eu(c);if(!c.ok){let h;try{h=await s({response:c,url:n,requestBodyValues:t.values})}catch(p){throw il(p)||Bn.isInstance(p)?p:new Bn({message:"Failed to process error response",cause:p,statusCode:c.status,url:n,responseHeaders:d,requestBodyValues:t.values})}throw h.value}try{return await i({response:c,url:n,requestBodyValues:t.values})}catch(h){throw h instanceof Error&&(il(h)||Bn.isInstance(h))?h:new Bn({message:"Failed to process successful response",cause:h,statusCode:c.status,url:n,responseHeaders:d,requestBodyValues:t.values})}}catch(c){throw kk({error:c,url:n,requestBodyValues:t.values})}};function hl({id:n,inputSchema:e}){return({execute:t,outputSchema:i,needsApproval:s,toModelOutput:r,onInputStart:l,onInputDelta:c,onInputAvailable:d,...h})=>({type:"provider",id:n,args:h,inputSchema:e,outputSchema:i,execute:t,needsApproval:s,toModelOutput:r,onInputStart:l,onInputDelta:c,onInputAvailable:d})}function dy({id:n,inputSchema:e,outputSchema:t,supportsDeferredResults:i}){return({execute:s,needsApproval:r,toModelOutput:l,onInputStart:c,onInputDelta:d,onInputAvailable:h,...p})=>({type:"provider",id:n,args:p,inputSchema:e,outputSchema:t,execute:s,needsApproval:r,toModelOutput:l,onInputStart:c,onInputDelta:d,onInputAvailable:h,supportsDeferredResults:i})}async function Kt(n){return typeof n=="function"&&(n=n()),Promise.resolve(n)}var $a=({errorSchema:n,errorToMessage:e,isRetryable:t})=>async({response:i,url:s,requestBodyValues:r})=>{const l=await i.text(),c=eu(i);if(l.trim()==="")return{responseHeaders:c,value:new Bn({message:i.statusText,url:s,requestBodyValues:r,statusCode:i.status,responseHeaders:c,responseBody:l,isRetryable:t?.(i)})};try{const d=await nU({text:l,schema:n});return{responseHeaders:c,value:new Bn({message:e(d),url:s,requestBodyValues:r,statusCode:i.status,responseHeaders:c,responseBody:l,data:d,isRetryable:t?.(i,d)})}}catch{return{responseHeaders:c,value:new Bn({message:i.statusText,url:s,requestBodyValues:r,statusCode:i.status,responseHeaders:c,responseBody:l,isRetryable:t?.(i)})}}},Ik=n=>async({response:e})=>{const t=eu(e);if(e.body==null)throw new Kz({});return{responseHeaders:t,value:iU({stream:e.body,schema:n})}},$i=n=>async({response:e,url:t,requestBodyValues:i})=>{const s=await e.text(),r=await ra({text:s,schema:n}),l=eu(e);if(!r.success)throw new Bn({message:"Invalid JSON response",cause:r.error,statusCode:e.status,responseHeaders:l,responseBody:s,url:t,requestBodyValues:i});return{responseHeaders:l,value:r.value,rawValue:r.rawValue}};function Lk(n){return n?.replace(/\/$/,"")}var rU="3.0.29",oU=Tt(()=>xt(K({error:K({code:ke().nullable(),message:F(),status:F()})}))),Dr=$a({errorSchema:oU,errorToMessage:n=>n.error.message}),lU=Tt(()=>xt(K({outputDimensionality:ke().optional(),taskType:Wt(["SEMANTIC_SIMILARITY","CLASSIFICATION","CLUSTERING","RETRIEVAL_DOCUMENT","RETRIEVAL_QUERY","QUESTION_ANSWERING","FACT_VERIFICATION","CODE_RETRIEVAL_QUERY"]).optional()}))),cU=class{constructor(n,e){this.specificationVersion="v3",this.maxEmbeddingsPerCall=2048,this.supportsParallelCalls=!0,this.modelId=n,this.config=e}get provider(){return this.config.provider}async doEmbed({values:n,headers:e,abortSignal:t,providerOptions:i}){const s=await zc({provider:"google",providerOptions:i,schema:lU});if(n.length>this.maxEmbeddingsPerCall)throw new ij({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:n});const r=ss(await Kt(this.config.headers),e);if(n.length===1){const{responseHeaders:h,value:p,rawValue:m}=await as({url:`${this.config.baseURL}/models/${this.modelId}:embedContent`,headers:r,body:{model:`models/${this.modelId}`,content:{parts:[{text:n[0]}]},outputDimensionality:s?.outputDimensionality,taskType:s?.taskType},failedResponseHandler:Dr,successfulResponseHandler:$i(dU),abortSignal:t,fetch:this.config.fetch});return{warnings:[],embeddings:[p.embedding.values],usage:void 0,response:{headers:h,body:m}}}const{responseHeaders:l,value:c,rawValue:d}=await as({url:`${this.config.baseURL}/models/${this.modelId}:batchEmbedContents`,headers:r,body:{requests:n.map(h=>({model:`models/${this.modelId}`,content:{role:"user",parts:[{text:h}]},outputDimensionality:s?.outputDimensionality,taskType:s?.taskType}))},failedResponseHandler:Dr,successfulResponseHandler:$i(uU),abortSignal:t,fetch:this.config.fetch});return{warnings:[],embeddings:c.embeddings.map(h=>h.values),usage:void 0,response:{headers:l,body:d}}}},uU=Tt(()=>xt(K({embeddings:we(K({values:we(ke())}))}))),dU=Tt(()=>xt(K({embedding:K({values:we(ke())})})));function h1(n){var e,t,i,s;if(n==null)return{inputTokens:{total:void 0,noCache:void 0,cacheRead:void 0,cacheWrite:void 0},outputTokens:{total:void 0,text:void 0,reasoning:void 0},raw:void 0};const r=(e=n.promptTokenCount)!=null?e:0,l=(t=n.candidatesTokenCount)!=null?t:0,c=(i=n.cachedContentTokenCount)!=null?i:0,d=(s=n.thoughtsTokenCount)!=null?s:0;return{inputTokens:{total:r,noCache:r-c,cacheRead:c,cacheWrite:void 0},outputTokens:{total:l+d,text:l,reasoning:d},raw:n}}function ws(n,e=!0){if(n==null)return;if(hU(n))return e?void 0:typeof n=="object"&&n.description?{type:"object",description:n.description}:{type:"object"};if(typeof n=="boolean")return{type:"boolean",properties:{}};const{type:t,description:i,required:s,properties:r,items:l,allOf:c,anyOf:d,oneOf:h,format:p,const:m,minLength:v,enum:b}=n,w={};if(i&&(w.description=i),s&&(w.required=s),p&&(w.format=p),m!==void 0&&(w.enum=[m]),t)if(Array.isArray(t)){const x=t.includes("null"),A=t.filter(S=>S!=="null");A.length===0?w.type="null":(w.anyOf=A.map(S=>({type:S})),x&&(w.nullable=!0))}else w.type=t;if(b!==void 0&&(w.enum=b),r!=null&&(w.properties=Object.entries(r).reduce((x,[A,S])=>(x[A]=ws(S,!1),x),{})),l&&(w.items=Array.isArray(l)?l.map(x=>ws(x,!1)):ws(l,!1)),c&&(w.allOf=c.map(x=>ws(x,!1))),d)if(d.some(x=>typeof x=="object"&&x?.type==="null")){const x=d.filter(A=>!(typeof A=="object"&&A?.type==="null"));if(x.length===1){const A=ws(x[0],!1);typeof A=="object"&&(w.nullable=!0,Object.assign(w,A))}else w.anyOf=x.map(A=>ws(A,!1)),w.nullable=!0}else w.anyOf=d.map(x=>ws(x,!1));return h&&(w.oneOf=h.map(x=>ws(x,!1))),v!==void 0&&(w.minLength=v),w}function hU(n){return n!=null&&typeof n=="object"&&n.type==="object"&&(n.properties==null||Object.keys(n.properties).length===0)&&!n.additionalProperties}function fU(n,e){var t,i,s;const r=[],l=[];let c=!0;const d=(t=e?.isGemmaModel)!=null?t:!1,h=(i=e?.providerOptionsName)!=null?i:"google";for(const{role:p,content:m}of n)switch(p){case"system":{if(!c)throw new Qo({functionality:"system messages are only supported at the beginning of the conversation"});r.push({text:m});break}case"user":{c=!1;const v=[];for(const b of m)switch(b.type){case"text":{v.push({text:b.text});break}case"file":{const w=b.mediaType==="image/*"?"image/jpeg":b.mediaType;v.push(b.data instanceof URL?{fileData:{mimeType:w,fileUri:b.data.toString()}}:{inlineData:{mimeType:w,data:Zg(b.data)}});break}}l.push({role:"user",parts:v});break}case"assistant":{c=!1,l.push({role:"model",parts:m.map(v=>{var b,w,x;const A=(x=(b=v.providerOptions)==null?void 0:b[h])!=null?x:h!=="google"?(w=v.providerOptions)==null?void 0:w.google:void 0,S=A?.thoughtSignature!=null?String(A.thoughtSignature):void 0;switch(v.type){case"text":return v.text.length===0?void 0:{text:v.text,thoughtSignature:S};case"reasoning":return v.text.length===0?void 0:{text:v.text,thought:!0,thoughtSignature:S};case"file":{if(v.data instanceof URL)throw new Qo({functionality:"File data URLs in assistant messages are not supported"});return{inlineData:{mimeType:v.mediaType,data:Zg(v.data)},thoughtSignature:S}}case"tool-call":return{functionCall:{name:v.toolName,args:v.input},thoughtSignature:S}}}).filter(v=>v!==void 0)});break}case"tool":{c=!1;const v=[];for(const b of m){if(b.type==="tool-approval-response")continue;const w=b.output;if(w.type==="content")for(const x of w.value)switch(x.type){case"text":v.push({functionResponse:{name:b.toolName,response:{name:b.toolName,content:x.text}}});break;case"image-data":v.push({inlineData:{mimeType:x.mediaType,data:x.data}},{text:"Tool executed successfully and returned this image as a response"});break;default:v.push({text:JSON.stringify(x)});break}else v.push({functionResponse:{name:b.toolName,response:{name:b.toolName,content:w.type==="execution-denied"?(s=w.reason)!=null?s:"Tool execution denied.":w.value}}})}l.push({role:"user",parts:v});break}}if(d&&r.length>0&&l.length>0&&l[0].role==="user"){const p=r.map(m=>m.text).join(`

`);l[0].parts.unshift({text:p+`

`})}return{systemInstruction:r.length>0&&!d?{parts:r}:void 0,contents:l}}function f1(n){return n.includes("/")?n:`models/${n}`}var p1=Tt(()=>xt(K({responseModalities:we(Wt(["TEXT","IMAGE"])).optional(),thinkingConfig:K({thinkingBudget:ke().optional(),includeThoughts:na().optional(),thinkingLevel:Wt(["minimal","low","medium","high"]).optional()}).optional(),cachedContent:F().optional(),structuredOutputs:na().optional(),safetySettings:we(K({category:Wt(["HARM_CATEGORY_UNSPECIFIED","HARM_CATEGORY_HATE_SPEECH","HARM_CATEGORY_DANGEROUS_CONTENT","HARM_CATEGORY_HARASSMENT","HARM_CATEGORY_SEXUALLY_EXPLICIT","HARM_CATEGORY_CIVIC_INTEGRITY"]),threshold:Wt(["HARM_BLOCK_THRESHOLD_UNSPECIFIED","BLOCK_LOW_AND_ABOVE","BLOCK_MEDIUM_AND_ABOVE","BLOCK_ONLY_HIGH","BLOCK_NONE","OFF"])})).optional(),threshold:Wt(["HARM_BLOCK_THRESHOLD_UNSPECIFIED","BLOCK_LOW_AND_ABOVE","BLOCK_MEDIUM_AND_ABOVE","BLOCK_ONLY_HIGH","BLOCK_NONE","OFF"]).optional(),audioTimestamp:na().optional(),labels:Ms(F(),F()).optional(),mediaResolution:Wt(["MEDIA_RESOLUTION_UNSPECIFIED","MEDIA_RESOLUTION_LOW","MEDIA_RESOLUTION_MEDIUM","MEDIA_RESOLUTION_HIGH"]).optional(),imageConfig:K({aspectRatio:Wt(["1:1","2:3","3:2","3:4","4:3","4:5","5:4","9:16","16:9","21:9"]).optional(),imageSize:Wt(["1K","2K","4K"]).optional()}).optional(),retrievalConfig:K({latLng:K({latitude:ke(),longitude:ke()}).optional()}).optional()})));function pU({tools:n,toolChoice:e,modelId:t}){var i;n=n?.length?n:void 0;const s=[],r=["gemini-flash-latest","gemini-flash-lite-latest","gemini-pro-latest"].some(b=>b===t),l=t.includes("gemini-2")||t.includes("gemini-3")||r,c=t.includes("gemini-1.5-flash")&&!t.includes("-8b"),d=t.includes("gemini-2.5")||t.includes("gemini-3");if(n==null)return{tools:void 0,toolConfig:void 0,toolWarnings:s};const h=n.some(b=>b.type==="function"),p=n.some(b=>b.type==="provider");if(h&&p&&s.push({type:"unsupported",feature:"combination of function and provider-defined tools"}),p){const b=[];return n.filter(x=>x.type==="provider").forEach(x=>{switch(x.id){case"google.google_search":l?b.push({googleSearch:{}}):c?b.push({googleSearchRetrieval:{dynamicRetrievalConfig:{mode:x.args.mode,dynamicThreshold:x.args.dynamicThreshold}}}):b.push({googleSearchRetrieval:{}});break;case"google.enterprise_web_search":l?b.push({enterpriseWebSearch:{}}):s.push({type:"unsupported",feature:`provider-defined tool ${x.id}`,details:"Enterprise Web Search requires Gemini 2.0 or newer."});break;case"google.url_context":l?b.push({urlContext:{}}):s.push({type:"unsupported",feature:`provider-defined tool ${x.id}`,details:"The URL context tool is not supported with other Gemini models than Gemini 2."});break;case"google.code_execution":l?b.push({codeExecution:{}}):s.push({type:"unsupported",feature:`provider-defined tool ${x.id}`,details:"The code execution tools is not supported with other Gemini models than Gemini 2."});break;case"google.file_search":d?b.push({fileSearch:{...x.args}}):s.push({type:"unsupported",feature:`provider-defined tool ${x.id}`,details:"The file search tool is only supported with Gemini 2.5 models and Gemini 3 models."});break;case"google.vertex_rag_store":l?b.push({retrieval:{vertex_rag_store:{rag_resources:{rag_corpus:x.args.ragCorpus},similarity_top_k:x.args.topK}}}):s.push({type:"unsupported",feature:`provider-defined tool ${x.id}`,details:"The RAG store tool is not supported with other Gemini models than Gemini 2."});break;case"google.google_maps":l?b.push({googleMaps:{}}):s.push({type:"unsupported",feature:`provider-defined tool ${x.id}`,details:"The Google Maps grounding tool is not supported with Gemini models other than Gemini 2 or newer."});break;default:s.push({type:"unsupported",feature:`provider-defined tool ${x.id}`});break}}),{tools:b.length>0?b:void 0,toolConfig:void 0,toolWarnings:s}}const m=[];for(const b of n)b.type==="function"?m.push({name:b.name,description:(i=b.description)!=null?i:"",parameters:ws(b.inputSchema)}):s.push({type:"unsupported",feature:`function tool ${b.name}`});if(e==null)return{tools:[{functionDeclarations:m}],toolConfig:void 0,toolWarnings:s};const v=e.type;switch(v){case"auto":return{tools:[{functionDeclarations:m}],toolConfig:{functionCallingConfig:{mode:"AUTO"}},toolWarnings:s};case"none":return{tools:[{functionDeclarations:m}],toolConfig:{functionCallingConfig:{mode:"NONE"}},toolWarnings:s};case"required":return{tools:[{functionDeclarations:m}],toolConfig:{functionCallingConfig:{mode:"ANY"}},toolWarnings:s};case"tool":return{tools:[{functionDeclarations:m}],toolConfig:{functionCallingConfig:{mode:"ANY",allowedFunctionNames:[e.toolName]}},toolWarnings:s};default:{const b=v;throw new Qo({functionality:`tool choice type: ${b}`})}}}function m1({finishReason:n,hasToolCalls:e}){switch(n){case"STOP":return e?"tool-calls":"stop";case"MAX_TOKENS":return"length";case"IMAGE_SAFETY":case"RECITATION":case"SAFETY":case"BLOCKLIST":case"PROHIBITED_CONTENT":case"SPII":return"content-filter";case"MALFORMED_FUNCTION_CALL":return"error";default:return"other"}}var zk=class{constructor(n,e){this.specificationVersion="v3";var t;this.modelId=n,this.config=e,this.generateId=(t=e.generateId)!=null?t:bh}get provider(){return this.config.provider}get supportedUrls(){var n,e,t;return(t=(e=(n=this.config).supportedUrls)==null?void 0:e.call(n))!=null?t:{}}async getArgs({prompt:n,maxOutputTokens:e,temperature:t,topP:i,topK:s,frequencyPenalty:r,presencePenalty:l,stopSequences:c,responseFormat:d,seed:h,tools:p,toolChoice:m,providerOptions:v}){var b;const w=[],x=this.config.provider.includes("vertex")?"vertex":"google";let A=await zc({provider:x,providerOptions:v,schema:p1});A==null&&x!=="google"&&(A=await zc({provider:"google",providerOptions:v,schema:p1})),p?.some(L=>L.type==="provider"&&L.id==="google.vertex_rag_store")&&!this.config.provider.startsWith("google.vertex.")&&w.push({type:"other",message:`The 'vertex_rag_store' tool is only supported with the Google Vertex provider and might not be supported or could behave unexpectedly with the current Google provider (${this.config.provider}).`});const S=this.modelId.toLowerCase().startsWith("gemma-"),{contents:T,systemInstruction:E}=fU(n,{isGemmaModel:S,providerOptionsName:x}),{tools:M,toolConfig:R,toolWarnings:O}=pU({tools:p,toolChoice:m,modelId:this.modelId});return{args:{generationConfig:{maxOutputTokens:e,temperature:t,topK:s,topP:i,frequencyPenalty:r,presencePenalty:l,stopSequences:c,seed:h,responseMimeType:d?.type==="json"?"application/json":void 0,responseSchema:d?.type==="json"&&d.schema!=null&&((b=A?.structuredOutputs)==null||b)?ws(d.schema):void 0,...A?.audioTimestamp&&{audioTimestamp:A.audioTimestamp},responseModalities:A?.responseModalities,thinkingConfig:A?.thinkingConfig,...A?.mediaResolution&&{mediaResolution:A.mediaResolution},...A?.imageConfig&&{imageConfig:A.imageConfig}},contents:T,systemInstruction:S?void 0:E,safetySettings:A?.safetySettings,tools:M,toolConfig:A?.retrievalConfig?{...R,retrievalConfig:A.retrievalConfig}:R,cachedContent:A?.cachedContent,labels:A?.labels},warnings:[...w,...O],providerOptionsName:x}}async doGenerate(n){var e,t,i,s,r,l,c,d,h,p;const{args:m,warnings:v,providerOptionsName:b}=await this.getArgs(n),w=ss(await Kt(this.config.headers),n.headers),{responseHeaders:x,value:A,rawValue:S}=await as({url:`${this.config.baseURL}/${f1(this.modelId)}:generateContent`,headers:w,body:m,failedResponseHandler:Dr,successfulResponseHandler:$i(gU),abortSignal:n.abortSignal,fetch:this.config.fetch}),T=A.candidates[0],E=[],M=(t=(e=T.content)==null?void 0:e.parts)!=null?t:[],R=A.usageMetadata;let O;for(const D of M)if("executableCode"in D&&((i=D.executableCode)!=null&&i.code)){const $=this.config.generateId();O=$,E.push({type:"tool-call",toolCallId:$,toolName:"code_execution",input:JSON.stringify(D.executableCode),providerExecuted:!0})}else if("codeExecutionResult"in D&&D.codeExecutionResult)E.push({type:"tool-result",toolCallId:O,toolName:"code_execution",result:{outcome:D.codeExecutionResult.outcome,output:(s=D.codeExecutionResult.output)!=null?s:""}}),O=void 0;else if("text"in D&&D.text!=null){const $=D.thoughtSignature?{[b]:{thoughtSignature:D.thoughtSignature}}:void 0;if(D.text.length===0){if($!=null&&E.length>0){const ee=E[E.length-1];ee.providerMetadata=$}}else E.push({type:D.thought===!0?"reasoning":"text",text:D.text,providerMetadata:$})}else"functionCall"in D?E.push({type:"tool-call",toolCallId:this.config.generateId(),toolName:D.functionCall.name,input:JSON.stringify(D.functionCall.args),providerMetadata:D.thoughtSignature?{[b]:{thoughtSignature:D.thoughtSignature}}:void 0}):"inlineData"in D&&E.push({type:"file",data:D.inlineData.data,mediaType:D.inlineData.mimeType,providerMetadata:D.thoughtSignature?{[b]:{thoughtSignature:D.thoughtSignature}}:void 0});const L=(r=g1({groundingMetadata:T.groundingMetadata,generateId:this.config.generateId}))!=null?r:[];for(const D of L)E.push(D);return{content:E,finishReason:{unified:m1({finishReason:T.finishReason,hasToolCalls:E.some(D=>D.type==="tool-call"&&!D.providerExecuted)}),raw:(l=T.finishReason)!=null?l:void 0},usage:h1(R),warnings:v,providerMetadata:{[b]:{promptFeedback:(c=A.promptFeedback)!=null?c:null,groundingMetadata:(d=T.groundingMetadata)!=null?d:null,urlContextMetadata:(h=T.urlContextMetadata)!=null?h:null,safetyRatings:(p=T.safetyRatings)!=null?p:null,usageMetadata:R??null}},request:{body:m},response:{headers:x,body:S}}}async doStream(n){const{args:e,warnings:t,providerOptionsName:i}=await this.getArgs(n),s=ss(await Kt(this.config.headers),n.headers),{responseHeaders:r,value:l}=await as({url:`${this.config.baseURL}/${f1(this.modelId)}:streamGenerateContent?alt=sse`,headers:s,body:e,failedResponseHandler:Dr,successfulResponseHandler:Ik(vU),abortSignal:n.abortSignal,fetch:this.config.fetch});let c={unified:"other",raw:void 0},d,h;const p=this.config.generateId;let m=!1,v=null,b=null,w=0;const x=new Set;let A;return{stream:l.pipeThrough(new TransformStream({start(S){S.enqueue({type:"stream-start",warnings:t})},transform(S,T){var E,M,R,O,L,D,$,ee;if(n.includeRawChunks&&T.enqueue({type:"raw",rawValue:S.rawValue}),!S.success){T.enqueue({type:"error",error:S.error});return}const X=S.value,le=X.usageMetadata;le!=null&&(d=le);const de=(E=X.candidates)==null?void 0:E[0];if(de==null)return;const ce=de.content,fe=g1({groundingMetadata:de.groundingMetadata,generateId:p});if(fe!=null)for(const N of fe)N.sourceType==="url"&&!x.has(N.url)&&(x.add(N.url),T.enqueue(N));if(ce!=null){const N=(M=ce.parts)!=null?M:[];for(const B of N)if("executableCode"in B&&((R=B.executableCode)!=null&&R.code)){const se=p();A=se,T.enqueue({type:"tool-call",toolCallId:se,toolName:"code_execution",input:JSON.stringify(B.executableCode),providerExecuted:!0})}else if("codeExecutionResult"in B&&B.codeExecutionResult){const se=A;se&&(T.enqueue({type:"tool-result",toolCallId:se,toolName:"code_execution",result:{outcome:B.codeExecutionResult.outcome,output:(O=B.codeExecutionResult.output)!=null?O:""}}),A=void 0)}else if("text"in B&&B.text!=null){const se=B.thoughtSignature?{[i]:{thoughtSignature:B.thoughtSignature}}:void 0;B.text.length===0?se!=null&&v!==null&&T.enqueue({type:"text-delta",id:v,delta:"",providerMetadata:se}):B.thought===!0?(v!==null&&(T.enqueue({type:"text-end",id:v}),v=null),b===null&&(b=String(w++),T.enqueue({type:"reasoning-start",id:b,providerMetadata:se})),T.enqueue({type:"reasoning-delta",id:b,delta:B.text,providerMetadata:se})):(b!==null&&(T.enqueue({type:"reasoning-end",id:b}),b=null),v===null&&(v=String(w++),T.enqueue({type:"text-start",id:v,providerMetadata:se})),T.enqueue({type:"text-delta",id:v,delta:B.text,providerMetadata:se}))}else"inlineData"in B&&T.enqueue({type:"file",mediaType:B.inlineData.mimeType,data:B.inlineData.data});const U=mU({parts:ce.parts,generateId:p,providerOptionsName:i});if(U!=null)for(const B of U)T.enqueue({type:"tool-input-start",id:B.toolCallId,toolName:B.toolName,providerMetadata:B.providerMetadata}),T.enqueue({type:"tool-input-delta",id:B.toolCallId,delta:B.args,providerMetadata:B.providerMetadata}),T.enqueue({type:"tool-input-end",id:B.toolCallId,providerMetadata:B.providerMetadata}),T.enqueue({type:"tool-call",toolCallId:B.toolCallId,toolName:B.toolName,input:B.args,providerMetadata:B.providerMetadata}),m=!0}de.finishReason!=null&&(c={unified:m1({finishReason:de.finishReason,hasToolCalls:m}),raw:de.finishReason},h={[i]:{promptFeedback:(L=X.promptFeedback)!=null?L:null,groundingMetadata:(D=de.groundingMetadata)!=null?D:null,urlContextMetadata:($=de.urlContextMetadata)!=null?$:null,safetyRatings:(ee=de.safetyRatings)!=null?ee:null}},le!=null&&(h[i].usageMetadata=le))},flush(S){v!==null&&S.enqueue({type:"text-end",id:v}),b!==null&&S.enqueue({type:"reasoning-end",id:b}),S.enqueue({type:"finish",finishReason:c,usage:h1(d),providerMetadata:h})}})),response:{headers:r},request:{body:e}}}};function mU({parts:n,generateId:e,providerOptionsName:t}){const i=n?.filter(s=>"functionCall"in s);return i==null||i.length===0?void 0:i.map(s=>({type:"tool-call",toolCallId:e(),toolName:s.functionCall.name,args:JSON.stringify(s.functionCall.args),providerMetadata:s.thoughtSignature?{[t]:{thoughtSignature:s.thoughtSignature}}:void 0}))}function g1({groundingMetadata:n,generateId:e}){var t,i,s,r,l;if(!n?.groundingChunks)return;const c=[];for(const d of n.groundingChunks)if(d.web!=null)c.push({type:"source",sourceType:"url",id:e(),url:d.web.uri,title:(t=d.web.title)!=null?t:void 0});else if(d.retrievedContext!=null){const h=d.retrievedContext.uri,p=d.retrievedContext.fileSearchStore;if(h&&(h.startsWith("http://")||h.startsWith("https://")))c.push({type:"source",sourceType:"url",id:e(),url:h,title:(i=d.retrievedContext.title)!=null?i:void 0});else if(h){const m=(s=d.retrievedContext.title)!=null?s:"Unknown Document";let v="application/octet-stream",b;h.endsWith(".pdf")?(v="application/pdf",b=h.split("/").pop()):h.endsWith(".txt")?(v="text/plain",b=h.split("/").pop()):h.endsWith(".docx")?(v="application/vnd.openxmlformats-officedocument.wordprocessingml.document",b=h.split("/").pop()):h.endsWith(".doc")?(v="application/msword",b=h.split("/").pop()):(h.match(/\.(md|markdown)$/)&&(v="text/markdown"),b=h.split("/").pop()),c.push({type:"source",sourceType:"document",id:e(),mediaType:v,title:m,filename:b})}else if(p){const m=(r=d.retrievedContext.title)!=null?r:"Unknown Document";c.push({type:"source",sourceType:"document",id:e(),mediaType:"application/octet-stream",title:m,filename:p.split("/").pop()})}}else d.maps!=null&&d.maps.uri&&c.push({type:"source",sourceType:"url",id:e(),url:d.maps.uri,title:(l=d.maps.title)!=null?l:void 0});return c.length>0?c:void 0}var jk=()=>K({webSearchQueries:we(F()).nullish(),retrievalQueries:we(F()).nullish(),searchEntryPoint:K({renderedContent:F()}).nullish(),groundingChunks:we(K({web:K({uri:F(),title:F().nullish()}).nullish(),retrievedContext:K({uri:F().nullish(),title:F().nullish(),text:F().nullish(),fileSearchStore:F().nullish()}).nullish(),maps:K({uri:F().nullish(),title:F().nullish(),text:F().nullish(),placeId:F().nullish()}).nullish()})).nullish(),groundingSupports:we(K({segment:K({startIndex:ke().nullish(),endIndex:ke().nullish(),text:F().nullish()}).nullish(),segment_text:F().nullish(),groundingChunkIndices:we(ke()).nullish(),supportChunkIndices:we(ke()).nullish(),confidenceScores:we(ke()).nullish(),confidenceScore:we(ke()).nullish()})).nullish(),retrievalMetadata:qt([K({webDynamicRetrievalScore:ke()}),K({})]).nullish()}),Bk=()=>K({parts:we(qt([K({functionCall:K({name:F(),args:ks()}),thoughtSignature:F().nullish()}),K({inlineData:K({mimeType:F(),data:F()}),thoughtSignature:F().nullish()}),K({executableCode:K({language:F(),code:F()}).nullish(),codeExecutionResult:K({outcome:F(),output:F().nullish()}).nullish(),text:F().nullish(),thought:na().nullish(),thoughtSignature:F().nullish()})])).nullish()}),xh=()=>K({category:F().nullish(),probability:F().nullish(),probabilityScore:ke().nullish(),severity:F().nullish(),severityScore:ke().nullish(),blocked:na().nullish()}),Fk=K({cachedContentTokenCount:ke().nullish(),thoughtsTokenCount:ke().nullish(),promptTokenCount:ke().nullish(),candidatesTokenCount:ke().nullish(),totalTokenCount:ke().nullish(),trafficType:F().nullish()}),Uk=()=>K({urlMetadata:we(K({retrievedUrl:F(),urlRetrievalStatus:F()}))}),gU=Tt(()=>xt(K({candidates:we(K({content:Bk().nullish().or(K({}).strict()),finishReason:F().nullish(),safetyRatings:we(xh()).nullish(),groundingMetadata:jk().nullish(),urlContextMetadata:Uk().nullish()})),usageMetadata:Fk.nullish(),promptFeedback:K({blockReason:F().nullish(),safetyRatings:we(xh()).nullish()}).nullish()}))),vU=Tt(()=>xt(K({candidates:we(K({content:Bk().nullish(),finishReason:F().nullish(),safetyRatings:we(xh()).nullish(),groundingMetadata:jk().nullish(),urlContextMetadata:Uk().nullish()})).nullish(),usageMetadata:Fk.nullish(),promptFeedback:K({blockReason:F().nullish(),safetyRatings:we(xh()).nullish()}).nullish()}))),yU=dy({id:"google.code_execution",inputSchema:K({language:F().describe("The programming language of the code."),code:F().describe("The code to be executed.")}),outputSchema:K({outcome:F().describe('The outcome of the execution (e.g., "OUTCOME_OK").'),output:F().describe("The output from the code execution.")})}),bU=hl({id:"google.enterprise_web_search",inputSchema:Tt(()=>xt(K({})))}),xU=K({fileSearchStoreNames:we(F()).describe("The names of the file_search_stores to retrieve from. Example: `fileSearchStores/my-file-search-store-123`"),topK:ke().int().positive().describe("The number of file search retrieval chunks to retrieve.").optional(),metadataFilter:F().describe("Metadata filter to apply to the file search retrieval documents. See https://google.aip.dev/160 for the syntax of the filter expression.").optional()}).passthrough(),wU=Tt(()=>xt(xU)),AU=hl({id:"google.file_search",inputSchema:wU}),SU=hl({id:"google.google_maps",inputSchema:Tt(()=>xt(K({})))}),_U=hl({id:"google.google_search",inputSchema:Tt(()=>xt(K({mode:Wt(["MODE_DYNAMIC","MODE_UNSPECIFIED"]).default("MODE_UNSPECIFIED"),dynamicThreshold:ke().default(1)})))}),EU=hl({id:"google.url_context",inputSchema:Tt(()=>xt(K({})))}),TU=hl({id:"google.vertex_rag_store",inputSchema:K({ragCorpus:F(),topK:ke().optional()})}),CU={googleSearch:_U,enterpriseWebSearch:bU,googleMaps:SU,urlContext:EU,fileSearch:AU,codeExecution:yU,vertexRagStore:TU},kU=class{constructor(n,e,t){this.modelId=n,this.settings=e,this.config=t,this.specificationVersion="v3"}get maxImagesPerCall(){return this.settings.maxImagesPerCall!=null?this.settings.maxImagesPerCall:v1(this.modelId)?10:4}get provider(){return this.config.provider}async doGenerate(n){return v1(this.modelId)?this.doGenerateGemini(n):this.doGenerateImagen(n)}async doGenerateImagen(n){var e,t,i;const{prompt:s,n:r=1,size:l,aspectRatio:c="1:1",seed:d,providerOptions:h,headers:p,abortSignal:m,files:v,mask:b}=n,w=[];if(v!=null&&v.length>0)throw new Error("Google Generative AI does not support image editing with Imagen models. Use Google Vertex AI (@ai-sdk/google-vertex) for image editing capabilities.");if(b!=null)throw new Error("Google Generative AI does not support image editing with masks. Use Google Vertex AI (@ai-sdk/google-vertex) for image editing capabilities.");l!=null&&w.push({type:"unsupported",feature:"size",details:"This model does not support the `size` option. Use `aspectRatio` instead."}),d!=null&&w.push({type:"unsupported",feature:"seed",details:"This model does not support the `seed` option through this provider."});const x=await zc({provider:"google",providerOptions:h,schema:RU}),A=(i=(t=(e=this.config._internal)==null?void 0:e.currentDate)==null?void 0:t.call(e))!=null?i:new Date,S={sampleCount:r};c!=null&&(S.aspectRatio=c),x&&Object.assign(S,x);const T={instances:[{prompt:s}],parameters:S},{responseHeaders:E,value:M}=await as({url:`${this.config.baseURL}/models/${this.modelId}:predict`,headers:ss(await Kt(this.config.headers),p),body:T,failedResponseHandler:Dr,successfulResponseHandler:$i(MU),abortSignal:m,fetch:this.config.fetch});return{images:M.predictions.map(R=>R.bytesBase64Encoded),warnings:w,providerMetadata:{google:{images:M.predictions.map(()=>({}))}},response:{timestamp:A,modelId:this.modelId,headers:E}}}async doGenerateGemini(n){var e,t,i,s,r,l,c,d,h;const{prompt:p,n:m,size:v,aspectRatio:b,seed:w,providerOptions:x,headers:A,abortSignal:S,files:T,mask:E}=n,M=[];if(E!=null)throw new Error("Gemini image models do not support mask-based image editing.");if(m!=null&&m>1)throw new Error("Gemini image models do not support generating a set number of images per call. Use n=1 or omit the n parameter.");v!=null&&M.push({type:"unsupported",feature:"size",details:"This model does not support the `size` option. Use `aspectRatio` instead."});const R=[];if(p!=null&&R.push({type:"text",text:p}),T!=null&&T.length>0)for(const X of T)X.type==="url"?R.push({type:"file",data:new URL(X.url),mediaType:"image/*"}):R.push({type:"file",data:typeof X.data=="string"?X.data:new Uint8Array(X.data),mediaType:X.mediaType});const O=[{role:"user",content:R}],D=await new zk(this.modelId,{provider:this.config.provider,baseURL:this.config.baseURL,headers:(e=this.config.headers)!=null?e:{},fetch:this.config.fetch,generateId:(t=this.config.generateId)!=null?t:bh}).doGenerate({prompt:O,seed:w,providerOptions:{google:{responseModalities:["IMAGE"],imageConfig:b?{aspectRatio:b}:void 0,...(i=x?.google)!=null?i:{}}},headers:A,abortSignal:S}),$=(l=(r=(s=this.config._internal)==null?void 0:s.currentDate)==null?void 0:r.call(s))!=null?l:new Date,ee=[];for(const X of D.content)X.type==="file"&&X.mediaType.startsWith("image/")&&ee.push(Zg(X.data));return{images:ee,warnings:M,providerMetadata:{google:{images:ee.map(()=>({}))}},response:{timestamp:$,modelId:this.modelId,headers:(c=D.response)==null?void 0:c.headers},usage:D.usage?{inputTokens:D.usage.inputTokens.total,outputTokens:D.usage.outputTokens.total,totalTokens:((d=D.usage.inputTokens.total)!=null?d:0)+((h=D.usage.outputTokens.total)!=null?h:0)}:void 0}}};function v1(n){return n.startsWith("gemini-")}var MU=Tt(()=>xt(K({predictions:we(K({bytesBase64Encoded:F()})).default([])}))),RU=Tt(()=>xt(K({personGeneration:Wt(["dont_allow","allow_adult","allow_all"]).nullish(),aspectRatio:Wt(["1:1","3:4","4:3","9:16","16:9"]).nullish()}))),DU=class{constructor(n,e){this.modelId=n,this.config=e,this.specificationVersion="v3"}get provider(){return this.config.provider}get maxVideosPerCall(){return 4}async doGenerate(n){var e,t,i,s,r,l,c,d;const h=(i=(t=(e=this.config._internal)==null?void 0:e.currentDate)==null?void 0:t.call(e))!=null?i:new Date,p=[],m=await zc({provider:"google",providerOptions:n.providerOptions,schema:OU}),v=[{}],b=v[0];if(n.prompt!=null&&(b.prompt=n.prompt),n.image!=null)if(n.image.type==="url")p.push({type:"unsupported",feature:"URL-based image input",details:"Google Generative AI video models require base64-encoded images. URL will be ignored."});else{const X=typeof n.image.data=="string"?n.image.data:nl(n.image.data);b.image={inlineData:{mimeType:n.image.mediaType||"image/png",data:X}}}m?.referenceImages!=null&&(b.referenceImages=m.referenceImages.map(X=>X.bytesBase64Encoded?{inlineData:{mimeType:"image/png",data:X.bytesBase64Encoded}}:X.gcsUri?{gcsUri:X.gcsUri}:X));const w={sampleCount:n.n};if(n.aspectRatio&&(w.aspectRatio=n.aspectRatio),n.resolution){const X={"1280x720":"720p","1920x1080":"1080p","3840x2160":"4k"};w.resolution=X[n.resolution]||n.resolution}if(n.duration&&(w.durationSeconds=n.duration),n.seed&&(w.seed=n.seed),m!=null){const X=m;X.personGeneration!==void 0&&X.personGeneration!==null&&(w.personGeneration=X.personGeneration),X.negativePrompt!==void 0&&X.negativePrompt!==null&&(w.negativePrompt=X.negativePrompt);for(const[le,de]of Object.entries(X))["pollIntervalMs","pollTimeoutMs","personGeneration","negativePrompt","referenceImages"].includes(le)||(w[le]=de)}const{value:x}=await as({url:`${this.config.baseURL}/models/${this.modelId}:predictLongRunning`,headers:ss(await Kt(this.config.headers),n.headers),body:{instances:v,parameters:w},successfulResponseHandler:$i(y1),failedResponseHandler:Dr,abortSignal:n.abortSignal,fetch:this.config.fetch}),A=x.name;if(!A)throw new Ue({name:"GOOGLE_VIDEO_GENERATION_ERROR",message:"No operation name returned from API"});const S=(s=m?.pollIntervalMs)!=null?s:1e4,T=(r=m?.pollTimeoutMs)!=null?r:6e5,E=Date.now();let M=x,R;for(;!M.done;){if(Date.now()-E>T)throw new Ue({name:"GOOGLE_VIDEO_GENERATION_TIMEOUT",message:`Video generation timed out after ${T}ms`});if(await Sk(S),(l=n.abortSignal)!=null&&l.aborted)throw new Ue({name:"GOOGLE_VIDEO_GENERATION_ABORTED",message:"Video generation request was aborted"});const{value:X,responseHeaders:le}=await Yg({url:`${this.config.baseURL}/${A}`,headers:ss(await Kt(this.config.headers),n.headers),successfulResponseHandler:$i(y1),failedResponseHandler:Dr,abortSignal:n.abortSignal,fetch:this.config.fetch});M=X,R=le}if(M.error)throw new Ue({name:"GOOGLE_VIDEO_GENERATION_FAILED",message:`Video generation failed: ${M.error.message}`});const O=M.response;if(!((c=O?.generateVideoResponse)!=null&&c.generatedSamples)||O.generateVideoResponse.generatedSamples.length===0)throw new Ue({name:"GOOGLE_VIDEO_GENERATION_ERROR",message:`No videos in response. Response: ${JSON.stringify(M)}`});const L=[],D=[],$=await Kt(this.config.headers),ee=$?.["x-goog-api-key"];for(const X of O.generateVideoResponse.generatedSamples)if((d=X.video)!=null&&d.uri){const le=ee?`${X.video.uri}${X.video.uri.includes("?")?"&":"?"}key=${ee}`:X.video.uri;L.push({type:"url",url:le,mediaType:"video/mp4"}),D.push({uri:X.video.uri})}if(L.length===0)throw new Ue({name:"GOOGLE_VIDEO_GENERATION_ERROR",message:"No valid videos in response"});return{videos:L,warnings:p,response:{timestamp:h,modelId:this.modelId,headers:R},providerMetadata:{google:{videos:D}}}}},y1=K({name:F().nullish(),done:na().nullish(),error:K({code:ke().nullish(),message:F(),status:F().nullish()}).nullish(),response:K({generateVideoResponse:K({generatedSamples:we(K({video:K({uri:F().nullish()}).nullish()})).nullish()}).nullish()}).nullish()}),OU=Tt(()=>xt(K({pollIntervalMs:ke().positive().nullish(),pollTimeoutMs:ke().positive().nullish(),personGeneration:Wt(["dont_allow","allow_adult","allow_all"]).nullish(),negativePrompt:F().nullish(),referenceImages:we(K({bytesBase64Encoded:F().nullish(),gcsUri:F().nullish()})).nullish()}).passthrough()));function Vk(n={}){var e,t;const i=(e=Lk(n.baseURL))!=null?e:"https://generativelanguage.googleapis.com/v1beta",s=(t=n.name)!=null?t:"google.generative-ai",r=()=>dl({"x-goog-api-key":r5({apiKey:n.apiKey,environmentVariableName:"GOOGLE_GENERATIVE_AI_API_KEY",description:"Google Generative AI"}),...n.headers},`ai-sdk/google/${rU}`),l=m=>{var v;return new zk(m,{provider:s,baseURL:i,headers:r,generateId:(v=n.generateId)!=null?v:bh,supportedUrls:()=>({"*":[new RegExp(`^${i}/files/.*$`),new RegExp("^https://(?:www\\.)?youtube\\.com/watch\\?v=[\\w-]+(?:&[\\w=&.-]*)?$"),new RegExp("^https://youtu\\.be/[\\w-]+(?:\\?[\\w=&.-]*)?$")]}),fetch:n.fetch})},c=m=>new cU(m,{provider:s,baseURL:i,headers:r,fetch:n.fetch}),d=(m,v={})=>new kU(m,v,{provider:s,baseURL:i,headers:r,fetch:n.fetch}),h=m=>{var v;return new DU(m,{provider:s,baseURL:i,headers:r,fetch:n.fetch,generateId:(v=n.generateId)!=null?v:bh})},p=function(m){if(new.target)throw new Error("The Google Generative AI model function cannot be called with the new keyword.");return l(m)};return p.specificationVersion="v3",p.languageModel=l,p.chat=l,p.generativeAI=l,p.embedding=c,p.embeddingModel=c,p.textEmbedding=c,p.textEmbeddingModel=c,p.image=d,p.imageModel=d,p.video=h,p.videoModel=h,p.tools=CU,p}Vk();var Km,b1;function NU(){if(b1)return Km;b1=1;var n=Object.defineProperty,e=Object.getOwnPropertyDescriptor,t=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,s=(p,m)=>{for(var v in m)n(p,v,{get:m[v],enumerable:!0})},r=(p,m,v,b)=>{if(m&&typeof m=="object"||typeof m=="function")for(let w of t(m))!i.call(p,w)&&w!==v&&n(p,w,{get:()=>m[w],enumerable:!(b=e(m,w))||b.enumerable});return p},l=p=>r(n({},"__esModule",{value:!0}),p),c={};s(c,{SYMBOL_FOR_REQ_CONTEXT:()=>d,getContext:()=>h}),Km=l(c);const d=Symbol.for("@vercel/request-context");function h(){return globalThis[d]?.get?.()??{}}return Km}var Jm,x1;function PU(){if(x1)return Jm;x1=1;var n=Object.defineProperty,e=Object.getOwnPropertyDescriptor,t=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,s=(m,v)=>{for(var b in v)n(m,b,{get:v[b],enumerable:!0})},r=(m,v,b,w)=>{if(v&&typeof v=="object"||typeof v=="function")for(let x of t(v))!i.call(m,x)&&x!==b&&n(m,x,{get:()=>v[x],enumerable:!(w=e(v,x))||w.enumerable});return m},l=m=>r(n({},"__esModule",{value:!0}),m),c={};s(c,{getContext:()=>d.getContext,getVercelOidcToken:()=>h,getVercelOidcTokenSync:()=>p}),Jm=l(c);var d=NU();async function h(){return""}function p(){return""}return Jm}var $k=PU(),IU="vercel.ai.gateway.error",Qm=Symbol.for(IU),w1,A1,Zn=class Hk extends(A1=Error,w1=Qm,A1){constructor({message:e,statusCode:t=500,cause:i,generationId:s}){super(s?`${e} [${s}]`:e),this[w1]=!0,this.statusCode=t,this.cause=i,this.generationId=s}static isInstance(e){return Hk.hasMarker(e)}static hasMarker(e){return typeof e=="object"&&e!==null&&Qm in e&&e[Qm]===!0}},Gk="GatewayAuthenticationError",LU=`vercel.ai.gateway.error.${Gk}`,S1=Symbol.for(LU),_1,E1,hy=class qk extends(E1=Zn,_1=S1,E1){constructor({message:e="Authentication failed",statusCode:t=401,cause:i,generationId:s}={}){super({message:e,statusCode:t,cause:i,generationId:s}),this[_1]=!0,this.name=Gk,this.type="authentication_error"}static isInstance(e){return Zn.hasMarker(e)&&S1 in e}static createContextualError({apiKeyProvided:e,oidcTokenProvided:t,message:i="Authentication failed",statusCode:s=401,cause:r,generationId:l}){let c;return e?c=`AI Gateway authentication failed: Invalid API key.

Create a new API key: https://vercel.com/d?to=%2F%5Bteam%5D%2F%7E%2Fai%2Fapi-keys

Provide via 'apiKey' option or 'AI_GATEWAY_API_KEY' environment variable.`:t?c=`AI Gateway authentication failed: Invalid OIDC token.

Run 'npx vercel link' to link your project, then 'vc env pull' to fetch the token.

Alternatively, use an API key: https://vercel.com/d?to=%2F%5Bteam%5D%2F%7E%2Fai%2Fapi-keys`:c=`AI Gateway authentication failed: No authentication provided.

Option 1 - API key:
Create an API key: https://vercel.com/d?to=%2F%5Bteam%5D%2F%7E%2Fai%2Fapi-keys
Provide via 'apiKey' option or 'AI_GATEWAY_API_KEY' environment variable.

Option 2 - OIDC token:
Run 'npx vercel link' to link your project, then 'vc env pull' to fetch the token.`,new qk({message:c,statusCode:s,cause:r,generationId:l})}},Zk="GatewayInvalidRequestError",zU=`vercel.ai.gateway.error.${Zk}`,T1=Symbol.for(zU),C1,k1,jU=class extends(k1=Zn,C1=T1,k1){constructor({message:n="Invalid request",statusCode:e=400,cause:t,generationId:i}={}){super({message:n,statusCode:e,cause:t,generationId:i}),this[C1]=!0,this.name=Zk,this.type="invalid_request_error"}static isInstance(n){return Zn.hasMarker(n)&&T1 in n}},Yk="GatewayRateLimitError",BU=`vercel.ai.gateway.error.${Yk}`,M1=Symbol.for(BU),R1,D1,FU=class extends(D1=Zn,R1=M1,D1){constructor({message:n="Rate limit exceeded",statusCode:e=429,cause:t,generationId:i}={}){super({message:n,statusCode:e,cause:t,generationId:i}),this[R1]=!0,this.name=Yk,this.type="rate_limit_exceeded"}static isInstance(n){return Zn.hasMarker(n)&&M1 in n}},Xk="GatewayModelNotFoundError",UU=`vercel.ai.gateway.error.${Xk}`,O1=Symbol.for(UU),VU=Tt(()=>xt(K({modelId:F()}))),N1,P1,$U=class extends(P1=Zn,N1=O1,P1){constructor({message:n="Model not found",statusCode:e=404,modelId:t,cause:i,generationId:s}={}){super({message:n,statusCode:e,cause:i,generationId:s}),this[N1]=!0,this.name=Xk,this.type="model_not_found",this.modelId=t}static isInstance(n){return Zn.hasMarker(n)&&O1 in n}},Wk="GatewayInternalServerError",HU=`vercel.ai.gateway.error.${Wk}`,I1=Symbol.for(HU),L1,z1,j1=class extends(z1=Zn,L1=I1,z1){constructor({message:n="Internal server error",statusCode:e=500,cause:t,generationId:i}={}){super({message:n,statusCode:e,cause:t,generationId:i}),this[L1]=!0,this.name=Wk,this.type="internal_server_error"}static isInstance(n){return Zn.hasMarker(n)&&I1 in n}},Kk="GatewayResponseError",GU=`vercel.ai.gateway.error.${Kk}`,B1=Symbol.for(GU),F1,U1,qU=class extends(U1=Zn,F1=B1,U1){constructor({message:n="Invalid response from Gateway",statusCode:e=502,response:t,validationError:i,cause:s,generationId:r}={}){super({message:n,statusCode:e,cause:s,generationId:r}),this[F1]=!0,this.name=Kk,this.type="response_error",this.response=t,this.validationError=i}static isInstance(n){return Zn.hasMarker(n)&&B1 in n}};async function V1({response:n,statusCode:e,defaultMessage:t="Gateway request failed",cause:i,authMethod:s}){var r;const l=await Ti({value:n,schema:ZU});if(!l.success){const m=typeof n=="object"&&n!==null&&"generationId"in n?n.generationId:void 0;return new qU({message:`Invalid error response format: ${t}`,statusCode:e,response:n,validationError:l.error,cause:i,generationId:m})}const c=l.value,d=c.error.type,h=c.error.message,p=(r=c.generationId)!=null?r:void 0;switch(d){case"authentication_error":return hy.createContextualError({apiKeyProvided:s==="api-key",oidcTokenProvided:s==="oidc",statusCode:e,cause:i,generationId:p});case"invalid_request_error":return new jU({message:h,statusCode:e,cause:i,generationId:p});case"rate_limit_exceeded":return new FU({message:h,statusCode:e,cause:i,generationId:p});case"model_not_found":{const m=await Ti({value:c.error.param,schema:VU});return new $U({message:h,statusCode:e,modelId:m.success?m.value.modelId:void 0,cause:i,generationId:p})}case"internal_server_error":return new j1({message:h,statusCode:e,cause:i,generationId:p});default:return new j1({message:h,statusCode:e,cause:i,generationId:p})}}var ZU=Tt(()=>xt(K({error:K({message:F(),type:F().nullish(),param:ks().nullish(),code:qt([F(),ke()]).nullish()}),generationId:F().nullish()}))),Jk="GatewayTimeoutError",YU=`vercel.ai.gateway.error.${Jk}`,$1=Symbol.for(YU),H1,G1,q1=class Qk extends(G1=Zn,H1=$1,G1){constructor({message:e="Request timed out",statusCode:t=408,cause:i,generationId:s}={}){super({message:e,statusCode:t,cause:i,generationId:s}),this[H1]=!0,this.name=Jk,this.type="timeout_error"}static isInstance(e){return Zn.hasMarker(e)&&$1 in e}static createTimeoutError({originalMessage:e,statusCode:t=408,cause:i,generationId:s}){const r=`Gateway request timed out: ${e}

    This is a client-side timeout. To resolve this, increase your timeout configuration: https://vercel.com/docs/ai-gateway/capabilities/video-generation#extending-timeouts-for-node.js`;return new Qk({message:r,statusCode:t,cause:i,generationId:s})}};function Z1(n){if(!(n instanceof Error))return!1;const e=n.code;return typeof e=="string"?["UND_ERR_HEADERS_TIMEOUT","UND_ERR_BODY_TIMEOUT","UND_ERR_CONNECT_TIMEOUT"].includes(e):!1}async function oa(n,e){var t;return Zn.isInstance(n)?n:Z1(n)?q1.createTimeoutError({originalMessage:n instanceof Error?n.message:"Unknown error",cause:n}):Bn.isInstance(n)?n.cause&&Z1(n.cause)?q1.createTimeoutError({originalMessage:n.message,cause:n}):await V1({response:XU(n),statusCode:(t=n.statusCode)!=null?t:500,defaultMessage:"Gateway request failed",cause:n,authMethod:e}):await V1({response:{},statusCode:500,defaultMessage:n instanceof Error?`Gateway request failed: ${n.message}`:"Unknown Gateway error",cause:n,authMethod:e})}function XU(n){if(n.data!==void 0)return n.data;if(n.responseBody!=null)try{return JSON.parse(n.responseBody)}catch{return n.responseBody}return{}}var eM="ai-gateway-auth-method";async function Or(n){const e=await Ti({value:n[eM],schema:WU});return e.success?e.value:void 0}var WU=Tt(()=>xt(qt([Fe("api-key"),Fe("oidc")]))),Y1=class{constructor(n){this.config=n}async getAvailableModels(){try{const{value:n}=await Yg({url:`${this.config.baseURL}/config`,headers:await Kt(this.config.headers()),successfulResponseHandler:$i(KU),failedResponseHandler:$a({errorSchema:ta(),errorToMessage:e=>e}),fetch:this.config.fetch});return n}catch(n){throw await oa(n)}}async getCredits(){try{const n=new URL(this.config.baseURL),{value:e}=await Yg({url:`${n.origin}/v1/credits`,headers:await Kt(this.config.headers()),successfulResponseHandler:$i(JU),failedResponseHandler:$a({errorSchema:ta(),errorToMessage:t=>t}),fetch:this.config.fetch});return e}catch(n){throw await oa(n)}}},KU=Tt(()=>xt(K({models:we(K({id:F(),name:F(),description:F().nullish(),pricing:K({input:F(),output:F(),input_cache_read:F().nullish(),input_cache_write:F().nullish()}).transform(({input:n,output:e,input_cache_read:t,input_cache_write:i})=>({input:n,output:e,...t?{cachedInputTokens:t}:{},...i?{cacheCreationInputTokens:i}:{}})).nullish(),specification:K({specificationVersion:Fe("v3"),provider:F(),modelId:F()}),modelType:Wt(["embedding","image","language","video"]).nullish()}))}))),JU=Tt(()=>xt(K({balance:F(),total_used:F()}).transform(({balance:n,total_used:e})=>({balance:n,totalUsed:e})))),QU=class{constructor(n,e){this.modelId=n,this.config=e,this.specificationVersion="v3",this.supportedUrls={"*/*":[/.*/]}}get provider(){return this.config.provider}async getArgs(n){const{abortSignal:e,...t}=n;return{args:this.maybeEncodeFileParts(t),warnings:[]}}async doGenerate(n){const{args:e,warnings:t}=await this.getArgs(n),{abortSignal:i}=n,s=await Kt(this.config.headers());try{const{responseHeaders:r,value:l,rawValue:c}=await as({url:this.getUrl(),headers:ss(s,n.headers,this.getModelConfigHeaders(this.modelId,!1),await Kt(this.config.o11yHeaders)),body:e,successfulResponseHandler:$i(ta()),failedResponseHandler:$a({errorSchema:ta(),errorToMessage:d=>d}),...i&&{abortSignal:i},fetch:this.config.fetch});return{...l,request:{body:e},response:{headers:r,body:c},warnings:t}}catch(r){throw await oa(r,await Or(s))}}async doStream(n){const{args:e,warnings:t}=await this.getArgs(n),{abortSignal:i}=n,s=await Kt(this.config.headers());try{const{value:r,responseHeaders:l}=await as({url:this.getUrl(),headers:ss(s,n.headers,this.getModelConfigHeaders(this.modelId,!0),await Kt(this.config.o11yHeaders)),body:e,successfulResponseHandler:Ik(ta()),failedResponseHandler:$a({errorSchema:ta(),errorToMessage:c=>c}),...i&&{abortSignal:i},fetch:this.config.fetch});return{stream:r.pipeThrough(new TransformStream({start(c){t.length>0&&c.enqueue({type:"stream-start",warnings:t})},transform(c,d){if(c.success){const h=c.value;if(h.type==="raw"&&!n.includeRawChunks)return;h.type==="response-metadata"&&h.timestamp&&typeof h.timestamp=="string"&&(h.timestamp=new Date(h.timestamp)),d.enqueue(h)}else d.error(c.error)}})),request:{body:e},response:{headers:l}}}catch(r){throw await oa(r,await Or(s))}}isFilePart(n){return n&&typeof n=="object"&&"type"in n&&n.type==="file"}maybeEncodeFileParts(n){for(const e of n.prompt)for(const t of e.content)if(this.isFilePart(t)){const i=t;if(i.data instanceof Uint8Array){const s=Uint8Array.from(i.data),r=Buffer.from(s).toString("base64");i.data=new URL(`data:${i.mediaType||"application/octet-stream"};base64,${r}`)}}return n}getUrl(){return`${this.config.baseURL}/language-model`}getModelConfigHeaders(n,e){return{"ai-language-model-specification-version":"3","ai-language-model-id":n,"ai-language-model-streaming":String(e)}}},eV=class{constructor(n,e){this.modelId=n,this.config=e,this.specificationVersion="v3",this.maxEmbeddingsPerCall=2048,this.supportsParallelCalls=!0}get provider(){return this.config.provider}async doEmbed({values:n,headers:e,abortSignal:t,providerOptions:i}){var s;const r=await Kt(this.config.headers());try{const{responseHeaders:l,value:c,rawValue:d}=await as({url:this.getUrl(),headers:ss(r,e??{},this.getModelConfigHeaders(),await Kt(this.config.o11yHeaders)),body:{values:n,...i?{providerOptions:i}:{}},successfulResponseHandler:$i(tV),failedResponseHandler:$a({errorSchema:ta(),errorToMessage:h=>h}),...t&&{abortSignal:t},fetch:this.config.fetch});return{embeddings:c.embeddings,usage:(s=c.usage)!=null?s:void 0,providerMetadata:c.providerMetadata,response:{headers:l,body:d},warnings:[]}}catch(l){throw await oa(l,await Or(r))}}getUrl(){return`${this.config.baseURL}/embedding-model`}getModelConfigHeaders(){return{"ai-embedding-model-specification-version":"3","ai-model-id":this.modelId}}},tV=Tt(()=>xt(K({embeddings:we(we(ke())),usage:K({tokens:ke()}).nullish(),providerMetadata:Ms(F(),Ms(F(),ks())).optional()}))),nV=class{constructor(n,e){this.modelId=n,this.config=e,this.specificationVersion="v3",this.maxImagesPerCall=Number.MAX_SAFE_INTEGER}get provider(){return this.config.provider}async doGenerate({prompt:n,n:e,size:t,aspectRatio:i,seed:s,files:r,mask:l,providerOptions:c,headers:d,abortSignal:h}){var p,m,v,b;const w=await Kt(this.config.headers());try{const{responseHeaders:x,value:A,rawValue:S}=await as({url:this.getUrl(),headers:ss(w,d??{},this.getModelConfigHeaders(),await Kt(this.config.o11yHeaders)),body:{prompt:n,n:e,...t&&{size:t},...i&&{aspectRatio:i},...s&&{seed:s},...c&&{providerOptions:c},...r&&{files:r.map(T=>X1(T))},...l&&{mask:X1(l)}},successfulResponseHandler:$i(rV),failedResponseHandler:$a({errorSchema:ta(),errorToMessage:T=>T}),...h&&{abortSignal:h},fetch:this.config.fetch});return{images:A.images,warnings:(p=A.warnings)!=null?p:[],providerMetadata:A.providerMetadata,response:{timestamp:new Date,modelId:this.modelId,headers:x},...A.usage!=null&&{usage:{inputTokens:(m=A.usage.inputTokens)!=null?m:void 0,outputTokens:(v=A.usage.outputTokens)!=null?v:void 0,totalTokens:(b=A.usage.totalTokens)!=null?b:void 0}}}}catch(x){throw await oa(x,await Or(w))}}getUrl(){return`${this.config.baseURL}/image-model`}getModelConfigHeaders(){return{"ai-image-model-specification-version":"3","ai-model-id":this.modelId}}};function X1(n){return n.type==="file"&&n.data instanceof Uint8Array?{...n,data:nl(n.data)}:n}var iV=K({images:we(ks()).optional()}).catchall(ks()),sV=oy("type",[K({type:Fe("unsupported"),feature:F(),details:F().optional()}),K({type:Fe("compatibility"),feature:F(),details:F().optional()}),K({type:Fe("other"),message:F()})]),aV=K({inputTokens:ke().nullish(),outputTokens:ke().nullish(),totalTokens:ke().nullish()}),rV=K({images:we(F()),warnings:we(sV).optional(),providerMetadata:Ms(F(),iV).optional(),usage:aV.optional()}),oV=class{constructor(n,e){this.modelId=n,this.config=e,this.specificationVersion="v3",this.maxVideosPerCall=Number.MAX_SAFE_INTEGER}get provider(){return this.config.provider}async doGenerate({prompt:n,n:e,aspectRatio:t,resolution:i,duration:s,fps:r,seed:l,image:c,providerOptions:d,headers:h,abortSignal:p}){var m;const v=await Kt(this.config.headers());try{const{responseHeaders:b,value:w,rawValue:x}=await as({url:this.getUrl(),headers:ss(v,h??{},this.getModelConfigHeaders(),await Kt(this.config.o11yHeaders)),body:{prompt:n,n:e,...t&&{aspectRatio:t},...i&&{resolution:i},...s&&{duration:s},...r&&{fps:r},...l&&{seed:l},...d&&{providerOptions:d},...c&&{image:lV(c)}},successfulResponseHandler:$i(hV),failedResponseHandler:$a({errorSchema:ta(),errorToMessage:A=>A}),...p&&{abortSignal:p},fetch:this.config.fetch});return{videos:w.videos,warnings:(m=w.warnings)!=null?m:[],providerMetadata:w.providerMetadata,response:{timestamp:new Date,modelId:this.modelId,headers:b}}}catch(b){throw await oa(b,await Or(v))}}getUrl(){return`${this.config.baseURL}/video-model`}getModelConfigHeaders(){return{"ai-video-model-specification-version":"3","ai-model-id":this.modelId}}};function lV(n){return n.type==="file"&&n.data instanceof Uint8Array?{...n,data:nl(n.data)}:n}var cV=K({videos:we(ks()).optional()}).catchall(ks()),uV=qt([K({type:Fe("url"),url:F(),mediaType:F()}),K({type:Fe("base64"),data:F(),mediaType:F()})]),dV=oy("type",[K({type:Fe("unsupported"),feature:F(),details:F().optional()}),K({type:Fe("compatibility"),feature:F(),details:F().optional()}),K({type:Fe("other"),message:F()})]),hV=K({videos:we(uV),warnings:we(dV).optional(),providerMetadata:Ms(F(),cV).optional()}),fV=Tt(()=>xt(K({objective:F().describe("Natural-language description of the web research goal, including source or freshness guidance and broader context from the task. Maximum 5000 characters."),search_queries:we(F()).optional().describe("Optional search queries to supplement the objective. Maximum 200 characters per query."),mode:Wt(["one-shot","agentic"]).optional().describe('Mode preset: "one-shot" for comprehensive results with longer excerpts (default), "agentic" for concise, token-efficient results for multi-step workflows.'),max_results:ke().optional().describe("Maximum number of results to return (1-20). Defaults to 10 if not specified."),source_policy:K({include_domains:we(F()).optional().describe("List of domains to include in search results."),exclude_domains:we(F()).optional().describe("List of domains to exclude from search results."),after_date:F().optional().describe("Only include results published after this date (ISO 8601 format).")}).optional().describe("Source policy for controlling which domains to include/exclude and freshness."),excerpts:K({max_chars_per_result:ke().optional().describe("Maximum characters per result."),max_chars_total:ke().optional().describe("Maximum total characters across all results.")}).optional().describe("Excerpt configuration for controlling result length."),fetch_policy:K({max_age_seconds:ke().optional().describe("Maximum age in seconds for cached content. Set to 0 to always fetch fresh content.")}).optional().describe("Fetch policy for controlling content freshness.")}))),pV=Tt(()=>xt(qt([K({searchId:F(),results:we(K({url:F(),title:F(),excerpt:F(),publishDate:F().nullable().optional(),relevanceScore:ke().optional()}))}),K({error:Wt(["api_error","rate_limit","timeout","invalid_input","configuration_error","unknown"]),statusCode:ke().optional(),message:F()})]))),mV=dy({id:"gateway.parallel_search",inputSchema:fV,outputSchema:pV}),gV=(n={})=>mV(n),vV=Tt(()=>xt(K({query:qt([F(),we(F())]).describe("Search query (string) or multiple queries (array of up to 5 strings). Multi-query searches return combined results from all queries."),max_results:ke().optional().describe("Maximum number of search results to return (1-20, default: 10)"),max_tokens_per_page:ke().optional().describe("Maximum number of tokens to extract per search result page (256-2048, default: 2048)"),max_tokens:ke().optional().describe("Maximum total tokens across all search results (default: 25000, max: 1000000)"),country:F().optional().describe("Two-letter ISO 3166-1 alpha-2 country code for regional search results (e.g., 'US', 'GB', 'FR')"),search_domain_filter:we(F()).optional().describe("List of domains to include or exclude from search results (max 20). To include: ['nature.com', 'science.org']. To exclude: ['-example.com', '-spam.net']"),search_language_filter:we(F()).optional().describe("List of ISO 639-1 language codes to filter results (max 10, lowercase). Examples: ['en', 'fr', 'de']"),search_after_date:F().optional().describe("Include only results published after this date. Format: 'MM/DD/YYYY' (e.g., '3/1/2025'). Cannot be used with search_recency_filter."),search_before_date:F().optional().describe("Include only results published before this date. Format: 'MM/DD/YYYY' (e.g., '3/15/2025'). Cannot be used with search_recency_filter."),last_updated_after_filter:F().optional().describe("Include only results last updated after this date. Format: 'MM/DD/YYYY' (e.g., '3/1/2025'). Cannot be used with search_recency_filter."),last_updated_before_filter:F().optional().describe("Include only results last updated before this date. Format: 'MM/DD/YYYY' (e.g., '3/15/2025'). Cannot be used with search_recency_filter."),search_recency_filter:Wt(["day","week","month","year"]).optional().describe("Filter results by relative time period. Cannot be used with search_after_date or search_before_date.")}))),yV=Tt(()=>xt(qt([K({results:we(K({title:F(),url:F(),snippet:F(),date:F().optional(),lastUpdated:F().optional()})),id:F()}),K({error:Wt(["api_error","rate_limit","timeout","invalid_input","unknown"]),statusCode:ke().optional(),message:F()})]))),bV=dy({id:"gateway.perplexity_search",inputSchema:vV,outputSchema:yV}),xV=(n={})=>bV(n),wV={parallelSearch:gV,perplexitySearch:xV};async function AV(){var n;return(n=$k.getContext().headers)==null?void 0:n["x-vercel-id"]}var SV="3.0.46",_V="0.0.1";function EV(n={}){var e,t;let i=null,s=null;const r=(e=n.metadataCacheRefreshMillis)!=null?e:1e3*60*5;let l=0;const c=(t=Lk(n.baseURL))!=null?t:"https://ai-gateway.vercel.sh/v3/ai",d=async()=>{try{const x=await CV(n);return dl({Authorization:`Bearer ${x.token}`,"ai-gateway-protocol-version":_V,[eM]:x.authMethod,...n.headers},`ai-sdk/gateway/${SV}`)}catch(x){throw hy.createContextualError({apiKeyProvided:!1,oidcTokenProvided:!1,statusCode:401,cause:x})}},h=()=>{const x=Kd({settingValue:void 0,environmentVariableName:"VERCEL_DEPLOYMENT_ID"}),A=Kd({settingValue:void 0,environmentVariableName:"VERCEL_ENV"}),S=Kd({settingValue:void 0,environmentVariableName:"VERCEL_REGION"});return async()=>{const T=await AV();return{...x&&{"ai-o11y-deployment-id":x},...A&&{"ai-o11y-environment":A},...S&&{"ai-o11y-region":S},...T&&{"ai-o11y-request-id":T}}}},p=x=>new QU(x,{provider:"gateway",baseURL:c,headers:d,fetch:n.fetch,o11yHeaders:h()}),m=async()=>{var x,A,S;const T=(S=(A=(x=n._internal)==null?void 0:x.currentDate)==null?void 0:A.call(x).getTime())!=null?S:Date.now();return(!i||T-l>r)&&(l=T,i=new Y1({baseURL:c,headers:d,fetch:n.fetch}).getAvailableModels().then(E=>(s=E,E)).catch(async E=>{throw await oa(E,await Or(await d()))})),s?Promise.resolve(s):i},v=async()=>new Y1({baseURL:c,headers:d,fetch:n.fetch}).getCredits().catch(async x=>{throw await oa(x,await Or(await d()))}),b=function(x){if(new.target)throw new Error("The Gateway Provider model function cannot be called with the new keyword.");return p(x)};b.specificationVersion="v3",b.getAvailableModels=m,b.getCredits=v,b.imageModel=x=>new nV(x,{provider:"gateway",baseURL:c,headers:d,fetch:n.fetch,o11yHeaders:h()}),b.languageModel=p;const w=x=>new eV(x,{provider:"gateway",baseURL:c,headers:d,fetch:n.fetch,o11yHeaders:h()});return b.embeddingModel=w,b.textEmbeddingModel=w,b.videoModel=x=>new oV(x,{provider:"gateway",baseURL:c,headers:d,fetch:n.fetch,o11yHeaders:h()}),b.chat=b.languageModel,b.embedding=b.embeddingModel,b.image=b.imageModel,b.video=b.videoModel,b.tools=wV,b}var TV=EV();async function CV(n){const e=Kd({settingValue:n.apiKey,environmentVariableName:"AI_GATEWAY_API_KEY"});return e?{token:e,authMethod:"api-key"}:{token:await $k.getVercelOidcToken(),authMethod:"oidc"}}var kV=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{},Sr="1.9.0",W1=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function MV(n){var e=new Set([n]),t=new Set,i=n.match(W1);if(!i)return function(){return!1};var s={major:+i[1],minor:+i[2],patch:+i[3],prerelease:i[4]};if(s.prerelease!=null)return function(d){return d===n};function r(c){return t.add(c),!1}function l(c){return e.add(c),!0}return function(d){if(e.has(d))return!0;if(t.has(d))return!1;var h=d.match(W1);if(!h)return r(d);var p={major:+h[1],minor:+h[2],patch:+h[3],prerelease:h[4]};return p.prerelease!=null||s.major!==p.major?r(d):s.major===0?s.minor===p.minor&&s.patch<=p.patch?l(d):r(d):s.minor<=p.minor?l(d):r(d)}}var RV=MV(Sr),DV=Sr.split(".")[0],jc=Symbol.for("opentelemetry.js.api."+DV),Bc=kV;function fy(n,e,t,i){var s;i===void 0&&(i=!1);var r=Bc[jc]=(s=Bc[jc])!==null&&s!==void 0?s:{version:Sr};if(!i&&r[n]){var l=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+n);return t.error(l.stack||l.message),!1}if(r.version!==Sr){var l=new Error("@opentelemetry/api: Registration of version v"+r.version+" for "+n+" does not match previously registered API v"+Sr);return t.error(l.stack||l.message),!1}return r[n]=e,t.debug("@opentelemetry/api: Registered a global for "+n+" v"+Sr+"."),!0}function Fc(n){var e,t,i=(e=Bc[jc])===null||e===void 0?void 0:e.version;if(!(!i||!RV(i)))return(t=Bc[jc])===null||t===void 0?void 0:t[n]}function py(n,e){e.debug("@opentelemetry/api: Unregistering a global for "+n+" v"+Sr+".");var t=Bc[jc];t&&delete t[n]}var OV=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var i=t.call(n),s,r=[],l;try{for(;(e===void 0||e-- >0)&&!(s=i.next()).done;)r.push(s.value)}catch(c){l={error:c}}finally{try{s&&!s.done&&(t=i.return)&&t.call(i)}finally{if(l)throw l.error}}return r},NV=function(n,e,t){if(t||arguments.length===2)for(var i=0,s=e.length,r;i<s;i++)(r||!(i in e))&&(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return n.concat(r||Array.prototype.slice.call(e))},PV=(function(){function n(e){this._namespace=e.namespace||"DiagComponentLogger"}return n.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return rc("debug",this._namespace,e)},n.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return rc("error",this._namespace,e)},n.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return rc("info",this._namespace,e)},n.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return rc("warn",this._namespace,e)},n.prototype.verbose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return rc("verbose",this._namespace,e)},n})();function rc(n,e,t){var i=Fc("diag");if(i)return t.unshift(e),i[n].apply(i,NV([],OV(t),!1))}var xi;(function(n){n[n.NONE=0]="NONE",n[n.ERROR=30]="ERROR",n[n.WARN=50]="WARN",n[n.INFO=60]="INFO",n[n.DEBUG=70]="DEBUG",n[n.VERBOSE=80]="VERBOSE",n[n.ALL=9999]="ALL"})(xi||(xi={}));function IV(n,e){n<xi.NONE?n=xi.NONE:n>xi.ALL&&(n=xi.ALL),e=e||{};function t(i,s){var r=e[i];return typeof r=="function"&&n>=s?r.bind(e):function(){}}return{error:t("error",xi.ERROR),warn:t("warn",xi.WARN),info:t("info",xi.INFO),debug:t("debug",xi.DEBUG),verbose:t("verbose",xi.VERBOSE)}}var LV=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var i=t.call(n),s,r=[],l;try{for(;(e===void 0||e-- >0)&&!(s=i.next()).done;)r.push(s.value)}catch(c){l={error:c}}finally{try{s&&!s.done&&(t=i.return)&&t.call(i)}finally{if(l)throw l.error}}return r},zV=function(n,e,t){if(t||arguments.length===2)for(var i=0,s=e.length,r;i<s;i++)(r||!(i in e))&&(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return n.concat(r||Array.prototype.slice.call(e))},jV="diag",wh=(function(){function n(){function e(s){return function(){for(var r=[],l=0;l<arguments.length;l++)r[l]=arguments[l];var c=Fc("diag");if(c)return c[s].apply(c,zV([],LV(r),!1))}}var t=this,i=function(s,r){var l,c,d;if(r===void 0&&(r={logLevel:xi.INFO}),s===t){var h=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return t.error((l=h.stack)!==null&&l!==void 0?l:h.message),!1}typeof r=="number"&&(r={logLevel:r});var p=Fc("diag"),m=IV((c=r.logLevel)!==null&&c!==void 0?c:xi.INFO,s);if(p&&!r.suppressOverrideMessage){var v=(d=new Error().stack)!==null&&d!==void 0?d:"<failed to generate stacktrace>";p.warn("Current logger will be overwritten from "+v),m.warn("Current logger will overwrite one already registered from "+v)}return fy("diag",m,t,!0)};t.setLogger=i,t.disable=function(){py(jV,t)},t.createComponentLogger=function(s){return new PV(s)},t.verbose=e("verbose"),t.debug=e("debug"),t.info=e("info"),t.warn=e("warn"),t.error=e("error")}return n.instance=function(){return this._instance||(this._instance=new n),this._instance},n})();function BV(n){return Symbol.for(n)}var FV=(function(){function n(e){var t=this;t._currentContext=e?new Map(e):new Map,t.getValue=function(i){return t._currentContext.get(i)},t.setValue=function(i,s){var r=new n(t._currentContext);return r._currentContext.set(i,s),r},t.deleteValue=function(i){var s=new n(t._currentContext);return s._currentContext.delete(i),s}}return n})(),UV=new FV,VV=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var i=t.call(n),s,r=[],l;try{for(;(e===void 0||e-- >0)&&!(s=i.next()).done;)r.push(s.value)}catch(c){l={error:c}}finally{try{s&&!s.done&&(t=i.return)&&t.call(i)}finally{if(l)throw l.error}}return r},$V=function(n,e,t){if(t||arguments.length===2)for(var i=0,s=e.length,r;i<s;i++)(r||!(i in e))&&(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return n.concat(r||Array.prototype.slice.call(e))},HV=(function(){function n(){}return n.prototype.active=function(){return UV},n.prototype.with=function(e,t,i){for(var s=[],r=3;r<arguments.length;r++)s[r-3]=arguments[r];return t.call.apply(t,$V([i],VV(s),!1))},n.prototype.bind=function(e,t){return t},n.prototype.enable=function(){return this},n.prototype.disable=function(){return this},n})(),GV=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var i=t.call(n),s,r=[],l;try{for(;(e===void 0||e-- >0)&&!(s=i.next()).done;)r.push(s.value)}catch(c){l={error:c}}finally{try{s&&!s.done&&(t=i.return)&&t.call(i)}finally{if(l)throw l.error}}return r},qV=function(n,e,t){if(t||arguments.length===2)for(var i=0,s=e.length,r;i<s;i++)(r||!(i in e))&&(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return n.concat(r||Array.prototype.slice.call(e))},eg="context",ZV=new HV,my=(function(){function n(){}return n.getInstance=function(){return this._instance||(this._instance=new n),this._instance},n.prototype.setGlobalContextManager=function(e){return fy(eg,e,wh.instance())},n.prototype.active=function(){return this._getContextManager().active()},n.prototype.with=function(e,t,i){for(var s,r=[],l=3;l<arguments.length;l++)r[l-3]=arguments[l];return(s=this._getContextManager()).with.apply(s,qV([e,t,i],GV(r),!1))},n.prototype.bind=function(e,t){return this._getContextManager().bind(e,t)},n.prototype._getContextManager=function(){return Fc(eg)||ZV},n.prototype.disable=function(){this._getContextManager().disable(),py(eg,wh.instance())},n})(),Kg;(function(n){n[n.NONE=0]="NONE",n[n.SAMPLED=1]="SAMPLED"})(Kg||(Kg={}));var tM="0000000000000000",nM="00000000000000000000000000000000",YV={traceId:nM,spanId:tM,traceFlags:Kg.NONE},Ec=(function(){function n(e){e===void 0&&(e=YV),this._spanContext=e}return n.prototype.spanContext=function(){return this._spanContext},n.prototype.setAttribute=function(e,t){return this},n.prototype.setAttributes=function(e){return this},n.prototype.addEvent=function(e,t){return this},n.prototype.addLink=function(e){return this},n.prototype.addLinks=function(e){return this},n.prototype.setStatus=function(e){return this},n.prototype.updateName=function(e){return this},n.prototype.end=function(e){},n.prototype.isRecording=function(){return!1},n.prototype.recordException=function(e,t){},n})(),gy=BV("OpenTelemetry Context Key SPAN");function vy(n){return n.getValue(gy)||void 0}function XV(){return vy(my.getInstance().active())}function yy(n,e){return n.setValue(gy,e)}function WV(n){return n.deleteValue(gy)}function KV(n,e){return yy(n,new Ec(e))}function iM(n){var e;return(e=vy(n))===null||e===void 0?void 0:e.spanContext()}var JV=/^([0-9a-f]{32})$/i,QV=/^[0-9a-f]{16}$/i;function e6(n){return JV.test(n)&&n!==nM}function t6(n){return QV.test(n)&&n!==tM}function sM(n){return e6(n.traceId)&&t6(n.spanId)}function n6(n){return new Ec(n)}var tg=my.getInstance(),aM=(function(){function n(){}return n.prototype.startSpan=function(e,t,i){i===void 0&&(i=tg.active());var s=!!t?.root;if(s)return new Ec;var r=i&&iM(i);return i6(r)&&sM(r)?new Ec(r):new Ec},n.prototype.startActiveSpan=function(e,t,i,s){var r,l,c;if(!(arguments.length<2)){arguments.length===2?c=t:arguments.length===3?(r=t,c=i):(r=t,l=i,c=s);var d=l??tg.active(),h=this.startSpan(e,r,d),p=yy(d,h);return tg.with(p,c,void 0,h)}},n})();function i6(n){return typeof n=="object"&&typeof n.spanId=="string"&&typeof n.traceId=="string"&&typeof n.traceFlags=="number"}var s6=new aM,a6=(function(){function n(e,t,i,s){this._provider=e,this.name=t,this.version=i,this.options=s}return n.prototype.startSpan=function(e,t,i){return this._getTracer().startSpan(e,t,i)},n.prototype.startActiveSpan=function(e,t,i,s){var r=this._getTracer();return Reflect.apply(r.startActiveSpan,r,arguments)},n.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):s6},n})(),r6=(function(){function n(){}return n.prototype.getTracer=function(e,t,i){return new aM},n})(),o6=new r6,K1=(function(){function n(){}return n.prototype.getTracer=function(e,t,i){var s;return(s=this.getDelegateTracer(e,t,i))!==null&&s!==void 0?s:new a6(this,e,t,i)},n.prototype.getDelegate=function(){var e;return(e=this._delegate)!==null&&e!==void 0?e:o6},n.prototype.setDelegate=function(e){this._delegate=e},n.prototype.getDelegateTracer=function(e,t,i){var s;return(s=this._delegate)===null||s===void 0?void 0:s.getTracer(e,t,i)},n})(),Ah;(function(n){n[n.UNSET=0]="UNSET",n[n.OK=1]="OK",n[n.ERROR=2]="ERROR"})(Ah||(Ah={}));var J1=my.getInstance(),ng="trace",l6=(function(){function n(){this._proxyTracerProvider=new K1,this.wrapSpanContext=n6,this.isSpanContextValid=sM,this.deleteSpan=WV,this.getSpan=vy,this.getActiveSpan=XV,this.getSpanContext=iM,this.setSpan=yy,this.setSpanContext=KV}return n.getInstance=function(){return this._instance||(this._instance=new n),this._instance},n.prototype.setGlobalTracerProvider=function(e){var t=fy(ng,this._proxyTracerProvider,wh.instance());return t&&this._proxyTracerProvider.setDelegate(e),t},n.prototype.getTracerProvider=function(){return Fc(ng)||this._proxyTracerProvider},n.prototype.getTracer=function(e,t){return this.getTracerProvider().getTracer(e,t)},n.prototype.disable=function(){py(ng,wh.instance()),this._proxyTracerProvider=new K1},n})(),c6=l6.getInstance(),u6=Object.defineProperty,d6=(n,e)=>{for(var t in e)u6(n,t,{get:e[t],enumerable:!0})},rM="AI_InvalidArgumentError",oM=`vercel.ai.error.${rM}`,h6=Symbol.for(oM),lM,Dt=class extends Ue{constructor({parameter:n,value:e,message:t}){super({name:rM,message:`Invalid argument for parameter ${n}: ${t}`}),this[lM]=!0,this.parameter=n,this.value=e}static isInstance(n){return Ue.hasMarker(n,oM)}};lM=h6;var cM="AI_MissingToolResultsError",uM=`vercel.ai.error.${cM}`,f6=Symbol.for(uM),dM,Q1=class extends Ue{constructor({toolCallIds:n}){super({name:cM,message:`Tool result${n.length>1?"s are":" is"} missing for tool call${n.length>1?"s":""} ${n.join(", ")}.`}),this[dM]=!0,this.toolCallIds=n}static isInstance(n){return Ue.hasMarker(n,uM)}};dM=f6;var hM="AI_NoObjectGeneratedError",fM=`vercel.ai.error.${hM}`,p6=Symbol.for(fM),pM,_i=class extends Ue{constructor({message:n="No object generated.",cause:e,text:t,response:i,usage:s,finishReason:r}){super({name:hM,message:n,cause:e}),this[pM]=!0,this.text=t,this.response=i,this.usage=s,this.finishReason=r}static isInstance(n){return Ue.hasMarker(n,fM)}};pM=p6;var m6=class extends Ue{constructor(n){super({name:"AI_UnsupportedModelVersionError",message:`Unsupported model version ${n.version} for provider "${n.provider}" and model "${n.modelId}". AI SDK 5 only supports models that implement specification version "v2".`}),this.version=n.version,this.provider=n.provider,this.modelId=n.modelId}},mM="AI_InvalidMessageRoleError",gM=`vercel.ai.error.${mM}`,g6=Symbol.for(gM),vM,v6=class extends Ue{constructor({role:n,message:e=`Invalid message role: '${n}'. Must be one of: "system", "user", "assistant", "tool".`}){super({name:mM,message:e}),this[vM]=!0,this.role=n}static isInstance(n){return Ue.hasMarker(n,gM)}};vM=g6;var yM="AI_RetryError",bM=`vercel.ai.error.${yM}`,y6=Symbol.for(bM),xM,e_=class extends Ue{constructor({message:n,reason:e,errors:t}){super({name:yM,message:n}),this[xM]=!0,this.reason=e,this.errors=t,this.lastError=t[t.length-1]}static isInstance(n){return Ue.hasMarker(n,bM)}};xM=y6;function b6({warning:n,provider:e,model:t}){const i=`AI SDK Warning (${e} / ${t}):`;switch(n.type){case"unsupported":{let s=`${i} The feature "${n.feature}" is not supported.`;return n.details&&(s+=` ${n.details}`),s}case"compatibility":{let s=`${i} The feature "${n.feature}" is used in a compatibility mode.`;return n.details&&(s+=` ${n.details}`),s}case"other":return`${i} ${n.message}`;default:return`${i} ${JSON.stringify(n,null,2)}`}}var x6="AI SDK Warning System: To turn off warning logging, set the AI_SDK_LOG_WARNINGS global to false.",t_=!1,wM=n=>{if(n.warnings.length===0)return;const e=globalThis.AI_SDK_LOG_WARNINGS;if(e!==!1){if(typeof e=="function"){e(n);return}t_||(t_=!0,console.info(x6));for(const t of n.warnings)console.warn(b6({warning:t,provider:n.provider,model:n.model}))}};function w6({provider:n,modelId:e}){wM({warnings:[{type:"compatibility",feature:"specificationVersion",details:"Using v2 specification compatibility mode. Some features may not be available."}],provider:n,model:e})}function A6(n){return n.specificationVersion==="v3"?n:(w6({provider:n.provider,modelId:n.modelId}),new Proxy(n,{get(e,t){switch(t){case"specificationVersion":return"v3";case"doGenerate":return async(...i)=>{const s=await e.doGenerate(...i);return{...s,finishReason:AM(s.finishReason),usage:SM(s.usage)}};case"doStream":return async(...i)=>{const s=await e.doStream(...i);return{...s,stream:S6(s.stream)}};default:return e[t]}}}))}function S6(n){return n.pipeThrough(new TransformStream({transform(e,t){e.type==="finish"?t.enqueue({...e,finishReason:AM(e.finishReason),usage:SM(e.usage)}):t.enqueue(e)}}))}function AM(n){return{unified:n==="unknown"?"other":n,raw:void 0}}function SM(n){return{inputTokens:{total:n.inputTokens,noCache:void 0,cacheRead:n.cachedInputTokens,cacheWrite:void 0},outputTokens:{total:n.outputTokens,text:void 0,reasoning:n.reasoningTokens}}}function _6(n){if(typeof n!="string"){if(n.specificationVersion!=="v3"&&n.specificationVersion!=="v2"){const e=n;throw new m6({version:e.specificationVersion,provider:e.provider,modelId:e.modelId})}return A6(n)}return E6().languageModel(n)}function E6(){var n;return(n=globalThis.AI_SDK_DEFAULT_PROVIDER)!=null?n:TV}function T6(n){if(n!=null)return typeof n=="number"?n:n.totalMs}var C6=[{mediaType:"image/gif",bytesPrefix:[71,73,70]},{mediaType:"image/png",bytesPrefix:[137,80,78,71]},{mediaType:"image/jpeg",bytesPrefix:[255,216]},{mediaType:"image/webp",bytesPrefix:[82,73,70,70,null,null,null,null,87,69,66,80]},{mediaType:"image/bmp",bytesPrefix:[66,77]},{mediaType:"image/tiff",bytesPrefix:[73,73,42,0]},{mediaType:"image/tiff",bytesPrefix:[77,77,0,42]},{mediaType:"image/avif",bytesPrefix:[0,0,0,32,102,116,121,112,97,118,105,102]},{mediaType:"image/heic",bytesPrefix:[0,0,0,32,102,116,121,112,104,101,105,99]}],k6=n=>{const e=typeof n=="string"?_k(n):n,t=(e[6]&127)<<21|(e[7]&127)<<14|(e[8]&127)<<7|e[9]&127;return e.slice(t+10)};function M6(n){return typeof n=="string"&&n.startsWith("SUQz")||typeof n!="string"&&n.length>10&&n[0]===73&&n[1]===68&&n[2]===51?k6(n):n}function R6({data:n,signatures:e}){const t=M6(n),i=typeof t=="string"?_k(t.substring(0,Math.min(t.length,24))):t;for(const s of e)if(i.length>=s.bytesPrefix.length&&s.bytesPrefix.every((r,l)=>r===null||i[l]===r))return s.mediaType}var _M="6.0.86",D6=async({url:n,maxBytes:e,abortSignal:t})=>{var i;const s=n.toString();try{const r=await fetch(s,{headers:dl({},`ai-sdk/${_M}`,cy()),signal:t});if(!r.ok)throw new _c({url:s,statusCode:r.status,statusText:r.statusText});return{data:await J4({response:r,url:s,maxBytes:e??Ck}),mediaType:(i=r.headers.get("content-type"))!=null?i:void 0}}catch(r){throw _c.isInstance(r)?r:new _c({url:s,cause:r})}},O6=(n=D6)=>e=>Promise.all(e.map(async t=>t.isUrlSupportedByModel?null:n(t)));function N6(n){try{const[e,t]=n.split(",");return{mediaType:e.split(";")[0].split(":")[1],base64Content:t}}catch{return{mediaType:void 0,base64Content:void 0}}}var EM=qt([F(),vh(Uint8Array),vh(ArrayBuffer),$4(n=>{var e,t;return(t=(e=globalThis.Buffer)==null?void 0:e.isBuffer(n))!=null?t:!1},{message:"Must be a Buffer"})]);function TM(n){if(n instanceof Uint8Array)return{data:n,mediaType:void 0};if(n instanceof ArrayBuffer)return{data:new Uint8Array(n),mediaType:void 0};if(typeof n=="string")try{n=new URL(n)}catch{}if(n instanceof URL&&n.protocol==="data:"){const{mediaType:e,base64Content:t}=N6(n.toString());if(e==null||t==null)throw new Ue({name:"InvalidDataContentError",message:`Invalid data URL format in content ${n.toString()}`});return{data:t,mediaType:e}}return{data:n,mediaType:void 0}}function P6(n){return typeof n=="string"?n:n instanceof ArrayBuffer?nl(new Uint8Array(n)):nl(n)}function CM(n){return n===void 0?[]:Array.isArray(n)?n:[n]}async function I6({prompt:n,supportedUrls:e,download:t=O6()}){const i=await z6(n.messages,t,e),s=new Map;for(const h of n.messages)if(h.role==="assistant"&&Array.isArray(h.content))for(const p of h.content)p.type==="tool-approval-request"&&"approvalId"in p&&"toolCallId"in p&&s.set(p.approvalId,p.toolCallId);const r=new Set;for(const h of n.messages)if(h.role==="tool"){for(const p of h.content)if(p.type==="tool-approval-response"){const m=s.get(p.approvalId);m&&r.add(m)}}const l=[...n.system!=null?typeof n.system=="string"?[{role:"system",content:n.system}]:CM(n.system).map(h=>({role:"system",content:h.content,providerOptions:h.providerOptions})):[],...n.messages.map(h=>L6({message:h,downloadedAssets:i}))],c=[];for(const h of l){if(h.role!=="tool"){c.push(h);continue}const p=c.at(-1);p?.role==="tool"?p.content.push(...h.content):c.push(h)}const d=new Set;for(const h of c)switch(h.role){case"assistant":{for(const p of h.content)p.type==="tool-call"&&!p.providerExecuted&&d.add(p.toolCallId);break}case"tool":{for(const p of h.content)p.type==="tool-result"&&d.delete(p.toolCallId);break}case"user":case"system":for(const p of r)d.delete(p);if(d.size>0)throw new Q1({toolCallIds:Array.from(d)});break}for(const h of r)d.delete(h);if(d.size>0)throw new Q1({toolCallIds:Array.from(d)});return c.filter(h=>h.role!=="tool"||h.content.length>0)}function L6({message:n,downloadedAssets:e}){const t=n.role;switch(t){case"system":return{role:"system",content:n.content,providerOptions:n.providerOptions};case"user":return typeof n.content=="string"?{role:"user",content:[{type:"text",text:n.content}],providerOptions:n.providerOptions}:{role:"user",content:n.content.map(i=>j6(i,e)).filter(i=>i.type!=="text"||i.text!==""),providerOptions:n.providerOptions};case"assistant":return typeof n.content=="string"?{role:"assistant",content:[{type:"text",text:n.content}],providerOptions:n.providerOptions}:{role:"assistant",content:n.content.filter(i=>i.type!=="text"||i.text!==""||i.providerOptions!=null).filter(i=>i.type!=="tool-approval-request").map(i=>{const s=i.providerOptions;switch(i.type){case"file":{const{data:r,mediaType:l}=TM(i.data);return{type:"file",data:r,filename:i.filename,mediaType:l??i.mediaType,providerOptions:s}}case"reasoning":return{type:"reasoning",text:i.text,providerOptions:s};case"text":return{type:"text",text:i.text,providerOptions:s};case"tool-call":return{type:"tool-call",toolCallId:i.toolCallId,toolName:i.toolName,input:i.input,providerExecuted:i.providerExecuted,providerOptions:s};case"tool-result":return{type:"tool-result",toolCallId:i.toolCallId,toolName:i.toolName,output:n_(i.output),providerOptions:s}}}),providerOptions:n.providerOptions};case"tool":return{role:"tool",content:n.content.filter(i=>i.type!=="tool-approval-response"||i.providerExecuted).map(i=>{switch(i.type){case"tool-result":return{type:"tool-result",toolCallId:i.toolCallId,toolName:i.toolName,output:n_(i.output),providerOptions:i.providerOptions};case"tool-approval-response":return{type:"tool-approval-response",approvalId:i.approvalId,approved:i.approved,reason:i.reason}}}),providerOptions:n.providerOptions};default:{const i=t;throw new v6({role:i})}}}async function z6(n,e,t){const i=n.filter(r=>r.role==="user").map(r=>r.content).filter(r=>Array.isArray(r)).flat().filter(r=>r.type==="image"||r.type==="file").map(r=>{var l;const c=(l=r.mediaType)!=null?l:r.type==="image"?"image/*":void 0;let d=r.type==="image"?r.image:r.data;if(typeof d=="string")try{d=new URL(d)}catch{}return{mediaType:c,data:d}}).filter(r=>r.data instanceof URL).map(r=>({url:r.data,isUrlSupportedByModel:r.mediaType!=null&&a5({url:r.data.toString(),mediaType:r.mediaType,supportedUrls:t})})),s=await e(i);return Object.fromEntries(s.map((r,l)=>r==null?null:[i[l].url.toString(),{data:r.data,mediaType:r.mediaType}]).filter(r=>r!=null))}function j6(n,e){var t;if(n.type==="text")return{type:"text",text:n.text,providerOptions:n.providerOptions};let i;const s=n.type;switch(s){case"image":i=n.image;break;case"file":i=n.data;break;default:throw new Error(`Unsupported part type: ${s}`)}const{data:r,mediaType:l}=TM(i);let c=l??n.mediaType,d=r;if(d instanceof URL){const h=e[d.toString()];h&&(d=h.data,c??(c=h.mediaType))}switch(s){case"image":return(d instanceof Uint8Array||typeof d=="string")&&(c=(t=R6({data:d,signatures:C6}))!=null?t:c),{type:"file",mediaType:c??"image/*",filename:void 0,data:d,providerOptions:n.providerOptions};case"file":{if(c==null)throw new Error("Media type is missing for file part");return{type:"file",mediaType:c,filename:n.filename,data:d,providerOptions:n.providerOptions}}}}function n_(n){return n.type!=="content"?n:{type:"content",value:n.value.map(e=>e.type!=="media"?e:e.mediaType.startsWith("image/")?{type:"image-data",data:e.data,mediaType:e.mediaType}:{type:"file-data",data:e.data,mediaType:e.mediaType})}}function i_({maxOutputTokens:n,temperature:e,topP:t,topK:i,presencePenalty:s,frequencyPenalty:r,seed:l,stopSequences:c}){if(n!=null){if(!Number.isInteger(n))throw new Dt({parameter:"maxOutputTokens",value:n,message:"maxOutputTokens must be an integer"});if(n<1)throw new Dt({parameter:"maxOutputTokens",value:n,message:"maxOutputTokens must be >= 1"})}if(e!=null&&typeof e!="number")throw new Dt({parameter:"temperature",value:e,message:"temperature must be a number"});if(t!=null&&typeof t!="number")throw new Dt({parameter:"topP",value:t,message:"topP must be a number"});if(i!=null&&typeof i!="number")throw new Dt({parameter:"topK",value:i,message:"topK must be a number"});if(s!=null&&typeof s!="number")throw new Dt({parameter:"presencePenalty",value:s,message:"presencePenalty must be a number"});if(r!=null&&typeof r!="number")throw new Dt({parameter:"frequencyPenalty",value:r,message:"frequencyPenalty must be a number"});if(l!=null&&!Number.isInteger(l))throw new Dt({parameter:"seed",value:l,message:"seed must be an integer"});return{maxOutputTokens:n,temperature:e,topP:t,topK:i,presencePenalty:s,frequencyPenalty:r,stopSequences:c,seed:l}}var Uc=V4(()=>qt([p4(),F(),ke(),na(),Ms(F(),Uc.optional()),we(Uc)])),zt=Ms(F(),Ms(F(),Uc.optional())),kM=K({type:Fe("text"),text:F(),providerOptions:zt.optional()}),B6=K({type:Fe("image"),image:qt([EM,vh(URL)]),mediaType:F().optional(),providerOptions:zt.optional()}),MM=K({type:Fe("file"),data:qt([EM,vh(URL)]),filename:F().optional(),mediaType:F(),providerOptions:zt.optional()}),F6=K({type:Fe("reasoning"),text:F(),providerOptions:zt.optional()}),U6=K({type:Fe("tool-call"),toolCallId:F(),toolName:F(),input:ks(),providerOptions:zt.optional(),providerExecuted:na().optional()}),V6=oy("type",[K({type:Fe("text"),value:F(),providerOptions:zt.optional()}),K({type:Fe("json"),value:Uc,providerOptions:zt.optional()}),K({type:Fe("execution-denied"),reason:F().optional(),providerOptions:zt.optional()}),K({type:Fe("error-text"),value:F(),providerOptions:zt.optional()}),K({type:Fe("error-json"),value:Uc,providerOptions:zt.optional()}),K({type:Fe("content"),value:we(qt([K({type:Fe("text"),text:F(),providerOptions:zt.optional()}),K({type:Fe("media"),data:F(),mediaType:F()}),K({type:Fe("file-data"),data:F(),mediaType:F(),filename:F().optional(),providerOptions:zt.optional()}),K({type:Fe("file-url"),url:F(),providerOptions:zt.optional()}),K({type:Fe("file-id"),fileId:qt([F(),Ms(F(),F())]),providerOptions:zt.optional()}),K({type:Fe("image-data"),data:F(),mediaType:F(),providerOptions:zt.optional()}),K({type:Fe("image-url"),url:F(),providerOptions:zt.optional()}),K({type:Fe("image-file-id"),fileId:qt([F(),Ms(F(),F())]),providerOptions:zt.optional()}),K({type:Fe("custom"),providerOptions:zt.optional()})]))})]),RM=K({type:Fe("tool-result"),toolCallId:F(),toolName:F(),output:V6,providerOptions:zt.optional()}),$6=K({type:Fe("tool-approval-request"),approvalId:F(),toolCallId:F()}),H6=K({type:Fe("tool-approval-response"),approvalId:F(),approved:na(),reason:F().optional()}),G6=K({role:Fe("system"),content:F(),providerOptions:zt.optional()}),q6=K({role:Fe("user"),content:qt([F(),we(qt([kM,B6,MM]))]),providerOptions:zt.optional()}),Z6=K({role:Fe("assistant"),content:qt([F(),we(qt([kM,MM,F6,U6,RM,$6]))]),providerOptions:zt.optional()}),Y6=K({role:Fe("tool"),content:we(qt([RM,H6])),providerOptions:zt.optional()}),X6=qt([G6,q6,Z6,Y6]);async function W6(n){if(n.prompt==null&&n.messages==null)throw new Co({prompt:n,message:"prompt or messages must be defined"});if(n.prompt!=null&&n.messages!=null)throw new Co({prompt:n,message:"prompt and messages cannot be defined at the same time"});if(n.system!=null&&typeof n.system!="string"&&!CM(n.system).every(i=>typeof i=="object"&&i!==null&&"role"in i&&i.role==="system"))throw new Co({prompt:n,message:"system must be a string, SystemModelMessage, or array of SystemModelMessage"});let e;if(n.prompt!=null&&typeof n.prompt=="string")e=[{role:"user",content:n.prompt}];else if(n.prompt!=null&&Array.isArray(n.prompt))e=n.prompt;else if(n.messages!=null)e=n.messages;else throw new Co({prompt:n,message:"prompt or messages must be defined"});if(e.length===0)throw new Co({prompt:n,message:"messages must not be empty"});const t=await Ti({value:e,schema:we(X6)});if(!t.success)throw new Co({prompt:n,message:"The messages do not match the ModelMessage[] schema.",cause:t.error});return{messages:e,system:n.system}}function K6(n){if(!hy.isInstance(n))return n;const e=(process==null?void 0:"production")==="production",t="https://ai-sdk.dev/unauthenticated-ai-gateway";return e?new Ue({name:"GatewayError",message:`Unauthenticated. Configure AI_GATEWAY_API_KEY or use a provider module. Learn more: ${t}`}):Object.assign(new Error(`\x1B[1m\x1B[31mUnauthenticated request to AI Gateway.\x1B[0m

To authenticate, set the \x1B[33mAI_GATEWAY_API_KEY\x1B[0m environment variable with your API key.

Alternatively, you can use a provider module instead of the AI Gateway.

Learn more: \x1B[34m${t}\x1B[0m

`),{name:"GatewayAuthenticationError"})}function s_({operationId:n,telemetry:e}){return{"operation.name":`${n}${e?.functionId!=null?` ${e.functionId}`:""}`,"resource.name":e?.functionId,"ai.operationId":n,"ai.telemetry.functionId":e?.functionId}}function J6({model:n,settings:e,telemetry:t,headers:i}){var s;return{"ai.model.provider":n.provider,"ai.model.id":n.modelId,...Object.entries(e).reduce((r,[l,c])=>{if(l==="timeout"){const d=T6(c);d!=null&&(r[`ai.settings.${l}`]=d)}else r[`ai.settings.${l}`]=c;return r},{}),...Object.entries((s=t?.metadata)!=null?s:{}).reduce((r,[l,c])=>(r[`ai.telemetry.metadata.${l}`]=c,r),{}),...Object.entries(i??{}).reduce((r,[l,c])=>(c!==void 0&&(r[`ai.request.headers.${l}`]=c),r),{})}}var Q6={startSpan(){return kd},startActiveSpan(n,e,t,i){if(typeof e=="function")return e(kd);if(typeof t=="function")return t(kd);if(typeof i=="function")return i(kd)}},kd={spanContext(){return e$},setAttribute(){return this},setAttributes(){return this},addEvent(){return this},addLink(){return this},addLinks(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording(){return!1},recordException(){return this}},e$={traceId:"",spanId:"",traceFlags:0};function t$({isEnabled:n=!1,tracer:e}={}){return n?e||c6.getTracer("ai"):Q6}async function a_({name:n,tracer:e,attributes:t,fn:i,endWhenDone:s=!0}){return e.startActiveSpan(n,{attributes:await t},async r=>{const l=J1.active();try{const c=await J1.with(l,()=>i(r));return s&&r.end(),c}catch(c){try{n$(r,c)}finally{r.end()}throw c}})}function n$(n,e){e instanceof Error?(n.recordException({name:e.name,message:e.message,stack:e.stack}),n.setStatus({code:Ah.ERROR,message:e.message})):n.setStatus({code:Ah.ERROR})}async function Md({telemetry:n,attributes:e}){if(n?.isEnabled!==!0)return{};const t={};for(const[i,s]of Object.entries(e))if(s!=null){if(typeof s=="object"&&"input"in s&&typeof s.input=="function"){if(n?.recordInputs===!1)continue;const r=await s.input();r!=null&&(t[i]=r);continue}if(typeof s=="object"&&"output"in s&&typeof s.output=="function"){if(n?.recordOutputs===!1)continue;const r=await s.output();r!=null&&(t[i]=r);continue}t[i]=s}return t}function i$(n){return JSON.stringify(n.map(e=>({...e,content:typeof e.content=="string"?e.content:e.content.map(t=>t.type==="file"?{...t,data:t.data instanceof Uint8Array?P6(t.data):t.data}:t)})))}function r_(n){return{inputTokens:n.inputTokens.total,inputTokenDetails:{noCacheTokens:n.inputTokens.noCache,cacheReadTokens:n.inputTokens.cacheRead,cacheWriteTokens:n.inputTokens.cacheWrite},outputTokens:n.outputTokens.total,outputTokenDetails:{textTokens:n.outputTokens.text,reasoningTokens:n.outputTokens.reasoning},totalTokens:s$(n.inputTokens.total,n.outputTokens.total),raw:n.raw,reasoningTokens:n.outputTokens.reasoning,cachedInputTokens:n.inputTokens.cacheRead}}function s$(n,e){return n==null&&e==null?void 0:(n??0)+(e??0)}function a$({error:n,exponentialBackoffDelay:e}){const t=n.responseHeaders;if(!t)return e;let i;const s=t["retry-after-ms"];if(s){const l=parseFloat(s);Number.isNaN(l)||(i=l)}const r=t["retry-after"];if(r&&i===void 0){const l=parseFloat(r);Number.isNaN(l)?i=Date.parse(r)-Date.now():i=l*1e3}return i!=null&&!Number.isNaN(i)&&0<=i&&(i<60*1e3||i<e)?i:e}var r$=({maxRetries:n=2,initialDelayInMs:e=2e3,backoffFactor:t=2,abortSignal:i}={})=>async s=>DM(s,{maxRetries:n,delayInMs:e,backoffFactor:t,abortSignal:i});async function DM(n,{maxRetries:e,delayInMs:t,backoffFactor:i,abortSignal:s},r=[]){try{return await n()}catch(l){if(il(l)||e===0)throw l;const c=Q4(l),d=[...r,l],h=d.length;if(h>e)throw new e_({message:`Failed after ${h} attempts. Last error: ${c}`,reason:"maxRetriesExceeded",errors:d});if(l instanceof Error&&Bn.isInstance(l)&&l.isRetryable===!0&&h<=e)return await Sk(a$({error:l,exponentialBackoffDelay:t}),{abortSignal:s}),DM(n,{maxRetries:e,delayInMs:i*t,backoffFactor:i,abortSignal:s},d);throw h===1?l:new e_({message:`Failed after ${h} attempts with non-retryable error: '${c}'`,reason:"errorNotRetryable",errors:d})}}function o$({maxRetries:n,abortSignal:e}){if(n!=null){if(!Number.isInteger(n))throw new Dt({parameter:"maxRetries",value:n,message:"maxRetries must be an integer"});if(n<0)throw new Dt({parameter:"maxRetries",value:n,message:"maxRetries must be >= 0"})}const t=n??2;return{maxRetries:t,retry:r$({maxRetries:t,abortSignal:e})}}function l$(n){const e=n.filter(t=>t.type==="reasoning");return e.length===0?void 0:e.map(t=>t.text).join(`
`)}function c$(n){const e=n.filter(t=>t.type==="text");if(e.length!==0)return e.map(t=>t.text).join("")}var u$={};d6(u$,{array:()=>p$,choice:()=>m$,json:()=>g$,object:()=>f$,text:()=>h$});function d$(n){const e=["ROOT"];let t=-1,i=null;function s(d,h,p){switch(d){case'"':{t=h,e.pop(),e.push(p),e.push("INSIDE_STRING");break}case"f":case"t":case"n":{t=h,i=h,e.pop(),e.push(p),e.push("INSIDE_LITERAL");break}case"-":{e.pop(),e.push(p),e.push("INSIDE_NUMBER");break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{t=h,e.pop(),e.push(p),e.push("INSIDE_NUMBER");break}case"{":{t=h,e.pop(),e.push(p),e.push("INSIDE_OBJECT_START");break}case"[":{t=h,e.pop(),e.push(p),e.push("INSIDE_ARRAY_START");break}}}function r(d,h){switch(d){case",":{e.pop(),e.push("INSIDE_OBJECT_AFTER_COMMA");break}case"}":{t=h,e.pop();break}}}function l(d,h){switch(d){case",":{e.pop(),e.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{t=h,e.pop();break}}}for(let d=0;d<n.length;d++){const h=n[d];switch(e[e.length-1]){case"ROOT":s(h,d,"FINISH");break;case"INSIDE_OBJECT_START":{switch(h){case'"':{e.pop(),e.push("INSIDE_OBJECT_KEY");break}case"}":{t=d,e.pop();break}}break}case"INSIDE_OBJECT_AFTER_COMMA":{h==='"'&&(e.pop(),e.push("INSIDE_OBJECT_KEY"));break}case"INSIDE_OBJECT_KEY":{h==='"'&&(e.pop(),e.push("INSIDE_OBJECT_AFTER_KEY"));break}case"INSIDE_OBJECT_AFTER_KEY":{h===":"&&(e.pop(),e.push("INSIDE_OBJECT_BEFORE_VALUE"));break}case"INSIDE_OBJECT_BEFORE_VALUE":{s(h,d,"INSIDE_OBJECT_AFTER_VALUE");break}case"INSIDE_OBJECT_AFTER_VALUE":{r(h,d);break}case"INSIDE_STRING":{switch(h){case'"':{e.pop(),t=d;break}case"\\":{e.push("INSIDE_STRING_ESCAPE");break}default:t=d}break}case"INSIDE_ARRAY_START":{h==="]"?(t=d,e.pop()):(t=d,s(h,d,"INSIDE_ARRAY_AFTER_VALUE"));break}case"INSIDE_ARRAY_AFTER_VALUE":{switch(h){case",":{e.pop(),e.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{t=d,e.pop();break}default:{t=d;break}}break}case"INSIDE_ARRAY_AFTER_COMMA":{s(h,d,"INSIDE_ARRAY_AFTER_VALUE");break}case"INSIDE_STRING_ESCAPE":{e.pop(),t=d;break}case"INSIDE_NUMBER":{switch(h){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{t=d;break}case"e":case"E":case"-":case".":break;case",":{e.pop(),e[e.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&l(h,d),e[e.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&r(h,d);break}case"}":{e.pop(),e[e.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&r(h,d);break}case"]":{e.pop(),e[e.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&l(h,d);break}default:{e.pop();break}}break}case"INSIDE_LITERAL":{const m=n.substring(i,d+1);!"false".startsWith(m)&&!"true".startsWith(m)&&!"null".startsWith(m)?(e.pop(),e[e.length-1]==="INSIDE_OBJECT_AFTER_VALUE"?r(h,d):e[e.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&l(h,d)):t=d;break}}}let c=n.slice(0,t+1);for(let d=e.length-1;d>=0;d--)switch(e[d]){case"INSIDE_STRING":{c+='"';break}case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":{c+="}";break}case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":{c+="]";break}case"INSIDE_LITERAL":{const p=n.substring(i,n.length);"true".startsWith(p)?c+="true".slice(p.length):"false".startsWith(p)?c+="false".slice(p.length):"null".startsWith(p)&&(c+="null".slice(p.length))}}return c}async function Yh(n){if(n===void 0)return{value:void 0,state:"undefined-input"};let e=await ra({text:n});return e.success?{value:e.value,state:"successful-parse"}:(e=await ra({text:d$(n)}),e.success?{value:e.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"})}var h$=()=>({name:"text",responseFormat:Promise.resolve({type:"text"}),async parseCompleteOutput({text:n}){return n},async parsePartialOutput({text:n}){return{partial:n}},createElementStreamTransform(){}}),f$=({schema:n,name:e,description:t})=>{const i=Lc(n);return{name:"object",responseFormat:Kt(i.jsonSchema).then(s=>({type:"json",schema:s,...e!=null&&{name:e},...t!=null&&{description:t}})),async parseCompleteOutput({text:s},r){const l=await ra({text:s});if(!l.success)throw new _i({message:"No object generated: could not parse the response.",cause:l.error,text:s,response:r.response,usage:r.usage,finishReason:r.finishReason});const c=await Ti({value:l.value,schema:i});if(!c.success)throw new _i({message:"No object generated: response did not match schema.",cause:c.error,text:s,response:r.response,usage:r.usage,finishReason:r.finishReason});return c.value},async parsePartialOutput({text:s}){const r=await Yh(s);switch(r.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return{partial:r.value}}},createElementStreamTransform(){}}},p$=({element:n,name:e,description:t})=>{const i=Lc(n);return{name:"array",responseFormat:Kt(i.jsonSchema).then(s=>{const{$schema:r,...l}=s;return{type:"json",schema:{$schema:"http://json-schema.org/draft-07/schema#",type:"object",properties:{elements:{type:"array",items:l}},required:["elements"],additionalProperties:!1},...e!=null&&{name:e},...t!=null&&{description:t}}}),async parseCompleteOutput({text:s},r){const l=await ra({text:s});if(!l.success)throw new _i({message:"No object generated: could not parse the response.",cause:l.error,text:s,response:r.response,usage:r.usage,finishReason:r.finishReason});const c=l.value;if(c==null||typeof c!="object"||!("elements"in c)||!Array.isArray(c.elements))throw new _i({message:"No object generated: response did not match schema.",cause:new di({value:c,cause:"response must be an object with an elements array"}),text:s,response:r.response,usage:r.usage,finishReason:r.finishReason});for(const d of c.elements){const h=await Ti({value:d,schema:i});if(!h.success)throw new _i({message:"No object generated: response did not match schema.",cause:h.error,text:s,response:r.response,usage:r.usage,finishReason:r.finishReason})}return c.elements},async parsePartialOutput({text:s}){const r=await Yh(s);switch(r.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":{const l=r.value;if(l==null||typeof l!="object"||!("elements"in l)||!Array.isArray(l.elements))return;const c=r.state==="repaired-parse"&&l.elements.length>0?l.elements.slice(0,-1):l.elements,d=[];for(const h of c){const p=await Ti({value:h,schema:i});p.success&&d.push(p.value)}return{partial:d}}}},createElementStreamTransform(){let s=0;return new TransformStream({transform({partialOutput:r},l){if(r!=null)for(;s<r.length;s++)l.enqueue(r[s])}})}}},m$=({options:n,name:e,description:t})=>({name:"choice",responseFormat:Promise.resolve({type:"json",schema:{$schema:"http://json-schema.org/draft-07/schema#",type:"object",properties:{result:{type:"string",enum:n}},required:["result"],additionalProperties:!1},...e!=null&&{name:e},...t!=null&&{description:t}}),async parseCompleteOutput({text:i},s){const r=await ra({text:i});if(!r.success)throw new _i({message:"No object generated: could not parse the response.",cause:r.error,text:i,response:s.response,usage:s.usage,finishReason:s.finishReason});const l=r.value;if(l==null||typeof l!="object"||!("result"in l)||typeof l.result!="string"||!n.includes(l.result))throw new _i({message:"No object generated: response did not match schema.",cause:new di({value:l,cause:"response must be an object that contains a choice value."}),text:i,response:s.response,usage:s.usage,finishReason:s.finishReason});return l.result},async parsePartialOutput({text:i}){const s=await Yh(i);switch(s.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":{const r=s.value;if(r==null||typeof r!="object"||!("result"in r)||typeof r.result!="string")return;const l=n.filter(c=>c.startsWith(r.result));return s.state==="successful-parse"?l.includes(r.result)?{partial:r.result}:void 0:l.length===1?{partial:l[0]}:void 0}}},createElementStreamTransform(){}}),g$=({name:n,description:e}={})=>({name:"json",responseFormat:Promise.resolve({type:"json",...n!=null&&{name:n},...e!=null&&{description:e}}),async parseCompleteOutput({text:t},i){const s=await ra({text:t});if(!s.success)throw new _i({message:"No object generated: could not parse the response.",cause:s.error,text:t,response:i.response,usage:i.usage,finishReason:i.finishReason});return s.value},async parsePartialOutput({text:t}){const i=await Yh(t);switch(i.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return i.value===void 0?void 0:{partial:i.value}}},createElementStreamTransform(){}});tu({prefix:"aitxt",size:24});function v$(n,e){const t=new Headers(n??{});for(const[i,s]of Object.entries(e))t.has(i)||t.set(i,s);return t}(class extends TransformStream{constructor(){super({transform(n,e){e.enqueue(`data: ${JSON.stringify(n)}

`)},flush(n){n.enqueue(`data: [DONE]

`)}})}});function y$(n){const e=n.pipeThrough(new TransformStream);return e[Symbol.asyncIterator]=function(){const t=this.getReader();let i=!1;async function s(r){var l;if(!i){i=!0;try{r&&await((l=t.cancel)==null?void 0:l.call(t))}finally{try{t.releaseLock()}catch{}}}}return{async next(){if(i)return{done:!0,value:void 0};const{done:r,value:l}=await t.read();return r?(await s(!0),{done:!0,value:void 0}):{done:!1,value:l}},async return(){return await s(!0),{done:!0,value:void 0}},async throw(r){throw await s(!0),r}}},e}tu({prefix:"aitxt",size:24});var b$={type:"no-schema",jsonSchema:async()=>{},async validatePartialResult({value:n,textDelta:e}){return{success:!0,value:{partial:n,textDelta:e}}},async validateFinalResult(n,e){return n===void 0?{success:!1,error:new _i({message:"No object generated: response did not match schema.",text:e.text,response:e.response,usage:e.usage,finishReason:e.finishReason})}:{success:!0,value:n}},createElementStream(){throw new Qo({functionality:"element streams in no-schema mode"})}},x$=n=>({type:"object",jsonSchema:async()=>await n.jsonSchema,async validatePartialResult({value:e,textDelta:t}){return{success:!0,value:{partial:e,textDelta:t}}},async validateFinalResult(e){return Ti({value:e,schema:n})},createElementStream(){throw new Qo({functionality:"element streams in object mode"})}}),w$=n=>({type:"array",jsonSchema:async()=>{const{$schema:e,...t}=await n.jsonSchema;return{$schema:"http://json-schema.org/draft-07/schema#",type:"object",properties:{elements:{type:"array",items:t}},required:["elements"],additionalProperties:!1}},async validatePartialResult({value:e,latestObject:t,isFirstDelta:i,isFinalDelta:s}){var r;if(!uh(e)||!PS(e.elements))return{success:!1,error:new di({value:e,cause:"value must be an object that contains an array of elements"})};const l=e.elements,c=[];for(let p=0;p<l.length;p++){const m=l[p],v=await Ti({value:m,schema:n});if(!(p===l.length-1&&!s)){if(!v.success)return v;c.push(v.value)}}const d=(r=t?.length)!=null?r:0;let h="";return i&&(h+="["),d>0&&(h+=","),h+=c.slice(d).map(p=>JSON.stringify(p)).join(","),s&&(h+="]"),{success:!0,value:{partial:c,textDelta:h}}},async validateFinalResult(e){if(!uh(e)||!PS(e.elements))return{success:!1,error:new di({value:e,cause:"value must be an object that contains an array of elements"})};const t=e.elements;for(const i of t){const s=await Ti({value:i,schema:n});if(!s.success)return s}return{success:!0,value:t}},createElementStream(e){let t=0;return y$(e.pipeThrough(new TransformStream({transform(i,s){switch(i.type){case"object":{const r=i.object;for(;t<r.length;t++)s.enqueue(r[t]);break}case"text-delta":case"finish":case"error":break;default:{const r=i;throw new Error(`Unsupported chunk type: ${r}`)}}}})))}}),A$=n=>({type:"enum",jsonSchema:async()=>({$schema:"http://json-schema.org/draft-07/schema#",type:"object",properties:{result:{type:"string",enum:n}},required:["result"],additionalProperties:!1}),async validateFinalResult(e){if(!uh(e)||typeof e.result!="string")return{success:!1,error:new di({value:e,cause:'value must be an object that contains a string in the "result" property.'})};const t=e.result;return n.includes(t)?{success:!0,value:t}:{success:!1,error:new di({value:e,cause:"value must be a string in the enum"})}},async validatePartialResult({value:e,textDelta:t}){if(!uh(e)||typeof e.result!="string")return{success:!1,error:new di({value:e,cause:'value must be an object that contains a string in the "result" property.'})};const i=e.result,s=n.filter(r=>r.startsWith(i));return e.result.length===0||s.length===0?{success:!1,error:new di({value:e,cause:"value must be a string in the enum"})}:{success:!0,value:{partial:s.length>1?i:s[0],textDelta:t}}},createElementStream(){throw new Qo({functionality:"element streams in enum mode"})}});function S$({output:n,schema:e,enumValues:t}){switch(n){case"object":return x$(Lc(e));case"array":return w$(Lc(e));case"enum":return A$(t);case"no-schema":return b$;default:{const i=n;throw new Error(`Unsupported output: ${i}`)}}}async function o_(n,e,t){const i=await ra({text:n});if(!i.success)throw new _i({message:"No object generated: could not parse the response.",cause:i.error,text:n,response:t.response,usage:t.usage,finishReason:t.finishReason});const s=await e.validateFinalResult(i.value,{text:n,response:t.response,usage:t.usage});if(!s.success)throw new _i({message:"No object generated: response did not match schema.",cause:s.error,text:n,response:t.response,usage:t.usage,finishReason:t.finishReason});return s.value}async function _$(n,e,t,i){try{return await o_(n,e,i)}catch(s){if(t!=null&&_i.isInstance(s)&&(Oc.isInstance(s.cause)||di.isInstance(s.cause))){const r=await t({text:n,error:s.cause});if(r===null)throw s;return await o_(r,e,i)}throw s}}function E$({output:n,schema:e,schemaName:t,schemaDescription:i,enumValues:s}){if(n!=null&&n!=="object"&&n!=="array"&&n!=="enum"&&n!=="no-schema")throw new Dt({parameter:"output",value:n,message:"Invalid output type."});if(n==="no-schema"){if(e!=null)throw new Dt({parameter:"schema",value:e,message:"Schema is not supported for no-schema output."});if(i!=null)throw new Dt({parameter:"schemaDescription",value:i,message:"Schema description is not supported for no-schema output."});if(t!=null)throw new Dt({parameter:"schemaName",value:t,message:"Schema name is not supported for no-schema output."});if(s!=null)throw new Dt({parameter:"enumValues",value:s,message:"Enum values are not supported for no-schema output."})}if(n==="object"){if(e==null)throw new Dt({parameter:"schema",value:e,message:"Schema is required for object output."});if(s!=null)throw new Dt({parameter:"enumValues",value:s,message:"Enum values are not supported for object output."})}if(n==="array"){if(e==null)throw new Dt({parameter:"schema",value:e,message:"Element schema is required for array output."});if(s!=null)throw new Dt({parameter:"enumValues",value:s,message:"Enum values are not supported for array output."})}if(n==="enum"){if(e!=null)throw new Dt({parameter:"schema",value:e,message:"Schema is not supported for enum output."});if(i!=null)throw new Dt({parameter:"schemaDescription",value:i,message:"Schema description is not supported for enum output."});if(t!=null)throw new Dt({parameter:"schemaName",value:t,message:"Schema name is not supported for enum output."});if(s==null)throw new Dt({parameter:"enumValues",value:s,message:"Enum values are required for enum output."});for(const r of s)if(typeof r!="string")throw new Dt({parameter:"enumValues",value:r,message:"Enum values must be strings."})}}var T$=tu({prefix:"aiobj",size:24});async function Xh(n){const{model:e,output:t="object",system:i,prompt:s,messages:r,maxRetries:l,abortSignal:c,headers:d,experimental_repairText:h,experimental_telemetry:p,experimental_download:m,providerOptions:v,_internal:{generateId:b=T$,currentDate:w=()=>new Date}={},...x}=n,A=_6(e),S="enum"in n?n.enum:void 0,{schema:T,schemaDescription:E,schemaName:M}="schema"in n?n:{};E$({output:t,schema:T,schemaName:M,schemaDescription:E,enumValues:S});const{maxRetries:R,retry:O}=o$({maxRetries:l,abortSignal:c}),L=S$({output:t,schema:T,enumValues:S}),D=i_(x),$=dl(d??{},`ai/${_M}`),ee=J6({model:A,telemetry:p,headers:$,settings:{...D,maxRetries:R}}),X=t$(p),le=await L.jsonSchema();try{return await a_({name:"ai.generateObject",attributes:Md({telemetry:p,attributes:{...s_({operationId:"ai.generateObject",telemetry:p}),...ee,"ai.prompt":{input:()=>JSON.stringify({system:i,prompt:s,messages:r})},"ai.schema":le!=null?{input:()=>JSON.stringify(le)}:void 0,"ai.schema.name":M,"ai.schema.description":E,"ai.settings.output":L.type}}),tracer:X,fn:async de=>{var ce;let fe,N,U,B,se,ve,P,q;const Z=await W6({system:i,prompt:s,messages:r}),ne=await I6({prompt:Z,supportedUrls:await A.supportedUrls,download:m}),ae=await O(()=>a_({name:"ai.generateObject.doGenerate",attributes:Md({telemetry:p,attributes:{...s_({operationId:"ai.generateObject.doGenerate",telemetry:p}),...ee,"ai.prompt.messages":{input:()=>i$(ne)},"gen_ai.system":A.provider,"gen_ai.request.model":A.modelId,"gen_ai.request.frequency_penalty":D.frequencyPenalty,"gen_ai.request.max_tokens":D.maxOutputTokens,"gen_ai.request.presence_penalty":D.presencePenalty,"gen_ai.request.temperature":D.temperature,"gen_ai.request.top_k":D.topK,"gen_ai.request.top_p":D.topP}}),tracer:X,fn:async oe=>{var Ee,De,Nt,wt,ft,Sn,ln,qi;const pt=await A.doGenerate({responseFormat:{type:"json",schema:le,name:M,description:E},...i_(x),prompt:ne,providerOptions:v,abortSignal:c,headers:$}),gn={id:(De=(Ee=pt.response)==null?void 0:Ee.id)!=null?De:b(),timestamp:(wt=(Nt=pt.response)==null?void 0:Nt.timestamp)!=null?wt:w(),modelId:(Sn=(ft=pt.response)==null?void 0:ft.modelId)!=null?Sn:A.modelId,headers:(ln=pt.response)==null?void 0:ln.headers,body:(qi=pt.response)==null?void 0:qi.body},In=c$(pt.content),cn=l$(pt.content);if(In===void 0)throw new _i({message:"No object generated: the model did not return a response.",response:gn,usage:r_(pt.usage),finishReason:pt.finishReason.unified});return oe.setAttributes(await Md({telemetry:p,attributes:{"ai.response.finishReason":pt.finishReason.unified,"ai.response.object":{output:()=>In},"ai.response.id":gn.id,"ai.response.model":gn.modelId,"ai.response.timestamp":gn.timestamp.toISOString(),"ai.response.providerMetadata":JSON.stringify(pt.providerMetadata),"ai.usage.promptTokens":pt.usage.inputTokens.total,"ai.usage.completionTokens":pt.usage.outputTokens.total,"gen_ai.response.finish_reasons":[pt.finishReason.unified],"gen_ai.response.id":gn.id,"gen_ai.response.model":gn.modelId,"gen_ai.usage.input_tokens":pt.usage.inputTokens.total,"gen_ai.usage.output_tokens":pt.usage.outputTokens.total}})),{...pt,objectText:In,reasoning:cn,responseData:gn}}}));fe=ae.objectText,N=ae.finishReason.unified,U=r_(ae.usage),B=ae.warnings,P=ae.providerMetadata,ve=(ce=ae.request)!=null?ce:{},se=ae.responseData,q=ae.reasoning,wM({warnings:B,provider:A.provider,model:A.modelId});const pe=await _$(fe,L,h,{response:se,usage:U,finishReason:N});return de.setAttributes(await Md({telemetry:p,attributes:{"ai.response.finishReason":N,"ai.response.object":{output:()=>JSON.stringify(pe)},"ai.response.providerMetadata":JSON.stringify(P),"ai.usage.promptTokens":U.inputTokens,"ai.usage.completionTokens":U.outputTokens}})),new C$({object:pe,reasoning:q,finishReason:N,usage:U,warnings:B,request:ve,response:se,providerMetadata:P})}})}catch(de){throw K6(de)}}var C$=class{constructor(n){this.object=n.object,this.finishReason=n.finishReason,this.usage=n.usage,this.warnings=n.warnings,this.providerMetadata=n.providerMetadata,this.response=n.response,this.request=n.request,this.reasoning=n.reasoning}toJsonResponse(n){var e;return new Response(JSON.stringify(this.object),{status:(e=n?.status)!=null?e:200,headers:v$(n?.headers,{"content-type":"application/json; charset=utf-8"})})}};tu({prefix:"aiobj",size:24});const Wh=n=>Vk({apiKey:n})("gemini-3-pro-preview"),k$=async(n,e,t="standard")=>{if(e==="test-key"||e==="test-key-123"||e&&e.startsWith("test-"))return console.log("Using MOCK MODE for generatePersonas"),await new Promise(d=>setTimeout(d,800)),Array.from({length:5}).map((d,h)=>({id:`mock-${h}`,name:`Mock Persona ${h+1}`,role:"Test User",description:"A simulated user for testing purposes.",background:"Generated by mock mode.",goals:"To test the application.",painPoints:["Mock pain point 1","Mock pain point 2"],archetype:"Mock Archetype"}));const i=Wh(e),s=5;let r="";t==="crisis"?r=`You are an expert PR Crisis Manager in a futuristic sci-fi setting. Analyze the content and identify exactly ${s} distinct, critical audience personas who represent potential PR risks.
        Focus on valid critics, skeptics, activists, and journalists who might scrutinize this content.
        IMPORTANT: Generate "Sci-Fi Futurist" names for these personas (e.g., XAe-12, Nova Prime, Kael-7, Orion Pax, Lyra-9). Do NOT use traditional names.
        The personas should be diverse in their criticism (e.g., one focuses on ethics, one on accuracy, one on tone).`:r=`You are an expert Content Strategist & Sociologist in a futuristic sci-fi setting. 
        
        **Step 1: Analyze the Content Ecosystem**
        - First, determine the exact format and community context of the input.
        - Is it an Academic Paper? A Podcast? A Corporate Memo? A Viral Tweet?

        **Step 2: Define Archetypal Roles (CRITICAL)**
        - **If Niche/Structural:** Use specific structural roles.
          - E.g. Academic Paper -> "Reviewer #2", "Grant Committee Chair", "PhD Student".
          - E.g. Code PR -> "Senior Maintainer", "Junior Dev", "Security Auditor".
        - **If General/Broadcast:** Use engagement-based roles.
          - E.g. Podcast -> "Commuter Listener", "Superfan", "Hate-Listener".
          - E.g. News Article -> "Headline Skimmer", "Deep Diver", "Skeptic".

        **Step 3: Construct Profiles**
        1. **Identify the 'Job to be Done'**: What is the reader trying to accomplish?
        2. **Infer Psychographics**: What are their anxieties, values, and worldviews?
        3. **Determine the Stake**: What do they stand to gain or lose?
        4. **Generate Personas**: Create exactly ${s} personas that embody these specific roles.
        
        IMPORTANT: Generate "Sci-Fi Futurist" names for these personas (e.g., XAe-12, Nova Prime).
        The 'role' field must be the archetypal role (e.g. "Reviewer #2"), not a generic job title.`;const l=`
    Analyze the following content and generate ${s} detailed user personas.
    
    Content Preview:
    ${n.slice(0,2e3)}...
    `,{object:c}=await Xh({model:i,schema:K({personas:we(K({id:F(),name:F().describe("Space-age futurist name (e.g. XAe-12)"),role:F().describe("The specific archetype acting on this content (e.g. 'Reviewer #2' or 'Podcast Listener')"),description:F(),background:F(),goals:F(),painPoints:we(F()),archetype:F().describe("The general category this persona belongs to")})).length(s)}),prompt:`${r}
${l}`});return c.personas},M$=async(n,e)=>{if(e==="test-key"||e==="test-key-123"||e&&e.startsWith("test-"))return console.log("Using MOCK MODE for generateWildcard"),await new Promise(r=>setTimeout(r,800)),{id:`wildcard-mock-${Date.now()}`,name:"Mock Wildcard",role:"Chaos Agent",description:"A completely random perspective.",background:"Appeared from the void.",goals:"To disrupt the status quo.",painPoints:["Predictability","Boredom"],archetype:"Wildcard"};const t=Wh(e),i=`Create 1 "Wildcard" user persona who is completely unrelated to the content's target audience or represents an extreme outlier.
    This person should have a distinct background that leads to a surprising or unconventional perspective.
    
    Content Preview:
    ${n.slice(0,1e3)}...
    `,{object:s}=await Xh({model:t,schema:K({persona:K({id:F(),name:F(),role:F(),description:F(),background:F(),goals:F(),painPoints:we(F()),archetype:Fe("Wildcard")})}),prompt:i});return{...s.persona,id:`wildcard-${Date.now()}`}},R$=async(n,e,t,i="standard")=>{if(t==="test-key"||t==="test-key-123"||t&&t.startsWith("test-")||t.startsWith("AIzaSyDummy"))return console.log("Using MOCK MODE for simulateInterview"),await new Promise(p=>setTimeout(p,800)),{resonanceScore:Math.floor(Math.random()*4)+6,summary:`This is a mock summary for ${e.name}. The content was analyzed in test mode.`,strengths:["Mock strength 1","Mock strength 2"],weaknesses:["Mock weakness 1","Mock weakness 2"],confusionPoints:["Mock confusion 1"],suggestions:["Mock suggestion 1"],personaName:e.name,personaRole:e.role};const s=Wh(t),d=`${`You are ${e.name}, a ${e.role}. 
  Background: ${e.background}
  Goals: ${e.goals}
  Background: ${e.background}
  Goals: ${e.goals}
  Pain Points: ${e.painPoints.join(", ")}`}

  ${i==="crisis"?`
  Read the following content and provide your CRITICAL feedback.
  You are looking for reasons to criticize, misunderstand, or mock this content.
  Focus on:
  1. What is the worst possible interpretation of this text?
  2. Which phrases could be taken out of context to look bad?
  3. Does this sound tone-deaf, arrogant, or evasive?
  4. If you had to write a negative tweet/headline about this, what would it be?
  5. What triggers your skepticism?`:`
  Adopt your persona's mindset completely. Do not be polite; be brutally honest based on your specific background and pain points.

  **Phase 1: Visceral Reaction (System 1 Thinking)**
  - What is your immediate emotional response? (Bored, Intrigued, Confused, etc.)
  - What is the very first thing that caught your eye?

  **Phase 2: Cognitive Analysis (System 2 Thinking)**
  - **Clarity Check**: Highlight any specific sentence that feels jargon-heavy or vague.
  - **Skepticism Check**: Which claim do you doubt? Why?
  - **Value Check**: Does this actually help you achieve your Goals?

  **Phase 3: The 'Vibe Check'**
  - On a scale of 1-10, how much does this 'resonate' with your personal frequency?
  - If you had to describe this content to a peer using only emojis/slang, what would you use?
  - What is the strongest point for you?
  - What is the weakest point?`}

  Content:
  ${n.slice(0,2e3)}...
  `,{object:h}=await Xh({model:s,schema:K({resonanceScore:ke().min(0).max(10),summary:F(),strengths:we(F()),weaknesses:we(F()),confusionPoints:we(F()),suggestions:we(F())}),prompt:d});return{...h,personaName:e.name,personaRole:e.role}},D$=async(n,e,t="standard")=>{if(e==="test-key"||e==="test-key-123"||e&&e.startsWith("test-")||e.startsWith("AIzaSyDummy"))return console.log("Using MOCK MODE for synthesizeReport"),await new Promise(l=>setTimeout(l,1500)),{executiveSummary:"This is a mock executive summary generated for testing purposes. The content appears to be well-structured but requires further refinement for specific audiences.",overallScore:7.5,audienceAlignment:[{audience:"Tech Enthusiasts",alignmentScore:8,keyTakeaway:"Strong technical depth."},{audience:"Business Leaders",alignmentScore:6,keyTakeaway:"Needs more ROI focus."}],topStrengths:["Clear vision","Innovative approach"],topWeaknesses:["Lack of concrete examples","Jargon usage"],actionableRecommendations:[{area:"Tone",suggestion:"Soften the language.",impact:"Medium"}],soundbites:{positive:["The future is now."],negative:["This might be too risky."]},toneAnalysis:{defensiveness:3,corporatespeak:6,empathy:7,clarity:8},goNoGo:{decision:"GO",confidenceScore:85,reasoning:"The content is solid and mocks are passing."}};const i=Wh(e),s=`Analyze the following feedback from ${n.length} different personas.
  
  Synthesize the interview data using **Thematic Analysis**.
  1. **Pattern Recognition**: Identify recurring friction points across multiple personas.
  2. **Divergence Analysis**: Where do personas strongly disagree? (e.g. Techies love it, Executives hate it).
  3. **Segmented Insights**: Group findings by 'Psychographic' alignment.
  4. **Strategic Recommendations**: Provide actionable fixes using the 'Start, Stop, Continue' framework.

  Synthesize into a comprehensive ${t==="crisis"?"CRISIS RISK ASSESSMENT":"Resonance"} report.
  ${t==="crisis"?"Focus heavily on potential backlash, PR risks, and negative interpretations.":"Identify common patterns, conflicting opinions, and overall recommendations."}

  Feedback Data:
  ${JSON.stringify(n,null,2)}
  `,{object:r}=await Xh({model:i,schema:K({executiveSummary:F(),overallScore:ke(),audienceAlignment:we(K({audience:F(),alignmentScore:ke(),keyTakeaway:F()})),topStrengths:we(F()),topWeaknesses:we(F()),actionableRecommendations:we(K({area:F(),suggestion:F(),impact:Wt(["High","Medium","Low"])})),soundbites:K({positive:we(F()).describe("Best quote-worthy phrases from the content"),negative:we(F()).describe("Most dangerous/clippable phrases that could be taken out of context")}),toneAnalysis:K({defensiveness:ke().min(1).max(10).describe("1=Open, 10=Defensive"),corporatespeak:ke().min(1).max(10).describe("1=Human, 10=Corporate Robot"),empathy:ke().min(1).max(10).describe("1=Cold, 10=Empathetic"),clarity:ke().min(1).max(10).describe("1=Confusing, 10=Crystal Clear")}),goNoGo:K({decision:Wt(["GO","NO-GO","CAUTION"]),confidenceScore:ke().min(0).max(100),reasoning:F()})}),prompt:s});return r};function O$(n,e){let t;try{t=n()}catch{return}return{getItem:s=>{var r;const l=d=>d===null?null:JSON.parse(d,void 0),c=(r=t.getItem(s))!=null?r:null;return c instanceof Promise?c.then(l):l(c)},setItem:(s,r)=>t.setItem(s,JSON.stringify(r,void 0)),removeItem:s=>t.removeItem(s)}}const Jg=n=>e=>{try{const t=n(e);return t instanceof Promise?t:{then(i){return Jg(i)(t)},catch(i){return this}}}catch(t){return{then(i){return this},catch(i){return Jg(i)(t)}}}},N$=(n,e)=>(t,i,s)=>{let r={storage:O$(()=>window.localStorage),partialize:A=>A,version:0,merge:(A,S)=>({...S,...A}),...e},l=!1,c=0;const d=new Set,h=new Set;let p=r.storage;if(!p)return n((...A)=>{console.warn(`[zustand persist middleware] Unable to update item '${r.name}', the given storage is currently unavailable.`),t(...A)},i,s);const m=()=>{const A=r.partialize({...i()});return p.setItem(r.name,{state:A,version:r.version})},v=s.setState;s.setState=(A,S)=>(v(A,S),m());const b=n((...A)=>(t(...A),m()),i,s);s.getInitialState=()=>b;let w;const x=()=>{var A,S;if(!p)return;const T=++c;l=!1,d.forEach(M=>{var R;return M((R=i())!=null?R:b)});const E=((S=r.onRehydrateStorage)==null?void 0:S.call(r,(A=i())!=null?A:b))||void 0;return Jg(p.getItem.bind(p))(r.name).then(M=>{if(M)if(typeof M.version=="number"&&M.version!==r.version){if(r.migrate){const R=r.migrate(M.state,M.version);return R instanceof Promise?R.then(O=>[!0,O]):[!0,R]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,M.state];return[!1,void 0]}).then(M=>{var R;if(T!==c)return;const[O,L]=M;if(w=r.merge(L,(R=i())!=null?R:b),t(w,!0),O)return m()}).then(()=>{T===c&&(E?.(w,void 0),w=i(),l=!0,h.forEach(M=>M(w)))}).catch(M=>{T===c&&E?.(void 0,M)})};return s.persist={setOptions:A=>{r={...r,...A},A.storage&&(p=A.storage)},clearStorage:()=>{p?.removeItem(r.name)},getOptions:()=>r,rehydrate:()=>x(),hasHydrated:()=>l,onHydrate:A=>(d.add(A),()=>{d.delete(A)}),onFinishHydration:A=>(h.add(A),()=>{h.delete(A)})},r.skipHydration||x(),w||b},P$=N$,Sh=eC()(P$((n,e)=>({googleApiKey:"",setGoogleApiKey:t=>n({googleApiKey:t}),getApiKey:()=>e().googleApiKey}),{name:"content-resonator-settings"})),I$=""+new URL("avatar1-DkDtWF_2.png",import.meta.url).href,L$=""+new URL("avatar2-CmDnZOPR.png",import.meta.url).href,z$=""+new URL("avatar3--8Z-uMV3.png",import.meta.url).href,j$=""+new URL("avatar4-C9DeLBDc.png",import.meta.url).href,B$=""+new URL("avatar5-BhAahwh5.png",import.meta.url).href,F$=""+new URL("avatar6-5dW0ZdE4.png",import.meta.url).href,ig=[I$,L$,z$,j$,B$,F$],la=eC(n=>({currentStep:"api-key",content:"",contentType:"text",contentMode:"standard",generatedPersonas:[],selectedPersonas:[],interviewResults:[],finalReport:null,isGeneratingPersonas:!1,isGeneratingWildcard:!1,isAnalyzing:!1,setStep:e=>n({currentStep:e}),setContent:(e,t)=>n({content:e,contentType:t}),setContentMode:e=>n({contentMode:e}),setGeneratedPersonas:e=>n({generatedPersonas:e}),addPersona:e=>n(t=>({generatedPersonas:[...t.generatedPersonas,e]})),togglePersonaSelection:e=>n(t=>t.selectedPersonas.find(s=>s.id===e.id)?{selectedPersonas:t.selectedPersonas.filter(s=>s.id!==e.id)}:{selectedPersonas:[...t.selectedPersonas,e]}),setInterviewResults:e=>n({interviewResults:e}),setFinalReport:e=>n({finalReport:e}),setIsGeneratingPersonas:e=>n({isGeneratingPersonas:e}),generateInitialPersonas:async()=>{const{content:e,contentMode:t,generatedPersonas:i,isGeneratingPersonas:s}=la.getState(),r=Sh.getState().googleApiKey;if(!(!e||!r||i.length>0||s)){n({isGeneratingPersonas:!0});try{const l=await k$(e,r,t),c=[...ig].sort(()=>.5-Math.random()),d=l.map((h,p)=>({...h,avatar:c[p%c.length]}));n({generatedPersonas:d})}catch(l){console.error("Persona generation failed:",l)}finally{n({isGeneratingPersonas:!1})}}},generateWildcardPersona:async()=>{const{content:e,addPersona:t,isGeneratingWildcard:i}=la.getState(),s=Sh.getState().googleApiKey;if(!(!e||!s||i)){n({isGeneratingWildcard:!0});try{const r=await M$(e,s),l=ig[Math.floor(Math.random()*ig.length)],c={...r,avatar:l};t(c)}catch(r){console.error("Wildcard generation failed:",r)}finally{n({isGeneratingWildcard:!1})}}},setIsAnalyzing:e=>n({isAnalyzing:e}),reset:()=>n({currentStep:"content-input",content:"",contentType:"text",contentMode:"standard",generatedPersonas:[],selectedPersonas:[],interviewResults:[],finalReport:null,isGeneratingPersonas:!1,isGeneratingWildcard:!1,isAnalyzing:!1})}));function OM(n){var e,t,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=OM(n[e]))&&(i&&(i+=" "),i+=t)}else for(t in n)n[t]&&(i&&(i+=" "),i+=t);return i}function NM(){for(var n,e,t=0,i="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=OM(n))&&(i&&(i+=" "),i+=e);return i}const U$=(n,e)=>{const t=new Array(n.length+e.length);for(let i=0;i<n.length;i++)t[i]=n[i];for(let i=0;i<e.length;i++)t[n.length+i]=e[i];return t},V$=(n,e)=>({classGroupId:n,validator:e}),PM=(n=new Map,e=null,t)=>({nextPart:n,validators:e,classGroupId:t}),_h="-",l_=[],$$="arbitrary..",H$=n=>{const e=q$(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:i}=n;return{getClassGroupId:l=>{if(l.startsWith("[")&&l.endsWith("]"))return G$(l);const c=l.split(_h),d=c[0]===""&&c.length>1?1:0;return IM(c,d,e)},getConflictingClassGroupIds:(l,c)=>{if(c){const d=i[l],h=t[l];return d?h?U$(h,d):d:h||l_}return t[l]||l_}}},IM=(n,e,t)=>{if(n.length-e===0)return t.classGroupId;const s=n[e],r=t.nextPart.get(s);if(r){const h=IM(n,e+1,r);if(h)return h}const l=t.validators;if(l===null)return;const c=e===0?n.join(_h):n.slice(e).join(_h),d=l.length;for(let h=0;h<d;h++){const p=l[h];if(p.validator(c))return p.classGroupId}},G$=n=>n.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=n.slice(1,-1),t=e.indexOf(":"),i=e.slice(0,t);return i?$$+i:void 0})(),q$=n=>{const{theme:e,classGroups:t}=n;return Z$(t,e)},Z$=(n,e)=>{const t=PM();for(const i in n){const s=n[i];by(s,t,i,e)}return t},by=(n,e,t,i)=>{const s=n.length;for(let r=0;r<s;r++){const l=n[r];Y$(l,e,t,i)}},Y$=(n,e,t,i)=>{if(typeof n=="string"){X$(n,e,t);return}if(typeof n=="function"){W$(n,e,t,i);return}K$(n,e,t,i)},X$=(n,e,t)=>{const i=n===""?e:LM(e,n);i.classGroupId=t},W$=(n,e,t,i)=>{if(J$(n)){by(n(i),e,t,i);return}e.validators===null&&(e.validators=[]),e.validators.push(V$(t,n))},K$=(n,e,t,i)=>{const s=Object.entries(n),r=s.length;for(let l=0;l<r;l++){const[c,d]=s[l];by(d,LM(e,c),t,i)}},LM=(n,e)=>{let t=n;const i=e.split(_h),s=i.length;for(let r=0;r<s;r++){const l=i[r];let c=t.nextPart.get(l);c||(c=PM(),t.nextPart.set(l,c)),t=c}return t},J$=n=>"isThemeGetter"in n&&n.isThemeGetter===!0,Q$=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=Object.create(null),i=Object.create(null);const s=(r,l)=>{t[r]=l,e++,e>n&&(e=0,i=t,t=Object.create(null))};return{get(r){let l=t[r];if(l!==void 0)return l;if((l=i[r])!==void 0)return s(r,l),l},set(r,l){r in t?t[r]=l:s(r,l)}}},Qg="!",c_=":",eH=[],u_=(n,e,t,i,s)=>({modifiers:n,hasImportantModifier:e,baseClassName:t,maybePostfixModifierPosition:i,isExternal:s}),tH=n=>{const{prefix:e,experimentalParseClassName:t}=n;let i=s=>{const r=[];let l=0,c=0,d=0,h;const p=s.length;for(let x=0;x<p;x++){const A=s[x];if(l===0&&c===0){if(A===c_){r.push(s.slice(d,x)),d=x+1;continue}if(A==="/"){h=x;continue}}A==="["?l++:A==="]"?l--:A==="("?c++:A===")"&&c--}const m=r.length===0?s:s.slice(d);let v=m,b=!1;m.endsWith(Qg)?(v=m.slice(0,-1),b=!0):m.startsWith(Qg)&&(v=m.slice(1),b=!0);const w=h&&h>d?h-d:void 0;return u_(r,b,v,w)};if(e){const s=e+c_,r=i;i=l=>l.startsWith(s)?r(l.slice(s.length)):u_(eH,!1,l,void 0,!0)}if(t){const s=i;i=r=>t({className:r,parseClassName:s})}return i},nH=n=>{const e=new Map;return n.orderSensitiveModifiers.forEach((t,i)=>{e.set(t,1e6+i)}),t=>{const i=[];let s=[];for(let r=0;r<t.length;r++){const l=t[r],c=l[0]==="[",d=e.has(l);c||d?(s.length>0&&(s.sort(),i.push(...s),s=[]),i.push(l)):s.push(l)}return s.length>0&&(s.sort(),i.push(...s)),i}},iH=n=>({cache:Q$(n.cacheSize),parseClassName:tH(n),sortModifiers:nH(n),...H$(n)}),sH=/\s+/,aH=(n,e)=>{const{parseClassName:t,getClassGroupId:i,getConflictingClassGroupIds:s,sortModifiers:r}=e,l=[],c=n.trim().split(sH);let d="";for(let h=c.length-1;h>=0;h-=1){const p=c[h],{isExternal:m,modifiers:v,hasImportantModifier:b,baseClassName:w,maybePostfixModifierPosition:x}=t(p);if(m){d=p+(d.length>0?" "+d:d);continue}let A=!!x,S=i(A?w.substring(0,x):w);if(!S){if(!A){d=p+(d.length>0?" "+d:d);continue}if(S=i(w),!S){d=p+(d.length>0?" "+d:d);continue}A=!1}const T=v.length===0?"":v.length===1?v[0]:r(v).join(":"),E=b?T+Qg:T,M=E+S;if(l.indexOf(M)>-1)continue;l.push(M);const R=s(S,A);for(let O=0;O<R.length;++O){const L=R[O];l.push(E+L)}d=p+(d.length>0?" "+d:d)}return d},rH=(...n)=>{let e=0,t,i,s="";for(;e<n.length;)(t=n[e++])&&(i=zM(t))&&(s&&(s+=" "),s+=i);return s},zM=n=>{if(typeof n=="string")return n;let e,t="";for(let i=0;i<n.length;i++)n[i]&&(e=zM(n[i]))&&(t&&(t+=" "),t+=e);return t},oH=(n,...e)=>{let t,i,s,r;const l=d=>{const h=e.reduce((p,m)=>m(p),n());return t=iH(h),i=t.cache.get,s=t.cache.set,r=c,c(d)},c=d=>{const h=i(d);if(h)return h;const p=aH(d,t);return s(d,p),p};return r=l,(...d)=>r(rH(...d))},lH=[],hn=n=>{const e=t=>t[n]||lH;return e.isThemeGetter=!0,e},jM=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,BM=/^\((?:(\w[\w-]*):)?(.+)\)$/i,cH=/^\d+\/\d+$/,uH=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,dH=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,hH=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,fH=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,pH=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ko=n=>cH.test(n),Be=n=>!!n&&!Number.isNaN(Number(n)),Ia=n=>!!n&&Number.isInteger(Number(n)),sg=n=>n.endsWith("%")&&Be(n.slice(0,-1)),Ws=n=>uH.test(n),FM=()=>!0,mH=n=>dH.test(n)&&!hH.test(n),xy=()=>!1,gH=n=>fH.test(n),vH=n=>pH.test(n),yH=n=>!be(n)&&!xe(n),bH=n=>Xa(n,$M,xy),be=n=>jM.test(n),yr=n=>Xa(n,HM,mH),d_=n=>Xa(n,CH,Be),xH=n=>Xa(n,qM,FM),wH=n=>Xa(n,GM,xy),h_=n=>Xa(n,UM,xy),AH=n=>Xa(n,VM,vH),Rd=n=>Xa(n,ZM,gH),xe=n=>BM.test(n),oc=n=>Lr(n,HM),SH=n=>Lr(n,GM),f_=n=>Lr(n,UM),_H=n=>Lr(n,$M),EH=n=>Lr(n,VM),Dd=n=>Lr(n,ZM,!0),TH=n=>Lr(n,qM,!0),Xa=(n,e,t)=>{const i=jM.exec(n);return i?i[1]?e(i[1]):t(i[2]):!1},Lr=(n,e,t=!1)=>{const i=BM.exec(n);return i?i[1]?e(i[1]):t:!1},UM=n=>n==="position"||n==="percentage",VM=n=>n==="image"||n==="url",$M=n=>n==="length"||n==="size"||n==="bg-size",HM=n=>n==="length",CH=n=>n==="number",GM=n=>n==="family-name",qM=n=>n==="number"||n==="weight",ZM=n=>n==="shadow",kH=()=>{const n=hn("color"),e=hn("font"),t=hn("text"),i=hn("font-weight"),s=hn("tracking"),r=hn("leading"),l=hn("breakpoint"),c=hn("container"),d=hn("spacing"),h=hn("radius"),p=hn("shadow"),m=hn("inset-shadow"),v=hn("text-shadow"),b=hn("drop-shadow"),w=hn("blur"),x=hn("perspective"),A=hn("aspect"),S=hn("ease"),T=hn("animate"),E=()=>["auto","avoid","all","avoid-page","page","left","right","column"],M=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],R=()=>[...M(),xe,be],O=()=>["auto","hidden","clip","visible","scroll"],L=()=>["auto","contain","none"],D=()=>[xe,be,d],$=()=>[ko,"full","auto",...D()],ee=()=>[Ia,"none","subgrid",xe,be],X=()=>["auto",{span:["full",Ia,xe,be]},Ia,xe,be],le=()=>[Ia,"auto",xe,be],de=()=>["auto","min","max","fr",xe,be],ce=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],fe=()=>["start","end","center","stretch","center-safe","end-safe"],N=()=>["auto",...D()],U=()=>[ko,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...D()],B=()=>[n,xe,be],se=()=>[...M(),f_,h_,{position:[xe,be]}],ve=()=>["no-repeat",{repeat:["","x","y","space","round"]}],P=()=>["auto","cover","contain",_H,bH,{size:[xe,be]}],q=()=>[sg,oc,yr],Z=()=>["","none","full",h,xe,be],ne=()=>["",Be,oc,yr],ae=()=>["solid","dashed","dotted","double"],pe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],oe=()=>[Be,sg,f_,h_],Ee=()=>["","none",w,xe,be],De=()=>["none",Be,xe,be],Nt=()=>["none",Be,xe,be],wt=()=>[Be,xe,be],ft=()=>[ko,"full",...D()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Ws],breakpoint:[Ws],color:[FM],container:[Ws],"drop-shadow":[Ws],ease:["in","out","in-out"],font:[yH],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Ws],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Ws],shadow:[Ws],spacing:["px",Be],text:[Ws],"text-shadow":[Ws],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",ko,be,xe,A]}],container:["container"],columns:[{columns:[Be,be,xe,c]}],"break-after":[{"break-after":E()}],"break-before":[{"break-before":E()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:R()}],overflow:[{overflow:O()}],"overflow-x":[{"overflow-x":O()}],"overflow-y":[{"overflow-y":O()}],overscroll:[{overscroll:L()}],"overscroll-x":[{"overscroll-x":L()}],"overscroll-y":[{"overscroll-y":L()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:$()}],"inset-x":[{"inset-x":$()}],"inset-y":[{"inset-y":$()}],start:[{start:$()}],end:[{end:$()}],top:[{top:$()}],right:[{right:$()}],bottom:[{bottom:$()}],left:[{left:$()}],visibility:["visible","invisible","collapse"],z:[{z:[Ia,"auto",xe,be]}],basis:[{basis:[ko,"full","auto",c,...D()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Be,ko,"auto","initial","none",be]}],grow:[{grow:["",Be,xe,be]}],shrink:[{shrink:["",Be,xe,be]}],order:[{order:[Ia,"first","last","none",xe,be]}],"grid-cols":[{"grid-cols":ee()}],"col-start-end":[{col:X()}],"col-start":[{"col-start":le()}],"col-end":[{"col-end":le()}],"grid-rows":[{"grid-rows":ee()}],"row-start-end":[{row:X()}],"row-start":[{"row-start":le()}],"row-end":[{"row-end":le()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":de()}],"auto-rows":[{"auto-rows":de()}],gap:[{gap:D()}],"gap-x":[{"gap-x":D()}],"gap-y":[{"gap-y":D()}],"justify-content":[{justify:[...ce(),"normal"]}],"justify-items":[{"justify-items":[...fe(),"normal"]}],"justify-self":[{"justify-self":["auto",...fe()]}],"align-content":[{content:["normal",...ce()]}],"align-items":[{items:[...fe(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...fe(),{baseline:["","last"]}]}],"place-content":[{"place-content":ce()}],"place-items":[{"place-items":[...fe(),"baseline"]}],"place-self":[{"place-self":["auto",...fe()]}],p:[{p:D()}],px:[{px:D()}],py:[{py:D()}],ps:[{ps:D()}],pe:[{pe:D()}],pt:[{pt:D()}],pr:[{pr:D()}],pb:[{pb:D()}],pl:[{pl:D()}],m:[{m:N()}],mx:[{mx:N()}],my:[{my:N()}],ms:[{ms:N()}],me:[{me:N()}],mt:[{mt:N()}],mr:[{mr:N()}],mb:[{mb:N()}],ml:[{ml:N()}],"space-x":[{"space-x":D()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":D()}],"space-y-reverse":["space-y-reverse"],size:[{size:U()}],w:[{w:[c,"screen",...U()]}],"min-w":[{"min-w":[c,"screen","none",...U()]}],"max-w":[{"max-w":[c,"screen","none","prose",{screen:[l]},...U()]}],h:[{h:["screen","lh",...U()]}],"min-h":[{"min-h":["screen","lh","none",...U()]}],"max-h":[{"max-h":["screen","lh",...U()]}],"font-size":[{text:["base",t,oc,yr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[i,TH,xH]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",sg,be]}],"font-family":[{font:[SH,wH,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,xe,be]}],"line-clamp":[{"line-clamp":[Be,"none",xe,d_]}],leading:[{leading:[r,...D()]}],"list-image":[{"list-image":["none",xe,be]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",xe,be]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:B()}],"text-color":[{text:B()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ae(),"wavy"]}],"text-decoration-thickness":[{decoration:[Be,"from-font","auto",xe,yr]}],"text-decoration-color":[{decoration:B()}],"underline-offset":[{"underline-offset":[Be,"auto",xe,be]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:D()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",xe,be]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",xe,be]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:se()}],"bg-repeat":[{bg:ve()}],"bg-size":[{bg:P()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Ia,xe,be],radial:["",xe,be],conic:[Ia,xe,be]},EH,AH]}],"bg-color":[{bg:B()}],"gradient-from-pos":[{from:q()}],"gradient-via-pos":[{via:q()}],"gradient-to-pos":[{to:q()}],"gradient-from":[{from:B()}],"gradient-via":[{via:B()}],"gradient-to":[{to:B()}],rounded:[{rounded:Z()}],"rounded-s":[{"rounded-s":Z()}],"rounded-e":[{"rounded-e":Z()}],"rounded-t":[{"rounded-t":Z()}],"rounded-r":[{"rounded-r":Z()}],"rounded-b":[{"rounded-b":Z()}],"rounded-l":[{"rounded-l":Z()}],"rounded-ss":[{"rounded-ss":Z()}],"rounded-se":[{"rounded-se":Z()}],"rounded-ee":[{"rounded-ee":Z()}],"rounded-es":[{"rounded-es":Z()}],"rounded-tl":[{"rounded-tl":Z()}],"rounded-tr":[{"rounded-tr":Z()}],"rounded-br":[{"rounded-br":Z()}],"rounded-bl":[{"rounded-bl":Z()}],"border-w":[{border:ne()}],"border-w-x":[{"border-x":ne()}],"border-w-y":[{"border-y":ne()}],"border-w-s":[{"border-s":ne()}],"border-w-e":[{"border-e":ne()}],"border-w-t":[{"border-t":ne()}],"border-w-r":[{"border-r":ne()}],"border-w-b":[{"border-b":ne()}],"border-w-l":[{"border-l":ne()}],"divide-x":[{"divide-x":ne()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ne()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ae(),"hidden","none"]}],"divide-style":[{divide:[...ae(),"hidden","none"]}],"border-color":[{border:B()}],"border-color-x":[{"border-x":B()}],"border-color-y":[{"border-y":B()}],"border-color-s":[{"border-s":B()}],"border-color-e":[{"border-e":B()}],"border-color-t":[{"border-t":B()}],"border-color-r":[{"border-r":B()}],"border-color-b":[{"border-b":B()}],"border-color-l":[{"border-l":B()}],"divide-color":[{divide:B()}],"outline-style":[{outline:[...ae(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Be,xe,be]}],"outline-w":[{outline:["",Be,oc,yr]}],"outline-color":[{outline:B()}],shadow:[{shadow:["","none",p,Dd,Rd]}],"shadow-color":[{shadow:B()}],"inset-shadow":[{"inset-shadow":["none",m,Dd,Rd]}],"inset-shadow-color":[{"inset-shadow":B()}],"ring-w":[{ring:ne()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:B()}],"ring-offset-w":[{"ring-offset":[Be,yr]}],"ring-offset-color":[{"ring-offset":B()}],"inset-ring-w":[{"inset-ring":ne()}],"inset-ring-color":[{"inset-ring":B()}],"text-shadow":[{"text-shadow":["none",v,Dd,Rd]}],"text-shadow-color":[{"text-shadow":B()}],opacity:[{opacity:[Be,xe,be]}],"mix-blend":[{"mix-blend":[...pe(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":pe()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Be]}],"mask-image-linear-from-pos":[{"mask-linear-from":oe()}],"mask-image-linear-to-pos":[{"mask-linear-to":oe()}],"mask-image-linear-from-color":[{"mask-linear-from":B()}],"mask-image-linear-to-color":[{"mask-linear-to":B()}],"mask-image-t-from-pos":[{"mask-t-from":oe()}],"mask-image-t-to-pos":[{"mask-t-to":oe()}],"mask-image-t-from-color":[{"mask-t-from":B()}],"mask-image-t-to-color":[{"mask-t-to":B()}],"mask-image-r-from-pos":[{"mask-r-from":oe()}],"mask-image-r-to-pos":[{"mask-r-to":oe()}],"mask-image-r-from-color":[{"mask-r-from":B()}],"mask-image-r-to-color":[{"mask-r-to":B()}],"mask-image-b-from-pos":[{"mask-b-from":oe()}],"mask-image-b-to-pos":[{"mask-b-to":oe()}],"mask-image-b-from-color":[{"mask-b-from":B()}],"mask-image-b-to-color":[{"mask-b-to":B()}],"mask-image-l-from-pos":[{"mask-l-from":oe()}],"mask-image-l-to-pos":[{"mask-l-to":oe()}],"mask-image-l-from-color":[{"mask-l-from":B()}],"mask-image-l-to-color":[{"mask-l-to":B()}],"mask-image-x-from-pos":[{"mask-x-from":oe()}],"mask-image-x-to-pos":[{"mask-x-to":oe()}],"mask-image-x-from-color":[{"mask-x-from":B()}],"mask-image-x-to-color":[{"mask-x-to":B()}],"mask-image-y-from-pos":[{"mask-y-from":oe()}],"mask-image-y-to-pos":[{"mask-y-to":oe()}],"mask-image-y-from-color":[{"mask-y-from":B()}],"mask-image-y-to-color":[{"mask-y-to":B()}],"mask-image-radial":[{"mask-radial":[xe,be]}],"mask-image-radial-from-pos":[{"mask-radial-from":oe()}],"mask-image-radial-to-pos":[{"mask-radial-to":oe()}],"mask-image-radial-from-color":[{"mask-radial-from":B()}],"mask-image-radial-to-color":[{"mask-radial-to":B()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":M()}],"mask-image-conic-pos":[{"mask-conic":[Be]}],"mask-image-conic-from-pos":[{"mask-conic-from":oe()}],"mask-image-conic-to-pos":[{"mask-conic-to":oe()}],"mask-image-conic-from-color":[{"mask-conic-from":B()}],"mask-image-conic-to-color":[{"mask-conic-to":B()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:se()}],"mask-repeat":[{mask:ve()}],"mask-size":[{mask:P()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",xe,be]}],filter:[{filter:["","none",xe,be]}],blur:[{blur:Ee()}],brightness:[{brightness:[Be,xe,be]}],contrast:[{contrast:[Be,xe,be]}],"drop-shadow":[{"drop-shadow":["","none",b,Dd,Rd]}],"drop-shadow-color":[{"drop-shadow":B()}],grayscale:[{grayscale:["",Be,xe,be]}],"hue-rotate":[{"hue-rotate":[Be,xe,be]}],invert:[{invert:["",Be,xe,be]}],saturate:[{saturate:[Be,xe,be]}],sepia:[{sepia:["",Be,xe,be]}],"backdrop-filter":[{"backdrop-filter":["","none",xe,be]}],"backdrop-blur":[{"backdrop-blur":Ee()}],"backdrop-brightness":[{"backdrop-brightness":[Be,xe,be]}],"backdrop-contrast":[{"backdrop-contrast":[Be,xe,be]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Be,xe,be]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Be,xe,be]}],"backdrop-invert":[{"backdrop-invert":["",Be,xe,be]}],"backdrop-opacity":[{"backdrop-opacity":[Be,xe,be]}],"backdrop-saturate":[{"backdrop-saturate":[Be,xe,be]}],"backdrop-sepia":[{"backdrop-sepia":["",Be,xe,be]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":D()}],"border-spacing-x":[{"border-spacing-x":D()}],"border-spacing-y":[{"border-spacing-y":D()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",xe,be]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Be,"initial",xe,be]}],ease:[{ease:["linear","initial",S,xe,be]}],delay:[{delay:[Be,xe,be]}],animate:[{animate:["none",T,xe,be]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[x,xe,be]}],"perspective-origin":[{"perspective-origin":R()}],rotate:[{rotate:De()}],"rotate-x":[{"rotate-x":De()}],"rotate-y":[{"rotate-y":De()}],"rotate-z":[{"rotate-z":De()}],scale:[{scale:Nt()}],"scale-x":[{"scale-x":Nt()}],"scale-y":[{"scale-y":Nt()}],"scale-z":[{"scale-z":Nt()}],"scale-3d":["scale-3d"],skew:[{skew:wt()}],"skew-x":[{"skew-x":wt()}],"skew-y":[{"skew-y":wt()}],transform:[{transform:[xe,be,"","none","gpu","cpu"]}],"transform-origin":[{origin:R()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:ft()}],"translate-x":[{"translate-x":ft()}],"translate-y":[{"translate-y":ft()}],"translate-z":[{"translate-z":ft()}],"translate-none":["translate-none"],accent:[{accent:B()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:B()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",xe,be]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":D()}],"scroll-mx":[{"scroll-mx":D()}],"scroll-my":[{"scroll-my":D()}],"scroll-ms":[{"scroll-ms":D()}],"scroll-me":[{"scroll-me":D()}],"scroll-mt":[{"scroll-mt":D()}],"scroll-mr":[{"scroll-mr":D()}],"scroll-mb":[{"scroll-mb":D()}],"scroll-ml":[{"scroll-ml":D()}],"scroll-p":[{"scroll-p":D()}],"scroll-px":[{"scroll-px":D()}],"scroll-py":[{"scroll-py":D()}],"scroll-ps":[{"scroll-ps":D()}],"scroll-pe":[{"scroll-pe":D()}],"scroll-pt":[{"scroll-pt":D()}],"scroll-pr":[{"scroll-pr":D()}],"scroll-pb":[{"scroll-pb":D()}],"scroll-pl":[{"scroll-pl":D()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",xe,be]}],fill:[{fill:["none",...B()]}],"stroke-w":[{stroke:[Be,oc,yr,d_]}],stroke:[{stroke:["none",...B()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},MH=oH(kH);function Et(...n){return MH(NM(n))}const YM=(...n)=>n.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim();const RH=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const DH=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase());const p_=n=>{const e=DH(n);return e.charAt(0).toUpperCase()+e.slice(1)};var OH={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const NH=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};const PH=I.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:s="",children:r,iconNode:l,...c},d)=>I.createElement("svg",{ref:d,...OH,width:e,height:e,stroke:n,strokeWidth:i?Number(t)*24/Number(e):t,className:YM("lucide",s),...!r&&!NH(c)&&{"aria-hidden":"true"},...c},[...l.map(([h,p])=>I.createElement(h,p)),...Array.isArray(r)?r:[r]]));const Ut=(n,e)=>{const t=I.forwardRef(({className:i,...s},r)=>I.createElement(PH,{ref:r,iconNode:e,className:YM(`lucide-${RH(p_(n))}`,`lucide-${n}`,i),...s}));return t.displayName=p_(n),t};const IH=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],XM=Ut("activity",IH);const LH=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],wy=Ut("arrow-right",LH);const zH=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],jH=Ut("bot",zH);const BH=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],FH=Ut("brain-circuit",BH);const UH=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],VH=Ut("check",UH);const $H=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],WM=Ut("circle-check",$H);const HH=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],GH=Ut("circle-x",HH);const qH=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Ay=Ut("file-text",qH);const ZH=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],KM=Ut("key-round",ZH);const YH=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],XH=Ut("layout-dashboard",YH);const WH=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],KH=Ut("lightbulb",WH);const JH=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Eh=Ut("loader-circle",JH);const QH=[["path",{d:"M20.341 6.484A10 10 0 0 1 10.266 21.85",key:"1enhxb"}],["path",{d:"M3.659 17.516A10 10 0 0 1 13.74 2.152",key:"1crzgf"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["circle",{cx:"19",cy:"5",r:"2",key:"mhkx31"}],["circle",{cx:"5",cy:"19",r:"2",key:"v8kfzx"}]],eG=Ut("orbit",QH);const tG=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],nG=Ut("plus",tG);const iG=[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]],sG=Ut("quote",iG);const aG=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],rG=Ut("refresh-cw",aG);const oG=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],JM=Ut("sparkles",oG);const lG=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],cG=Ut("target",lG);const uG=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],QM=Ut("triangle-alert",uG);const dG=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],hG=Ut("type",dG);const fG=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],e2=Ut("upload",fG);const pG=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],mG=Ut("users",pG);const gG=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],vG=Ut("zap",gG),ag=[{id:"api-key",label:"Connect",icon:KM},{id:"content-input",label:"Input",icon:Ay},{id:"persona-selection",label:"Personas",icon:mG},{id:"analysis",label:"Analysis",icon:vG},{id:"report",label:"Report",icon:XH}];function yG({children:n}){const{currentStep:e}=la(),t=ag.findIndex(r=>r.id===e),i={WebkitAppRegion:"drag"},s={WebkitAppRegion:"no-drag"};return k.jsxs("div",{className:"app-shell h-screen w-full text-foreground overflow-hidden",children:[k.jsx("div",{className:"mesh-grid"}),k.jsx("div",{className:"fixed top-0 left-0 right-0 h-9 z-50",style:i}),k.jsxs("div",{className:"relative z-10 h-full flex",children:[k.jsx("aside",{className:"hidden lg:flex w-72 p-5",style:s,children:k.jsxs("div",{className:"surface-panel w-full p-5 flex flex-col",children:[k.jsxs("div",{className:"flex items-center gap-3 pb-6 border-b border-border/70",children:[k.jsx("div",{className:"size-11 rounded-xl bg-gradient-to-br from-primary to-accent text-white flex items-center justify-center font-bold text-lg soft-ring",children:"V"}),k.jsxs("div",{children:[k.jsx("p",{className:"text-xs uppercase tracking-[0.22em] text-muted-foreground",children:"Content Resonator"}),k.jsx("h1",{className:"text-lg font-serif",children:"Vibecheck OS"})]})]}),k.jsx("div",{className:"mt-6 space-y-2",children:ag.map((r,l)=>{const c=r.icon,d=l===t,h=l<t;return k.jsx("div",{className:Et("rounded-xl border px-3 py-3 transition-all duration-200",d?"bg-primary/10 border-primary/35 text-foreground":h?"bg-accent/10 border-accent/30":"bg-white/60 border-border/75 text-muted-foreground"),children:k.jsxs("div",{className:"flex items-center gap-3",children:[k.jsx("div",{className:Et("size-8 rounded-lg flex items-center justify-center",d?"bg-primary text-white":h?"bg-accent text-white":"bg-secondary text-muted-foreground"),children:k.jsx(c,{className:"size-4"})}),k.jsxs("div",{children:[k.jsxs("p",{className:"text-xs uppercase tracking-[0.2em]",children:["Step ",l+1]}),k.jsx("p",{className:"text-sm font-semibold",children:r.label})]})]})},r.id)})})]})}),k.jsxs("main",{className:"flex-1 min-w-0 h-full overflow-auto",children:[k.jsxs("div",{className:"lg:hidden sticky top-0 z-40 px-4 pt-12 pb-3 bg-background/80 backdrop-blur-md border-b border-border/70",children:[k.jsxs("div",{className:"flex items-center justify-between",children:[k.jsx("h1",{className:"text-lg font-serif",children:"Vibecheck OS"}),k.jsxs("p",{className:"text-xs uppercase tracking-[0.2em] text-muted-foreground",children:["Step ",t+1,"/5"]})]}),k.jsx("div",{className:"mt-3 grid grid-cols-5 gap-1.5",children:ag.map((r,l)=>k.jsx("div",{className:Et("h-1.5 rounded-full",l<=t?"bg-primary":"bg-secondary")},r.id))})]}),k.jsx(Cs.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{duration:.35},className:"max-w-7xl mx-auto h-full px-4 pb-5 pt-4 lg:pt-14 lg:px-8 lg:pb-8",children:n})]})]})]})}function m_(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function Kh(...n){return e=>{let t=!1;const i=n.map(s=>{const r=m_(s,e);return!t&&typeof r=="function"&&(t=!0),r});if(t)return()=>{for(let s=0;s<i.length;s++){const r=i[s];typeof r=="function"?r():m_(n[s],null)}}}}function Th(...n){return I.useCallback(Kh(...n),n)}var bG=Symbol.for("react.lazy"),Ch=Av[" use ".trim().toString()];function xG(n){return typeof n=="object"&&n!==null&&"then"in n}function t2(n){return n!=null&&typeof n=="object"&&"$$typeof"in n&&n.$$typeof===bG&&"_payload"in n&&xG(n._payload)}function n2(n){const e=AG(n),t=I.forwardRef((i,s)=>{let{children:r,...l}=i;t2(r)&&typeof Ch=="function"&&(r=Ch(r._payload));const c=I.Children.toArray(r),d=c.find(_G);if(d){const h=d.props.children,p=c.map(m=>m===d?I.Children.count(h)>1?I.Children.only(null):I.isValidElement(h)?h.props.children:null:m);return k.jsx(e,{...l,ref:s,children:I.isValidElement(h)?I.cloneElement(h,void 0,p):null})}return k.jsx(e,{...l,ref:s,children:r})});return t.displayName=`${n}.Slot`,t}var wG=n2("Slot");function AG(n){const e=I.forwardRef((t,i)=>{let{children:s,...r}=t;if(t2(s)&&typeof Ch=="function"&&(s=Ch(s._payload)),I.isValidElement(s)){const l=TG(s),c=EG(r,s.props);return s.type!==I.Fragment&&(c.ref=i?Kh(i,l):l),I.cloneElement(s,c)}return I.Children.count(s)>1?I.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var SG=Symbol("radix.slottable");function _G(n){return I.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===SG}function EG(n,e){const t={...e};for(const i in e){const s=n[i],r=e[i];/^on[A-Z]/.test(i)?s&&r?t[i]=(...c)=>{const d=r(...c);return s(...c),d}:s&&(t[i]=s):i==="style"?t[i]={...s,...r}:i==="className"&&(t[i]=[s,r].filter(Boolean).join(" "))}return{...n,...t}}function TG(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}const g_=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,v_=NM,Sy=(n,e)=>t=>{var i;if(e?.variants==null)return v_(n,t?.class,t?.className);const{variants:s,defaultVariants:r}=e,l=Object.keys(s).map(h=>{const p=t?.[h],m=r?.[h];if(p===null)return null;const v=g_(p)||g_(m);return s[h][v]}),c=t&&Object.entries(t).reduce((h,p)=>{let[m,v]=p;return v===void 0||(h[m]=v),h},{}),d=e==null||(i=e.compoundVariants)===null||i===void 0?void 0:i.reduce((h,p)=>{let{class:m,className:v,...b}=p;return Object.entries(b).every(w=>{let[x,A]=w;return Array.isArray(A)?A.includes({...r,...c}[x]):{...r,...c}[x]===A})?[...h,m,v]:h},[]);return v_(n,l,d,t?.class,t?.className)},CG=Sy("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-xl text-sm font-medium transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 active:scale-[0.99]",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-[0_8px_24px_hsla(var(--primary)/0.3)] hover:bg-primary/90 hover:translate-y-[-1px]",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background text-foreground hover:border-primary/40 hover:bg-secondary/70",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"text-muted-foreground hover:bg-secondary hover:text-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-lg px-3 text-xs",lg:"h-12 rounded-xl px-6 text-base",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),sl=I.forwardRef(({className:n,variant:e,size:t,asChild:i=!1,...s},r)=>{const l=i?wG:"button";return k.jsx(l,{className:Et(CG({variant:e,size:t,className:n})),ref:r,...s})});sl.displayName="Button";const i2=I.forwardRef(({className:n,type:e,...t},i)=>k.jsx("input",{type:e,className:Et("flex h-11 w-full rounded-xl border border-input bg-white/90 px-3 py-2 text-sm text-foreground ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 transition-colors duration-200 hover:border-primary/35",n),ref:i,...t}));i2.displayName="Input";const _s=I.forwardRef(({className:n,...e},t)=>k.jsx("div",{ref:t,className:Et("surface-panel rounded-2xl text-card-foreground transition-shadow duration-200 hover:shadow-[0_12px_34px_hsla(206,74%,40%,0.12)]",n),...e}));_s.displayName="Card";const _r=I.forwardRef(({className:n,...e},t)=>k.jsx("div",{ref:t,className:Et("flex flex-col space-y-1.5 p-6",n),...e}));_r.displayName="CardHeader";const Vo=I.forwardRef(({className:n,...e},t)=>k.jsx("div",{ref:t,className:Et("font-serif text-xl leading-tight text-foreground",n),...e}));Vo.displayName="CardTitle";const s2=I.forwardRef(({className:n,...e},t)=>k.jsx("div",{ref:t,className:Et("text-sm text-muted-foreground",n),...e}));s2.displayName="CardDescription";const ea=I.forwardRef(({className:n,...e},t)=>k.jsx("div",{ref:t,className:Et("p-6 pt-0",n),...e}));ea.displayName="CardContent";const _y=I.forwardRef(({className:n,...e},t)=>k.jsx("div",{ref:t,className:Et("flex items-center p-6 pt-0",n),...e}));_y.displayName="CardFooter";var kG=hE();const MG=zh(kG);var RG=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],DG=RG.reduce((n,e)=>{const t=n2(`Primitive.${e}`),i=I.forwardRef((s,r)=>{const{asChild:l,...c}=s,d=l?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),k.jsx(d,{...c,ref:r})});return i.displayName=`Primitive.${e}`,{...n,[e]:i}},{}),OG="Label",a2=I.forwardRef((n,e)=>k.jsx(DG.label,{...n,ref:e,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(n.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));a2.displayName=OG;var r2=a2;const NG=Sy("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Ey=I.forwardRef(({className:n,...e},t)=>k.jsx(r2,{ref:t,className:Et(NG(),n),...e}));Ey.displayName=r2.displayName;function PG(n){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.appendChild(t),t.styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n))}const IG=n=>{switch(n){case"success":return jG;case"info":return FG;case"warning":return BG;case"error":return UG;default:return null}},LG=Array(12).fill(0),zG=({visible:n,className:e})=>re.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":n},re.createElement("div",{className:"sonner-spinner"},LG.map((t,i)=>re.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${i}`})))),jG=re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},re.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),BG=re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},re.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),FG=re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},re.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),UG=re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},re.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),VG=re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},re.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),re.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),$G=()=>{const[n,e]=re.useState(document.hidden);return re.useEffect(()=>{const t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),n};let ev=1;class HG{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;const{message:i,...s}=e,r=typeof e?.id=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:ev++,l=this.toasts.find(d=>d.id===r),c=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(r)&&this.dismissedToasts.delete(r),l?this.toasts=this.toasts.map(d=>d.id===r?(this.publish({...d,...e,id:r,title:i}),{...d,...e,id:r,dismissible:c,title:i}):d):this.addToast({title:i,...s,dismissible:c,id:r}),r},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(t=>t({id:e,dismiss:!0})))):this.toasts.forEach(t=>{this.subscribers.forEach(i=>i({id:t.id,dismiss:!0}))}),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let i;t.loading!==void 0&&(i=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));const s=Promise.resolve(e instanceof Function?e():e);let r=i!==void 0,l;const c=s.then(async h=>{if(l=["resolve",h],re.isValidElement(h))r=!1,this.create({id:i,type:"default",message:h});else if(qG(h)&&!h.ok){r=!1;const m=typeof t.error=="function"?await t.error(`HTTP error! status: ${h.status}`):t.error,v=typeof t.description=="function"?await t.description(`HTTP error! status: ${h.status}`):t.description,w=typeof m=="object"&&!re.isValidElement(m)?m:{message:m};this.create({id:i,type:"error",description:v,...w})}else if(h instanceof Error){r=!1;const m=typeof t.error=="function"?await t.error(h):t.error,v=typeof t.description=="function"?await t.description(h):t.description,w=typeof m=="object"&&!re.isValidElement(m)?m:{message:m};this.create({id:i,type:"error",description:v,...w})}else if(t.success!==void 0){r=!1;const m=typeof t.success=="function"?await t.success(h):t.success,v=typeof t.description=="function"?await t.description(h):t.description,w=typeof m=="object"&&!re.isValidElement(m)?m:{message:m};this.create({id:i,type:"success",description:v,...w})}}).catch(async h=>{if(l=["reject",h],t.error!==void 0){r=!1;const p=typeof t.error=="function"?await t.error(h):t.error,m=typeof t.description=="function"?await t.description(h):t.description,b=typeof p=="object"&&!re.isValidElement(p)?p:{message:p};this.create({id:i,type:"error",description:m,...b})}}).finally(()=>{r&&(this.dismiss(i),i=void 0),t.finally==null||t.finally.call(t)}),d=()=>new Promise((h,p)=>c.then(()=>l[0]==="reject"?p(l[1]):h(l[1])).catch(p));return typeof i!="string"&&typeof i!="number"?{unwrap:d}:Object.assign(i,{unwrap:d})},this.custom=(e,t)=>{const i=t?.id||ev++;return this.create({jsx:e(i),id:i,...t}),i},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const li=new HG,GG=(n,e)=>{const t=e?.id||ev++;return li.addToast({title:n,...e,id:t}),t},qG=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",ZG=GG,YG=()=>li.toasts,XG=()=>li.getActiveToasts(),ui=Object.assign(ZG,{success:li.success,info:li.info,warning:li.warning,error:li.error,custom:li.custom,message:li.message,promise:li.promise,dismiss:li.dismiss,loading:li.loading},{getHistory:YG,getToasts:XG});PG("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Od(n){return n.label!==void 0}const WG=3,KG="24px",JG="16px",y_=4e3,QG=356,e8=14,t8=45,n8=200;function gs(...n){return n.filter(Boolean).join(" ")}function i8(n){const[e,t]=n.split("-"),i=[];return e&&i.push(e),t&&i.push(t),i}const s8=n=>{var e,t,i,s,r,l,c,d,h;const{invert:p,toast:m,unstyled:v,interacting:b,setHeights:w,visibleToasts:x,heights:A,index:S,toasts:T,expanded:E,removeToast:M,defaultRichColors:R,closeButton:O,style:L,cancelButtonStyle:D,actionButtonStyle:$,className:ee="",descriptionClassName:X="",duration:le,position:de,gap:ce,expandByDefault:fe,classNames:N,icons:U,closeButtonAriaLabel:B="Close toast"}=n,[se,ve]=re.useState(null),[P,q]=re.useState(null),[Z,ne]=re.useState(!1),[ae,pe]=re.useState(!1),[oe,Ee]=re.useState(!1),[De,Nt]=re.useState(!1),[wt,ft]=re.useState(!1),[Sn,ln]=re.useState(0),[qi,pt]=re.useState(0),gn=re.useRef(m.duration||le||y_),In=re.useRef(null),cn=re.useRef(null),rs=S===0,os=S+1<=x,_n=m.type,ls=m.dismissible!==!1,En=m.className||"",ue=m.descriptionClassName||"",_e=re.useMemo(()=>A.findIndex(Re=>Re.toastId===m.id)||0,[A,m.id]),rt=re.useMemo(()=>{var Re;return(Re=m.closeButton)!=null?Re:O},[m.closeButton,O]),ot=re.useMemo(()=>m.duration||le||y_,[m.duration,le]),Pt=re.useRef(0),Jt=re.useRef(0),Yn=re.useRef(0),Ci=re.useRef(null),[Zi,un]=de.split("-"),Ln=re.useMemo(()=>A.reduce((Re,Ct,vn)=>vn>=_e?Re:Re+Ct.height,0),[A,_e]),Qt=$G(),Wa=m.invert||p,Ds=_n==="loading";Jt.current=re.useMemo(()=>_e*ce+Ln,[_e,Ln]),re.useEffect(()=>{gn.current=ot},[ot]),re.useEffect(()=>{ne(!0)},[]),re.useEffect(()=>{const Re=cn.current;if(Re){const Ct=Re.getBoundingClientRect().height;return pt(Ct),w(vn=>[{toastId:m.id,height:Ct,position:m.position},...vn]),()=>w(vn=>vn.filter(zn=>zn.toastId!==m.id))}},[w,m.id]),re.useLayoutEffect(()=>{if(!Z)return;const Re=cn.current,Ct=Re.style.height;Re.style.height="auto";const vn=Re.getBoundingClientRect().height;Re.style.height=Ct,pt(vn),w(zn=>zn.find(It=>It.toastId===m.id)?zn.map(It=>It.toastId===m.id?{...It,height:vn}:It):[{toastId:m.id,height:vn,position:m.position},...zn])},[Z,m.title,m.description,w,m.id,m.jsx,m.action,m.cancel]);const Xn=re.useCallback(()=>{pe(!0),ln(Jt.current),w(Re=>Re.filter(Ct=>Ct.toastId!==m.id)),setTimeout(()=>{M(m)},n8)},[m,M,w,Jt]);re.useEffect(()=>{if(m.promise&&_n==="loading"||m.duration===1/0||m.type==="loading")return;let Re;return E||b||Qt?(()=>{if(Yn.current<Pt.current){const zn=new Date().getTime()-Pt.current;gn.current=gn.current-zn}Yn.current=new Date().getTime()})():gn.current!==1/0&&(Pt.current=new Date().getTime(),Re=setTimeout(()=>{m.onAutoClose==null||m.onAutoClose.call(m,m),Xn()},gn.current)),()=>clearTimeout(Re)},[E,b,m,_n,Qt,Xn]),re.useEffect(()=>{m.delete&&(Xn(),m.onDismiss==null||m.onDismiss.call(m,m))},[Xn,m.delete]);function ca(){var Re;if(U?.loading){var Ct;return re.createElement("div",{className:gs(N?.loader,m==null||(Ct=m.classNames)==null?void 0:Ct.loader,"sonner-loader"),"data-visible":_n==="loading"},U.loading)}return re.createElement(zG,{className:gs(N?.loader,m==null||(Re=m.classNames)==null?void 0:Re.loader),visible:_n==="loading"})}const Fr=m.icon||U?.[_n]||IG(_n);var Ka,cs;return re.createElement("li",{tabIndex:0,ref:cn,className:gs(ee,En,N?.toast,m==null||(e=m.classNames)==null?void 0:e.toast,N?.default,N?.[_n],m==null||(t=m.classNames)==null?void 0:t[_n]),"data-sonner-toast":"","data-rich-colors":(Ka=m.richColors)!=null?Ka:R,"data-styled":!(m.jsx||m.unstyled||v),"data-mounted":Z,"data-promise":!!m.promise,"data-swiped":wt,"data-removed":ae,"data-visible":os,"data-y-position":Zi,"data-x-position":un,"data-index":S,"data-front":rs,"data-swiping":oe,"data-dismissible":ls,"data-type":_n,"data-invert":Wa,"data-swipe-out":De,"data-swipe-direction":P,"data-expanded":!!(E||fe&&Z),"data-testid":m.testId,style:{"--index":S,"--toasts-before":S,"--z-index":T.length-S,"--offset":`${ae?Sn:Jt.current}px`,"--initial-height":fe?"auto":`${qi}px`,...L,...m.style},onDragEnd:()=>{Ee(!1),ve(null),Ci.current=null},onPointerDown:Re=>{Re.button!==2&&(Ds||!ls||(In.current=new Date,ln(Jt.current),Re.target.setPointerCapture(Re.pointerId),Re.target.tagName!=="BUTTON"&&(Ee(!0),Ci.current={x:Re.clientX,y:Re.clientY})))},onPointerUp:()=>{var Re,Ct,vn;if(De||!ls)return;Ci.current=null;const zn=Number(((Re=cn.current)==null?void 0:Re.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),ua=Number(((Ct=cn.current)==null?void 0:Ct.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),It=new Date().getTime()-((vn=In.current)==null?void 0:vn.getTime()),Wn=se==="x"?zn:ua,Ja=Math.abs(Wn)/It;if(Math.abs(Wn)>=t8||Ja>.11){ln(Jt.current),m.onDismiss==null||m.onDismiss.call(m,m),q(se==="x"?zn>0?"right":"left":ua>0?"down":"up"),Xn(),Nt(!0);return}else{var Kn,Jn;(Kn=cn.current)==null||Kn.style.setProperty("--swipe-amount-x","0px"),(Jn=cn.current)==null||Jn.style.setProperty("--swipe-amount-y","0px")}ft(!1),Ee(!1),ve(null)},onPointerMove:Re=>{var Ct,vn,zn;if(!Ci.current||!ls||((Ct=window.getSelection())==null?void 0:Ct.toString().length)>0)return;const It=Re.clientY-Ci.current.y,Wn=Re.clientX-Ci.current.x;var Ja;const Kn=(Ja=n.swipeDirections)!=null?Ja:i8(de);!se&&(Math.abs(Wn)>1||Math.abs(It)>1)&&ve(Math.abs(Wn)>Math.abs(It)?"x":"y");let Jn={x:0,y:0};const Ur=Yi=>1/(1.5+Math.abs(Yi)/20);if(se==="y"){if(Kn.includes("top")||Kn.includes("bottom"))if(Kn.includes("top")&&It<0||Kn.includes("bottom")&&It>0)Jn.y=It;else{const Yi=It*Ur(It);Jn.y=Math.abs(Yi)<Math.abs(It)?Yi:It}}else if(se==="x"&&(Kn.includes("left")||Kn.includes("right")))if(Kn.includes("left")&&Wn<0||Kn.includes("right")&&Wn>0)Jn.x=Wn;else{const Yi=Wn*Ur(Wn);Jn.x=Math.abs(Yi)<Math.abs(Wn)?Yi:Wn}(Math.abs(Jn.x)>0||Math.abs(Jn.y)>0)&&ft(!0),(vn=cn.current)==null||vn.style.setProperty("--swipe-amount-x",`${Jn.x}px`),(zn=cn.current)==null||zn.style.setProperty("--swipe-amount-y",`${Jn.y}px`)}},rt&&!m.jsx&&_n!=="loading"?re.createElement("button",{"aria-label":B,"data-disabled":Ds,"data-close-button":!0,onClick:Ds||!ls?()=>{}:()=>{Xn(),m.onDismiss==null||m.onDismiss.call(m,m)},className:gs(N?.closeButton,m==null||(i=m.classNames)==null?void 0:i.closeButton)},(cs=U?.close)!=null?cs:VG):null,(_n||m.icon||m.promise)&&m.icon!==null&&(U?.[_n]!==null||m.icon)?re.createElement("div",{"data-icon":"",className:gs(N?.icon,m==null||(s=m.classNames)==null?void 0:s.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||ca():null,m.type!=="loading"?Fr:null):null,re.createElement("div",{"data-content":"",className:gs(N?.content,m==null||(r=m.classNames)==null?void 0:r.content)},re.createElement("div",{"data-title":"",className:gs(N?.title,m==null||(l=m.classNames)==null?void 0:l.title)},m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title),m.description?re.createElement("div",{"data-description":"",className:gs(X,ue,N?.description,m==null||(c=m.classNames)==null?void 0:c.description)},typeof m.description=="function"?m.description():m.description):null),re.isValidElement(m.cancel)?m.cancel:m.cancel&&Od(m.cancel)?re.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||D,onClick:Re=>{Od(m.cancel)&&ls&&(m.cancel.onClick==null||m.cancel.onClick.call(m.cancel,Re),Xn())},className:gs(N?.cancelButton,m==null||(d=m.classNames)==null?void 0:d.cancelButton)},m.cancel.label):null,re.isValidElement(m.action)?m.action:m.action&&Od(m.action)?re.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||$,onClick:Re=>{Od(m.action)&&(m.action.onClick==null||m.action.onClick.call(m.action,Re),!Re.defaultPrevented&&Xn())},className:gs(N?.actionButton,m==null||(h=m.classNames)==null?void 0:h.actionButton)},m.action.label):null)};function b_(){if(typeof window>"u"||typeof document>"u")return"ltr";const n=document.documentElement.getAttribute("dir");return n==="auto"||!n?window.getComputedStyle(document.documentElement).direction:n}function a8(n,e){const t={};return[n,e].forEach((i,s)=>{const r=s===1,l=r?"--mobile-offset":"--offset",c=r?JG:KG;function d(h){["top","right","bottom","left"].forEach(p=>{t[`${l}-${p}`]=typeof h=="number"?`${h}px`:h})}typeof i=="number"||typeof i=="string"?d(i):typeof i=="object"?["top","right","bottom","left"].forEach(h=>{i[h]===void 0?t[`${l}-${h}`]=c:t[`${l}-${h}`]=typeof i[h]=="number"?`${i[h]}px`:i[h]}):d(c)}),t}const r8=re.forwardRef(function(e,t){const{id:i,invert:s,position:r="bottom-right",hotkey:l=["altKey","KeyT"],expand:c,closeButton:d,className:h,offset:p,mobileOffset:m,theme:v="light",richColors:b,duration:w,style:x,visibleToasts:A=WG,toastOptions:S,dir:T=b_(),gap:E=e8,icons:M,containerAriaLabel:R="Notifications"}=e,[O,L]=re.useState([]),D=re.useMemo(()=>i?O.filter(Z=>Z.toasterId===i):O.filter(Z=>!Z.toasterId),[O,i]),$=re.useMemo(()=>Array.from(new Set([r].concat(D.filter(Z=>Z.position).map(Z=>Z.position)))),[D,r]),[ee,X]=re.useState([]),[le,de]=re.useState(!1),[ce,fe]=re.useState(!1),[N,U]=re.useState(v!=="system"?v:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),B=re.useRef(null),se=l.join("+").replace(/Key/g,"").replace(/Digit/g,""),ve=re.useRef(null),P=re.useRef(!1),q=re.useCallback(Z=>{L(ne=>{var ae;return(ae=ne.find(pe=>pe.id===Z.id))!=null&&ae.delete||li.dismiss(Z.id),ne.filter(({id:pe})=>pe!==Z.id)})},[]);return re.useEffect(()=>li.subscribe(Z=>{if(Z.dismiss){requestAnimationFrame(()=>{L(ne=>ne.map(ae=>ae.id===Z.id?{...ae,delete:!0}:ae))});return}setTimeout(()=>{MG.flushSync(()=>{L(ne=>{const ae=ne.findIndex(pe=>pe.id===Z.id);return ae!==-1?[...ne.slice(0,ae),{...ne[ae],...Z},...ne.slice(ae+1)]:[Z,...ne]})})})}),[O]),re.useEffect(()=>{if(v!=="system"){U(v);return}if(v==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?U("dark"):U("light")),typeof window>"u")return;const Z=window.matchMedia("(prefers-color-scheme: dark)");try{Z.addEventListener("change",({matches:ne})=>{U(ne?"dark":"light")})}catch{Z.addListener(({matches:ae})=>{try{U(ae?"dark":"light")}catch(pe){console.error(pe)}})}},[v]),re.useEffect(()=>{O.length<=1&&de(!1)},[O]),re.useEffect(()=>{const Z=ne=>{var ae;if(l.every(Ee=>ne[Ee]||ne.code===Ee)){var oe;de(!0),(oe=B.current)==null||oe.focus()}ne.code==="Escape"&&(document.activeElement===B.current||(ae=B.current)!=null&&ae.contains(document.activeElement))&&de(!1)};return document.addEventListener("keydown",Z),()=>document.removeEventListener("keydown",Z)},[l]),re.useEffect(()=>{if(B.current)return()=>{ve.current&&(ve.current.focus({preventScroll:!0}),ve.current=null,P.current=!1)}},[B.current]),re.createElement("section",{ref:t,"aria-label":`${R} ${se}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},$.map((Z,ne)=>{var ae;const[pe,oe]=Z.split("-");return D.length?re.createElement("ol",{key:Z,dir:T==="auto"?b_():T,tabIndex:-1,ref:B,className:h,"data-sonner-toaster":!0,"data-sonner-theme":N,"data-y-position":pe,"data-x-position":oe,style:{"--front-toast-height":`${((ae=ee[0])==null?void 0:ae.height)||0}px`,"--width":`${QG}px`,"--gap":`${E}px`,...x,...a8(p,m)},onBlur:Ee=>{P.current&&!Ee.currentTarget.contains(Ee.relatedTarget)&&(P.current=!1,ve.current&&(ve.current.focus({preventScroll:!0}),ve.current=null))},onFocus:Ee=>{Ee.target instanceof HTMLElement&&Ee.target.dataset.dismissible==="false"||P.current||(P.current=!0,ve.current=Ee.relatedTarget)},onMouseEnter:()=>de(!0),onMouseMove:()=>de(!0),onMouseLeave:()=>{ce||de(!1)},onDragEnd:()=>de(!1),onPointerDown:Ee=>{Ee.target instanceof HTMLElement&&Ee.target.dataset.dismissible==="false"||fe(!0)},onPointerUp:()=>fe(!1)},D.filter(Ee=>!Ee.position&&ne===0||Ee.position===Z).map((Ee,De)=>{var Nt,wt;return re.createElement(s8,{key:Ee.id,icons:M,index:De,toast:Ee,defaultRichColors:b,duration:(Nt=S?.duration)!=null?Nt:w,className:S?.className,descriptionClassName:S?.descriptionClassName,invert:s,visibleToasts:A,closeButton:(wt=S?.closeButton)!=null?wt:d,interacting:ce,position:Z,style:S?.style,unstyled:S?.unstyled,classNames:S?.classNames,cancelButtonStyle:S?.cancelButtonStyle,actionButtonStyle:S?.actionButtonStyle,closeButtonAriaLabel:S?.closeButtonAriaLabel,removeToast:q,toasts:D.filter(ft=>ft.position==Ee.position),heights:ee.filter(ft=>ft.position==Ee.position),setHeights:X,expandByDefault:c,gap:E,expanded:le,swipeDirections:e.swipeDirections})})):null}))});function x_(){const{googleApiKey:n,setGoogleApiKey:e}=Sh(),{setStep:t}=la(),[i,s]=I.useState(n||""),r=()=>{if(!i.trim()){ui.error("Please enter a Google API key");return}e(i),ui.success("API key saved"),t("content-input")};return k.jsx("div",{className:"h-full flex items-center justify-center px-2 py-6 lg:py-10",children:k.jsx(Cs.div,{className:"w-full max-w-2xl",initial:{opacity:0,y:16},animate:{opacity:1,y:0},transition:{duration:.35},children:k.jsxs(_s,{className:"relative overflow-hidden",children:[k.jsx("div",{className:"absolute -top-20 -right-20 size-52 rounded-full bg-primary/15 blur-3xl"}),k.jsx("div",{className:"absolute -bottom-20 -left-20 size-52 rounded-full bg-accent/15 blur-3xl"}),k.jsxs(_r,{className:"relative z-10 pb-3",children:[k.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full border border-primary/25 bg-primary/10 px-3 py-1 text-xs text-primary w-fit",children:[k.jsx(eG,{className:"size-3.5"})," Secure Setup"]}),k.jsx(Vo,{className:"mt-3 text-3xl",children:"Connect Gemini"}),k.jsx(s2,{className:"max-w-xl text-sm leading-relaxed",children:"Add your Google Gemini API key to power persona generation and analysis. The key is stored locally on this device."})]}),k.jsxs(ea,{className:"relative z-10 space-y-3",children:[k.jsx(Ey,{htmlFor:"google-key",className:"text-xs uppercase tracking-[0.2em] text-muted-foreground",children:"API Credential"}),k.jsx(i2,{id:"google-key",type:"password",placeholder:"AIzaSy...",value:i,onChange:l=>s(l.target.value),className:"h-12 font-medium"}),k.jsxs("p",{className:"text-xs text-muted-foreground",children:["Need one?"," ",k.jsx("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noreferrer",className:"text-primary hover:underline",children:"Generate a key in Google AI Studio"}),"."]})]}),k.jsx(_y,{className:"relative z-10 pt-3",children:k.jsxs(sl,{onClick:r,className:"w-full sm:w-auto h-11 px-6",children:[k.jsx(KM,{className:"size-4"})," Save and Continue ",k.jsx(wy,{className:"size-4"})]})})]})})})}const o2=I.forwardRef(({className:n,...e},t)=>k.jsx("textarea",{className:Et("flex min-h-[80px] w-full rounded-xl border border-input bg-white/90 px-3 py-2 text-sm text-foreground ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 transition-colors duration-200 hover:border-primary/35 resize-y",n),ref:t,...e}));o2.displayName="Textarea";const o8=Sy("inline-flex items-center rounded-full border px-2.5 py-1 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-primary/20 bg-primary/10 text-primary",secondary:"border-border bg-secondary text-secondary-foreground",destructive:"border-destructive/25 bg-destructive/10 text-destructive",outline:"text-foreground bg-white"}},defaultVariants:{variant:"default"}});function kh({className:n,variant:e,...t}){return k.jsx("div",{className:Et(o8({variant:e}),n),...t})}var rg={exports:{}},og,w_;function l8(){if(w_)return og;w_=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return og=n,og}var lg,A_;function c8(){if(A_)return lg;A_=1;var n=l8();function e(){}function t(){}return t.resetWarningCache=e,lg=function(){function i(l,c,d,h,p,m){if(m!==n){var v=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw v.name="Invariant Violation",v}}i.isRequired=i;function s(){return i}var r={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:s,element:i,elementType:i,instanceOf:s,node:i,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:t,resetWarningCache:e};return r.PropTypes=r,r},lg}var S_;function u8(){return S_||(S_=1,rg.exports=c8()()),rg.exports}var d8=u8();const gt=zh(d8);function zr(n,e,t,i){function s(r){return r instanceof t?r:new t(function(l){l(r)})}return new(t||(t=Promise))(function(r,l){function c(p){try{h(i.next(p))}catch(m){l(m)}}function d(p){try{h(i.throw(p))}catch(m){l(m)}}function h(p){p.done?r(p.value):s(p.value).then(c,d)}h((i=i.apply(n,e||[])).next())})}const h8=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function al(n,e,t){const i=f8(n),{webkitRelativePath:s}=n,r=typeof e=="string"?e:typeof s=="string"&&s.length>0?s:`./${n.name}`;return typeof i.path!="string"&&__(i,"path",r),__(i,"relativePath",r),i}function f8(n){const{name:e}=n;if(e&&e.lastIndexOf(".")!==-1&&!n.type){const i=e.split(".").pop().toLowerCase(),s=h8.get(i);s&&Object.defineProperty(n,"type",{value:s,writable:!1,configurable:!1,enumerable:!0})}return n}function __(n,e,t){Object.defineProperty(n,e,{value:t,writable:!1,configurable:!1,enumerable:!0})}const p8=[".DS_Store","Thumbs.db"];function m8(n){return zr(this,void 0,void 0,function*(){return Mh(n)&&g8(n.dataTransfer)?x8(n.dataTransfer,n.type):v8(n)?y8(n):Array.isArray(n)&&n.every(e=>"getFile"in e&&typeof e.getFile=="function")?b8(n):[]})}function g8(n){return Mh(n)}function v8(n){return Mh(n)&&Mh(n.target)}function Mh(n){return typeof n=="object"&&n!==null}function y8(n){return tv(n.target.files).map(e=>al(e))}function b8(n){return zr(this,void 0,void 0,function*(){return(yield Promise.all(n.map(t=>t.getFile()))).map(t=>al(t))})}function x8(n,e){return zr(this,void 0,void 0,function*(){if(n.items){const t=tv(n.items).filter(s=>s.kind==="file");if(e!=="drop")return t;const i=yield Promise.all(t.map(w8));return E_(l2(i))}return E_(tv(n.files).map(t=>al(t)))})}function E_(n){return n.filter(e=>p8.indexOf(e.name)===-1)}function tv(n){if(n===null)return[];const e=[];for(let t=0;t<n.length;t++){const i=n[t];e.push(i)}return e}function w8(n){if(typeof n.webkitGetAsEntry!="function")return T_(n);const e=n.webkitGetAsEntry();return e&&e.isDirectory?c2(e):T_(n,e)}function l2(n){return n.reduce((e,t)=>[...e,...Array.isArray(t)?l2(t):[t]],[])}function T_(n,e){return zr(this,void 0,void 0,function*(){var t;if(globalThis.isSecureContext&&typeof n.getAsFileSystemHandle=="function"){const r=yield n.getAsFileSystemHandle();if(r===null)throw new Error(`${n} is not a File`);if(r!==void 0){const l=yield r.getFile();return l.handle=r,al(l)}}const i=n.getAsFile();if(!i)throw new Error(`${n} is not a File`);return al(i,(t=e?.fullPath)!==null&&t!==void 0?t:void 0)})}function A8(n){return zr(this,void 0,void 0,function*(){return n.isDirectory?c2(n):S8(n)})}function c2(n){const e=n.createReader();return new Promise((t,i)=>{const s=[];function r(){e.readEntries(l=>zr(this,void 0,void 0,function*(){if(l.length){const c=Promise.all(l.map(A8));s.push(c),r()}else try{const c=yield Promise.all(s);t(c)}catch(c){i(c)}}),l=>{i(l)})}r()})}function S8(n){return zr(this,void 0,void 0,function*(){return new Promise((e,t)=>{n.file(i=>{const s=al(i,n.fullPath);e(s)},i=>{t(i)})})})}var Nd={},C_;function _8(){return C_||(C_=1,Nd.__esModule=!0,Nd.default=function(n,e){if(n&&e){var t=Array.isArray(e)?e:e.split(",");if(t.length===0)return!0;var i=n.name||"",s=(n.type||"").toLowerCase(),r=s.replace(/\/.*$/,"");return t.some(function(l){var c=l.trim().toLowerCase();return c.charAt(0)==="."?i.toLowerCase().endsWith(c):c.endsWith("/*")?r===c.replace(/\/.*$/,""):s===c})}return!0}),Nd}var E8=_8();const cg=zh(E8);function k_(n){return k8(n)||C8(n)||d2(n)||T8()}function T8(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function C8(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function k8(n){if(Array.isArray(n))return nv(n)}function M_(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,i)}return t}function R_(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?M_(Object(t),!0).forEach(function(i){u2(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):M_(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function u2(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Vc(n,e){return D8(n)||R8(n,e)||d2(n,e)||M8()}function M8(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function d2(n,e){if(n){if(typeof n=="string")return nv(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return nv(n,e)}}function nv(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function R8(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i=[],s=!0,r=!1,l,c;try{for(t=t.call(n);!(s=(l=t.next()).done)&&(i.push(l.value),!(e&&i.length===e));s=!0);}catch(d){r=!0,c=d}finally{try{!s&&t.return!=null&&t.return()}finally{if(r)throw c}}return i}}function D8(n){if(Array.isArray(n))return n}var O8=typeof cg=="function"?cg:cg.default,N8="file-invalid-type",P8="file-too-large",I8="file-too-small",L8="too-many-files",z8=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=e.split(","),i=t.length>1?"one of ".concat(t.join(", ")):t[0];return{code:N8,message:"File type must be ".concat(i)}},D_=function(e){return{code:P8,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},O_=function(e){return{code:I8,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},j8={code:L8,message:"Too many files"};function B8(n){return n.type===""&&typeof n.getAsFile=="function"}function h2(n,e){var t=n.type==="application/x-moz-file"||O8(n,e)||B8(n);return[t,t?null:z8(e)]}function f2(n,e,t){if(xr(n.size))if(xr(e)&&xr(t)){if(n.size>t)return[!1,D_(t)];if(n.size<e)return[!1,O_(e)]}else{if(xr(e)&&n.size<e)return[!1,O_(e)];if(xr(t)&&n.size>t)return[!1,D_(t)]}return[!0,null]}function xr(n){return n!=null}function F8(n){var e=n.files,t=n.accept,i=n.minSize,s=n.maxSize,r=n.multiple,l=n.maxFiles,c=n.validator;return!r&&e.length>1||r&&l>=1&&e.length>l?!1:e.every(function(d){var h=h2(d,t),p=Vc(h,1),m=p[0],v=f2(d,i,s),b=Vc(v,1),w=b[0],x=c?c(d):null;return m&&w&&!x})}function Rh(n){return typeof n.isPropagationStopped=="function"?n.isPropagationStopped():typeof n.cancelBubble<"u"?n.cancelBubble:!1}function lc(n){return n.dataTransfer?Array.prototype.some.call(n.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!n.target&&!!n.target.files}function N_(n){n.preventDefault()}function U8(n){return n.indexOf("MSIE")!==-1||n.indexOf("Trident/")!==-1}function V8(n){return n.indexOf("Edge/")!==-1}function $8(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return U8(n)||V8(n)}function vs(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(i){for(var s=arguments.length,r=new Array(s>1?s-1:0),l=1;l<s;l++)r[l-1]=arguments[l];return e.some(function(c){return!Rh(i)&&c&&c.apply(void 0,[i].concat(r)),Rh(i)})}}function H8(){return"showOpenFilePicker"in window}function G8(n){if(xr(n)){var e=Object.entries(n).filter(function(t){var i=Vc(t,2),s=i[0],r=i[1],l=!0;return p2(s)||(console.warn('Skipped "'.concat(s,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),l=!1),(!Array.isArray(r)||!r.every(m2))&&(console.warn('Skipped "'.concat(s,'" because an invalid file extension was provided.')),l=!1),l}).reduce(function(t,i){var s=Vc(i,2),r=s[0],l=s[1];return R_(R_({},t),{},u2({},r,l))},{});return[{description:"Files",accept:e}]}return n}function q8(n){if(xr(n))return Object.entries(n).reduce(function(e,t){var i=Vc(t,2),s=i[0],r=i[1];return[].concat(k_(e),[s],k_(r))},[]).filter(function(e){return p2(e)||m2(e)}).join(",")}function Z8(n){return n instanceof DOMException&&(n.name==="AbortError"||n.code===n.ABORT_ERR)}function Y8(n){return n instanceof DOMException&&(n.name==="SecurityError"||n.code===n.SECURITY_ERR)}function p2(n){return n==="audio/*"||n==="video/*"||n==="image/*"||n==="text/*"||n==="application/*"||/\w+\/[-+.\w]+/g.test(n)}function m2(n){return/^.*\.[\w]+$/.test(n)}var X8=["children"],W8=["open"],K8=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],J8=["refKey","onChange","onClick"];function P_(n){return t9(n)||e9(n)||g2(n)||Q8()}function Q8(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function e9(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function t9(n){if(Array.isArray(n))return iv(n)}function ug(n,e){return s9(n)||i9(n,e)||g2(n,e)||n9()}function n9(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function g2(n,e){if(n){if(typeof n=="string")return iv(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return iv(n,e)}}function iv(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function i9(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i=[],s=!0,r=!1,l,c;try{for(t=t.call(n);!(s=(l=t.next()).done)&&(i.push(l.value),!(e&&i.length===e));s=!0);}catch(d){r=!0,c=d}finally{try{!s&&t.return!=null&&t.return()}finally{if(r)throw c}}return i}}function s9(n){if(Array.isArray(n))return n}function I_(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,i)}return t}function _t(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?I_(Object(t),!0).forEach(function(i){sv(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):I_(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function sv(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Dh(n,e){if(n==null)return{};var t=a9(n,e),i,s;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function a9(n,e){if(n==null)return{};var t={},i=Object.keys(n),s,r;for(r=0;r<i.length;r++)s=i[r],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var Ty=I.forwardRef(function(n,e){var t=n.children,i=Dh(n,X8),s=y2(i),r=s.open,l=Dh(s,W8);return I.useImperativeHandle(e,function(){return{open:r}},[r]),re.createElement(I.Fragment,null,t(_t(_t({},l),{},{open:r})))});Ty.displayName="Dropzone";var v2={disabled:!1,getFilesFromEvent:m8,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};Ty.defaultProps=v2;Ty.propTypes={children:gt.func,accept:gt.objectOf(gt.arrayOf(gt.string)),multiple:gt.bool,preventDropOnDocument:gt.bool,noClick:gt.bool,noKeyboard:gt.bool,noDrag:gt.bool,noDragEventsBubbling:gt.bool,minSize:gt.number,maxSize:gt.number,maxFiles:gt.number,disabled:gt.bool,getFilesFromEvent:gt.func,onFileDialogCancel:gt.func,onFileDialogOpen:gt.func,useFsAccessApi:gt.bool,autoFocus:gt.bool,onDragEnter:gt.func,onDragLeave:gt.func,onDragOver:gt.func,onDrop:gt.func,onDropAccepted:gt.func,onDropRejected:gt.func,onError:gt.func,validator:gt.func};var av={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,isDragGlobal:!1,acceptedFiles:[],fileRejections:[]};function y2(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=_t(_t({},v2),n),t=e.accept,i=e.disabled,s=e.getFilesFromEvent,r=e.maxSize,l=e.minSize,c=e.multiple,d=e.maxFiles,h=e.onDragEnter,p=e.onDragLeave,m=e.onDragOver,v=e.onDrop,b=e.onDropAccepted,w=e.onDropRejected,x=e.onFileDialogCancel,A=e.onFileDialogOpen,S=e.useFsAccessApi,T=e.autoFocus,E=e.preventDropOnDocument,M=e.noClick,R=e.noKeyboard,O=e.noDrag,L=e.noDragEventsBubbling,D=e.onError,$=e.validator,ee=I.useMemo(function(){return q8(t)},[t]),X=I.useMemo(function(){return G8(t)},[t]),le=I.useMemo(function(){return typeof A=="function"?A:L_},[A]),de=I.useMemo(function(){return typeof x=="function"?x:L_},[x]),ce=I.useRef(null),fe=I.useRef(null),N=I.useReducer(r9,av),U=ug(N,2),B=U[0],se=U[1],ve=B.isFocused,P=B.isFileDialogActive,q=I.useRef(typeof window<"u"&&window.isSecureContext&&S&&H8()),Z=function(){!q.current&&P&&setTimeout(function(){if(fe.current){var _e=fe.current.files;_e.length||(se({type:"closeDialog"}),de())}},300)};I.useEffect(function(){return window.addEventListener("focus",Z,!1),function(){window.removeEventListener("focus",Z,!1)}},[fe,P,de,q]);var ne=I.useRef([]),ae=I.useRef([]),pe=function(_e){ce.current&&ce.current.contains(_e.target)||(_e.preventDefault(),ne.current=[])};I.useEffect(function(){return E&&(document.addEventListener("dragover",N_,!1),document.addEventListener("drop",pe,!1)),function(){E&&(document.removeEventListener("dragover",N_),document.removeEventListener("drop",pe))}},[ce,E]),I.useEffect(function(){var ue=function(Jt){ae.current=[].concat(P_(ae.current),[Jt.target]),lc(Jt)&&se({isDragGlobal:!0,type:"setDragGlobal"})},_e=function(Jt){ae.current=ae.current.filter(function(Yn){return Yn!==Jt.target&&Yn!==null}),!(ae.current.length>0)&&se({isDragGlobal:!1,type:"setDragGlobal"})},rt=function(){ae.current=[],se({isDragGlobal:!1,type:"setDragGlobal"})},ot=function(){ae.current=[],se({isDragGlobal:!1,type:"setDragGlobal"})};return document.addEventListener("dragenter",ue,!1),document.addEventListener("dragleave",_e,!1),document.addEventListener("dragend",rt,!1),document.addEventListener("drop",ot,!1),function(){document.removeEventListener("dragenter",ue),document.removeEventListener("dragleave",_e),document.removeEventListener("dragend",rt),document.removeEventListener("drop",ot)}},[ce]),I.useEffect(function(){return!i&&T&&ce.current&&ce.current.focus(),function(){}},[ce,T,i]);var oe=I.useCallback(function(ue){D?D(ue):console.error(ue)},[D]),Ee=I.useCallback(function(ue){ue.preventDefault(),ue.persist(),os(ue),ne.current=[].concat(P_(ne.current),[ue.target]),lc(ue)&&Promise.resolve(s(ue)).then(function(_e){if(!(Rh(ue)&&!L)){var rt=_e.length,ot=rt>0&&F8({files:_e,accept:ee,minSize:l,maxSize:r,multiple:c,maxFiles:d,validator:$}),Pt=rt>0&&!ot;se({isDragAccept:ot,isDragReject:Pt,isDragActive:!0,type:"setDraggedFiles"}),h&&h(ue)}}).catch(function(_e){return oe(_e)})},[s,h,oe,L,ee,l,r,c,d,$]),De=I.useCallback(function(ue){ue.preventDefault(),ue.persist(),os(ue);var _e=lc(ue);if(_e&&ue.dataTransfer)try{ue.dataTransfer.dropEffect="copy"}catch{}return _e&&m&&m(ue),!1},[m,L]),Nt=I.useCallback(function(ue){ue.preventDefault(),ue.persist(),os(ue);var _e=ne.current.filter(function(ot){return ce.current&&ce.current.contains(ot)}),rt=_e.indexOf(ue.target);rt!==-1&&_e.splice(rt,1),ne.current=_e,!(_e.length>0)&&(se({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),lc(ue)&&p&&p(ue))},[ce,p,L]),wt=I.useCallback(function(ue,_e){var rt=[],ot=[];ue.forEach(function(Pt){var Jt=h2(Pt,ee),Yn=ug(Jt,2),Ci=Yn[0],Zi=Yn[1],un=f2(Pt,l,r),Ln=ug(un,2),Qt=Ln[0],Wa=Ln[1],Ds=$?$(Pt):null;if(Ci&&Qt&&!Ds)rt.push(Pt);else{var Xn=[Zi,Wa];Ds&&(Xn=Xn.concat(Ds)),ot.push({file:Pt,errors:Xn.filter(function(ca){return ca})})}}),(!c&&rt.length>1||c&&d>=1&&rt.length>d)&&(rt.forEach(function(Pt){ot.push({file:Pt,errors:[j8]})}),rt.splice(0)),se({acceptedFiles:rt,fileRejections:ot,type:"setFiles"}),v&&v(rt,ot,_e),ot.length>0&&w&&w(ot,_e),rt.length>0&&b&&b(rt,_e)},[se,c,ee,l,r,d,v,b,w,$]),ft=I.useCallback(function(ue){ue.preventDefault(),ue.persist(),os(ue),ne.current=[],lc(ue)&&Promise.resolve(s(ue)).then(function(_e){Rh(ue)&&!L||wt(_e,ue)}).catch(function(_e){return oe(_e)}),se({type:"reset"})},[s,wt,oe,L]),Sn=I.useCallback(function(){if(q.current){se({type:"openDialog"}),le();var ue={multiple:c,types:X};window.showOpenFilePicker(ue).then(function(_e){return s(_e)}).then(function(_e){wt(_e,null),se({type:"closeDialog"})}).catch(function(_e){Z8(_e)?(de(_e),se({type:"closeDialog"})):Y8(_e)?(q.current=!1,fe.current?(fe.current.value=null,fe.current.click()):oe(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):oe(_e)});return}fe.current&&(se({type:"openDialog"}),le(),fe.current.value=null,fe.current.click())},[se,le,de,S,wt,oe,X,c]),ln=I.useCallback(function(ue){!ce.current||!ce.current.isEqualNode(ue.target)||(ue.key===" "||ue.key==="Enter"||ue.keyCode===32||ue.keyCode===13)&&(ue.preventDefault(),Sn())},[ce,Sn]),qi=I.useCallback(function(){se({type:"focus"})},[]),pt=I.useCallback(function(){se({type:"blur"})},[]),gn=I.useCallback(function(){M||($8()?setTimeout(Sn,0):Sn())},[M,Sn]),In=function(_e){return i?null:_e},cn=function(_e){return R?null:In(_e)},rs=function(_e){return O?null:In(_e)},os=function(_e){L&&_e.stopPropagation()},_n=I.useMemo(function(){return function(){var ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},_e=ue.refKey,rt=_e===void 0?"ref":_e,ot=ue.role,Pt=ue.onKeyDown,Jt=ue.onFocus,Yn=ue.onBlur,Ci=ue.onClick,Zi=ue.onDragEnter,un=ue.onDragOver,Ln=ue.onDragLeave,Qt=ue.onDrop,Wa=Dh(ue,K8);return _t(_t(sv({onKeyDown:cn(vs(Pt,ln)),onFocus:cn(vs(Jt,qi)),onBlur:cn(vs(Yn,pt)),onClick:In(vs(Ci,gn)),onDragEnter:rs(vs(Zi,Ee)),onDragOver:rs(vs(un,De)),onDragLeave:rs(vs(Ln,Nt)),onDrop:rs(vs(Qt,ft)),role:typeof ot=="string"&&ot!==""?ot:"presentation"},rt,ce),!i&&!R?{tabIndex:0}:{}),Wa)}},[ce,ln,qi,pt,gn,Ee,De,Nt,ft,R,O,i]),ls=I.useCallback(function(ue){ue.stopPropagation()},[]),En=I.useMemo(function(){return function(){var ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},_e=ue.refKey,rt=_e===void 0?"ref":_e,ot=ue.onChange,Pt=ue.onClick,Jt=Dh(ue,J8),Yn=sv({accept:ee,multiple:c,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:In(vs(ot,ft)),onClick:In(vs(Pt,ls)),tabIndex:-1},rt,fe);return _t(_t({},Yn),Jt)}},[fe,t,c,ft,i]);return _t(_t({},B),{},{isFocused:ve&&!i,getRootProps:_n,getInputProps:En,rootRef:ce,inputRef:fe,open:In(Sn)})}function r9(n,e){switch(e.type){case"focus":return _t(_t({},n),{},{isFocused:!0});case"blur":return _t(_t({},n),{},{isFocused:!1});case"openDialog":return _t(_t({},av),{},{isFileDialogActive:!0});case"closeDialog":return _t(_t({},n),{},{isFileDialogActive:!1});case"setDraggedFiles":return _t(_t({},n),{},{isDragActive:e.isDragActive,isDragAccept:e.isDragAccept,isDragReject:e.isDragReject});case"setFiles":return _t(_t({},n),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections,isDragReject:!1});case"setDragGlobal":return _t(_t({},n),{},{isDragGlobal:e.isDragGlobal});case"reset":return _t({},av);default:return n}}function L_(){}const $n=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),rv=[.001,0,0,.001,0,0],dg=1.35,wi={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},za={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},$c="pdfjs_internal_editor_",Le={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Ze={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},o9={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},ov={TRIANGLES:1,LATTICE:2},fn={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Jd={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},rn={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Oo={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Jh={ERRORS:0,WARNINGS:1,INFOS:5},Hc={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},cc={moveTo:0,lineTo:1,curveTo:2,quadraticCurveTo:3,closePath:4},l9={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Qh=Jh.WARNINGS;function c9(n){Number.isInteger(n)&&(Qh=n)}function u9(){return Qh}function ef(n){Qh>=Jh.INFOS&&console.info(`Info: ${n}`)}function Oe(n){Qh>=Jh.WARNINGS&&console.warn(`Warning: ${n}`)}function nt(n){throw new Error(n)}function tt(n,e){n||nt(e)}function d9(n){switch(n?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function b2(n,e=null,t=null){if(!n)return null;if(t&&typeof n=="string"&&(t.addDefaultProtocol&&n.startsWith("www.")&&n.match(/\./g)?.length>=2&&(n=`http://${n}`),t.tryConvertEncoding))try{n=v9(n)}catch{}const i=e?URL.parse(n,e):URL.parse(n);return d9(i)?i:null}function x2(n,e,t=!1){const i=URL.parse(n);return i?(i.hash=e,i.href):t&&b2(n,"http://example.com")?n.split("#",1)[0]+`${e?`#${e}`:""}`:""}function Ne(n,e,t,i=!1){return Object.defineProperty(n,e,{value:t,enumerable:!i,configurable:!0,writable:!1}),t}const jr=(function(){function e(t,i){this.message=t,this.name=i}return e.prototype=new Error,e.constructor=e,e})();class z_ extends jr{constructor(e,t){super(e,"PasswordException"),this.code=t}}class hg extends jr{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class lv extends jr{constructor(e){super(e,"InvalidPDFException")}}class Oh extends jr{constructor(e,t,i){super(e,"ResponseException"),this.status=t,this.missing=i}}class h9 extends jr{constructor(e){super(e,"FormatError")}}class Ha extends jr{constructor(e){super(e,"AbortException")}}function f9(n){(typeof n!="object"||n?.length===void 0)&&nt("Invalid argument for bytesToString");const e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);const i=[];for(let s=0;s<e;s+=t){const r=Math.min(s+t,e),l=n.subarray(s,r);i.push(String.fromCharCode.apply(null,l))}return i.join("")}function tf(n){typeof n!="string"&&nt("Invalid argument for stringToBytes");const e=n.length,t=new Uint8Array(e);for(let i=0;i<e;++i)t[i]=n.charCodeAt(i)&255;return t}function p9(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function m9(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function g9(){try{return new Function(""),!0}catch{return!1}}class mn{static get isLittleEndian(){return Ne(this,"isLittleEndian",m9())}static get isEvalSupported(){return Ne(this,"isEvalSupported",g9())}static get isOffscreenCanvasSupported(){return Ne(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Ne(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get isFloat16ArraySupported(){return Ne(this,"isFloat16ArraySupported",typeof Float16Array<"u")}static get isSanitizerSupported(){return Ne(this,"isSanitizerSupported",typeof Sanitizer<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return Ne(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){return Ne(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const fg=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));class he{static makeHexColor(e,t,i){return`#${fg[e]}${fg[t]}${fg[i]}`}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,t){let i;e[0]?(e[0]<0&&(i=t[0],t[0]=t[2],t[2]=i),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(i=t[1],t[1]=t[3],t[3]=i),t[1]*=e[3],t[3]*=e[3]):(i=t[0],t[0]=t[1],t[1]=i,i=t[2],t[2]=t[3],t[3]=i,e[1]<0&&(i=t[1],t[1]=t[3],t[3]=i),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(i=t[0],t[0]=t[2],t[2]=i),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static multiplyByDOMMatrix(e,t){return[e[0]*t.a+e[2]*t.b,e[1]*t.a+e[3]*t.b,e[0]*t.c+e[2]*t.d,e[1]*t.c+e[3]*t.d,e[0]*t.e+e[2]*t.f+e[4],e[1]*t.e+e[3]*t.f+e[5]]}static applyTransform(e,t,i=0){const s=e[i],r=e[i+1];e[i]=s*t[0]+r*t[2]+t[4],e[i+1]=s*t[1]+r*t[3]+t[5]}static applyTransformToBezier(e,t,i=0){const s=t[0],r=t[1],l=t[2],c=t[3],d=t[4],h=t[5];for(let p=0;p<6;p+=2){const m=e[i+p],v=e[i+p+1];e[i+p]=m*s+v*l+d,e[i+p+1]=m*r+v*c+h}}static applyInverseTransform(e,t){const i=e[0],s=e[1],r=t[0]*t[3]-t[1]*t[2];e[0]=(i*t[3]-s*t[2]+t[2]*t[5]-t[4]*t[3])/r,e[1]=(-i*t[1]+s*t[0]+t[4]*t[1]-t[5]*t[0])/r}static axialAlignedBoundingBox(e,t,i){const s=t[0],r=t[1],l=t[2],c=t[3],d=t[4],h=t[5],p=e[0],m=e[1],v=e[2],b=e[3];let w=s*p+d,x=w,A=s*v+d,S=A,T=c*m+h,E=T,M=c*b+h,R=M;if(r!==0||l!==0){const O=r*p,L=r*v,D=l*m,$=l*b;w+=D,S+=D,A+=$,x+=$,T+=O,R+=O,M+=L,E+=L}i[0]=Math.min(i[0],w,A,x,S),i[1]=Math.min(i[1],T,M,E,R),i[2]=Math.max(i[2],w,A,x,S),i[3]=Math.max(i[3],T,M,E,R)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const i=e[0],s=e[1],r=e[2],l=e[3],c=i**2+s**2,d=i*r+s*l,h=r**2+l**2,p=(c+h)/2,m=Math.sqrt(p**2-(c*h-d**2));t[0]=Math.sqrt(p+m||1),t[1]=Math.sqrt(p-m||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const i=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),s=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(i>s)return null;const r=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),l=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return r>l?null:[i,r,s,l]}static pointBoundingBox(e,t,i){i[0]=Math.min(i[0],e),i[1]=Math.min(i[1],t),i[2]=Math.max(i[2],e),i[3]=Math.max(i[3],t)}static rectBoundingBox(e,t,i,s,r){r[0]=Math.min(r[0],e,i),r[1]=Math.min(r[1],t,s),r[2]=Math.max(r[2],e,i),r[3]=Math.max(r[3],t,s)}static#e(e,t,i,s,r,l,c,d,h,p){if(h<=0||h>=1)return;const m=1-h,v=h*h,b=v*h,w=m*(m*(m*e+3*h*t)+3*v*i)+b*s,x=m*(m*(m*r+3*h*l)+3*v*c)+b*d;p[0]=Math.min(p[0],w),p[1]=Math.min(p[1],x),p[2]=Math.max(p[2],w),p[3]=Math.max(p[3],x)}static#t(e,t,i,s,r,l,c,d,h,p,m,v){if(Math.abs(h)<1e-12){Math.abs(p)>=1e-12&&this.#e(e,t,i,s,r,l,c,d,-m/p,v);return}const b=p**2-4*m*h;if(b<0)return;const w=Math.sqrt(b),x=2*h;this.#e(e,t,i,s,r,l,c,d,(-p+w)/x,v),this.#e(e,t,i,s,r,l,c,d,(-p-w)/x,v)}static bezierBoundingBox(e,t,i,s,r,l,c,d,h){h[0]=Math.min(h[0],e,c),h[1]=Math.min(h[1],t,d),h[2]=Math.max(h[2],e,c),h[3]=Math.max(h[3],t,d),this.#t(e,i,r,c,t,s,l,d,3*(-e+3*(i-r)+c),6*(e-2*i+r),3*(i-e),h),this.#t(e,i,r,c,t,s,l,d,3*(-t+3*(s-l)+d),6*(t-2*s+l),3*(s-t),h)}}function v9(n){return decodeURIComponent(escape(n))}let pg=null,j_=null;function y9(n){return pg||(pg=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,j_=new Map([["","t"]])),n.replaceAll(pg,(e,t,i)=>t?t.normalize("NFKC"):j_.get(i))}function w2(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const n=new Uint8Array(32);return crypto.getRandomValues(n),f9(n)}const $o="pdfjs_internal_id_";function b9(n,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[i,s,...r]=t;if(!n(i)&&!Number.isInteger(i)||!e(s))return!1;const l=r.length;let c=!0;switch(s.name){case"XYZ":if(l<2||l>3)return!1;break;case"Fit":case"FitB":return l===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(l>1)return!1;break;case"FitR":if(l!==4)return!1;c=!1;break;default:return!1}for(const d of r)if(!(typeof d=="number"||c&&d===null))return!1;return!0}function Nn(n,e,t){return Math.min(Math.max(n,e),t)}typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(n){return n.reduce((e,t)=>e+t,0)});class Gc{static textContent(e){const t=[],i={items:t,styles:Object.create(null)};function s(r){if(!r)return;let l=null;const c=r.name;if(c==="#text")l=r.value;else if(Gc.shouldBuildText(c))r?.attributes?.textContent?l=r.attributes.textContent:r.value&&(l=r.value);else return;if(l!==null&&t.push({str:l}),!!r.children)for(const d of r.children)s(d)}return s(e),i}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}class A2{static setupStorage(e,t,i,s,r){const l=s.getValue(t,{value:null});switch(i.name){case"textarea":if(l.value!==null&&(e.textContent=l.value),r==="print")break;e.addEventListener("input",c=>{s.setValue(t,{value:c.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(l.value===i.attributes.xfaOn?e.setAttribute("checked",!0):l.value===i.attributes.xfaOff&&e.removeAttribute("checked"),r==="print")break;e.addEventListener("change",c=>{s.setValue(t,{value:c.target.checked?c.target.getAttribute("xfaOn"):c.target.getAttribute("xfaOff")})})}else{if(l.value!==null&&e.setAttribute("value",l.value),r==="print")break;e.addEventListener("input",c=>{s.setValue(t,{value:c.target.value})})}break;case"select":if(l.value!==null){e.setAttribute("value",l.value);for(const c of i.children)c.attributes.value===l.value?c.attributes.selected=!0:c.attributes.hasOwnProperty("selected")&&delete c.attributes.selected}e.addEventListener("input",c=>{const d=c.target.options,h=d.selectedIndex===-1?"":d[d.selectedIndex].value;s.setValue(t,{value:h})});break}}static setAttributes({html:e,element:t,storage:i=null,intent:s,linkService:r}){const{attributes:l}=t,c=e instanceof HTMLAnchorElement;l.type==="radio"&&(l.name=`${l.name}-${s}`);for(const[d,h]of Object.entries(l))if(h!=null)switch(d){case"class":h.length&&e.setAttribute(d,h.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",h);break;case"style":Object.assign(e.style,h);break;case"textContent":e.textContent=h;break;default:(!c||d!=="href"&&d!=="newWindow")&&e.setAttribute(d,h)}c&&r.addLinkAttributes(e,l.href,l.newWindow),i&&l.dataId&&this.setupStorage(e,l.dataId,t,i)}static render(e){const t=e.annotationStorage,i=e.linkService,s=e.xfaHtml,r=e.intent||"display",l=document.createElement(s.name);s.attributes&&this.setAttributes({html:l,element:s,intent:r,linkService:i});const c=r!=="richText",d=e.div;if(d.append(l),e.viewport){const m=`matrix(${e.viewport.transform.join(",")})`;d.style.transform=m}c&&d.setAttribute("class","xfaLayer xfaFont");const h=[];if(s.children.length===0){if(s.value){const m=document.createTextNode(s.value);l.append(m),c&&Gc.shouldBuildText(s.name)&&h.push(m)}return{textDivs:h}}const p=[[s,-1,l]];for(;p.length>0;){const[m,v,b]=p.at(-1);if(v+1===m.children.length){p.pop();continue}const w=m.children[++p.at(-1)[1]];if(w===null)continue;const{name:x}=w;if(x==="#text"){const S=document.createTextNode(w.value);h.push(S),b.append(S);continue}const A=w?.attributes?.xmlns?document.createElementNS(w.attributes.xmlns,x):document.createElement(x);if(b.append(A),w.attributes&&this.setAttributes({html:A,element:w,storage:t,intent:r,linkService:i}),w.children?.length>0)p.push([w,-1,A]);else if(w.value){const S=document.createTextNode(w.value);c&&Gc.shouldBuildText(x)&&h.push(S),A.append(S)}}for(const m of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))m.setAttribute("readOnly",!0);return{textDivs:h}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const Ks="http://www.w3.org/2000/svg";class rl{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function nu(n,e="text"){if(gc(n,document.baseURI)){const t=await fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,i)=>{const s=new XMLHttpRequest;s.open("GET",n,!0),s.responseType=e,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(s.response);return}t(s.responseText);return}i(new Error(s.statusText))}},s.send(null)})}class iu{constructor({viewBox:e,userUnit:t,scale:i,rotation:s,offsetX:r=0,offsetY:l=0,dontFlip:c=!1}){this.viewBox=e,this.userUnit=t,this.scale=i,this.rotation=s,this.offsetX=r,this.offsetY=l,i*=t;const d=(e[2]+e[0])/2,h=(e[3]+e[1])/2;let p,m,v,b;switch(s%=360,s<0&&(s+=360),s){case 180:p=-1,m=0,v=0,b=1;break;case 90:p=0,m=1,v=1,b=0;break;case 270:p=0,m=-1,v=-1,b=0;break;case 0:p=1,m=0,v=0,b=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}c&&(v=-v,b=-b);let w,x,A,S;p===0?(w=Math.abs(h-e[1])*i+r,x=Math.abs(d-e[0])*i+l,A=(e[3]-e[1])*i,S=(e[2]-e[0])*i):(w=Math.abs(d-e[0])*i+r,x=Math.abs(h-e[1])*i+l,A=(e[2]-e[0])*i,S=(e[3]-e[1])*i),this.transform=[p*i,m*i,v*i,b*i,w-p*i*d-v*i*h,x-m*i*d-b*i*h],this.width=A,this.height=S}get rawDims(){const e=this.viewBox;return Ne(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:i=this.offsetX,offsetY:s=this.offsetY,dontFlip:r=!1}={}){return new iu({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:i,offsetY:s,dontFlip:r})}convertToViewportPoint(e,t){const i=[e,t];return he.applyTransform(i,this.transform),i}convertToViewportRectangle(e){const t=[e[0],e[1]];he.applyTransform(t,this.transform);const i=[e[2],e[3]];return he.applyTransform(i,this.transform),[t[0],t[1],i[0],i[1]]}convertToPdfPoint(e,t){const i=[e,t];return he.applyInverseTransform(i,this.transform),i}}class Cy extends jr{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function nf(n){const e=n.length;let t=0;for(;t<e&&n[t].trim()==="";)t++;return n.substring(t,t+5).toLowerCase()==="data:"}function ky(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function x9(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function w9(n,e="document.pdf"){if(typeof n!="string")return e;if(nf(n))return Oe('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const i=(c=>{try{return new URL(c)}catch{try{return new URL(decodeURIComponent(c))}catch{try{return new URL(c,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(c),"https://foo.bar")}catch{return null}}}}})(n);if(!i)return e;const s=c=>{try{let d=decodeURIComponent(c);return d.includes("/")?(d=d.split("/").at(-1),d.test(/^\.pdf$/i)?d:c):d}catch{return c}},r=/\.pdf$/i,l=i.pathname.split("/").at(-1);if(r.test(l))return s(l);if(i.searchParams.size>0){const c=Array.from(i.searchParams.values()).reverse();for(const h of c)if(r.test(h))return s(h);const d=Array.from(i.searchParams.keys()).reverse();for(const h of d)if(r.test(h))return s(h)}if(i.hash){const d=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(i.hash);if(d)return s(d[0])}return e}class B_{started=Object.create(null);times=[];time(e){e in this.started&&Oe(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||Oe(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:i}of this.times)t=Math.max(i.length,t);for(const{name:i,start:s,end:r}of this.times)e.push(`${i.padEnd(t)} ${r-s}ms
`);return e.join("")}}function gc(n,e){const t=e?URL.parse(n,e):URL.parse(n);return t?.protocol==="http:"||t?.protocol==="https:"}function Hi(n){n.preventDefault()}function Gt(n){n.preventDefault(),n.stopPropagation()}function A9(n){console.log("Deprecated API usage: "+n)}class cv{static#e;static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;this.#e||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const t=this.#e.exec(e);if(!t)return null;const i=parseInt(t[1],10);let s=parseInt(t[2],10);s=s>=1&&s<=12?s-1:0;let r=parseInt(t[3],10);r=r>=1&&r<=31?r:1;let l=parseInt(t[4],10);l=l>=0&&l<=23?l:0;let c=parseInt(t[5],10);c=c>=0&&c<=59?c:0;let d=parseInt(t[6],10);d=d>=0&&d<=59?d:0;const h=t[7]||"Z";let p=parseInt(t[8],10);p=p>=0&&p<=23?p:0;let m=parseInt(t[9],10)||0;return m=m>=0&&m<=59?m:0,h==="-"?(l+=p,c+=m):h==="+"&&(l-=p,c-=m),new Date(Date.UTC(i,s,r,l,c,d))}}function S9(n,{scale:e=1,rotation:t=0}){const{width:i,height:s}=n.attributes.style,r=[0,0,parseInt(i),parseInt(s)];return new iu({viewBox:r,userUnit:1,scale:e,rotation:t})}function su(n){if(n.startsWith("#")){const e=parseInt(n.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(Oe(`Not a valid color format: "${n}"`),[0,0,0])}function _9(n){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of n.keys()){e.style.color=t;const i=window.getComputedStyle(e).color;n.set(t,su(i))}e.remove()}function Lt(n){const{a:e,b:t,c:i,d:s,e:r,f:l}=n.getTransform();return[e,t,i,s,r,l]}function ys(n){const{a:e,b:t,c:i,d:s,e:r,f:l}=n.getTransform().invertSelf();return[e,t,i,s,r,l]}function Nr(n,e,t=!1,i=!0){if(e instanceof iu){const{pageWidth:s,pageHeight:r}=e.rawDims,{style:l}=n,c=mn.isCSSRoundSupported,d=`var(--total-scale-factor) * ${s}px`,h=`var(--total-scale-factor) * ${r}px`,p=c?`round(down, ${d}, var(--scale-round-x))`:`calc(${d})`,m=c?`round(down, ${h}, var(--scale-round-y))`:`calc(${h})`;!t||e.rotation%180===0?(l.width=p,l.height=m):(l.width=m,l.height=p)}i&&n.setAttribute("data-main-rotation",e.rotation)}class Rs{constructor(){const{pixelRatio:e}=Rs;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,i,s,r=-1){let l=1/0,c=1/0,d=1/0;i=Rs.capPixels(i,r),i>0&&(l=Math.sqrt(i/(e*t))),s!==-1&&(c=s/e,d=s/t);const h=Math.min(l,c,d);return this.sx>h||this.sy>h?(this.sx=h,this.sy=h,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const i=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,i):i}return e}}const uv=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class E9{static get isDarkMode(){return Ne(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}}class T9{static get commentForegroundColor(){const e=document.createElement("span");e.classList.add("comment","sidebar");const{style:t}=e;t.width=t.height="0",t.display="none",t.color="var(--comment-fg-color)",document.body.append(e);const{color:i}=window.getComputedStyle(e);return e.remove(),Ne(this,"commentForegroundColor",su(i))}}function C9(n,e,t,i){i=Math.min(Math.max(i??1,0),1);const s=255*(1-i);return n=Math.round(n*i+s),e=Math.round(e*i+s),t=Math.round(t*i+s),[n,e,t]}function F_(n,e){const t=n[0]/255,i=n[1]/255,s=n[2]/255,r=Math.max(t,i,s),l=Math.min(t,i,s),c=(r+l)/2;if(r===l)e[0]=e[1]=0;else{const d=r-l;switch(e[1]=c<.5?d/(r+l):d/(2-r-l),r){case t:e[0]=((i-s)/d+(i<s?6:0))*60;break;case i:e[0]=((s-t)/d+2)*60;break;case s:e[0]=((t-i)/d+4)*60;break}}e[2]=c}function dv(n,e){const t=n[0],i=n[1],s=n[2],r=(1-Math.abs(2*s-1))*i,l=r*(1-Math.abs(t/60%2-1)),c=s-r/2;switch(Math.floor(t/60)){case 0:e[0]=r+c,e[1]=l+c,e[2]=c;break;case 1:e[0]=l+c,e[1]=r+c,e[2]=c;break;case 2:e[0]=c,e[1]=r+c,e[2]=l+c;break;case 3:e[0]=c,e[1]=l+c,e[2]=r+c;break;case 4:e[0]=l+c,e[1]=c,e[2]=r+c;break;case 5:case 6:e[0]=r+c,e[1]=c,e[2]=l+c;break}}function U_(n){return n<=.03928?n/12.92:((n+.055)/1.055)**2.4}function V_(n,e,t){dv(n,t),t.map(U_);const i=.2126*t[0]+.7152*t[1]+.0722*t[2];dv(e,t),t.map(U_);const s=.2126*t[0]+.7152*t[1]+.0722*t[2];return i>s?(i+.05)/(s+.05):(s+.05)/(i+.05)}const $_=new Map;function k9(n,e){const t=n[0]+n[1]*256+n[2]*65536+e[0]*16777216+e[1]*4294967296+e[2]*1099511627776;let i=$_.get(t);if(i)return i;const s=new Float32Array(9),r=s.subarray(0,3),l=s.subarray(3,6);F_(n,l);const c=s.subarray(6,9);F_(e,c);const d=c[2]<.5,h=d?12:4.5;if(l[2]=d?Math.sqrt(l[2]):1-Math.sqrt(1-l[2]),V_(l,c,r)<h){let p,m;d?(p=l[2],m=1):(p=0,m=l[2]);const v=.005;for(;m-p>v;){const b=l[2]=(p+m)/2;d===V_(l,c,r)<h?p=b:m=b}l[2]=d?m:p}return dv(l,r),i=he.makeHexColor(Math.round(r[0]*255),Math.round(r[1]*255),Math.round(r[2]*255)),$_.set(t,i),i}function S2({html:n,dir:e,className:t},i){const s=document.createDocumentFragment();if(typeof n=="string"){const r=document.createElement("p");r.dir=e||"auto";const l=n.split(/(?:\r\n?|\n)/);for(let c=0,d=l.length;c<d;++c){const h=l[c];r.append(document.createTextNode(h)),c<d-1&&r.append(document.createElement("br"))}s.append(r)}else A2.render({xfaHtml:n,div:s,intent:"richText"});s.firstElementChild.classList.add("richText",t),i.append(s)}function _2(n){const e=new Path2D;if(!n)return e;for(let t=0,i=n.length;t<i;)switch(n[t++]){case cc.moveTo:e.moveTo(n[t++],n[t++]);break;case cc.lineTo:e.lineTo(n[t++],n[t++]);break;case cc.curveTo:e.bezierCurveTo(n[t++],n[t++],n[t++],n[t++],n[t++],n[t++]);break;case cc.quadraticCurveTo:e.quadraticCurveTo(n[t++],n[t++],n[t++],n[t++]);break;case cc.closePath:e.closePath();break;default:Oe(`Unrecognized drawing path operator: ${n[t-1]}`);break}return e}class Qe{static#e=null;static#t=null;static#i=null;static#n=0;static#a=[];get pagesNumber(){return Qe.#n}set pagesNumber(e){Qe.#n!==e&&(Qe.#n=e,e===0&&(Qe.#t=null,Qe.#e=null))}addListener(e){Qe.#a.push(e)}removeListener(e){const t=Qe.#a.indexOf(e);t>=0&&Qe.#a.splice(t,1)}#r(){for(const e of Qe.#a)e()}#s(e){if(Qe.#t)return;const t=Qe.#n,i=new Uint32Array(3*t),s=Qe.#t=i.subarray(0,t),r=Qe.#e=i.subarray(t,2*t);if(e)for(let l=0;l<t;l++)s[l]=r[l]=l+1;Qe.#i=i.subarray(2*t)}movePages(e,t,i){this.#s(!0);const s=Qe.#t,r=Qe.#e;Qe.#i.set(r);const l=t.length,c=new Uint32Array(l);let d=0;for(let b=0;b<l;b++){const w=t[b]-1;c[b]=s[w],w<i&&(d+=1)}const h=Qe.#n;let p=i-d;const m=h-l;p=Nn(p,0,m);for(let b=0,w=0;b<h;b++)e.has(b+1)||(s[w++]=s[b]);s.copyWithin(p+l,p,m),s.set(c,p);let v=!1;for(let b=0,w=h;b<w;b++){const x=s[b];v||=x!==b+1,r[x-1]=b+1}this.#r(),v||(this.pagesNumber=0)}hasBeenAltered(){return Qe.#t!==null}getPageMappingForSaving(){return{pageIndices:Qe.#e?Qe.#e.map(e=>e-1):null}}getPrevPageNumber(e){return Qe.#i[Qe.#t[e-1]-1]}getPageNumber(e){return Qe.#e?.[e-1]??e}getPageId(e){return Qe.#t?.[e-1]??e}static get instance(){return Ne(this,"instance",new Qe)}getMapping(){return Qe.#t.subarray(0,this.pagesNumber)}}class Tc{#e=null;#t=null;#i;#n=null;#a=null;#r=null;#s=null;#o=null;static#c=null;constructor(e){this.#i=e,Tc.#c||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const e=this.#e=document.createElement("div");e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=this.#i._uiManager._signal;t instanceof AbortSignal&&!t.aborted&&(e.addEventListener("contextmenu",Hi,{signal:t}),e.addEventListener("pointerdown",Tc.#l,{signal:t}));const i=this.#n=document.createElement("div");i.className="buttons",e.append(i);const s=this.#i.toolbarPosition;if(s){const{style:r}=e,l=this.#i._uiManager.direction==="ltr"?1-s[0]:s[0];r.insetInlineEnd=`${100*l}%`,r.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return this.#e}static#l(e){e.stopPropagation()}#h(e){this.#i._focusEventsAllowed=!1,Gt(e)}#d(e){this.#i._focusEventsAllowed=!0,Gt(e)}#f(e){const t=this.#i._uiManager._signal;return!(t instanceof AbortSignal)||t.aborted?!1:(e.addEventListener("focusin",this.#h.bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",this.#d.bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Hi,{signal:t}),!0)}hide(){this.#e.classList.add("hidden"),this.#t?.hideDropdown()}show(){this.#e.classList.remove("hidden"),this.#a?.shown(),this.#r?.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=this.#i,i=document.createElement("button");i.classList.add("basic","deleteButton"),i.tabIndex=0,i.setAttribute("data-l10n-id",Tc.#c[e]),this.#f(i)&&i.addEventListener("click",s=>{t.delete()},{signal:t._signal}),this.#n.append(i)}get#g(){const e=document.createElement("div");return e.className="divider",e}async addAltText(e){const t=await e.render();this.#f(t),this.#n.append(t,this.#g),this.#a=e}addComment(e,t=null){if(this.#r)return;const i=e.renderForToolbar();if(!i)return;this.#f(i);const s=this.#s=this.#g;t?(this.#n.insertBefore(i,t),this.#n.insertBefore(s,t)):this.#n.append(i,s),this.#r=e,e.toolbar=this}addColorPicker(e){if(this.#t)return;this.#t=e;const t=e.renderButton();this.#f(t),this.#n.append(t,this.#g)}async addEditSignatureButton(e){const t=this.#o=await e.renderEditButton(this.#i);this.#f(t),this.#n.append(t,this.#g)}removeButton(e){e==="comment"&&(this.#r?.removeToolbarCommentButton(),this.#r=null,this.#s?.remove(),this.#s=null)}async addButton(e,t){switch(e){case"colorPicker":t&&this.addColorPicker(t);break;case"altText":t&&await this.addAltText(t);break;case"editSignature":t&&await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break;case"comment":t&&this.addComment(t);break}}async addButtonBefore(e,t,i){if(!t&&e==="comment")return;const s=this.#n.querySelector(i);s&&e==="comment"&&this.addComment(t,s)}updateEditSignatureButton(e){this.#o&&(this.#o.title=e)}remove(){this.#e.remove(),this.#t?.destroy(),this.#t=null}}class M9{#e=null;#t=null;#i;constructor(e){this.#i=e}#n(){const e=this.#t=document.createElement("div");e.className="editToolbar",e.setAttribute("role","toolbar");const t=this.#i._signal;t instanceof AbortSignal&&!t.aborted&&e.addEventListener("contextmenu",Hi,{signal:t});const i=this.#e=document.createElement("div");return i.className="buttons",e.append(i),this.#i.hasCommentManager()&&this.#r("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#i.commentSelection("floating_button")}),this.#r("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#i.highlightSelection("floating_button")}),e}#a(e,t){let i=0,s=0;for(const r of e){const l=r.y+r.height;if(l<i)continue;const c=r.x+(t?r.width:0);if(l>i){s=c,i=l;continue}t?c>s&&(s=c):c<s&&(s=c)}return[t?1-s:s,i]}show(e,t,i){const[s,r]=this.#a(t,i),{style:l}=this.#t||=this.#n();e.append(this.#t),l.insetInlineEnd=`${100*s}%`,l.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){this.#t.remove()}#r(e,t,i,s){const r=document.createElement("button");r.classList.add("basic",e),r.tabIndex=0,r.setAttribute("data-l10n-id",t);const l=document.createElement("span");r.append(l),l.className="visuallyHidden",l.setAttribute("data-l10n-id",i);const c=this.#i._signal;c instanceof AbortSignal&&!c.aborted&&(r.addEventListener("contextmenu",Hi,{signal:c}),r.addEventListener("click",s,{signal:c})),this.#e.append(r)}}function E2(n,e,t){for(const i of t)e.addEventListener(i,n[i].bind(n))}class et{static#e=NaN;static#t=null;static#i=NaN;static#n=null;static initializeAndAddPointerId(e){(et.#t||=new Set).add(e)}static setPointer(e,t){et.#e||=t,et.#n??=e}static setTimeStamp(e){et.#i=e}static isSamePointerId(e){return et.#e===e}static isSamePointerIdOrRemove(e){return et.#e===e?!0:(et.#t?.delete(e),!1)}static isSamePointerType(e){return et.#n===e}static isInitializedAndDifferentPointerType(e){return et.#n!==null&&!et.isSamePointerType(e)}static isSameTimeStamp(e){return et.#i===e}static isUsingMultiplePointers(){return et.#t?.size>=1}static clearPointerType(){et.#n=null}static clearPointerIds(){et.#e=NaN,et.#t=null}static clearTimeStamp(){et.#i=NaN}}class R9{#e=0;get id(){return`${$c}${this.#e++}`}}class My{#e=w2();#t=0;#i=null;static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),s=new Image;s.src=e;const r=s.decode().then(()=>(i.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return Ne(this,"_isSVGFittingCanvas",r)}async#n(e,t){this.#i||=new Map;let i=this.#i.get(e);if(i===null)return null;if(i?.bitmap)return i.refCounter+=1,i;try{i||={bitmap:null,id:`image_${this.#e}_${this.#t++}`,refCounter:0,isSvg:!1};let s;if(typeof t=="string"?(i.url=t,s=await nu(t,"blob")):t instanceof File?s=i.file=t:t instanceof Blob&&(s=t),s.type==="image/svg+xml"){const r=My._isSVGFittingCanvas,l=new FileReader,c=new Image,d=new Promise((h,p)=>{c.onload=()=>{i.bitmap=c,i.isSvg=!0,h()},l.onload=async()=>{const m=i.svgUrl=l.result;c.src=await r?`${m}#svgView(preserveAspectRatio(none))`:m},c.onerror=l.onerror=p});l.readAsDataURL(s),await d}else i.bitmap=await createImageBitmap(s);i.refCounter=1}catch(s){Oe(s),i=null}return this.#i.set(e,i),i&&this.#i.set(i.id,i),i}async getFromFile(e){const{lastModified:t,name:i,size:s,type:r}=e;return this.#n(`${t}_${i}_${s}_${r}`,e)}async getFromUrl(e){return this.#n(e,e)}async getFromBlob(e,t){const i=await t;return this.#n(e,i)}async getFromId(e){this.#i||=new Map;const t=this.#i.get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:i}=t;return delete t.blobPromise,this.getFromBlob(t.id,i)}return this.getFromUrl(t.url)}getFromCanvas(e,t){this.#i||=new Map;let i=this.#i.get(e);if(i?.bitmap)return i.refCounter+=1,i;const s=new OffscreenCanvas(t.width,t.height);return s.getContext("2d").drawImage(t,0,0),i={bitmap:s.transferToImageBitmap(),id:`image_${this.#e}_${this.#t++}`,refCounter:1,isSvg:!1},this.#i.set(e,i),this.#i.set(i.id,i),i}getSvgUrl(e){const t=this.#i.get(e);return t?.isSvg?t.svgUrl:null}deleteId(e){this.#i||=new Map;const t=this.#i.get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:i}=t;if(!t.url&&!t.file){const s=new OffscreenCanvas(i.width,i.height);s.getContext("bitmaprenderer").transferFromImageBitmap(i),t.blobPromise=s.convertToBlob()}i.close?.(),t.bitmap=null}isValidId(e){return e.startsWith(`image_${this.#e}_`)}}class D9{#e=[];#t=!1;#i;#n=-1;constructor(e=128){this.#i=e}add({cmd:e,undo:t,post:i,mustExec:s,type:r=NaN,overwriteIfSameType:l=!1,keepUndo:c=!1}){if(s&&e(),this.#t)return;const d={cmd:e,undo:t,post:i,type:r};if(this.#n===-1){this.#e.length>0&&(this.#e.length=0),this.#n=0,this.#e.push(d);return}if(l&&this.#e[this.#n].type===r){c&&(d.undo=this.#e[this.#n].undo),this.#e[this.#n]=d;return}const h=this.#n+1;h===this.#i?this.#e.splice(0,1):(this.#n=h,h<this.#e.length&&this.#e.splice(h)),this.#e.push(d)}undo(){if(this.#n===-1)return;this.#t=!0;const{undo:e,post:t}=this.#e[this.#n];e(),t?.(),this.#t=!1,this.#n-=1}redo(){if(this.#n<this.#e.length-1){this.#n+=1,this.#t=!0;const{cmd:e,post:t}=this.#e[this.#n];e(),t?.(),this.#t=!1}}hasSomethingToUndo(){return this.#n!==-1}hasSomethingToRedo(){return this.#n<this.#e.length-1}cleanType(e){if(this.#n!==-1){for(let t=this.#n;t>=0;t--)if(this.#e[t].type!==e){this.#e.splice(t+1,this.#n-t),this.#n=t;return}this.#e.length=0,this.#n=-1}}destroy(){this.#e=null}}class au{constructor(e){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=mn.platform;for(const[i,s,r={}]of e)for(const l of i){const c=l.startsWith("mac+");t&&c?(this.callbacks.set(l.slice(4),{callback:s,options:r}),this.allKeys.add(l.split("+").at(-1))):!t&&!c&&(this.callbacks.set(l,{callback:s,options:r}),this.allKeys.add(l.split("+").at(-1)))}}#e(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t}exec(e,t){if(!this.allKeys.has(t.key))return;const i=this.callbacks.get(this.#e(t));if(!i)return;const{callback:s,options:{bubbles:r=!1,args:l=[],checker:c=null}}=i;c&&!c(e,t)||(s.bind(e,...l,t)(),r||Gt(t))}}class Ry{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return _9(e),Ne(this,"_colors",e)}convert(e){const t=su(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[i,s]of this._colors)if(s.every((r,l)=>r===t[l]))return Ry._colorsMapping.get(i);return t}getHexCode(e){const t=this._colors.get(e);return t?he.makeHexColor(...t):e}}class Ga{#e=new AbortController;#t=null;#i=null;#n=new Map;#a=new Map;#r=null;#s=null;#o=null;#c=new D9;#l=null;#h=null;#d=null;#f=0;#g=new Set;#m=null;#u=null;#p=new Set;_editorUndoBar=null;#v=!1;#b=!1;#y=!1;#E=null;#S=null;#w=null;#C=null;#x=!1;#_=null;#R=new R9;#k=!1;#M=!1;#z=!1;#O=null;#P=null;#j=null;#I=null;#H=null;#T=Le.NONE;#A=new Set;#N=null;#B=null;#U=null;#Z=null;#q=null;#Y={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#V=[0,0];#L=null;#G=null;#J=null;#Q=null;#F=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const e=Ga.prototype,t=l=>l.#G.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&l.hasSomethingToControl(),i=(l,{target:c})=>{if(c instanceof HTMLInputElement){const{type:d}=c;return d!=="text"&&d!=="number"}return!0},s=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return Ne(this,"_keyboardManager",new au([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],e.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:i}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(l,{target:c})=>!(c instanceof HTMLButtonElement)&&l.#G.contains(c)&&!l.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(l,{target:c})=>!(c instanceof HTMLButtonElement)&&l.#G.contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}]]))}constructor(e,t,i,s,r,l,c,d,h,p,m,v,b,w,x,A){const S=this._signal=this.#e.signal;this.#G=e,this.#J=t,this.#Q=i,this.#r=s,this.#l=r,this.#B=l,this.#q=d,this._eventBus=c,c._on("editingaction",this.onEditingAction.bind(this),{signal:S}),c._on("pagechanging",this.onPageChanging.bind(this),{signal:S}),c._on("scalechanging",this.onScaleChanging.bind(this),{signal:S}),c._on("rotationchanging",this.onRotationChanging.bind(this),{signal:S}),c._on("setpreference",this.onSetPreference.bind(this),{signal:S}),c._on("switchannotationeditorparams",T=>this.updateParams(T.type,T.value),{signal:S}),c._on("pagesedited",this.onPagesEdited.bind(this),{signal:S}),window.addEventListener("pointerdown",()=>{this.#M=!0},{capture:!0,signal:S}),window.addEventListener("pointerup",()=>{this.#M=!1},{capture:!0,signal:S}),this.#re(),this.#he(),this.#te(),this.#s=d.annotationStorage,this.#E=d.filterFactory,this.#U=h,this.#C=p||null,this.#v=m,this.#b=v,this.#y=b,this.#H=w||null,this.viewParameters={realScale:rl.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=x||null,this._supportsPinchToZoom=A!==!1,r?.setSidebarUiManager(this)}destroy(){this.#F?.resolve(),this.#F=null,this.#e?.abort(),this.#e=null,this._signal=null;for(const e of this.#a.values())e.destroy();this.#a.clear(),this.#n.clear(),this.#p.clear(),this.#I?.clear(),this.#t=null,this.#A.clear(),this.#c.destroy(),this.#r?.destroy(),this.#l?.destroy(),this.#B?.destroy(),this.#_?.hide(),this.#_=null,this.#j?.destroy(),this.#j=null,this.#i=null,this.#S&&(clearTimeout(this.#S),this.#S=null),this.#L&&(clearTimeout(this.#L),this.#L=null),this._editorUndoBar?.destroy(),this.#q=null}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return this.#H}get useNewAltTextFlow(){return this.#b}get useNewAltTextWhenAddingImage(){return this.#y}get hcmFilter(){return Ne(this,"hcmFilter",this.#U?this.#E.addHCMFilter(this.#U.foreground,this.#U.background):"none")}get direction(){return Ne(this,"direction",getComputedStyle(this.#G).direction)}get _highlightColors(){return Ne(this,"_highlightColors",this.#C?new Map(this.#C.split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return Ne(this,"highlightColors",null);const t=new Map,i=!!this.#U;for(const[s,r]of e){const l=s.endsWith("_HCM");if(i&&l){t.set(s.replace("_HCM",""),r);continue}!i&&!l&&t.set(s,r)}return Ne(this,"highlightColors",t)}get highlightColorNames(){return Ne(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const t=this.highlightColorNames.get(e);return this._highlightColors.get(t)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#d=e}setMainHighlightColorPicker(e){this.#j=e}editAltText(e,t=!1){this.#r?.editAltText(this,e,t)}hasCommentManager(){return!!this.#l}editComment(e,t,i,s){this.#l?.showDialog(this,e,t,i,s)}selectComment(e,t){this.#a.get(e)?.getEditorByUID(t)?.toggleComment(!0,!0)}updateComment(e){this.#l?.updateComment(e.getData())}updatePopupColor(e){this.#l?.updatePopupColor(e)}removeComment(e){this.#l?.removeComments([e.uid])}deleteComment(e,t){const i=()=>{e.comment=t},s=()=>{this._editorUndoBar?.show(i,"comment"),this.toggleComment(null),e.comment=null};this.addCommands({cmd:s,undo:i,mustExec:!0})}toggleComment(e,t,i=void 0){this.#l?.toggleCommentPopup(e,t,i)}makeCommentColor(e,t){return e&&this.#l?.makeCommentColor(e,t)||null}getCommentDialogElement(){return this.#l?.dialogElement||null}async waitForEditorsRendered(e){if(this.#a.has(e-1))return;const{resolve:t,promise:i}=Promise.withResolvers(),s=r=>{r.pageNumber===e&&(this._eventBus._off("editorsrendered",s),t())};this._eventBus.on("editorsrendered",s),await i}getSignature(e){this.#B?.getSignature({uiManager:this,editor:e})}get signatureManager(){return this.#B}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){e==="enableNewAltTextWhenAddingImage"&&(this.#y=t)}onPagesEdited({pagesMapper:e}){for(const s of this.#n.values())s.updatePageIndex(e.getPrevPageNumber(s.pageIndex+1)-1);const t=this.#a,i=this.#a=new Map;for(const[s,r]of t){const l=e.getPrevPageNumber(s+1)-1;if(l===-1){r.destroy();continue}i.set(l,r),r.updatePageIndex(l)}}onPageChanging({pageNumber:e}){this.#f=e-1}focusMainContainer(){this.#G.focus()}findParent(e,t){for(const i of this.#a.values()){const{x:s,y:r,width:l,height:c}=i.div.getBoundingClientRect();if(e>=s&&e<=s+l&&t>=r&&t<=r+c)return i}return null}disableUserSelect(e=!1){this.#J.classList.toggle("noUserSelect",e)}addShouldRescale(e){this.#p.add(e)}removeShouldRescale(e){this.#p.delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*rl.PDF_TO_CSS_UNITS;for(const t of this.#p)t.onScaleChanging();this.#d?.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}#K({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e}#ee(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const i of this.#a.values())if(i.hasTextLayer(e))return i;return null}highlightSelection(e="",t=!1){const i=document.getSelection();if(!i||i.isCollapsed)return;const{anchorNode:s,anchorOffset:r,focusNode:l,focusOffset:c}=i,d=i.toString(),p=this.#K(i).closest(".textLayer"),m=this.getSelectionBoxes(p);if(!m)return;i.empty();const v=this.#ee(p),b=this.#T===Le.NONE,w=()=>{const x=v?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:m,anchorNode:s,anchorOffset:r,focusNode:l,focusOffset:c,text:d});b&&this.showAllEditors("highlight",!0,!0),t&&x?.editComment()};if(b){this.switchToMode(Le.HIGHLIGHT,w);return}w()}commentSelection(e=""){this.highlightSelection(e,!0)}#se(){const e=document.getSelection();if(!e||e.isCollapsed)return;const i=this.#K(e).closest(".textLayer"),s=this.getSelectionBoxes(i);s&&(this.#_||=new M9(this),this.#_.show(i,s,this.direction==="ltr"))}getAndRemoveDataFromAnnotationStorage(e){if(!this.#s)return null;const t=`${$c}${e}`,i=this.#s.getRawValue(t);return i&&this.#s.remove(t),i}addToAnnotationStorage(e){!e.isEmpty()&&this.#s&&!this.#s.has(e.id)&&this.#s.setValue(e.id,e)}a11yAlert(e,t=null){const i=this.#Q;i&&(i.setAttribute("data-l10n-id",e),t?i.setAttribute("data-l10n-args",JSON.stringify(t)):i.removeAttribute("data-l10n-args"))}#ae(){const e=document.getSelection();if(!e||e.isCollapsed){this.#N&&(this.#_?.hide(),this.#N=null,this.#D({hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===this.#N)return;const s=this.#K(e).closest(".textLayer");if(!s){this.#N&&(this.#_?.hide(),this.#N=null,this.#D({hasSelectedText:!1}));return}if(this.#_?.hide(),this.#N=t,this.#D({hasSelectedText:!0}),!(this.#T!==Le.HIGHLIGHT&&this.#T!==Le.NONE)&&(this.#T===Le.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#x=this.isShiftKeyDown,!this.isShiftKeyDown)){const r=this.#T===Le.HIGHLIGHT?this.#ee(s):null;if(r?.toggleDrawing(),this.#M){const l=new AbortController,c=this.combinedSignal(l),d=h=>{h.type==="pointerup"&&h.button!==0||(l.abort(),r?.toggleDrawing(!0),h.type==="pointerup"&&this.#X("main_toolbar"))};window.addEventListener("pointerup",d,{signal:c}),window.addEventListener("blur",d,{signal:c})}else r?.toggleDrawing(!0),this.#X("main_toolbar")}}#X(e=""){this.#T===Le.HIGHLIGHT?this.highlightSelection(e):this.#v&&this.#se()}#re(){document.addEventListener("selectionchange",this.#ae.bind(this),{signal:this._signal})}#oe(){if(this.#w)return;this.#w=new AbortController;const e=this.combinedSignal(this.#w);window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})}#le(){this.#w?.abort(),this.#w=null}blur(){if(this.isShiftKeyDown=!1,this.#x&&(this.#x=!1,this.#X("main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of this.#A)if(t.div.contains(e)){this.#P=[t,e],t._focusEventsAllowed=!1;break}}focus(){if(!this.#P)return;const[e,t]=this.#P;this.#P=null,t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}#te(){if(this.#O)return;this.#O=new AbortController;const e=this.combinedSignal(this.#O);window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})}#ce(){this.#O?.abort(),this.#O=null}#ue(){if(this.#h)return;this.#h=new AbortController;const e=this.combinedSignal(this.#h);document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})}#de(){this.#h?.abort(),this.#h=null}#he(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})}addEditListeners(){this.#te(),this.setEditingState(!0)}removeEditListeners(){this.#ce(),this.setEditingState(!1)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const i of this.#u)if(i.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const i of this.#u)if(i.isHandlingMimeForPasting(t.type)){i.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){if(e.preventDefault(),this.#t?.commitOrRemove(),!this.hasSelection)return;const t=[];for(const i of this.#A){const s=i.serialize(!0);s&&t.push(s)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const r of t.items)for(const l of this.#u)if(l.isHandlingMimeForPasting(r.type)){l.paste(r,this.currentLayer);return}let i=t.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(r){Oe(`paste: "${r.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();const s=this.currentLayer;try{const r=[];for(const d of i){const h=await s.deserialize(d);if(!h)return;r.push(h)}const l=()=>{for(const d of r)this.#ne(d);this.#ie(r)},c=()=>{for(const d of r)d.remove()};this.addCommands({cmd:l,undo:c,mustExec:!0})}catch(r){Oe(`paste: "${r.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),this.#T!==Le.NONE&&!this.isEditorHandlingKeyboard&&Ga._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,this.#x&&(this.#x=!1,this.#X("main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}#D(e){Object.entries(e).some(([i,s])=>this.#Y[i]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#Y,e)}),this.#T===Le.HIGHLIGHT&&e.hasSelectedEditor===!1&&this.#$([[Ze.HIGHLIGHT_FREE,!0]]))}#$(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}setEditingState(e){e?(this.#oe(),this.#ue(),this.#D({isEditing:this.#T!==Le.NONE,isEmpty:this.#W(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#le(),this.#de(),this.#D({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!this.#u){this.#u=e;for(const t of this.#u)this.#$(t.defaultPropertiesToUpdate)}}getId(){return this.#R.id}get currentLayer(){return this.#a.get(this.#f)}getLayer(e){return this.#a.get(e)}get currentPageIndex(){return this.#f}addLayer(e){this.#a.set(e.pageIndex,e),this.#k?e.enable():e.disable()}removeLayer(e){this.#a.delete(e.pageIndex)}async updateMode(e,t=null,i=!1,s=!1,r=!1,l=!1){if(this.#T!==e&&!(this.#F&&(await this.#F.promise,!this.#F))){if(this.#F=Promise.withResolvers(),this.#d?.commitOrRemove(),this.#T===Le.POPUP&&this.#l?.hideSidebar(),this.#l?.destroyPopup(),this.#T=e,e===Le.NONE){this.setEditingState(!1),this.#pe();for(const c of this.#n.values())c.hideStandaloneCommentButton();this._editorUndoBar?.hide(),this.toggleComment(null),this.#F.resolve();return}for(const c of this.#n.values())c.addStandaloneCommentButton();e===Le.SIGNATURE&&await this.#B?.loadSignatures(),i&&et.clearPointerType(),this.setEditingState(!0),await this.#fe(),this.unselectAll();for(const c of this.#a.values())c.updateMode(e);if(e===Le.POPUP){this.#i||=await this.#q.getAnnotationsByType(new Set(this.#u.map(h=>h._editorType)));const c=new Set,d=[];for(const h of this.#n.values()){const{annotationElementId:p,hasComment:m,deleted:v}=h;p&&c.add(p),m&&!v&&d.push(h.getData())}for(const h of this.#i){const{id:p,popupRef:m,contentsObj:v}=h;m&&v?.str&&!c.has(p)&&!this.#g.has(p)&&d.push(h)}this.#l?.showSidebar(d)}if(!t){s&&this.addNewEditorFromKeyboard(),this.#F.resolve();return}for(const c of this.#n.values())c.uid===t?(this.setSelected(c),l?c.editComment():r?c.enterInEditMode():c.focus()):c.unselect();this.#F.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==this.#T&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){if(this.#u){switch(e){case Ze.CREATE:this.currentLayer.addNewEditor(t);return;case Ze.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#Z||=new Map).set(e,t),this.showAllEditors("highlight",t);break}if(this.hasSelection)for(const i of this.#A)i.updateParams(e,t);else for(const i of this.#u)i.updateDefaultParams(e,t)}}showAllEditors(e,t,i=!1){for(const r of this.#n.values())r.editorType===e&&r.show(t);(this.#Z?.get(Ze.HIGHLIGHT_SHOW_ALL)??!0)!==t&&this.#$([[Ze.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(this.#z!==e){this.#z=e;for(const t of this.#a.values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}async#fe(){if(!this.#k){this.#k=!0;const e=[];for(const t of this.#a.values())e.push(t.enable());await Promise.all(e);for(const t of this.#n.values())t.enable()}}#pe(){if(this.unselectAll(),this.#k){this.#k=!1;for(const e of this.#a.values())e.disable();for(const e of this.#n.values())e.disable()}}*getEditors(e){for(const t of this.#n.values())t.pageIndex===e&&(yield t)}getEditor(e){return this.#n.get(e)}addEditor(e){this.#n.set(e.id,e)}removeEditor(e){e.div.contains(document.activeElement)&&(this.#S&&clearTimeout(this.#S),this.#S=setTimeout(()=>{this.focusMainContainer(),this.#S=null},0)),this.#n.delete(e.id),e.annotationElementId&&this.#I?.delete(e.annotationElementId),this.unselect(e),(!e.annotationElementId||!this.#g.has(e.annotationElementId))&&this.#s?.remove(e.id)}addDeletedAnnotationElement(e){this.#g.add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return this.#g.has(e)}removeDeletedAnnotationElement(e){this.#g.delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}#ne(e){const t=this.#a.get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))}setActiveEditor(e){this.#t!==e&&(this.#t=e,e&&this.#$(e.propertiesToUpdate))}get#me(){let e=null;for(e of this.#A);return e}updateUI(e){this.#me===e&&this.#$(e.propertiesToUpdate)}updateUIForDefaultProperties(e){this.#$(e.defaultPropertiesToUpdate)}toggleSelected(e){if(this.#A.has(e)){this.#A.delete(e),e.unselect(),this.#D({hasSelectedEditor:this.hasSelection});return}this.#A.add(e),e.select(),this.#$(e.propertiesToUpdate),this.#D({hasSelectedEditor:!0})}setSelected(e){this.updateToolbar({mode:e.mode,editId:e.uid}),this.#d?.commitOrRemove();for(const t of this.#A)t!==e&&t.unselect();this.#A.clear(),this.#A.add(e),e.select(),this.#$(e.propertiesToUpdate),this.#D({hasSelectedEditor:!0})}isSelected(e){return this.#A.has(e)}get firstSelectedEditor(){return this.#A.values().next().value}unselect(e){e.unselect(),this.#A.delete(e),this.#D({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#A.size!==0}get isEnterHandled(){return this.#A.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#D({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#W()}),this._editorUndoBar?.hide()}redo(){this.#c.redo(),this.#D({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#W()})}addCommands(e){this.#c.add(e),this.#D({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#W()})}cleanUndoStack(e){this.#c.cleanType(e)}#W(){if(this.#n.size===0)return!0;if(this.#n.size===1)for(const e of this.#n.values())return e.isEmpty();return!1}delete(){this.commitOrRemove();const e=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...this.#A],i=()=>{this._editorUndoBar?.show(s,t.length===1?t[0].editorType:t.length);for(const r of t)r.remove()},s=()=>{for(const r of t)this.#ne(r)};this.addCommands({cmd:i,undo:s,mustExec:!0})}commitOrRemove(){this.#t?.commitOrRemove()}hasSomethingToControl(){return this.#t||this.hasSelection}#ie(e){for(const t of this.#A)t.unselect();this.#A.clear();for(const t of e)t.isEmpty()||(this.#A.add(t),t.select());this.#D({hasSelectedEditor:this.hasSelection})}selectAll(){for(const e of this.#A)e.commit();this.#ie(this.#n.values())}unselectAll(){if(!(this.#t&&(this.#t.commitOrRemove(),this.#T!==Le.NONE))&&!this.#d?.commitOrRemove()&&this.hasSelection){for(const e of this.#A)e.unselect();this.#A.clear(),this.#D({hasSelectedEditor:!1})}}translateSelectedEditors(e,t,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;this.#V[0]+=e,this.#V[1]+=t;const[s,r]=this.#V,l=[...this.#A],c=1e3;this.#L&&clearTimeout(this.#L),this.#L=setTimeout(()=>{this.#L=null,this.#V[0]=this.#V[1]=0,this.addCommands({cmd:()=>{for(const d of l)this.#n.has(d.id)&&(d.translateInPage(s,r),d.translationDone())},undo:()=>{for(const d of l)this.#n.has(d.id)&&(d.translateInPage(-s,-r),d.translationDone())},mustExec:!1})},c);for(const d of l)d.translateInPage(e,t),d.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#m=new Map;for(const e of this.#A)this.#m.set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#m)return!1;this.disableUserSelect(!1);const e=this.#m;this.#m=null;let t=!1;for(const[{x:s,y:r,pageIndex:l},c]of e)c.newX=s,c.newY=r,c.newPageIndex=l,t||=s!==c.savedX||r!==c.savedY||l!==c.savedPageIndex;if(!t)return!1;const i=(s,r,l,c)=>{if(this.#n.has(s.id)){const d=this.#a.get(c);d?s._setParentAndPosition(d,r,l):(s.pageIndex=c,s.x=r,s.y=l)}};return this.addCommands({cmd:()=>{for(const[s,{newX:r,newY:l,newPageIndex:c}]of e)i(s,r,l,c)},undo:()=>{for(const[s,{savedX:r,savedY:l,savedPageIndex:c}]of e)i(s,r,l,c)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(this.#m)for(const i of this.#m.keys())i.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#A.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return this.#t===e}getActive(){return this.#t}getMode(){return this.#T}isEditingMode(){return this.#T!==Le.NONE}get imageManager(){return Ne(this,"imageManager",new My)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let h=0,p=t.rangeCount;h<p;h++)if(!e.contains(t.getRangeAt(h).commonAncestorContainer))return null;const{x:i,y:s,width:r,height:l}=e.getBoundingClientRect();let c;switch(e.getAttribute("data-main-rotation")){case"90":c=(h,p,m,v)=>({x:(p-s)/l,y:1-(h+m-i)/r,width:v/l,height:m/r});break;case"180":c=(h,p,m,v)=>({x:1-(h+m-i)/r,y:1-(p+v-s)/l,width:m/r,height:v/l});break;case"270":c=(h,p,m,v)=>({x:1-(p+v-s)/l,y:(h-i)/r,width:v/l,height:m/r});break;default:c=(h,p,m,v)=>({x:(h-i)/r,y:(p-s)/l,width:m/r,height:v/l});break}const d=[];for(let h=0,p=t.rangeCount;h<p;h++){const m=t.getRangeAt(h);if(!m.collapsed)for(const{x:v,y:b,width:w,height:x}of m.getClientRects())w===0||x===0||d.push(c(v,b,w,x))}return d.length===0?null:d}addChangedExistingAnnotation({annotationElementId:e,id:t}){(this.#o||=new Map).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){this.#o?.delete(e)}renderAnnotationElement(e){const t=this.#o?.get(e.data.id);if(!t)return;const i=this.#s.getRawValue(t);i&&(this.#T===Le.NONE&&!i.hasBeenModified||i.renderAnnotationElement(e))}setMissingCanvas(e,t,i){const s=this.#I?.get(e);s&&(s.setCanvas(t,i),this.#I.delete(e))}addMissingCanvas(e,t){(this.#I||=new Map).set(e,t)}}class Ss{#e=null;#t=!1;#i=null;#n=null;#a=null;#r=null;#s=!1;#o=null;#c=null;#l=null;#h=null;#d=!1;static#f=null;static _l10n=null;constructor(e){this.#c=e,this.#d=e._uiManager.useNewAltTextFlow,Ss.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(e){Ss._l10n??=e}async render(){const e=this.#i=document.createElement("button");e.className="altText",e.tabIndex="0";const t=this.#n=document.createElement("span");e.append(t),this.#d?(e.classList.add("new"),e.setAttribute("data-l10n-id",Ss.#f.missing),t.setAttribute("data-l10n-id",Ss.#f["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const i=this.#c._uiManager._signal;e.addEventListener("contextmenu",Hi,{signal:i}),e.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:i});const s=r=>{r.preventDefault(),this.#c._uiManager.editAltText(this.#c),this.#d&&this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#g}})};return e.addEventListener("click",s,{capture:!0,signal:i}),e.addEventListener("keydown",r=>{r.target===e&&r.key==="Enter"&&(this.#s=!0,s(r))},{signal:i}),await this.#m(),e}get#g(){return this.#e&&"added"||this.#e===null&&this.guessedText&&"review"||"missing"}finish(){this.#i&&(this.#i.focus({focusVisible:this.#s}),this.#s=!1)}isEmpty(){return this.#d?this.#e===null:!this.#e&&!this.#t}hasData(){return this.#d?this.#e!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(e){this.#e===null&&(this.#l=e,this.#h=await Ss._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e}),this.#m())}toggleAltTextBadge(e=!1){if(!this.#d||this.#e){this.#o?.remove(),this.#o=null;return}if(!this.#o){const t=this.#o=document.createElement("div");t.className="noAltTextBadge",this.#c.div.append(t)}this.#o.classList.toggle("hidden",!e)}serialize(e){let t=this.#e;return!e&&this.#l===t&&(t=this.#h),{altText:t,decorative:this.#t,guessedText:this.#l,textWithDisclaimer:this.#h}}get data(){return{altText:this.#e,decorative:this.#t}}set data({altText:e,decorative:t,guessedText:i,textWithDisclaimer:s,cancel:r=!1}){i&&(this.#l=i,this.#h=s),!(this.#e===e&&this.#t===t)&&(r||(this.#e=e,this.#t=t),this.#m())}toggle(e=!1){this.#i&&(!e&&this.#r&&(clearTimeout(this.#r),this.#r=null),this.#i.disabled=!e)}shown(){this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#g}})}destroy(){this.#i?.remove(),this.#i=null,this.#n=null,this.#a=null,this.#o?.remove(),this.#o=null}async#m(){const e=this.#i;if(!e)return;if(this.#d){if(e.classList.toggle("done",!!this.#e),e.setAttribute("data-l10n-id",Ss.#f[this.#g]),this.#n?.setAttribute("data-l10n-id",Ss.#f[`${this.#g}-label`]),!this.#e){this.#a?.remove();return}}else{if(!this.#e&&!this.#t){e.classList.remove("done"),this.#a?.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=this.#a;if(!t){this.#a=t=document.createElement("span"),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${this.#c.id}`;const s=100,r=this.#c._uiManager._signal;r.addEventListener("abort",()=>{clearTimeout(this.#r),this.#r=null},{once:!0}),e.addEventListener("mouseenter",()=>{this.#r=setTimeout(()=>{this.#r=null,this.#a.classList.add("show"),this.#c._reportTelemetry({action:"alt_text_tooltip"})},s)},{signal:r}),e.addEventListener("mouseleave",()=>{this.#r&&(clearTimeout(this.#r),this.#r=null),this.#a?.classList.remove("show")},{signal:r})}this.#t?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=this.#e),t.parentNode||e.append(t),this.#c.getElementForAltText()?.setAttribute("aria-describedby",t.id)}}class Pd{#e=null;#t=null;#i=!1;#n=null;#a=null;#r=null;#s=null;#o=null;#c=!1;#l=null;constructor(e){this.#n=e}renderForToolbar(){const e=this.#t=document.createElement("button");return e.className="comment",this.#h(e,!1)}renderForStandalone(){const e=this.#e=document.createElement("button");e.className="annotationCommentButton";const t=this.#n.commentButtonPosition;if(t){const{style:i}=e;i.insetInlineEnd=`calc(${100*(this.#n._uiManager.direction==="ltr"?1-t[0]:t[0])}% - var(--comment-button-dim))`,i.top=`calc(${100*t[1]}% - var(--comment-button-dim))`;const s=this.#n.commentButtonColor;s&&(i.backgroundColor=s)}return this.#h(e,!0)}focusButton(){setTimeout(()=>{(this.#e??this.#t)?.focus()},0)}onUpdatedColor(){if(!this.#e)return;const e=this.#n.commentButtonColor;e&&(this.#e.style.backgroundColor=e),this.#n._uiManager.updatePopupColor(this.#n)}get commentButtonWidth(){return(this.#e?.getBoundingClientRect().width??0)/this.#n.parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(this.#l)return this.#l;if(!this.#e)return null;const{x:e,y:t,height:i}=this.#e.getBoundingClientRect(),{x:s,y:r,width:l,height:c}=this.#n.parent.boundingClientRect;return[(e-s)/l,(t+i-r)/c]}set commentPopupPositionInLayer(e){this.#l=e}hasDefaultPopupPosition(){return this.#l===null}removeStandaloneCommentButton(){this.#e?.remove(),this.#e=null}removeToolbarCommentButton(){this.#t?.remove(),this.#t=null}setCommentButtonStates({selected:e,hasPopup:t}){this.#e&&(this.#e.classList.toggle("selected",e),this.#e.ariaExpanded=t)}#h(e,t){if(!this.#n._uiManager.hasCommentManager())return null;e.tabIndex="0",e.ariaHasPopup="dialog",t?(e.ariaControls="commentPopup",e.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(e.ariaControlsElements=[this.#n._uiManager.getCommentDialogElement()],e.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));const i=this.#n._uiManager._signal;if(!(i instanceof AbortSignal)||i.aborted)return e;e.addEventListener("contextmenu",Hi,{signal:i}),t&&(e.addEventListener("focusin",r=>{this.#n._focusEventsAllowed=!1,Gt(r)},{capture:!0,signal:i}),e.addEventListener("focusout",r=>{this.#n._focusEventsAllowed=!0,Gt(r)},{capture:!0,signal:i})),e.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:i});const s=r=>{r.preventDefault(),e===this.#t?this.edit():this.#n.toggleComment(!0)};return e.addEventListener("click",s,{capture:!0,signal:i}),e.addEventListener("keydown",r=>{r.target===e&&r.key==="Enter"&&(this.#i=!0,s(r))},{signal:i}),e.addEventListener("pointerenter",()=>{this.#n.toggleComment(!1,!0)},{signal:i}),e.addEventListener("pointerleave",()=>{this.#n.toggleComment(!1,!1)},{signal:i}),e}edit(e){const t=this.commentPopupPositionInLayer;let i,s;if(t)[i,s]=t;else{[i,s]=this.#n.commentButtonPosition;const{width:p,height:m,x:v,y:b}=this.#n;i=v+i*p,s=b+s*m}const r=this.#n.parent.boundingClientRect,{x:l,y:c,width:d,height:h}=r;this.#n._uiManager.editComment(this.#n,l+i*d,c+s*h,{...e,parentDimensions:r})}finish(){this.#t&&(this.#t.focus({focusVisible:this.#i}),this.#i=!1)}isDeleted(){return this.#c||this.#s===""}isEmpty(){return this.#s===null}hasBeenEdited(){return this.isDeleted()||this.#s!==this.#a}serialize(){return this.data}get data(){return{text:this.#s,richText:this.#r,date:this.#o,deleted:this.isDeleted()}}set data(e){if(e!==this.#s&&(this.#r=null),e===null){this.#s="",this.#c=!0;return}this.#s=e,this.#o=new Date,this.#c=!1}restoreData({text:e,richText:t,date:i}){this.#s=e,this.#r=t,this.#o=i,this.#c=!1}setInitialText(e,t=null){this.#a=e,this.data=e,this.#o=null,this.#r=t}shown(){}destroy(){this.#t?.remove(),this.#t=null,this.#e?.remove(),this.#e=null,this.#s="",this.#r=null,this.#o=null,this.#n=null,this.#i=!1,this.#c=!1}}class sf{#e;#t=!1;#i=null;#n;#a;#r;#s;#o=null;#c;#l=null;#h;#d=null;constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:i=null,onPinchStart:s=null,onPinching:r=null,onPinchEnd:l=null,signal:c}){this.#e=e,this.#i=i,this.#n=t,this.#a=s,this.#r=r,this.#s=l,this.#h=new AbortController,this.#c=AbortSignal.any([c,this.#h.signal]),e.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#c})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Rs.pixelRatio}#f(e){if(this.#n?.())return;if(e.touches.length===1){if(this.#o)return;const s=this.#o=new AbortController,r=AbortSignal.any([this.#c,s.signal]),l=this.#e,c={capture:!0,signal:r,passive:!1},d=h=>{h.pointerType==="touch"&&(this.#o?.abort(),this.#o=null)};l.addEventListener("pointerdown",h=>{h.pointerType==="touch"&&(Gt(h),d(h))},c),l.addEventListener("pointerup",d,c),l.addEventListener("pointercancel",d,c);return}if(!this.#d){this.#d=new AbortController;const s=AbortSignal.any([this.#c,this.#d.signal]),r=this.#e,l={signal:s,capture:!1,passive:!1};r.addEventListener("touchmove",this.#g.bind(this),l);const c=this.#m.bind(this);r.addEventListener("touchend",c,l),r.addEventListener("touchcancel",c,l),l.capture=!0,r.addEventListener("pointerdown",Gt,l),r.addEventListener("pointermove",Gt,l),r.addEventListener("pointercancel",Gt,l),r.addEventListener("pointerup",Gt,l),this.#a?.()}if(Gt(e),e.touches.length!==2||this.#i?.()){this.#l=null;return}let[t,i]=e.touches;t.identifier>i.identifier&&([t,i]=[i,t]),this.#l={touch0X:t.screenX,touch0Y:t.screenY,touch1X:i.screenX,touch1Y:i.screenY}}#g(e){if(!this.#l||e.touches.length!==2)return;Gt(e);let[t,i]=e.touches;t.identifier>i.identifier&&([t,i]=[i,t]);const{screenX:s,screenY:r}=t,{screenX:l,screenY:c}=i,d=this.#l,{touch0X:h,touch0Y:p,touch1X:m,touch1Y:v}=d,b=m-h,w=v-p,x=l-s,A=c-r,S=Math.hypot(x,A)||1,T=Math.hypot(b,w)||1;if(!this.#t&&Math.abs(T-S)<=sf.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(d.touch0X=s,d.touch0Y=r,d.touch1X=l,d.touch1Y=c,!this.#t){this.#t=!0;return}const E=[(s+l)/2,(r+c)/2];this.#r?.(E,T,S)}#m(e){e.touches.length>=2||(this.#d&&(this.#d.abort(),this.#d=null,this.#s?.()),this.#l&&(Gt(e),this.#l=null,this.#t=!1))}destroy(){this.#h?.abort(),this.#h=null,this.#o?.abort(),this.#o=null}}class Ce{#e=null;#t=null;#i=null;#n=null;#a=null;#r=!1;#s=null;#o="";#c=null;#l=null;#h=null;#d=null;#f=null;#g="";#m=!1;#u=null;#p=!1;#v=!1;#b=!1;#y=null;#E=0;#S=0;#w=null;#C=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#x=!1;#_=Ce._zIndex++;static _borderLineWidth=-1;static _colorManager=new Ry;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const e=Ce.prototype._resizeWithKeyboard,t=Ga.TRANSLATE_SMALL,i=Ga.TRANSLATE_BIG;return Ne(this,"_resizerKeyboardManager",new au([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,i]}],[["Escape","mac+Escape"],Ce.prototype._stopResizingWithKeyboard]]))}constructor(e){this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null,this.creationDate=e.creationDate||new Date,this.modificationDate=e.modificationDate||null,this.canAddComment=!0;const{rotation:t,rawDims:{pageWidth:i,pageHeight:s,pageX:r,pageY:l}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,s],this.pageTranslation=[r,l];const[c,d]=this.parentDimensions;this.x=e.x/c,this.y=e.y/d,this.isAttachedToDOM=!1,this.deleted=!1}updatePageIndex(e){this.pageIndex=e}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Ne(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new O9({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(Ce._l10n??=e,Ce._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),Ce._borderLineWidth!==-1)return;const i=getComputedStyle(document.documentElement);Ce._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){nt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#x}set _isDraggable(e){this.#x=e,this.div?.classList.toggle("draggable",e)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#_}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):(this.#L(),this.#d?.remove(),this.#d=null),this.parent=e}focusin(e){this._focusEventsAllowed&&(this.#m?this.#m=!1:this.parent.setSelected(this))}focusout(e){!this._focusEventsAllowed||!this.isAttachedToDOM||e.relatedTarget?.closest(`#${this.id}`)||(e.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,i,s){const[r,l]=this.parentDimensions;[i,s]=this.screenToPageTranslation(i,s),this.x=(e+i)/r,this.y=(t+s)/l,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[i,s]=this.parentDimensions;this.setAt(e*i,t*s,this.width*i,this.height*s),this._onTranslated()}#R([e,t],i,s){[i,s]=this.screenToPageTranslation(i,s),this.x+=i/e,this.y+=s/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(e,t){this.#R(this.parentDimensions,e,t)}translateInPage(e,t){this.#u||=[this.x,this.y,this.width,this.height],this.#R(this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){this.#u||=[this.x,this.y,this.width,this.height];const{div:i,parentDimensions:[s,r]}=this;if(this.x+=e/s,this.y+=t/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:m,y:v}=this.div.getBoundingClientRect();this.parent.findNewParent(this,m,v)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:l,y:c}=this;const[d,h]=this.getBaseTranslation();l+=d,c+=h;const{style:p}=i;p.left=`${(100*l).toFixed(2)}%`,p.top=`${(100*c).toFixed(2)}%`,this._onTranslating(l,c),i.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!this.#u&&(this.#u[0]!==this.x||this.#u[1]!==this.y)}get _hasBeenResized(){return!!this.#u&&(this.#u[2]!==this.width||this.#u[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:i}=Ce,s=i/e,r=i/t;switch(this.rotation){case 90:return[-s,r];case 180:return[s,r];case 270:return[s,-r];default:return[-s,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[i,s]}=this;let{x:r,y:l,width:c,height:d}=this;if(c*=i,d*=s,r*=i,l*=s,this._mustFixPosition)switch(e){case 0:r=Nn(r,0,i-c),l=Nn(l,0,s-d);break;case 90:r=Nn(r,0,i-d),l=Nn(l,c,s);break;case 180:r=Nn(r,c,i),l=Nn(l,d,s);break;case 270:r=Nn(r,d,i),l=Nn(l,0,s-c);break}this.x=r/=i,this.y=l/=s;const[h,p]=this.getBaseTranslation();r+=h,l+=p,t.left=`${(100*r).toFixed(2)}%`,t.top=`${(100*l).toFixed(2)}%`,this.moveInDOM()}static#k(e,t,i){switch(i){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}}screenToPageTranslation(e,t){return Ce.#k(e,t,this.parentRotation)}pageTranslationToScreen(e,t){return Ce.#k(e,t,360-this.parentRotation)}#M(e){switch(e){case 90:{const[t,i]=this.pageDimensions;return[0,-t/i,i/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,i]=this.pageDimensions;return[0,t/i,-i/t,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,i]}=this;return[t*e,i*e]}setDims(){const{div:{style:e},width:t,height:i}=this;e.width=`${(100*t).toFixed(2)}%`,e.height=`${(100*i).toFixed(2)}%`}getInitialTranslation(){return[0,0]}#z(){if(this.#c)return;this.#c=document.createElement("div"),this.#c.classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const i of e){const s=document.createElement("div");this.#c.append(s),s.classList.add("resizer",i),s.setAttribute("data-resizer-name",i),s.addEventListener("pointerdown",this.#O.bind(this,i),{signal:t}),s.addEventListener("contextmenu",Hi,{signal:t}),s.tabIndex=-1}this.div.prepend(this.#c)}#O(e,t){t.preventDefault();const{isMac:i}=mn.platform;if(t.button!==0||t.ctrlKey&&i)return;this.#i?.toggle(!1);const s=this._isDraggable;this._isDraggable=!1,this.#l=[t.screenX,t.screenY];const r=new AbortController,l=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#I.bind(this,e),{passive:!0,capture:!0,signal:l}),window.addEventListener("touchmove",Gt,{passive:!1,signal:l}),window.addEventListener("contextmenu",Hi,{signal:l}),this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const c=this.parent.div.style.cursor,d=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const h=()=>{r.abort(),this.parent.togglePointerEvents(!0),this.#i?.toggle(!0),this._isDraggable=s,this.parent.div.style.cursor=c,this.div.style.cursor=d,this.#j()};window.addEventListener("pointerup",h,{signal:l}),window.addEventListener("blur",h,{signal:l})}#P(e,t,i,s){this.width=i,this.height=s,this.x=e,this.y=t,this.setDims(),this.fixAndSetPosition(),this._onResized()}_onResized(){}#j(){if(!this.#h)return;const{savedX:e,savedY:t,savedWidth:i,savedHeight:s}=this.#h;this.#h=null;const r=this.x,l=this.y,c=this.width,d=this.height;r===e&&l===t&&c===i&&d===s||this.addCommands({cmd:this.#P.bind(this,r,l,c,d),undo:this.#P.bind(this,e,t,i,s),mustExec:!0})}static _round(e){return Math.round(e*1e4)/1e4}#I(e,t){const[i,s]=this.parentDimensions,r=this.x,l=this.y,c=this.width,d=this.height,h=Ce.MIN_SIZE/i,p=Ce.MIN_SIZE/s,m=this.#M(this.rotation),v=(N,U)=>[m[0]*N+m[2]*U,m[1]*N+m[3]*U],b=this.#M(360-this.rotation),w=(N,U)=>[b[0]*N+b[2]*U,b[1]*N+b[3]*U];let x,A,S=!1,T=!1;switch(e){case"topLeft":S=!0,x=(N,U)=>[0,0],A=(N,U)=>[N,U];break;case"topMiddle":x=(N,U)=>[N/2,0],A=(N,U)=>[N/2,U];break;case"topRight":S=!0,x=(N,U)=>[N,0],A=(N,U)=>[0,U];break;case"middleRight":T=!0,x=(N,U)=>[N,U/2],A=(N,U)=>[0,U/2];break;case"bottomRight":S=!0,x=(N,U)=>[N,U],A=(N,U)=>[0,0];break;case"bottomMiddle":x=(N,U)=>[N/2,U],A=(N,U)=>[N/2,0];break;case"bottomLeft":S=!0,x=(N,U)=>[0,U],A=(N,U)=>[N,0];break;case"middleLeft":T=!0,x=(N,U)=>[0,U/2],A=(N,U)=>[N,U/2];break}const E=x(c,d),M=A(c,d);let R=v(...M);const O=Ce._round(r+R[0]),L=Ce._round(l+R[1]);let D=1,$=1,ee,X;if(t.fromKeyboard)({deltaX:ee,deltaY:X}=t);else{const{screenX:N,screenY:U}=t,[B,se]=this.#l;[ee,X]=this.screenToPageTranslation(N-B,U-se),this.#l[0]=N,this.#l[1]=U}if([ee,X]=w(ee/i,X/s),S){const N=Math.hypot(c,d);D=$=Math.max(Math.min(Math.hypot(M[0]-E[0]-ee,M[1]-E[1]-X)/N,1/c,1/d),h/c,p/d)}else T?D=Nn(Math.abs(M[0]-E[0]-ee),h,1)/c:$=Nn(Math.abs(M[1]-E[1]-X),p,1)/d;const le=Ce._round(c*D),de=Ce._round(d*$);R=v(...A(le,de));const ce=O-R[0],fe=L-R[1];this.#u||=[this.x,this.y,this.width,this.height],this.width=le,this.height=de,this.x=ce,this.y=fe,this.setDims(),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#i?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#v)return this._editToolbar;this._editToolbar=new Tc(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[t,i]of e)await this._editToolbar.addButton(t,i);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,this.#i?.destroy()}addContainer(e){const t=this._editToolbar?.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#i||(Ss.initialize(Ce._l10n),this.#i=new Ss(this),this.#e&&(this.#i.data=this.#e,this.#e=null)),this.#i}get altTextData(){return this.#i?.data}set altTextData(e){this.#i&&(this.#i.data=e)}get guessedAltText(){return this.#i?.guessedText}async setGuessedAltText(e){await this.#i?.setGuessedText(e)}serializeAltText(e){return this.#i?.serialize(e)}hasAltText(){return!!this.#i&&!this.#i.isEmpty()}hasAltTextData(){return this.#i?.hasData()??!1}focusCommentButton(){this.#n?.focusButton()}addCommentButton(){return this.canAddComment?this.#n||=new Pd(this):null}addStandaloneCommentButton(){if(this._uiManager.hasCommentManager()){if(this.#a){this._uiManager.isEditingMode()&&this.#a.classList.remove("hidden");return}this.hasComment&&(this.#a=this.#n.renderForStandalone(),this.div.append(this.#a))}}removeStandaloneCommentButton(){this.#n.removeStandaloneCommentButton(),this.#a=null}hideStandaloneCommentButton(){this.#a?.classList.add("hidden")}get comment(){if(!this.#n)return null;const{data:{richText:e,text:t,date:i,deleted:s}}=this.#n;return{text:t,richText:e,date:i,deleted:s,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(e){this.#n||=new Pd(this),typeof e=="object"&&e!==null?this.#n.restoreData(e):this.#n.data=e,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:e,popupRef:t,richText:i}){if(!t||(this.#n||=new Pd(this),this.#n.setInitialText(e,i),!this.annotationElementId))return;const s=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);s&&this.updateFromAnnotationLayer(s)}get hasEditedComment(){return this.#n?.hasBeenEdited()}get hasDeletedComment(){return this.#n?.isDeleted()}get hasComment(){return!!this.#n&&!this.#n.isEmpty()&&!this.#n.isDeleted()}async editComment(e){this.#n||=new Pd(this),this.#n.edit(e)}toggleComment(e,t=void 0){this.hasComment&&this._uiManager.toggleComment(this,e,t)}setSelectedCommentButton(e){this.#n.setSelectedButton(e)}addComment(e){if(this.hasEditedComment){const[,,,s]=e.rect,[r]=this.pageDimensions,[l]=this.pageTranslation,c=l+r+1,d=s-100,h=c+180;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[c,d,h,s]}}}updateFromAnnotationLayer({popup:{contents:e,deleted:t}}){this.#n.data=t?null:e}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=this.#r?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),this.#U();const[t,i]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*i/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/i).toFixed(2)}%`);const[s,r]=this.getInitialTranslation();return this.translate(s,r),E2(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#C||=new sf({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#H.bind(this),onPinching:this.#T.bind(this),onPinchEnd:this.#A.bind(this),signal:this._uiManager._signal})),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),e}#H(){this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#i?.toggle(!1),this.parent.togglePointerEvents(!1)}#T(e,t,i){let r=.7*(i/t)+1-.7;if(r===1)return;const l=this.#M(this.rotation),c=(O,L)=>[l[0]*O+l[2]*L,l[1]*O+l[3]*L],[d,h]=this.parentDimensions,p=this.x,m=this.y,v=this.width,b=this.height,w=Ce.MIN_SIZE/d,x=Ce.MIN_SIZE/h;r=Math.max(Math.min(r,1/v,1/b),w/v,x/b);const A=Ce._round(v*r),S=Ce._round(b*r);if(A===v&&S===b)return;this.#u||=[p,m,v,b];const T=c(v/2,b/2),E=Ce._round(p+T[0]),M=Ce._round(m+T[1]),R=c(A/2,S/2);this.x=E-R[0],this.y=M-R[1],this.width=A,this.height=S,this.setDims(),this.fixAndSetPosition(),this._onResizing()}#A(){this.#i?.toggle(!0),this.parent.togglePointerEvents(!0),this.#j()}pointerdown(e){const{isMac:t}=mn.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(this.#m=!0,this._isDraggable){this.#B(e);return}this.#N(e)}#N(e){const{isMac:t}=mn.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)}#B(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let i=!1;const s=new AbortController,r=this._uiManager.combinedSignal(s),l={capture:!0,passive:!1,signal:r},c=h=>{s.abort(),this.#s=null,this.#m=!1,this._uiManager.endDragSession()||this.#N(h),i&&this._onStopDragging()};t&&(this.#E=e.clientX,this.#S=e.clientY,this.#s=e.pointerId,this.#o=e.pointerType,window.addEventListener("pointermove",h=>{i||(i=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:p,clientY:m,pointerId:v}=h;if(v!==this.#s){Gt(h);return}const[b,w]=this.screenToPageTranslation(p-this.#E,m-this.#S);this.#E=p,this.#S=m,this._uiManager.dragSelectedEditors(b,w)},l),window.addEventListener("touchmove",Gt,l),window.addEventListener("pointerdown",h=>{h.pointerType===this.#o&&(this.#C||h.isPrimary)&&c(h),Gt(h)},l));const d=h=>{if(!this.#s||this.#s===h.pointerId){c(h);return}Gt(h)};window.addEventListener("pointerup",d,{signal:r}),window.addEventListener("blur",d,{signal:r})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#y&&clearTimeout(this.#y),this.#y=setTimeout(()=>{this.#y=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(e,t,i){e.changeParent(this),this.x=t,this.y=i,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,i=this.rotation){const s=this.parentScale,[r,l]=this.pageDimensions,[c,d]=this.pageTranslation,h=e/s,p=t/s,m=this.x*r,v=this.y*l,b=this.width*r,w=this.height*l;switch(i){case 0:return[m+h+c,l-v-p-w+d,m+h+b+c,l-v-p+d];case 90:return[m+p+c,l-v+h+d,m+p+w+c,l-v+h+b+d];case 180:return[m-h-b+c,l-v+p+d,m-h+c,l-v+p+w+d];case 270:return[m-p-w+c,l-v-h-b+d,m-p+c,l-v-h+d];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[i,s,r,l]=e,c=r-i,d=l-s;switch(this.rotation){case 0:return[i,t-l,c,d];case 90:return[i,t-s,d,c];case 180:return[r,t-s,c,d];case 270:return[r,t-l,d,c];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&Ce._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){this.#n?.onUpdatedColor()}getData(){const{comment:{text:e,color:t,date:i,opacity:s,deleted:r,richText:l},uid:c,pageIndex:d,creationDate:h,modificationDate:p}=this;return{id:c,pageIndex:d,rect:this.getPDFRect(),richText:l,contentsObj:{str:e},creationDate:h,modificationDate:i||p,popupRef:!r,color:t,opacity:s}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#v=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#v=!1,!0):!1}isInEditMode(){return this.#v}shouldGetKeyboardEvents(){return this.#b}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:i,right:s}=this.getClientDimensions(),{innerHeight:r,innerWidth:l}=window;return t<l&&s>0&&e<r&&i>0}#U(){if(this.#f||!this.div)return;this.#f=new AbortController;const e=this._uiManager.combinedSignal(this.#f);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})}rebuild(){this.#U()}rotate(e){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(e=!1,t=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static async deserialize(e,t,i){const s=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:i,annotationElementId:e.annotationElementId,creationDate:e.creationDate,modificationDate:e.modificationDate});s.rotation=e.rotation,s.#e=e.accessibilityData,s._isCopy=e.isCopy||!1;const[r,l]=s.pageDimensions,[c,d,h,p]=s.getRectInCurrentCoords(e.rect,l);return s.x=c/r,s.y=d/l,s.width=h/r,s.height=p/l,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#f?.abort(),this.#f=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),this.#y&&(clearTimeout(this.#y),this.#y=null),this.#L(),this.removeEditToolbar(),this.#w){for(const e of this.#w.values())clearTimeout(e);this.#w=null}this.parent=null,this.#C?.destroy(),this.#C=null,this.#d?.remove(),this.#d=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#z(),this.#c.classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[e,t]}=this,[i,s,r,l]=this.getPDFRect();return[Ce._round(i+(r-i)*e),Ce._round(s+(l-s)*(1-t))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return this.#n.commentPopupPositionInLayer}set commentPopupPosition(e){this.#n.commentPopupPositionInLayer=e}hasDefaultPopupPosition(){return this.#n.hasDefaultPopupPosition()}get commentButtonWidth(){return this.#n.commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(e){this.#n?.setCommentButtonStates(e)}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const t=this.#c.children;if(!this.#t){this.#t=Array.from(t);const l=this.#Z.bind(this),c=this.#q.bind(this),d=this._uiManager._signal;for(const h of this.#t){const p=h.getAttribute("data-resizer-name");h.setAttribute("role","spinbutton"),h.addEventListener("keydown",l,{signal:d}),h.addEventListener("blur",c,{signal:d}),h.addEventListener("focus",this.#Y.bind(this,p),{signal:d}),h.setAttribute("data-l10n-id",Ce._l10nResizer[p])}}const i=this.#t[0];let s=0;for(const l of t){if(l===i)break;s++}const r=(360-this.rotation+this.parentRotation)%360/90*(this.#t.length/4);if(r!==s){if(r<s)for(let c=0;c<s-r;c++)this.#c.append(this.#c.firstElementChild);else if(r>s)for(let c=0;c<r-s;c++)this.#c.firstElementChild.before(this.#c.lastElementChild);let l=0;for(const c of t){const h=this.#t[l++].getAttribute("data-resizer-name");c.setAttribute("data-l10n-id",Ce._l10nResizer[h])}}this.#V(0),this.#b=!0,this.#c.firstElementChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}#Z(e){Ce._resizerKeyboardManager.exec(this,e)}#q(e){this.#b&&e.relatedTarget?.parentNode!==this.#c&&this.#L()}#Y(e){this.#g=this.#b?e:""}#V(e){if(this.#t)for(const t of this.#t)t.tabIndex=e}_resizeWithKeyboard(e,t){this.#b&&this.#I(this.#g,{deltaX:e,deltaY:t,fromKeyboard:!0})}#L(){this.#b=!1,this.#V(-1),this.#j()}_stopResizingWithKeyboard(){this.#L(),this.div.focus()}select(){if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#i?.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,this.#c?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#i?.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){e.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#p}set isEditing(e){this.#p=e,this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){this.#w||=new Map;const{action:i}=e;let s=this.#w.get(i);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(e),this.#w.delete(i),this.#w.size===0&&(this.#w=null)},Ce._telemetryTimeout),this.#w.set(i,s);return}e.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),this.#r=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#r=!0}updateFakeAnnotationElement(e){if(!this.#d&&!this.deleted){this.#d=e.addFakeAnnotation(this);return}if(this.deleted){this.#d.remove(),this.#d=null;return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&this.#d.updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const i=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),i.before(t)}return t}resetAnnotationElement(e){const{firstElementChild:t}=e.container;t?.nodeName==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}}class O9 extends Ce{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const H_=3285377520,ji=4294901760,bs=65535;class T2{constructor(e){this.h1=e?e&4294967295:H_,this.h2=e?e&4294967295:H_}update(e){let t,i;if(typeof e=="string"){t=new Uint8Array(e.length*2),i=0;for(let x=0,A=e.length;x<A;x++){const S=e.charCodeAt(x);S<=255?t[i++]=S:(t[i++]=S>>>8,t[i++]=S&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),i=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const s=i>>2,r=i-s*4,l=new Uint32Array(t.buffer,0,s);let c=0,d=0,h=this.h1,p=this.h2;const m=3432918353,v=461845907,b=m&bs,w=v&bs;for(let x=0;x<s;x++)x&1?(c=l[x],c=c*m&ji|c*b&bs,c=c<<15|c>>>17,c=c*v&ji|c*w&bs,h^=c,h=h<<13|h>>>19,h=h*5+3864292196):(d=l[x],d=d*m&ji|d*b&bs,d=d<<15|d>>>17,d=d*v&ji|d*w&bs,p^=d,p=p<<13|p>>>19,p=p*5+3864292196);switch(c=0,r){case 3:c^=t[s*4+2]<<16;case 2:c^=t[s*4+1]<<8;case 1:c^=t[s*4],c=c*m&ji|c*b&bs,c=c<<15|c>>>17,c=c*v&ji|c*w&bs,s&1?h^=c:p^=c}this.h1=h,this.h2=p}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&ji|e*36045&bs,t=t*4283543511&ji|((t<<16|e>>>16)*2950163797&ji)>>>16,e^=t>>>1,e=e*444984403&ji|e*60499&bs,t=t*3301882366&ji|((t<<16|e>>>16)*3120437893&ji)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const hv=Object.freeze({map:null,hash:"",transfer:void 0});class Dy{#e=!1;#t=null;#i=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const i=this.#n.get(e);return i===void 0?t:Object.assign(t,i)}getRawValue(e){return this.#n.get(e)}remove(e){const t=this.#n.get(e);if(t!==void 0&&(t instanceof Ce&&this.#i.delete(t.annotationElementId),this.#n.delete(e),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const i of this.#n.values())if(i instanceof Ce)return;this.onAnnotationEditor(null)}}setValue(e,t){const i=this.#n.get(e);let s=!1;if(i!==void 0)for(const[r,l]of Object.entries(t))i[r]!==l&&(s=!0,i[r]=l);else s=!0,this.#n.set(e,t);s&&this.#a(),t instanceof Ce&&((this.#i||=new Map).set(t.annotationElementId,t),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type))}has(e){return this.#n.has(e)}get size(){return this.#n.size}#a(){this.#e||(this.#e=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#e&&(this.#e=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new C2(this)}get serializable(){if(this.#n.size===0)return hv;const e=new Map,t=new T2,i=[],s=Object.create(null);let r=!1;for(const[l,c]of this.#n){const d=c instanceof Ce?c.serialize(!1,s):c;c.page&&(c.pageIndex=c.page._pageIndex,delete c.page),d&&(e.set(l,d),t.update(`${l}:${JSON.stringify(d)}`),r||=!!d.bitmap)}if(r)for(const l of e.values())l.bitmap&&i.push(l.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:i}:hv}get editorStats(){let e=null;const t=new Map;let i=0,s=0;for(const r of this.#n.values()){if(!(r instanceof Ce)){r.popup&&(r.popup.deleted?s+=1:i+=1);continue}r.isCommentDeleted?s+=1:r.hasEditedComment&&(i+=1);const l=r.telemetryFinalData;if(!l)continue;const{type:c}=l;t.has(c)||t.set(c,Object.getPrototypeOf(r).constructor),e||=Object.create(null);const d=e[c]||=new Map;for(const[h,p]of Object.entries(l)){if(h==="type")continue;let m=d.get(h);m||(m=new Map,d.set(h,m));const v=m.get(p)??0;m.set(p,v+1)}}if((s>0||i>0)&&(e||=Object.create(null),e.comments={deleted:s,edited:i}),!e)return null;for(const[r,l]of t)e[r]=l.computeTelemetryFinalData(e[r]);return e}resetModifiedIds(){this.#t=null}updateEditor(e,t){const i=this.#i?.get(e);return i?(i.updateFromAnnotationLayer(t),!0):!1}getEditor(e){return this.#i?.get(e)||null}get modifiedIds(){if(this.#t)return this.#t;const e=[];if(this.#i)for(const t of this.#i.values())t.serialize()&&e.push(t.annotationElementId);return this.#t={ids:new Set(e),hash:e.join(",")}}[Symbol.iterator](){return this.#n.entries()}}class C2 extends Dy{#e;constructor(e){super();const{map:t,hash:i,transfer:s}=e.serializable,r=structuredClone(t,s?{transfer:s}:null);this.#e={map:r,hash:i,transfer:s}}get print(){nt("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#e}get modifiedIds(){return Ne(this,"modifiedIds",{ids:new Set,hash:""})}}class N9{#e=new Set;constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),this.#e.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:i}){if(!(!e||this.#e.has(e.loadedName))){if(tt(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:s,src:r,style:l}=e,c=new FontFace(s,r,l);this.addNativeFontFace(c);try{await c.load(),this.#e.add(s),i?.(e)}catch{Oe(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(c)}return}nt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const i=e.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(s){throw Oe(`Failed to load font '${i.family}': '${s}'.`),e.disableFontFace=!0,s}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(i=>{const s=this._queueLoadingCallback(i);this._prepareFontLoadEvent(e,s)})}}get isFontLoadingAPISupported(){const e=!!this._document?.fonts;return Ne(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return Ne(this,"isSyncFontLoadingSupported",$n||mn.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(tt(!s.done,"completeRequest() cannot be called twice."),s.done=!0;i.length>0&&i[0].done;){const r=i.shift();setTimeout(r.callback,0)}}const{loadingRequests:i}=this,s={done:!1,complete:t,callback:e};return i.push(s),s}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Ne(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function i(M,R){return M.charCodeAt(R)<<24|M.charCodeAt(R+1)<<16|M.charCodeAt(R+2)<<8|M.charCodeAt(R+3)&255}function s(M,R,O,L){const D=M.substring(0,R),$=M.substring(R+O);return D+L+$}let r,l;const c=this._document.createElement("canvas");c.width=1,c.height=1;const d=c.getContext("2d");let h=0;function p(M,R){if(++h>30){Oe("Load test font never loaded."),R();return}if(d.font="30px "+M,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){R();return}setTimeout(p.bind(null,M,R))}const m=`lt${Date.now()}${this.loadTestFontId++}`;let v=this._loadTestFont;v=s(v,976,m.length,m);const w=16,x=1482184792;let A=i(v,w);for(r=0,l=m.length-3;r<l;r+=4)A=A-x+i(m,r)|0;r<m.length&&(A=A-x+i(m+"XXX",r)|0),v=s(v,w,4,p9(A));const S=`url(data:font/opentype;base64,${btoa(v)});`,T=`@font-face {font-family:"${m}";src:${S}}`;this.insertRule(T);const E=this._document.createElement("div");E.style.visibility="hidden",E.style.width=E.style.height="10px",E.style.position="absolute",E.style.top=E.style.left="0px";for(const M of[e.loadedName,m]){const R=this._document.createElement("span");R.textContent="Hi",R.style.fontFamily=M,E.append(R)}this._document.body.append(E),p(m,()=>{E.remove(),t.complete()})}}class P9{#e;constructor(e,t=null,i,s){this.compiledGlyphs=Object.create(null),this.#e=e,this._inspectFont=t,i&&Object.assign(this,i),s&&(this.charProcOperatorList=s)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const t={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(t.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,t)}return this._inspectFont?.(this),e}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${this.data.toBase64()});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${e}}`}return this._inspectFont?.(this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const i=this.loadedName+"_path_"+t;let s;try{s=e.get(i)}catch(l){Oe(`getPathGenerator - ignoring character: "${l}".`)}const r=_2(s?.path);return this.fontExtraProperties||e.delete(i),this.compiledGlyphs[t]=r}get black(){return this.#e.black}get bold(){return this.#e.bold}get disableFontFace(){return this.#e.disableFontFace??!1}set disableFontFace(e){Ne(this,"disableFontFace",!!e)}get fontExtraProperties(){return this.#e.fontExtraProperties??!1}get isInvalidPDFjsFont(){return this.#e.isInvalidPDFjsFont}get isType3Font(){return this.#e.isType3Font}get italic(){return this.#e.italic}get missingFile(){return this.#e.missingFile}get remeasure(){return this.#e.remeasure}get vertical(){return this.#e.vertical}get ascent(){return this.#e.ascent}get defaultWidth(){return this.#e.defaultWidth}get descent(){return this.#e.descent}get bbox(){return this.#e.bbox}set bbox(e){Ne(this,"bbox",e)}get fontMatrix(){return this.#e.fontMatrix}get fallbackName(){return this.#e.fallbackName}get loadedName(){return this.#e.loadedName}get mimetype(){return this.#e.mimetype}get name(){return this.#e.name}get data(){return this.#e.data}clearData(){this.#e.clearData()}get cssFontInfo(){return this.#e.cssFontInfo}get systemFontInfo(){return this.#e.systemFontInfo}get defaultVMetrics(){return this.#e.defaultVMetrics}}class Yo{#e;#t;#i;static strings=["fontFamily","fontWeight","italicAngle"];static write(e){const t=new TextEncoder,i={};let s=0;for(const h of Yo.strings){const p=t.encode(e[h]);i[h]=p,s+=4+p.length}const r=new ArrayBuffer(s),l=new Uint8Array(r),c=new DataView(r);let d=0;for(const h of Yo.strings){const p=i[h],m=p.length;c.setUint32(d,m),l.set(p,d+4),d+=4+m}return tt(d===r.byteLength,"CssFontInfo.write: Buffer overflow"),r}constructor(e){this.#e=e,this.#t=new DataView(this.#e),this.#i=new TextDecoder}#n(e){tt(e<Yo.strings.length,"Invalid string index");let t=0;for(let s=0;s<e;s++)t+=this.#t.getUint32(t)+4;const i=this.#t.getUint32(t);return this.#i.decode(new Uint8Array(this.#e,t+4,i))}get fontFamily(){return this.#n(0)}get fontWeight(){return this.#n(1)}get italicAngle(){return this.#n(2)}}class Xo{#e;#t;#i;static strings=["css","loadedName","baseFontName","src"];static write(e){const t=new TextEncoder,i={};let s=0;for(const v of Xo.strings){const b=t.encode(e[v]);i[v]=b,s+=4+b.length}s+=4;let r,l,c=1+s;e.style&&(r=t.encode(e.style.style),l=t.encode(e.style.weight),c+=4+r.length+4+l.length);const d=new ArrayBuffer(c),h=new Uint8Array(d),p=new DataView(d);let m=0;p.setUint8(m++,e.guessFallback?1:0),p.setUint32(m,0),m+=4,s=0;for(const v of Xo.strings){const b=i[v],w=b.length;s+=4+w,p.setUint32(m,w),h.set(b,m+4),m+=4+w}return p.setUint32(m-s-4,s),e.style&&(p.setUint32(m,r.length),h.set(r,m+4),m+=4+r.length,p.setUint32(m,l.length),h.set(l,m+4),m+=4+l.length),tt(m<=d.byteLength,"SubstitionInfo.write: Buffer overflow"),d.transferToFixedLength(m)}constructor(e){this.#e=e,this.#t=new DataView(this.#e),this.#i=new TextDecoder}get guessFallback(){return this.#t.getUint8(0)!==0}#n(e){tt(e<Xo.strings.length,"Invalid string index");let t=5;for(let s=0;s<e;s++)t+=this.#t.getUint32(t)+4;const i=this.#t.getUint32(t);return this.#i.decode(new Uint8Array(this.#e,t+4,i))}get css(){return this.#n(0)}get loadedName(){return this.#n(1)}get baseFontName(){return this.#n(2)}get src(){return this.#n(3)}get style(){let e=1;e+=4+this.#t.getUint32(e);const t=this.#t.getUint32(e),i=this.#i.decode(new Uint8Array(this.#e,e+4,t));e+=4+t;const s=this.#t.getUint32(e),r=this.#i.decode(new Uint8Array(this.#e,e+4,s));return{style:i,weight:r}}}class dt{static bools=["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"];static numbers=["ascent","defaultWidth","descent"];static strings=["fallbackName","loadedName","mimetype","name"];static#e=Math.ceil(this.bools.length*2/8);static#t=this.#e+this.numbers.length*8;static#i=this.#t+1+8;static#n=this.#i+1+48;static#a=this.#n+1+6;#r;#s;#o;constructor({data:e,extra:t}){this.#r=e,this.#s=new TextDecoder,this.#o=new DataView(this.#r),t&&Object.assign(this,t)}#c(e){tt(e<dt.bools.length,"Invalid boolean index");const t=Math.floor(e/4),i=e*2%8,s=this.#o.getUint8(t)>>i&3;return s===0?void 0:s===2}get black(){return this.#c(0)}get bold(){return this.#c(1)}get disableFontFace(){return this.#c(2)}get fontExtraProperties(){return this.#c(3)}get isInvalidPDFjsFont(){return this.#c(4)}get isType3Font(){return this.#c(5)}get italic(){return this.#c(6)}get missingFile(){return this.#c(7)}get remeasure(){return this.#c(8)}get vertical(){return this.#c(9)}#l(e){return tt(e<dt.numbers.length,"Invalid number index"),this.#o.getFloat64(dt.#e+e*8)}get ascent(){return this.#l(0)}get defaultWidth(){return this.#l(1)}get descent(){return this.#l(2)}get bbox(){let e=dt.#t;if(this.#o.getUint8(e)===0)return;e+=1;const i=[];for(let s=0;s<4;s++)i.push(this.#o.getInt16(e,!0)),e+=2;return i}get fontMatrix(){let e=dt.#i;if(this.#o.getUint8(e)===0)return;e+=1;const i=[];for(let s=0;s<6;s++)i.push(this.#o.getFloat64(e,!0)),e+=8;return i}get defaultVMetrics(){let e=dt.#n;if(this.#o.getUint8(e)===0)return;e+=1;const i=[];for(let s=0;s<3;s++)i.push(this.#o.getInt16(e,!0)),e+=2;return i}#h(e){tt(e<dt.strings.length,"Invalid string index");let t=dt.#a+4;for(let r=0;r<e;r++)t+=this.#o.getUint32(t)+4;const i=this.#o.getUint32(t),s=new Uint8Array(i);return s.set(new Uint8Array(this.#r,t+4,i)),this.#s.decode(s)}get fallbackName(){return this.#h(0)}get loadedName(){return this.#h(1)}get mimetype(){return this.#h(2)}get name(){return this.#h(3)}get data(){let e=dt.#a;const t=this.#o.getUint32(e);e+=4+t;const i=this.#o.getUint32(e);e+=4+i;const s=this.#o.getUint32(e);e+=4+s;const r=this.#o.getUint32(e);if(r!==0)return new Uint8Array(this.#r,e+4,r)}clearData(){let e=dt.#a;const t=this.#o.getUint32(e);e+=4+t;const i=this.#o.getUint32(e);e+=4+i;const s=this.#o.getUint32(e);e+=4+s;const r=this.#o.getUint32(e);new Uint8Array(this.#r,e+4,r).fill(0),this.#o.setUint32(e,0)}get cssFontInfo(){let e=dt.#a;const t=this.#o.getUint32(e);e+=4+t;const i=this.#o.getUint32(e);e+=4+i;const s=this.#o.getUint32(e);if(s===0)return null;const r=new Uint8Array(s);return r.set(new Uint8Array(this.#r,e+4,s)),new Yo(r.buffer)}get systemFontInfo(){let e=dt.#a;const t=this.#o.getUint32(e);e+=4+t;const i=this.#o.getUint32(e);if(i===0)return null;const s=new Uint8Array(i);return s.set(new Uint8Array(this.#r,e+4,i)),new Xo(s.buffer)}static write(e){const t=e.systemFontInfo?Xo.write(e.systemFontInfo):null,i=e.cssFontInfo?Yo.write(e.cssFontInfo):null,s=new TextEncoder,r={};let l=0;for(const x of dt.strings)r[x]=s.encode(e[x]),l+=4+r[x].length;const c=dt.#a+4+l+4+(t?t.byteLength:0)+4+(i?i.byteLength:0)+4+(e.data?e.data.length:0),d=new ArrayBuffer(c),h=new Uint8Array(d),p=new DataView(d);let m=0;const v=dt.bools.length;let b=0,w=0;for(let x=0;x<v;x++){const A=e[dt.bools[x]];b|=(A===void 0?0:A?2:1)<<w,w+=2,(w===8||x===v-1)&&(p.setUint8(m++,b),b=0,w=0)}tt(m===dt.#e,"FontInfo.write: Boolean properties offset mismatch");for(const x of dt.numbers)p.setFloat64(m,e[x]),m+=8;if(tt(m===dt.#t,"FontInfo.write: Number properties offset mismatch"),e.bbox){p.setUint8(m++,4);for(const x of e.bbox)p.setInt16(m,x,!0),m+=2}else p.setUint8(m++,0),m+=8;if(tt(m===dt.#i,"FontInfo.write: BBox properties offset mismatch"),e.fontMatrix){p.setUint8(m++,6);for(const x of e.fontMatrix)p.setFloat64(m,x,!0),m+=8}else p.setUint8(m++,0),m+=48;if(tt(m===dt.#n,"FontInfo.write: FontMatrix properties offset mismatch"),e.defaultVMetrics){p.setUint8(m++,1);for(const x of e.defaultVMetrics)p.setInt16(m,x,!0),m+=2}else p.setUint8(m++,0),m+=6;tt(m===dt.#a,"FontInfo.write: DefaultVMetrics properties offset mismatch"),p.setUint32(dt.#a,0),m+=4;for(const x of dt.strings){const A=r[x],S=A.length;p.setUint32(m,S),h.set(A,m+4),m+=4+S}if(p.setUint32(dt.#a,m-dt.#a-4),!t)p.setUint32(m,0),m+=4;else{const x=t.byteLength;p.setUint32(m,x),tt(m+4+x<=d.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),h.set(new Uint8Array(t),m+4),m+=4+x}if(!i)p.setUint32(m,0),m+=4;else{const x=i.byteLength;p.setUint32(m,x),tt(m+4+x<=d.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),h.set(new Uint8Array(i),m+4),m+=4+x}return e.data===void 0?(p.setUint32(m,0),m+=4):(p.setUint32(m,e.data.length),h.set(e.data,m+4),m+=4+e.data.length),tt(m<=d.byteLength,"FontInfo.write: Buffer overflow"),d.transferToFixedLength(m)}}class xn{static#e=0;static#t=1;static#i=2;static#n=3;static#a=4;static#r=8;static#s=12;static#o=16;constructor(e){this.buffer=e,this.view=new DataView(e),this.data=new Uint8Array(e)}static write(e){let t,i=null,s=[],r=[],l=[],c=[],d=null,h=null;switch(e[0]){case"RadialAxial":t=e[1]==="axial"?1:2,i=e[2],l=e[3],t===1?s.push(...e[4],...e[5]):s.push(e[4][0],e[4][1],e[6],e[5][0],e[5][1],e[7]);break;case"Mesh":t=3,d=e[1],s=e[2],r=e[3],c=e[4]||[],i=e[6],h=e[7];break;default:throw new Error(`Unsupported pattern type: ${e[0]}`)}const p=Math.floor(s.length/2),m=Math.floor(r.length/3),v=l.length,b=c.length;let w=0;for(const R of c)w+=1,w=Math.ceil(w/4)*4,w+=4+R.coords.length*4,w+=4+R.colors.length*4,R.verticesPerRow!==void 0&&(w+=4);const x=20+p*8+m*3+v*8+(i?16:0)+(h?3:0)+w,A=new ArrayBuffer(x),S=new DataView(A),T=new Uint8Array(A);S.setUint8(xn.#e,t),S.setUint8(xn.#t,i?1:0),S.setUint8(xn.#i,h?1:0),S.setUint8(xn.#n,d),S.setUint32(xn.#a,p,!0),S.setUint32(xn.#r,m,!0),S.setUint32(xn.#s,v,!0),S.setUint32(xn.#o,b,!0);let E=20;new Float32Array(A,E,p*2).set(s),E+=p*8,T.set(r,E),E+=m*3;for(const[R,O]of l)S.setFloat32(E,R,!0),E+=4,S.setUint32(E,parseInt(O.slice(1),16),!0),E+=4;if(i)for(const R of i)S.setFloat32(E,R,!0),E+=4;h&&(T.set(h,E),E+=3);for(let R=0;R<c.length;R++){const O=c[R];S.setUint8(E,O.type),E+=1,E=Math.ceil(E/4)*4,S.setUint32(E,O.coords.length,!0),E+=4,new Int32Array(A,E,O.coords.length).set(O.coords),E+=O.coords.length*4,S.setUint32(E,O.colors.length,!0),E+=4,new Int32Array(A,E,O.colors.length).set(O.colors),E+=O.colors.length*4,O.verticesPerRow!==void 0&&(S.setUint32(E,O.verticesPerRow,!0),E+=4)}return A}getIR(){const e=this.view,t=this.data[xn.#e],i=!!this.data[xn.#t],s=!!this.data[xn.#i],r=e.getUint32(xn.#a,!0),l=e.getUint32(xn.#r,!0),c=e.getUint32(xn.#s,!0),d=e.getUint32(xn.#o,!0);let h=20;const p=new Float32Array(this.buffer,h,r*2);h+=r*8;const m=new Uint8Array(this.buffer,h,l*3);h+=l*3;const v=[];for(let A=0;A<c;++A){const S=e.getFloat32(h,!0);h+=4;const T=e.getUint32(h,!0);h+=4,v.push([S,`#${T.toString(16).padStart(6,"0")}`])}let b=null;if(i){b=[];for(let A=0;A<4;++A)b.push(e.getFloat32(h,!0)),h+=4}let w=null;s&&(w=new Uint8Array(this.buffer,h,3),h+=3);const x=[];for(let A=0;A<d;++A){const S=e.getUint8(h);h+=1,h=Math.ceil(h/4)*4;const T=e.getUint32(h,!0);h+=4;const E=new Int32Array(this.buffer,h,T);h+=T*4;const M=e.getUint32(h,!0);h+=4;const R=new Int32Array(this.buffer,h,M);h+=M*4;const O={type:S,coords:E,colors:R};S===ov.LATTICE&&(O.verticesPerRow=e.getUint32(h,!0),h+=4),x.push(O)}if(t===1)return["RadialAxial","axial",b,v,Array.from(p.slice(0,2)),Array.from(p.slice(2,4)),null,null];if(t===2)return["RadialAxial","radial",b,v,[p[0],p[1]],[p[3],p[4]],p[2],p[5]];if(t===3){const A=this.data[xn.#n];let S=null;if(p.length>0){let T=p[0],E=p[0],M=p[1],R=p[1];for(let O=0;O<p.length;O+=2){const L=p[O],D=p[O+1];T=T>L?L:T,M=M>D?D:M,E=E<L?L:E,R=R<D?D:R}S=[T,M,E,R]}return["Mesh",A,p,m,x,S,b,w]}throw new Error(`Unsupported pattern kind: ${t}`)}}class I9{static write(e){let t,i;return mn.isFloat16ArraySupported?(i=new ArrayBuffer(e.length*2),t=new Float16Array(i)):(i=new ArrayBuffer(e.length*4),t=new Float32Array(i)),t.set(e),i}#e;constructor(e){this.#e=e}get path(){return mn.isFloat16ArraySupported?new Float16Array(this.#e):new Float32Array(this.#e)}}function L9(n){if(n instanceof URL)return n.href;if(typeof n=="string"){if($n)return n;const e=URL.parse(n,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function z9(n){if($n&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return tf(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n?.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Id(n){if(typeof n!="string")return null;if(n.endsWith("/"))return n;throw new Error(`Invalid factory url: "${n}" must include trailing slash.`)}const fv=n=>typeof n=="object"&&Number.isInteger(n?.num)&&n.num>=0&&Number.isInteger(n?.gen)&&n.gen>=0,j9=n=>typeof n=="object"&&typeof n?.name=="string",B9=b9.bind(null,fv,j9);class F9{#e=new Map;#t=Promise.resolve();postMessage(e,t){const i={data:structuredClone(e,t?{transfer:t}:null)};this.#t.then(()=>{for(const[s]of this.#e)s.call(this,i)})}addEventListener(e,t,i=null){let s=null;if(i?.signal instanceof AbortSignal){const{signal:r}=i;if(r.aborted){Oe("LoopbackPort - cannot use an `aborted` signal.");return}const l=()=>this.removeEventListener(e,t);s=()=>r.removeEventListener("abort",l),r.addEventListener("abort",l)}this.#e.set(t,s)}removeEventListener(e,t){this.#e.get(t)?.(),this.#e.delete(t)}terminate(){for(const[,e]of this.#e)e?.();this.#e.clear()}}const Ld={DATA:1,ERROR:2},an={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function G_(){}function oi(n){if(n instanceof Ha||n instanceof lv||n instanceof z_||n instanceof Oh||n instanceof hg)return n;switch(n instanceof Error||typeof n=="object"&&n!==null||nt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new Ha(n.message);case"InvalidPDFException":return new lv(n.message);case"PasswordException":return new z_(n.message,n.code);case"ResponseException":return new Oh(n.message,n.status,n.missing);case"UnknownErrorException":return new hg(n.message,n.details)}return new hg(n.message,n.toString())}class vc{#e=new AbortController;constructor(e,t,i){this.sourceName=e,this.targetName=t,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",this.#t.bind(this),{signal:this.#e.signal})}#t({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){this.#n(e);return}if(e.callback){const i=e.callbackId,s=this.callbackCapabilities[i];if(!s)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],e.callback===Ld.DATA)s.resolve(e.data);else if(e.callback===Ld.ERROR)s.reject(oi(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const i=this.sourceName,s=e.sourceName,r=this.comObj;Promise.try(t,e.data).then(function(l){r.postMessage({sourceName:i,targetName:s,callback:Ld.DATA,callbackId:e.callbackId,data:l})},function(l){r.postMessage({sourceName:i,targetName:s,callback:Ld.ERROR,callbackId:e.callbackId,reason:oi(l)})});return}if(e.streamId){this.#i(e);return}t(e.data)}on(e,t){const i=this.actionHandler;if(i[e])throw new Error(`There is already an actionName called "${e}"`);i[e]=t}send(e,t,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},i)}sendWithPromise(e,t,i){const s=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[s]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:s,data:t},i)}catch(l){r.reject(l)}return r.promise}sendWithStream(e,t,i,s){const r=this.streamId++,l=this.sourceName,c=this.targetName,d=this.comObj;return new ReadableStream({start:h=>{const p=Promise.withResolvers();return this.streamControllers[r]={controller:h,startCall:p,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:l,targetName:c,action:e,streamId:r,data:t,desiredSize:h.desiredSize},s),p.promise},pull:h=>{const p=Promise.withResolvers();return this.streamControllers[r].pullCall=p,d.postMessage({sourceName:l,targetName:c,stream:an.PULL,streamId:r,desiredSize:h.desiredSize}),p.promise},cancel:h=>{tt(h instanceof Error,"cancel must have a valid reason");const p=Promise.withResolvers();return this.streamControllers[r].cancelCall=p,this.streamControllers[r].isClosed=!0,d.postMessage({sourceName:l,targetName:c,stream:an.CANCEL,streamId:r,reason:oi(h)}),p.promise}},i)}#i(e){const t=e.streamId,i=this.sourceName,s=e.sourceName,r=this.comObj,l=this,c=this.actionHandler[e.action],d={enqueue(h,p=1,m){if(this.isCancelled)return;const v=this.desiredSize;this.desiredSize-=p,v>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:i,targetName:s,stream:an.ENQUEUE,streamId:t,chunk:h},m)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:i,targetName:s,stream:an.CLOSE,streamId:t}),delete l.streamSinks[t])},error(h){tt(h instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:i,targetName:s,stream:an.ERROR,streamId:t,reason:oi(h)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[t]=d,Promise.try(c,e.data,d).then(function(){r.postMessage({sourceName:i,targetName:s,stream:an.START_COMPLETE,streamId:t,success:!0})},function(h){r.postMessage({sourceName:i,targetName:s,stream:an.START_COMPLETE,streamId:t,reason:oi(h)})})}#n(e){const t=e.streamId,i=this.sourceName,s=e.sourceName,r=this.comObj,l=this.streamControllers[t],c=this.streamSinks[t];switch(e.stream){case an.START_COMPLETE:e.success?l.startCall.resolve():l.startCall.reject(oi(e.reason));break;case an.PULL_COMPLETE:e.success?l.pullCall.resolve():l.pullCall.reject(oi(e.reason));break;case an.PULL:if(!c){r.postMessage({sourceName:i,targetName:s,stream:an.PULL_COMPLETE,streamId:t,success:!0});break}c.desiredSize<=0&&e.desiredSize>0&&c.sinkCapability.resolve(),c.desiredSize=e.desiredSize,Promise.try(c.onPull||G_).then(function(){r.postMessage({sourceName:i,targetName:s,stream:an.PULL_COMPLETE,streamId:t,success:!0})},function(h){r.postMessage({sourceName:i,targetName:s,stream:an.PULL_COMPLETE,streamId:t,reason:oi(h)})});break;case an.ENQUEUE:if(tt(l,"enqueue should have stream controller"),l.isClosed)break;l.controller.enqueue(e.chunk);break;case an.CLOSE:if(tt(l,"close should have stream controller"),l.isClosed)break;l.isClosed=!0,l.controller.close(),this.#a(l,t);break;case an.ERROR:tt(l,"error should have stream controller"),l.controller.error(oi(e.reason)),this.#a(l,t);break;case an.CANCEL_COMPLETE:e.success?l.cancelCall.resolve():l.cancelCall.reject(oi(e.reason)),this.#a(l,t);break;case an.CANCEL:if(!c)break;const d=oi(e.reason);Promise.try(c.onCancel||G_,d).then(function(){r.postMessage({sourceName:i,targetName:s,stream:an.CANCEL_COMPLETE,streamId:t,success:!0})},function(h){r.postMessage({sourceName:i,targetName:s,stream:an.CANCEL_COMPLETE,streamId:t,reason:oi(h)})}),c.sinkCapability.reject(d),c.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}}async#a(e,t){await Promise.allSettled([e.startCall?.promise,e.pullCall?.promise,e.cancelCall?.promise]),delete this.streamControllers[t]}destroy(){this.#e?.abort(),this.#e=null}}class k2{#e=!1;constructor({enableHWA:e=!1}){this.#e=e}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(e,t);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!this.#e})}}reset(e,t,i){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||i<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=i}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){nt("Abstract method `_createCanvas` called.")}}class U9 extends k2{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const i=this._document.createElement("canvas");return i.width=e,i.height=t,i}}class M2{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(i=>({cMapData:i,isCompressed:this.isCompressed})).catch(i=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){nt("Abstract method `_fetch` called.")}}class q_ extends M2{async _fetch(e){const t=await nu(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):tf(t)}}class R2{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,i,s,r){return"none"}destroy(e=!1){}}class V9 extends R2{#e;#t;#i;#n;#a;#r;#s=0;constructor({docId:e,ownerDocument:t=globalThis.document}){super(),this.#n=e,this.#a=t}get#o(){return this.#t||=new Map}get#c(){return this.#r||=new Map}get#l(){if(!this.#i){const e=this.#a.createElement("div"),{style:t}=e;t.visibility="hidden",t.contain="strict",t.width=t.height=0,t.position="absolute",t.top=t.left=0,t.zIndex=-1;const i=this.#a.createElementNS(Ks,"svg");i.setAttribute("width",0),i.setAttribute("height",0),this.#i=this.#a.createElementNS(Ks,"defs"),e.append(i),i.append(this.#i),this.#a.body.append(e)}return this.#i}#h(e){if(e.length===1){const d=e[0],h=new Array(256);for(let m=0;m<256;m++)h[m]=d[m]/255;const p=h.join(",");return[p,p,p]}const[t,i,s]=e,r=new Array(256),l=new Array(256),c=new Array(256);for(let d=0;d<256;d++)r[d]=t[d]/255,l[d]=i[d]/255,c[d]=s[d]/255;return[r.join(","),l.join(","),c.join(",")]}#d(e){if(this.#e===void 0){this.#e="";const t=this.#a.URL;t!==this.#a.baseURI&&(nf(t)?Oe('#createUrl: ignore "data:"-URL for performance reasons.'):this.#e=x2(t,""))}return`url(${this.#e}#${e})`}addFilter(e){if(!e)return"none";let t=this.#o.get(e);if(t)return t;const[i,s,r]=this.#h(e),l=e.length===1?i:`${i}${s}${r}`;if(t=this.#o.get(l),t)return this.#o.set(e,t),t;const c=`g_${this.#n}_transfer_map_${this.#s++}`,d=this.#d(c);this.#o.set(e,d),this.#o.set(l,d);const h=this.#m(c);return this.#p(i,s,r,h),d}addHCMFilter(e,t){const i=`${e}-${t}`,s="base";let r=this.#c.get(s);if(r?.key===i||(r?(r.filter?.remove(),r.key=i,r.url="none",r.filter=null):(r={key:i,url:"none",filter:null},this.#c.set(s,r)),!e||!t))return r.url;const l=this.#b(e);e=he.makeHexColor(...l);const c=this.#b(t);if(t=he.makeHexColor(...c),this.#l.style.color="",e==="#000000"&&t==="#ffffff"||e===t)return r.url;const d=new Array(256);for(let b=0;b<=255;b++){const w=b/255;d[b]=w<=.03928?w/12.92:((w+.055)/1.055)**2.4}const h=d.join(","),p=`g_${this.#n}_hcm_filter`,m=r.filter=this.#m(p);this.#p(h,h,h,m),this.#g(m);const v=(b,w)=>{const x=l[b]/255,A=c[b]/255,S=new Array(w+1);for(let T=0;T<=w;T++)S[T]=x+T/w*(A-x);return S.join(",")};return this.#p(v(0,5),v(1,5),v(2,5),m),r.url=this.#d(p),r.url}addAlphaFilter(e){let t=this.#o.get(e);if(t)return t;const[i]=this.#h([e]),s=`alpha_${i}`;if(t=this.#o.get(s),t)return this.#o.set(e,t),t;const r=`g_${this.#n}_alpha_map_${this.#s++}`,l=this.#d(r);this.#o.set(e,l),this.#o.set(s,l);const c=this.#m(r);return this.#v(i,c),l}addLuminosityFilter(e){let t=this.#o.get(e||"luminosity");if(t)return t;let i,s;if(e?([i]=this.#h([e]),s=`luminosity_${i}`):s="luminosity",t=this.#o.get(s),t)return this.#o.set(e,t),t;const r=`g_${this.#n}_luminosity_map_${this.#s++}`,l=this.#d(r);this.#o.set(e,l),this.#o.set(s,l);const c=this.#m(r);return this.#f(c),e&&this.#v(i,c),l}addHighlightHCMFilter(e,t,i,s,r){const l=`${t}-${i}-${s}-${r}`;let c=this.#c.get(e);if(c?.key===l||(c?(c.filter?.remove(),c.key=l,c.url="none",c.filter=null):(c={key:l,url:"none",filter:null},this.#c.set(e,c)),!t||!i))return c.url;const[d,h]=[t,i].map(this.#b.bind(this));let p=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),m=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[v,b]=[s,r].map(this.#b.bind(this));m<p&&([p,m,v,b]=[m,p,b,v]),this.#l.style.color="";const w=(S,T,E)=>{const M=new Array(256),R=(m-p)/E,O=S/255,L=(T-S)/(255*E);let D=0;for(let $=0;$<=E;$++){const ee=Math.round(p+$*R),X=O+$*L;for(let le=D;le<=ee;le++)M[le]=X;D=ee+1}for(let $=D;$<256;$++)M[$]=M[D-1];return M.join(",")},x=`g_${this.#n}_hcm_${e}_filter`,A=c.filter=this.#m(x);return this.#g(A),this.#p(w(v[0],b[0],5),w(v[1],b[1],5),w(v[2],b[2],5),A),c.url=this.#d(x),c.url}destroy(e=!1){e&&this.#r?.size||(this.#i?.parentNode.parentNode.remove(),this.#i=null,this.#t?.clear(),this.#t=null,this.#r?.clear(),this.#r=null,this.#s=0)}#f(e){const t=this.#a.createElementNS(Ks,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(t)}#g(e){const t=this.#a.createElementNS(Ks,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(t)}#m(e){const t=this.#a.createElementNS(Ks,"filter");return t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("id",e),this.#l.append(t),t}#u(e,t,i){const s=this.#a.createElementNS(Ks,t);s.setAttribute("type","discrete"),s.setAttribute("tableValues",i),e.append(s)}#p(e,t,i,s){const r=this.#a.createElementNS(Ks,"feComponentTransfer");s.append(r),this.#u(r,"feFuncR",e),this.#u(r,"feFuncG",t),this.#u(r,"feFuncB",i)}#v(e,t){const i=this.#a.createElementNS(Ks,"feComponentTransfer");t.append(i),this.#u(i,"feFuncA",e)}#b(e){return this.#l.style.color=e,su(getComputedStyle(this.#l).getPropertyValue("color"))}}class D2{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(i=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){nt("Abstract method `_fetch` called.")}}class Z_ extends D2{async _fetch(e){const t=await nu(e,"arraybuffer");return new Uint8Array(t)}}class O2{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(i=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){nt("Abstract method `_fetch` called.")}}class Y_ extends O2{async _fetch(e){const t=await nu(e,"arraybuffer");return new Uint8Array(t)}}$n&&Oe("Please use the `legacy` build in Node.js environments.");async function Oy(n){const t=await process.getBuiltinModule("fs").promises.readFile(n);return new Uint8Array(t)}class $9 extends R2{}class H9 extends k2{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class G9 extends M2{async _fetch(e){return Oy(e)}}class q9 extends D2{async _fetch(e){return Oy(e)}}class Z9 extends O2{async _fetch(e){return Oy(e)}}const Mo="__forcedDependency",{floor:X_,ceil:W_}=Math;function zd(n,e,t,i,s,r){n[e*4+0]=Math.min(n[e*4+0],t),n[e*4+1]=Math.min(n[e*4+1],i),n[e*4+2]=Math.max(n[e*4+2],s),n[e*4+3]=Math.max(n[e*4+3],r)}const pv=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];class Y9{#e;#t;constructor(e,t){this.#e=e,this.#t=t}get length(){return this.#e.length}isEmpty(e){return this.#e[e]===pv}minX(e){return this.#t[e*4+0]/256}minY(e){return this.#t[e*4+1]/256}maxX(e){return(this.#t[e*4+2]+1)/256}maxY(e){return(this.#t[e*4+3]+1)/256}}const jd=(n,e)=>{if(!n)return;let t=n.get(e);return t||(t={dependencies:new Set,isRenderingOperation:!1},n.set(e,t)),t};class X9{#e={__proto__:null};#t={__proto__:null,transform:[],moveText:[],sameLineText:[],[Mo]:[]};#i=new Map;#n=[];#a=[];#r=[[1,0,0,1,0,0]];#s=[-1/0,-1/0,1/0,1/0];#o=new Float64Array([1/0,1/0,-1/0,-1/0]);#c=-1;#l=new Set;#h=new Map;#d=new Map;#f;#g;#m;#u;#p;constructor(e,t,i=!1){this.#f=e.width,this.#g=e.height,this.#v(t),i&&(this.#p=new Map)}growOperationsCount(e){e>=this.#u.length&&this.#v(e,this.#u)}#v(e,t){const i=new ArrayBuffer(e*4);this.#m=new Uint8ClampedArray(i),this.#u=new Uint32Array(i),t&&t.length>0?(this.#u.set(t),this.#u.fill(pv,t.length)):this.#u.fill(pv)}save(e){return this.#e={__proto__:this.#e},this.#t={__proto__:this.#t,transform:{__proto__:this.#t.transform},moveText:{__proto__:this.#t.moveText},sameLineText:{__proto__:this.#t.sameLineText},[Mo]:{__proto__:this.#t[Mo]}},this.#s={__proto__:this.#s},this.#n.push(e),this}restore(e){const t=Object.getPrototypeOf(this.#e);if(t===null)return this;this.#e=t,this.#t=Object.getPrototypeOf(this.#t),this.#s=Object.getPrototypeOf(this.#s);const i=this.#n.pop();return i!==void 0&&(jd(this.#p,e)?.dependencies.add(i),this.#u[e]=this.#u[i]),this}recordOpenMarker(e){return this.#n.push(e),this}getOpenMarker(){return this.#n.length===0?null:this.#n.at(-1)}recordCloseMarker(e){const t=this.#n.pop();return t!==void 0&&(jd(this.#p,e)?.dependencies.add(t),this.#u[e]=this.#u[t]),this}beginMarkedContent(e){return this.#a.push(e),this}endMarkedContent(e){const t=this.#a.pop();return t!==void 0&&(jd(this.#p,e)?.dependencies.add(t),this.#u[e]=this.#u[t]),this}pushBaseTransform(e){return this.#r.push(he.multiplyByDOMMatrix(this.#r.at(-1),e.getTransform())),this}popBaseTransform(){return this.#r.length>1&&this.#r.pop(),this}recordSimpleData(e,t){return this.#e[e]=t,this}recordIncrementalData(e,t){return this.#t[e].push(t),this}resetIncrementalData(e,t){return this.#t[e].length=0,this}recordNamedData(e,t){return this.#i.set(e,t),this}recordSimpleDataFromNamed(e,t,i){this.#e[e]=this.#i.get(t)??i}recordFutureForcedDependency(e,t){return this.recordIncrementalData(Mo,t),this}inheritSimpleDataAsFutureForcedDependencies(e){for(const t of e)t in this.#e&&this.recordFutureForcedDependency(t,this.#e[t]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const e of this.#l)this.recordFutureForcedDependency(Mo,e);return this}resetBBox(e){return this.#c!==e&&(this.#c=e,this.#o[0]=1/0,this.#o[1]=1/0,this.#o[2]=-1/0,this.#o[3]=-1/0),this}recordClipBox(e,t,i,s,r,l){const c=he.multiplyByDOMMatrix(this.#r.at(-1),t.getTransform()),d=[1/0,1/0,-1/0,-1/0];he.axialAlignedBoundingBox([i,r,s,l],c,d);const h=he.intersect(this.#s,d);return h?(this.#s[0]=h[0],this.#s[1]=h[1],this.#s[2]=h[2],this.#s[3]=h[3]):(this.#s[0]=this.#s[1]=1/0,this.#s[2]=this.#s[3]=-1/0),this}recordBBox(e,t,i,s,r,l){const c=this.#s;if(c[0]===1/0)return this;const d=he.multiplyByDOMMatrix(this.#r.at(-1),t.getTransform());if(c[0]===-1/0)return he.axialAlignedBoundingBox([i,r,s,l],d,this.#o),this;const h=[1/0,1/0,-1/0,-1/0];return he.axialAlignedBoundingBox([i,r,s,l],d,h),this.#o[0]=Math.min(this.#o[0],Math.max(h[0],c[0])),this.#o[1]=Math.min(this.#o[1],Math.max(h[1],c[1])),this.#o[2]=Math.max(this.#o[2],Math.min(h[2],c[2])),this.#o[3]=Math.max(this.#o[3],Math.min(h[3],c[3])),this}recordCharacterBBox(e,t,i,s=1,r=0,l=0,c){const d=i.bbox;let h,p;if(d&&(h=d[2]!==d[0]&&d[3]!==d[1]&&this.#d.get(i),h!==!1&&(p=[0,0,0,0],he.axialAlignedBoundingBox(d,i.fontMatrix,p),(s!==1||r!==0||l!==0)&&he.scaleMinMax([s,0,0,-s,r,l],p),h)))return this.recordBBox(e,t,p[0],p[2],p[1],p[3]);if(!c)return this.recordFullPageBBox(e);const m=c();return d&&p&&h===void 0&&(h=p[0]<=r-m.actualBoundingBoxLeft&&p[2]>=r+m.actualBoundingBoxRight&&p[1]<=l-m.actualBoundingBoxAscent&&p[3]>=l+m.actualBoundingBoxDescent,this.#d.set(i,h),h)?this.recordBBox(e,t,p[0],p[2],p[1],p[3]):this.recordBBox(e,t,r-m.actualBoundingBoxLeft,r+m.actualBoundingBoxRight,l-m.actualBoundingBoxAscent,l+m.actualBoundingBoxDescent)}recordFullPageBBox(e){return this.#o[0]=Math.max(0,this.#s[0]),this.#o[1]=Math.max(0,this.#s[1]),this.#o[2]=Math.min(this.#f,this.#s[2]),this.#o[3]=Math.min(this.#g,this.#s[3]),this}getSimpleIndex(e){return this.#e[e]}recordDependencies(e,t){const i=this.#l,s=this.#e,r=this.#t;for(const l of t)l in this.#e?i.add(s[l]):l in r&&r[l].forEach(i.add,i);return this}recordNamedDependency(e,t){return this.#i.has(t)&&this.#l.add(this.#i.get(t)),this}recordOperation(e,t=!1){if(this.recordDependencies(e,[Mo]),this.#p){const i=jd(this.#p,e),{dependencies:s}=i;this.#l.forEach(s.add,s),this.#n.forEach(s.add,s),this.#a.forEach(s.add,s),s.delete(e),i.isRenderingOperation=!0}if(this.#c===e){const i=X_(this.#o[0]*256/this.#f),s=X_(this.#o[1]*256/this.#g),r=W_(this.#o[2]*256/this.#f),l=W_(this.#o[3]*256/this.#g);zd(this.#m,e,i,s,r,l);for(const c of this.#l)c!==e&&zd(this.#m,c,i,s,r,l);for(const c of this.#n)c!==e&&zd(this.#m,c,i,s,r,l);for(const c of this.#a)c!==e&&zd(this.#m,c,i,s,r,l);t||(this.#l.clear(),this.#c=-1)}return this}recordShowTextOperation(e,t=!1){const i=Array.from(this.#l);this.recordOperation(e,t),this.recordIncrementalData("sameLineText",e);for(const s of i)this.recordIncrementalData("sameLineText",s);return this}bboxToClipBoxDropOperation(e,t=!1){return this.#c===e&&(this.#c=-1,this.#s[0]=Math.max(this.#s[0],this.#o[0]),this.#s[1]=Math.max(this.#s[1],this.#o[1]),this.#s[2]=Math.min(this.#s[2],this.#o[2]),this.#s[3]=Math.min(this.#s[3],this.#o[3]),t||this.#l.clear()),this}_takePendingDependencies(){const e=this.#l;return this.#l=new Set,e}_extractOperation(e){const t=this.#h.get(e);return this.#h.delete(e),t}_pushPendingDependencies(e){for(const t of e)this.#l.add(t)}take(){return this.#d.clear(),new Y9(this.#u,this.#m)}takeDebugMetadata(){return this.#p}}class Nh{#e;#t;#i;#n=0;#a=0;constructor(e,t,i){if(e instanceof Nh&&e.#i===!!i)return e;this.#e=e,this.#t=t,this.#i=!!i}growOperationsCount(){throw new Error("Unreachable")}save(e){return this.#a++,this.#e.save(this.#t),this}restore(e){return this.#a>0&&(this.#e.restore(this.#t),this.#a--),this}recordOpenMarker(e){return this.#n++,this}getOpenMarker(){return this.#n>0?this.#t:this.#e.getOpenMarker()}recordCloseMarker(e){return this.#n--,this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return this.#e.pushBaseTransform(e),this}popBaseTransform(){return this.#e.popBaseTransform(),this}recordSimpleData(e,t){return this.#e.recordSimpleData(e,this.#t),this}recordIncrementalData(e,t){return this.#e.recordIncrementalData(e,this.#t),this}resetIncrementalData(e,t){return this.#e.resetIncrementalData(e,this.#t),this}recordNamedData(e,t){return this}recordSimpleDataFromNamed(e,t,i){return this.#e.recordSimpleDataFromNamed(e,t,this.#t),this}recordFutureForcedDependency(e,t){return this.#e.recordFutureForcedDependency(e,this.#t),this}inheritSimpleDataAsFutureForcedDependencies(e){return this.#e.inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#e.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return this.#i||this.#e.resetBBox(this.#t),this}recordClipBox(e,t,i,s,r,l){return this.#i||this.#e.recordClipBox(this.#t,t,i,s,r,l),this}recordBBox(e,t,i,s,r,l){return this.#i||this.#e.recordBBox(this.#t,t,i,s,r,l),this}recordCharacterBBox(e,t,i,s,r,l,c){return this.#i||this.#e.recordCharacterBBox(this.#t,t,i,s,r,l,c),this}recordFullPageBBox(e){return this.#i||this.#e.recordFullPageBBox(this.#t),this}getSimpleIndex(e){return this.#e.getSimpleIndex(e)}recordDependencies(e,t){return this.#e.recordDependencies(this.#t,t),this}recordNamedDependency(e,t){return this.#e.recordNamedDependency(this.#t,t),this}recordOperation(e){return this.#e.recordOperation(this.#t,!0),this}recordShowTextOperation(e){return this.#e.recordShowTextOperation(this.#t,!0),this}bboxToClipBoxDropOperation(e){return this.#i||this.#e.bboxToClipBoxDropOperation(this.#t,!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}}const Bi={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Pn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function mv(n,e){if(!e)return;const t=e[2]-e[0],i=e[3]-e[1],s=new Path2D;s.rect(e[0],e[1],t,i),n.clip(s)}class Ny{isModifyingCurrentTransform(){return!1}getPattern(){nt("Abstract method `getPattern` called.")}}class W9 extends Ny{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}isOriginBased(){return this._p0[0]===0&&this._p0[1]===0&&(!this.isRadial()||this._p1[0]===0&&this._p1[1]===0)}isRadial(){return this._type==="radial"}_createGradient(e,t=null){let i,s=this._p0,r=this._p1;if(t&&(s=s.slice(),r=r.slice(),he.applyTransform(s,t),he.applyTransform(r,t)),this._type==="axial")i=e.createLinearGradient(s[0],s[1],r[0],r[1]);else if(this._type==="radial"){let l=this._r0,c=this._r1;if(t){const d=new Float32Array(2);he.singularValueDecompose2dScale(t,d),l*=d[0],c*=d[0]}i=e.createRadialGradient(s[0],s[1],l,r[0],r[1],c)}for(const l of this._colorStops)i.addColorStop(l[0],l[1]);return i}getPattern(e,t,i,s){let r;if(s===Pn.STROKE||s===Pn.FILL){if(this.isOriginBased()){let v=he.transform(i,t.baseTransform);this.matrix&&(v=he.transform(v,this.matrix));const b=.001,w=Math.hypot(v[0],v[1]),x=Math.hypot(v[2],v[3]),A=(v[0]*v[2]+v[1]*v[3])/(w*x);if(Math.abs(A)<b)if(this.isRadial()){if(Math.abs(w-x)<b)return this._createGradient(e,v)}else return this._createGradient(e,v)}const l=t.current.getClippedPathBoundingBox(s,Lt(e))||[0,0,0,0],c=Math.ceil(l[2]-l[0])||1,d=Math.ceil(l[3]-l[1])||1,h=t.cachedCanvases.getCanvas("pattern",c,d),p=h.context;p.clearRect(0,0,p.canvas.width,p.canvas.height),p.beginPath(),p.rect(0,0,p.canvas.width,p.canvas.height),p.translate(-l[0],-l[1]),i=he.transform(i,[1,0,0,1,l[0],l[1]]),p.transform(...t.baseTransform),this.matrix&&p.transform(...this.matrix),mv(p,this._bbox),p.fillStyle=this._createGradient(p),p.fill(),r=e.createPattern(h.canvas,"no-repeat");const m=new DOMMatrix(i);r.setTransform(m)}else mv(e,this._bbox),r=this._createGradient(e);return r}}function mg(n,e,t,i,s,r,l,c){const d=e.coords,h=e.colors,p=n.data,m=n.width*4;let v;d[t+1]>d[i+1]&&(v=t,t=i,i=v,v=r,r=l,l=v),d[i+1]>d[s+1]&&(v=i,i=s,s=v,v=l,l=c,c=v),d[t+1]>d[i+1]&&(v=t,t=i,i=v,v=r,r=l,l=v);const b=(d[t]+e.offsetX)*e.scaleX,w=(d[t+1]+e.offsetY)*e.scaleY,x=(d[i]+e.offsetX)*e.scaleX,A=(d[i+1]+e.offsetY)*e.scaleY,S=(d[s]+e.offsetX)*e.scaleX,T=(d[s+1]+e.offsetY)*e.scaleY;if(w>=T)return;const E=h[r],M=h[r+1],R=h[r+2],O=h[l],L=h[l+1],D=h[l+2],$=h[c],ee=h[c+1],X=h[c+2],le=Math.round(w),de=Math.round(T);let ce,fe,N,U,B,se,ve,P;for(let q=le;q<=de;q++){if(q<A){const oe=q<w?0:(w-q)/(w-A);ce=b-(b-x)*oe,fe=E-(E-O)*oe,N=M-(M-L)*oe,U=R-(R-D)*oe}else{let oe;q>T?oe=1:A===T?oe=0:oe=(A-q)/(A-T),ce=x-(x-S)*oe,fe=O-(O-$)*oe,N=L-(L-ee)*oe,U=D-(D-X)*oe}let Z;q<w?Z=0:q>T?Z=1:Z=(w-q)/(w-T),B=b-(b-S)*Z,se=E-(E-$)*Z,ve=M-(M-ee)*Z,P=R-(R-X)*Z;const ne=Math.round(Math.min(ce,B)),ae=Math.round(Math.max(ce,B));let pe=m*q+ne*4;for(let oe=ne;oe<=ae;oe++)Z=(ce-oe)/(ce-B),Z<0?Z=0:Z>1&&(Z=1),p[pe++]=fe-(fe-se)*Z|0,p[pe++]=N-(N-ve)*Z|0,p[pe++]=U-(U-P)*Z|0,p[pe++]=255}}function K9(n,e,t){const i=e.coords,s=e.colors;let r,l;switch(e.type){case ov.LATTICE:const c=e.verticesPerRow,d=Math.floor(i.length/c)-1,h=c-1;for(r=0;r<d;r++){let p=r*c;for(let m=0;m<h;m++,p++)mg(n,t,i[p],i[p+1],i[p+c],s[p],s[p+1],s[p+c]),mg(n,t,i[p+c+1],i[p+1],i[p+c],s[p+c+1],s[p+1],s[p+c])}break;case ov.TRIANGLES:for(r=0,l=i.length;r<l;r+=3)mg(n,t,i[r],i[r+1],i[r+2],s[r],s[r+1],s[r+2]);break;default:throw new Error("illegal figure")}}class J9 extends Ny{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,i){const c=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),h=Math.ceil(this._bounds[2])-c,p=Math.ceil(this._bounds[3])-d,m=Math.min(Math.ceil(Math.abs(h*e[0]*1.1)),3e3),v=Math.min(Math.ceil(Math.abs(p*e[1]*1.1)),3e3),b=h/m,w=p/v,x={coords:this._coords,colors:this._colors,offsetX:-c,offsetY:-d,scaleX:1/b,scaleY:1/w},A=m+4,S=v+4,T=i.getCanvas("mesh",A,S),E=T.context,M=E.createImageData(m,v);if(t){const O=M.data;for(let L=0,D=O.length;L<D;L+=4)O[L]=t[0],O[L+1]=t[1],O[L+2]=t[2],O[L+3]=255}for(const O of this._figures)K9(M,O,x);return E.putImageData(M,2,2),{canvas:T.canvas,offsetX:c-2*b,offsetY:d-2*w,scaleX:b,scaleY:w}}isModifyingCurrentTransform(){return!0}getPattern(e,t,i,s){mv(e,this._bbox);const r=new Float32Array(2);if(s===Pn.SHADING)he.singularValueDecompose2dScale(Lt(e),r);else if(this.matrix){he.singularValueDecompose2dScale(this.matrix,r);const[c,d]=r;he.singularValueDecompose2dScale(t.baseTransform,r),r[0]*=c,r[1]*=d}else he.singularValueDecompose2dScale(t.baseTransform,r);const l=this._createMeshCanvas(r,s===Pn.SHADING?null:this._background,t.cachedCanvases);return s!==Pn.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(l.offsetX,l.offsetY),e.scale(l.scaleX,l.scaleY),e.createPattern(l.canvas,"no-repeat")}}class Q9 extends Ny{getPattern(){return"hotpink"}}function e7(n){switch(n[0]){case"RadialAxial":return new W9(n);case"Mesh":return new J9(n);case"Dummy":return new Q9}throw new Error(`Unknown IR type: ${n[0]}`)}const K_={COLORED:1,UNCOLORED:2};class Py{static MAX_PATTERN_SIZE=3e3;constructor(e,t,i,s){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=i,this.baseTransform=s}createPatternCanvas(e,t){const{bbox:i,operatorList:s,paintType:r,tilingType:l,color:c,canvasGraphicsFactory:d}=this;let{xstep:h,ystep:p}=this;h=Math.abs(h),p=Math.abs(p),ef("TilingType: "+l);const m=i[0],v=i[1],b=i[2],w=i[3],x=b-m,A=w-v,S=new Float32Array(2);he.singularValueDecompose2dScale(this.matrix,S);const[T,E]=S;he.singularValueDecompose2dScale(this.baseTransform,S);const M=T*S[0],R=E*S[1];let O=x,L=A,D=!1,$=!1;const ee=Math.ceil(h*M),X=Math.ceil(p*R),le=Math.ceil(x*M),de=Math.ceil(A*R);ee>=le?O=h:D=!0,X>=de?L=p:$=!0;const ce=this.getSizeAndScale(O,this.ctx.canvas.width,M),fe=this.getSizeAndScale(L,this.ctx.canvas.height,R),N=e.cachedCanvases.getCanvas("pattern",ce.size,fe.size),U=N.context,B=d.createCanvasGraphics(U,t);if(B.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(B,r,c),U.translate(-ce.scale*m,-fe.scale*v),B.transform(0,ce.scale,0,0,fe.scale,0,0),U.save(),B.dependencyTracker?.save(),this.clipBbox(B,m,v,b,w),B.baseTransform=Lt(B.ctx),B.executeOperatorList(s),B.endDrawing(),B.dependencyTracker?.restore(),U.restore(),D||$){const se=N.canvas;D&&(O=h),$&&(L=p);const ve=this.getSizeAndScale(O,this.ctx.canvas.width,M),P=this.getSizeAndScale(L,this.ctx.canvas.height,R),q=ve.size,Z=P.size,ne=e.cachedCanvases.getCanvas("pattern-workaround",q,Z),ae=ne.context,pe=D?Math.floor(x/h):0,oe=$?Math.floor(A/p):0;for(let Ee=0;Ee<=pe;Ee++)for(let De=0;De<=oe;De++)ae.drawImage(se,q*Ee,Z*De,q,Z,0,0,q,Z);return{canvas:ne.canvas,scaleX:ve.scale,scaleY:P.scale,offsetX:m,offsetY:v}}return{canvas:N.canvas,scaleX:ce.scale,scaleY:fe.scale,offsetX:m,offsetY:v}}getSizeAndScale(e,t,i){const s=Math.max(Py.MAX_PATTERN_SIZE,t);let r=Math.ceil(e*i);return r>=s?r=s:i=r/e,{scale:i,size:r}}clipBbox(e,t,i,s,r){const l=s-t,c=r-i;e.ctx.rect(t,i,l,c),he.axialAlignedBoundingBox([t,i,s,r],Lt(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,i){const s=e.ctx,r=e.current;switch(t){case K_.COLORED:const{fillStyle:l,strokeStyle:c}=this.ctx;s.fillStyle=r.fillColor=l,s.strokeStyle=r.strokeColor=c;break;case K_.UNCOLORED:s.fillStyle=s.strokeStyle=i,r.fillColor=r.strokeColor=i;break;default:throw new h9(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,i,s,r){let l=i;s!==Pn.SHADING&&(l=he.transform(l,t.baseTransform),this.matrix&&(l=he.transform(l,this.matrix)));const c=this.createPatternCanvas(t,r);let d=new DOMMatrix(l);d=d.translate(c.offsetX,c.offsetY),d=d.scale(1/c.scaleX,1/c.scaleY);const h=e.createPattern(c.canvas,"repeat");return h.setTransform(d),h}}function t7({src:n,srcPos:e=0,dest:t,width:i,height:s,nonBlackColor:r=4294967295,inverseDecode:l=!1}){const c=mn.isLittleEndian?4278190080:255,[d,h]=l?[r,c]:[c,r],p=i>>3,m=i&7,v=n.length;t=new Uint32Array(t.buffer);let b=0;for(let w=0;w<s;w++){for(const A=e+p;e<A;e++){const S=e<v?n[e]:255;t[b++]=S&128?h:d,t[b++]=S&64?h:d,t[b++]=S&32?h:d,t[b++]=S&16?h:d,t[b++]=S&8?h:d,t[b++]=S&4?h:d,t[b++]=S&2?h:d,t[b++]=S&1?h:d}if(m===0)continue;const x=e<v?n[e++]:255;for(let A=0;A<m;A++)t[b++]=x&1<<7-A?h:d}return{srcPos:e,destPos:b}}const J_=16,Q_=100,n7=15,eE=10,ci=16,gg=new DOMMatrix,Si=new Float32Array(2),Ho=new Float32Array([1/0,1/0,-1/0,-1/0]);function i7(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(t,i){e.translate(t,i),this.__originalTranslate(t,i)},n.scale=function(t,i){e.scale(t,i),this.__originalScale(t,i)},n.transform=function(t,i,s,r,l,c){e.transform(t,i,s,r,l,c),this.__originalTransform(t,i,s,r,l,c)},n.setTransform=function(t,i,s,r,l,c){e.setTransform(t,i,s,r,l,c),this.__originalSetTransform(t,i,s,r,l,c)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(t){e.rotate(t),this.__originalRotate(t)},n.clip=function(t){e.clip(t),this.__originalClip(t)},n.moveTo=function(t,i){e.moveTo(t,i),this.__originalMoveTo(t,i)},n.lineTo=function(t,i){e.lineTo(t,i),this.__originalLineTo(t,i)},n.bezierCurveTo=function(t,i,s,r,l,c){e.bezierCurveTo(t,i,s,r,l,c),this.__originalBezierCurveTo(t,i,s,r,l,c)},n.rect=function(t,i,s,r){e.rect(t,i,s,r),this.__originalRect(t,i,s,r)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class s7{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,i){let s;return this.cache[e]!==void 0?(s=this.cache[e],this.canvasFactory.reset(s,t,i)):(s=this.canvasFactory.create(t,i),this.cache[e]=s),s}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function Bd(n,e,t,i,s,r,l,c,d,h){const[p,m,v,b,w,x]=Lt(n);if(m===0&&v===0){const T=l*p+w,E=Math.round(T),M=c*b+x,R=Math.round(M),O=(l+d)*p+w,L=Math.abs(Math.round(O)-E)||1,D=(c+h)*b+x,$=Math.abs(Math.round(D)-R)||1;return n.setTransform(Math.sign(p),0,0,Math.sign(b),E,R),n.drawImage(e,t,i,s,r,0,0,L,$),n.setTransform(p,m,v,b,w,x),[L,$]}if(p===0&&b===0){const T=c*v+w,E=Math.round(T),M=l*m+x,R=Math.round(M),O=(c+h)*v+w,L=Math.abs(Math.round(O)-E)||1,D=(l+d)*m+x,$=Math.abs(Math.round(D)-R)||1;return n.setTransform(0,Math.sign(m),Math.sign(v),0,E,R),n.drawImage(e,t,i,s,r,0,0,$,L),n.setTransform(p,m,v,b,w,x),[$,L]}n.drawImage(e,t,i,s,r,l,c,d,h);const A=Math.hypot(p,m),S=Math.hypot(v,b);return[A*d,S*h]}class tE{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=rv;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=fn.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(e,t,i){i?.(this),this.clipBox=new Float32Array([0,0,e,t]),this.minMax=Ho.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=Pn.FILL,t=null){const i=this.minMax.slice();if(e===Pn.STROKE){t||nt("Stroke bounding box must include transform."),he.singularValueDecompose2dScale(t,Si);const s=Si[0]*this.lineWidth/2,r=Si[1]*this.lineWidth/2;i[0]-=s,i[1]-=r,i[2]+=s,i[3]+=r}return i}updateClipFromPath(){const e=he.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(Ho,0)}getClippedPathBoundingBox(e=Pn.FILL,t=null){return he.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function nE(n,e){if(e instanceof ImageData){n.putImageData(e,0,0);return}const t=e.height,i=e.width,s=t%ci,r=(t-s)/ci,l=s===0?r:r+1,c=n.createImageData(i,ci);let d=0,h;const p=e.data,m=c.data;let v,b,w,x;if(e.kind===Jd.GRAYSCALE_1BPP){const A=p.byteLength,S=new Uint32Array(m.buffer,0,m.byteLength>>2),T=S.length,E=i+7>>3,M=4294967295,R=mn.isLittleEndian?4278190080:255;for(v=0;v<l;v++){for(w=v<r?ci:s,h=0,b=0;b<w;b++){const O=A-d;let L=0;const D=O>E?i:O*8-7,$=D&-8;let ee=0,X=0;for(;L<$;L+=8)X=p[d++],S[h++]=X&128?M:R,S[h++]=X&64?M:R,S[h++]=X&32?M:R,S[h++]=X&16?M:R,S[h++]=X&8?M:R,S[h++]=X&4?M:R,S[h++]=X&2?M:R,S[h++]=X&1?M:R;for(;L<D;L++)ee===0&&(X=p[d++],ee=128),S[h++]=X&ee?M:R,ee>>=1}for(;h<T;)S[h++]=0;n.putImageData(c,0,v*ci)}}else if(e.kind===Jd.RGBA_32BPP){for(b=0,x=i*ci*4,v=0;v<r;v++)m.set(p.subarray(d,d+x)),d+=x,n.putImageData(c,0,b),b+=ci;v<l&&(x=i*s*4,m.set(p.subarray(d,d+x)),n.putImageData(c,0,b))}else if(e.kind===Jd.RGB_24BPP)for(w=ci,x=i*w,v=0;v<l;v++){for(v>=r&&(w=s,x=i*w),h=0,b=x;b--;)m[h++]=p[d++],m[h++]=p[d++],m[h++]=p[d++],m[h++]=255;n.putImageData(c,0,v*ci)}else throw new Error(`bad image kind: ${e.kind}`)}function iE(n,e){if(e.bitmap){n.drawImage(e.bitmap,0,0);return}const t=e.height,i=e.width,s=t%ci,r=(t-s)/ci,l=s===0?r:r+1,c=n.createImageData(i,ci);let d=0;const h=e.data,p=c.data;for(let m=0;m<l;m++){const v=m<r?ci:s;({srcPos:d}=t7({src:h,srcPos:d,dest:p,width:i,height:v,nonBlackColor:0})),n.putImageData(c,0,m*ci)}}function uc(n,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of t)n[i]!==void 0&&(e[i]=n[i]);n.setLineDash!==void 0&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function Fd(n){n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0);const{filter:e}=n;e!=="none"&&e!==""&&(n.filter="none")}function sE(n,e){if(e)return!0;he.singularValueDecompose2dScale(n,Si);const t=Math.fround(Rs.pixelRatio*rl.PDF_TO_CSS_UNITS);return Si[0]<=t&&Si[1]<=t}const a7=["butt","round","square"],r7=["miter","round","bevel"],o7={},aE={};class Wo{constructor(e,t,i,s,r,{optionalContentConfig:l,markedContentStack:c=null},d,h,p){this.ctx=e,this.current=new tE(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=i,this.canvasFactory=s,this.filterFactory=r,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=c||[],this.optionalContentConfig=l,this.cachedCanvases=new s7(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=h,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=p??null}getObject(e,t,i=null){return typeof t=="string"?(this.dependencyTracker?.recordNamedDependency(e,t),t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t)):i}beginDrawing({transform:e,viewport:t,transparency:i=!1,background:s=null}){const r=this.ctx.canvas.width,l=this.ctx.canvas.height,c=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,r,l),this.ctx.fillStyle=c,i){const d=this.cachedCanvases.getCanvas("transparent",r,l);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...Lt(this.compositeCtx))}this.ctx.save(),Fd(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=Lt(this.ctx)}executeOperatorList(e,t,i,s,r){const l=e.argsArray,c=e.fnArray;let d=t||0;const h=l.length;if(h===d)return d;const p=h-d>eE&&typeof i=="function",m=p?Date.now()+n7:0;let v=0;const b=this.commonObjs,w=this.objs;let x,A;for(;;){if(s!==void 0&&d===s.nextBreakPoint)return s.breakIt(d,i),d;if(!r||r(d))if(x=c[d],A=l[d]??null,x!==Hc.dependency)A===null?this[x](d):this[x](d,...A);else for(const S of A){this.dependencyTracker?.recordNamedData(S,d);const T=S.startsWith("g_")?b:w;if(!T.has(S))return T.get(S,i),d}if(d++,d===h)return d;if(p&&++v>eE){if(Date.now()>m)return i(),d;v=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),this.#t()}#t(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}}_scaleImage(e,t){const i=e.width??e.displayWidth,s=e.height??e.displayHeight;let r=Math.max(Math.hypot(t[0],t[1]),1),l=Math.max(Math.hypot(t[2],t[3]),1),c=i,d=s,h="prescale1",p,m;for(;r>2&&c>1||l>2&&d>1;){let v=c,b=d;r>2&&c>1&&(v=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c/2),r/=c/v),l>2&&d>1&&(b=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,l/=d/b),p=this.cachedCanvases.getCanvas(h,v,b),m=p.context,m.clearRect(0,0,v,b),m.drawImage(e,0,0,c,d,0,0,v,b),e=p.canvas,c=v,d=b,h=h==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:c,paintHeight:d}}_createMaskCanvas(e,t){const i=this.ctx,{width:s,height:r}=t,l=this.current.fillColor,c=this.current.patternFill,d=Lt(i);let h,p,m,v;if((t.bitmap||t.data)&&t.count>1){const ee=t.bitmap||t.data.buffer;p=JSON.stringify(c?d:[d.slice(0,4),l]),h=this._cachedBitmapsMap.get(ee),h||(h=new Map,this._cachedBitmapsMap.set(ee,h));const X=h.get(p);if(X&&!c){const le=Math.round(Math.min(d[0],d[2])+d[4]),de=Math.round(Math.min(d[1],d[3])+d[5]);return this.dependencyTracker?.recordDependencies(e,Bi.transformAndFill),{canvas:X,offsetX:le,offsetY:de}}m=X}m||(v=this.cachedCanvases.getCanvas("maskCanvas",s,r),iE(v.context,t));let b=he.transform(d,[1/s,0,0,-1/r,0,0]);b=he.transform(b,[1,0,0,1,0,-r]);const w=Ho.slice();he.axialAlignedBoundingBox([0,0,s,r],b,w);const[x,A,S,T]=w,E=Math.round(S-x)||1,M=Math.round(T-A)||1,R=this.cachedCanvases.getCanvas("fillCanvas",E,M),O=R.context,L=x,D=A;O.translate(-L,-D),O.transform(...b),m||(m=this._scaleImage(v.canvas,ys(O)),m=m.img,h&&c&&h.set(p,m)),O.imageSmoothingEnabled=sE(Lt(O),t.interpolate),Bd(O,m,0,0,m.width,m.height,0,0,s,r),O.globalCompositeOperation="source-in";const $=he.transform(ys(O),[1,0,0,1,-L,-D]);return O.fillStyle=c?l.getPattern(i,this,$,Pn.FILL,e):l,O.fillRect(0,0,s,r),h&&!c&&(this.cachedCanvases.delete("fillCanvas"),h.set(p,R.canvas)),this.dependencyTracker?.recordDependencies(e,Bi.transformAndFill),{canvas:R.canvas,offsetX:Math.round(L),offsetY:Math.round(D)}}setLineWidth(e,t){this.dependencyTracker?.recordSimpleData("lineWidth",e),t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(e,t){this.dependencyTracker?.recordSimpleData("lineCap",e),this.ctx.lineCap=a7[t]}setLineJoin(e,t){this.dependencyTracker?.recordSimpleData("lineJoin",e),this.ctx.lineJoin=r7[t]}setMiterLimit(e,t){this.dependencyTracker?.recordSimpleData("miterLimit",e),this.ctx.miterLimit=t}setDash(e,t,i){this.dependencyTracker?.recordSimpleData("dash",e);const s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(t),s.lineDashOffset=i)}setRenderingIntent(e,t){}setFlatness(e,t){}setGState(e,t){for(const[i,s]of t)switch(i){case"LW":this.setLineWidth(e,s);break;case"LC":this.setLineCap(e,s);break;case"LJ":this.setLineJoin(e,s);break;case"ML":this.setMiterLimit(e,s);break;case"D":this.setDash(e,s[0],s[1]);break;case"RI":this.setRenderingIntent(e,s);break;case"FL":this.setFlatness(e,s);break;case"Font":this.setFont(e,s[0],s[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=s;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=s;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=s;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",e),this.current.activeSMask=s?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(s);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,i=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(s,t,i);this.suspendedCtx=this.ctx;const l=this.ctx=r.context;l.setTransform(this.suspendedCtx.getTransform()),uc(this.suspendedCtx,l),i7(l,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),uc(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,i,s){const r=s[0],l=s[1],c=s[2]-r,d=s[3]-l;c===0||d===0||(this.genericComposeSMask(t.context,i,c,d,t.subtype,t.backdrop,t.transferMap,r,l,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(i.canvas,0,0),e.restore())}genericComposeSMask(e,t,i,s,r,l,c,d,h,p,m){let v=e.canvas,b=d-p,w=h-m;if(l)if(b<0||w<0||b+i>v.width||w+s>v.height){const A=this.cachedCanvases.getCanvas("maskExtension",i,s),S=A.context;S.drawImage(v,-b,-w),S.globalCompositeOperation="destination-atop",S.fillStyle=l,S.fillRect(0,0,i,s),S.globalCompositeOperation="source-over",v=A.canvas,b=w=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const A=new Path2D;A.rect(b,w,i,s),e.clip(A),e.globalCompositeOperation="destination-atop",e.fillStyle=l,e.fillRect(b,w,i,s),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),r==="Alpha"&&c?t.filter=this.filterFactory.addAlphaFilter(c):r==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(c));const x=new Path2D;x.rect(d,h,i,s),t.clip(x),t.globalCompositeOperation="destination-in",t.drawImage(v,b,w,i,s,d,h,i,s),t.restore()}save(e){this.inSMaskMode&&uc(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone(),this.dependencyTracker?.save(e)}restore(e){if(this.dependencyTracker?.restore(e),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&uc(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,i,s,r,l,c){this.dependencyTracker?.recordIncrementalData("transform",e),this.ctx.transform(t,i,s,r,l,c),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,i,s){let[r]=i;if(!s){r||=i[0]=new Path2D,this[t](e,r);return}if(this.dependencyTracker!==null){const l=t===Hc.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,s[0]-l,s[2]+l,s[1]-l,s[3]+l).recordDependencies(e,["transform"])}r instanceof Path2D||(r=i[0]=_2(r)),he.axialAlignedBoundingBox(s,Lt(this.ctx),this.current.minMax),this[t](e,r),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,t,i=!0){const s=this.ctx,r=this.current.strokeColor;if(s.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof r=="object"&&r?.getPattern){const l=r.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.strokeStyle=r.getPattern(s,this,ys(s),Pn.STROKE,e),l){const c=new Path2D;c.addPath(t,s.getTransform().invertSelf().multiplySelf(l)),t=c}this.rescaleAndStroke(t,!1),s.restore()}else this.rescaleAndStroke(t,!0);this.dependencyTracker?.recordDependencies(e,Bi.stroke),i&&this.consumePath(e,t,this.current.getClippedPathBoundingBox(Pn.STROKE,Lt(this.ctx))),s.globalAlpha=this.current.fillAlpha}closeStroke(e,t){this.stroke(e,t)}fill(e,t,i=!0){const s=this.ctx,r=this.current.fillColor,l=this.current.patternFill;let c=!1;if(l){const h=r.isModifyingCurrentTransform()?s.getTransform():null;if(this.dependencyTracker?.save(e),s.save(),s.fillStyle=r.getPattern(s,this,ys(s),Pn.FILL,e),h){const p=new Path2D;p.addPath(t,s.getTransform().invertSelf().multiplySelf(h)),t=p}c=!0}const d=this.current.getClippedPathBoundingBox();this.contentVisible&&d!==null&&(this.pendingEOFill?(s.fill(t,"evenodd"),this.pendingEOFill=!1):s.fill(t)),this.dependencyTracker?.recordDependencies(e,Bi.fill),c&&(s.restore(),this.dependencyTracker?.restore(e)),i&&this.consumePath(e,t,d)}eoFill(e,t){this.pendingEOFill=!0,this.fill(e,t)}fillStroke(e,t){this.fill(e,t,!1),this.stroke(e,t,!1),this.consumePath(e,t)}eoFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}closeFillStroke(e,t){this.fillStroke(e,t)}closeEOFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}endPath(e,t){this.consumePath(e,t)}rawFillPath(e,t){this.ctx.fill(t),this.dependencyTracker?.recordDependencies(e,Bi.rawFillPath).recordOperation(e)}clip(e){this.dependencyTracker?.recordFutureForcedDependency("clipMode",e),this.pendingClip=o7}eoClip(e){this.dependencyTracker?.recordFutureForcedDependency("clipMode",e),this.pendingClip=aE}beginText(e){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){const t=this.pendingTextPaths,i=this.ctx;if(this.dependencyTracker){const{dependencyTracker:s}=this;t!==void 0&&s.recordFutureForcedDependency("textClip",s.getOpenMarker()).recordFutureForcedDependency("textClip",e),s.recordCloseMarker(e)}if(t!==void 0){const s=new Path2D,r=i.getTransform().invertSelf();for(const{transform:l,x:c,y:d,fontSize:h,path:p}of t)p&&s.addPath(p,new DOMMatrix(l).preMultiplySelf(r).translate(c,d).scale(h,-h));i.clip(s)}delete this.pendingTextPaths}setCharSpacing(e,t){this.dependencyTracker?.recordSimpleData("charSpacing",e),this.current.charSpacing=t}setWordSpacing(e,t){this.dependencyTracker?.recordSimpleData("wordSpacing",e),this.current.wordSpacing=t}setHScale(e,t){this.dependencyTracker?.recordSimpleData("hScale",e),this.current.textHScale=t/100}setLeading(e,t){this.dependencyTracker?.recordSimpleData("leading",e),this.current.leading=-t}setFont(e,t,i){this.dependencyTracker?.recordSimpleData("font",e).recordSimpleDataFromNamed("fontObj",t,e);const s=this.commonObjs.get(t),r=this.current;if(!s)throw new Error(`Can't find font for ${t}`);if(r.fontMatrix=s.fontMatrix||rv,(r.fontMatrix[0]===0||r.fontMatrix[3]===0)&&Oe("Invalid font matrix for font "+t),i<0?(i=-i,r.fontDirection=-1):r.fontDirection=1,this.current.font=s,this.current.fontSize=i,s.isType3Font)return;const l=s.loadedName||"sans-serif",c=s.systemFontInfo?.css||`"${l}", ${s.fallbackName}`;let d="normal";s.black?d="900":s.bold&&(d="bold");const h=s.italic?"italic":"normal";let p=i;i<J_?p=J_:i>Q_&&(p=Q_),this.current.fontSizeScale=i/p,this.ctx.font=`${h} ${d} ${p}px ${c}`}setTextRenderingMode(e,t){this.dependencyTracker?.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=t}setTextRise(e,t){this.dependencyTracker?.recordSimpleData("textRise",e),this.current.textRise=t}moveText(e,t,i){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=i}setLeadingMoveText(e,t,i){this.setLeading(e,-i),this.moveText(e,t,i)}setTextMatrix(e,t){this.dependencyTracker?.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",e);const{current:i}=this;i.textMatrix=t,i.textMatrixScale=Math.hypot(t[0],t[1]),i.x=i.lineX=0,i.y=i.lineY=0}nextLine(e){this.moveText(e,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??e)}#i(e,t,i){const s=new Path2D;return s.addPath(e,new DOMMatrix(i).invertSelf().multiplySelf(t)),s}paintChar(e,t,i,s,r,l){const c=this.ctx,d=this.current,h=d.font,p=d.textRenderingMode,m=d.fontSize/d.fontSizeScale,v=p&fn.FILL_STROKE_MASK,b=!!(p&fn.ADD_TO_PATH_FLAG),w=d.patternFill&&!h.missingFile,x=d.patternStroke&&!h.missingFile;let A;if((h.disableFontFace||b||w||x)&&!h.missingFile&&(A=h.getPathGenerator(this.commonObjs,t)),A&&(h.disableFontFace||w||x)){c.save(),c.translate(i,s),c.scale(m,-m),this.dependencyTracker?.recordCharacterBBox(e,c,h);let S;if(v===fn.FILL||v===fn.FILL_STROKE)if(r){S=c.getTransform(),c.setTransform(...r);const T=this.#i(A,S,r);c.fill(T)}else c.fill(A);if(v===fn.STROKE||v===fn.FILL_STROKE)if(l){S||=c.getTransform(),c.setTransform(...l);const{a:T,b:E,c:M,d:R}=S,O=he.inverseTransform(l),L=he.transform([T,E,M,R,0,0],O);he.singularValueDecompose2dScale(L,Si),c.lineWidth*=Math.max(Si[0],Si[1])/m,c.stroke(this.#i(A,S,l))}else c.lineWidth/=m,c.stroke(A);c.restore()}else(v===fn.FILL||v===fn.FILL_STROKE)&&(c.fillText(t,i,s),this.dependencyTracker?.recordCharacterBBox(e,c,h,m,i,s,()=>c.measureText(t))),(v===fn.STROKE||v===fn.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(e,c,h,m,i,s,()=>c.measureText(t)).recordDependencies(e,Bi.stroke),c.strokeText(t,i,s));b&&((this.pendingTextPaths||=[]).push({transform:Lt(c),x:i,y:s,fontSize:m,path:A}),this.dependencyTracker?.recordCharacterBBox(e,c,h,m,i,s))}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let i=!1;for(let s=3;s<t.length;s+=4)if(t[s]>0&&t[s]<255){i=!0;break}return Ne(this,"isFontSubpixelAAEnabled",i)}showText(e,t){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,Bi.showText).resetBBox(e),this.current.textRenderingMode&fn.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());const i=this.current,s=i.font;if(s.isType3Font){this.showType3Text(e,t),this.dependencyTracker?.recordShowTextOperation(e);return}const r=i.fontSize;if(r===0){this.dependencyTracker?.recordOperation(e);return}const l=this.ctx,c=i.fontSizeScale,d=i.charSpacing,h=i.wordSpacing,p=i.fontDirection,m=i.textHScale*p,v=t.length,b=s.vertical,w=b?1:-1,x=s.defaultVMetrics,A=r*i.fontMatrix[0],S=i.textRenderingMode===fn.FILL&&!s.disableFontFace&&!i.patternFill;l.save(),i.textMatrix&&l.transform(...i.textMatrix),l.translate(i.x,i.y+i.textRise),p>0?l.scale(m,-1):l.scale(m,1);let T,E;const M=i.textRenderingMode&fn.FILL_STROKE_MASK,R=M===fn.FILL||M===fn.FILL_STROKE,O=M===fn.STROKE||M===fn.FILL_STROKE;if(R&&i.patternFill){l.save();const X=i.fillColor.getPattern(l,this,ys(l),Pn.FILL,e);T=Lt(l),l.restore(),l.fillStyle=X}if(O&&i.patternStroke){l.save();const X=i.strokeColor.getPattern(l,this,ys(l),Pn.STROKE,e);E=Lt(l),l.restore(),l.strokeStyle=X}let L=i.lineWidth;const D=i.textMatrixScale;if(D===0||L===0?O&&(L=this.getSinglePixelWidth()):L/=D,c!==1&&(l.scale(c,c),L/=c),l.lineWidth=L,s.isInvalidPDFjsFont){const X=[];let le=0;for(const ce of t)X.push(ce.unicode),le+=ce.width;const de=X.join("");if(l.fillText(de,0,0),this.dependencyTracker!==null){const ce=l.measureText(de);this.dependencyTracker.recordBBox(e,this.ctx,-ce.actualBoundingBoxLeft,ce.actualBoundingBoxRight,-ce.actualBoundingBoxAscent,ce.actualBoundingBoxDescent).recordShowTextOperation(e)}i.x+=le*A*m,l.restore(),this.compose();return}let $=0,ee;for(ee=0;ee<v;++ee){const X=t[ee];if(typeof X=="number"){$+=w*X*r/1e3;continue}let le=!1;const de=(X.isSpace?h:0)+d,ce=X.fontChar,fe=X.accent;let N,U,B=X.width;if(b){const P=X.vmetric||x,q=-(X.vmetric?P[1]:B*.5)*A,Z=P[2]*A;B=P?-P[0]:B,N=q/c,U=($+Z)/c}else N=$/c,U=0;let se;if(s.remeasure&&B>0){se=l.measureText(ce);const P=se.width*1e3/r*c;if(B<P&&this.isFontSubpixelAAEnabled){const q=B/P;le=!0,l.save(),l.scale(q,1),N/=q}else B!==P&&(N+=(B-P)/2e3*r/c)}if(this.contentVisible&&(X.isInFont||s.missingFile)){if(S&&!fe)l.fillText(ce,N,U),this.dependencyTracker?.recordCharacterBBox(e,l,se?{bbox:null}:s,r/c,N,U,()=>se??l.measureText(ce));else if(this.paintChar(e,ce,N,U,T,E),fe){const P=N+r*fe.offset.x/c,q=U-r*fe.offset.y/c;this.paintChar(e,fe.fontChar,P,q,T,E)}}const ve=b?B*A-de*p:B*A+de*p;$+=ve,le&&l.restore()}b?i.y-=$:i.x+=$*m,l.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(e)}showType3Text(e,t){const i=this.ctx,s=this.current,r=s.font,l=s.fontSize,c=s.fontDirection,d=r.vertical?1:-1,h=s.charSpacing,p=s.wordSpacing,m=s.textHScale*c,v=s.fontMatrix||rv,b=t.length,w=s.textRenderingMode===fn.INVISIBLE;let x,A,S,T;if(w||l===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,i.save(),s.textMatrix&&i.transform(...s.textMatrix),i.translate(s.x,s.y+s.textRise),i.scale(m,c);const E=this.dependencyTracker;for(this.dependencyTracker=E?new Nh(E,e):null,x=0;x<b;++x){if(A=t[x],typeof A=="number"){T=d*A*l/1e3,this.ctx.translate(T,0),s.x+=T*m;continue}const M=(A.isSpace?p:0)+h,R=r.charProcOperatorList[A.operatorListId];R?this.contentVisible&&(this.save(),i.scale(l,l),i.transform(...v),this.executeOperatorList(R),this.restore()):Oe(`Type3 character "${A.operatorListId}" is not available.`);const O=[A.width,0];he.applyTransform(O,v),S=O[0]*l+M,i.translate(S,0),s.x+=S*m}i.restore(),E&&(this.dependencyTracker=E)}setCharWidth(e,t,i){}setCharWidthAndBounds(e,t,i,s,r,l,c){const d=new Path2D;d.rect(s,r,l-s,c-r),this.ctx.clip(d),this.dependencyTracker?.recordBBox(e,this.ctx,s,l,r,c).recordClipBox(e,this.ctx,s,l,r,c),this.endPath(e)}getColorN_Pattern(e,t){let i;if(t[0]==="TilingPattern"){const s=this.baseTransform||Lt(this.ctx),r={createCanvasGraphics:(l,c)=>new Wo(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new Nh(this.dependencyTracker,c,!0):null)};i=new Py(t,this.ctx,r,s)}else i=this._getPattern(e,t[1],t[2]);return i}setStrokeColorN(e,...t){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.current.strokeColor=this.getColorN_Pattern(e,t),this.current.patternStroke=!0}setFillColorN(e,...t){this.dependencyTracker?.recordSimpleData("fillColor",e),this.current.fillColor=this.getColorN_Pattern(e,t),this.current.patternFill=!0}setStrokeRGBColor(e,t){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(e){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t){this.dependencyTracker?.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(e){this.dependencyTracker?.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t,i=null){let s;return this.cachedPatterns.has(t)?s=this.cachedPatterns.get(t):(s=e7(this.getObject(e,t)),this.cachedPatterns.set(t,s)),i&&(s.matrix=i),s}shadingFill(e,t){if(!this.contentVisible)return;const i=this.ctx;this.save(e);const s=this._getPattern(e,t);i.fillStyle=s.getPattern(i,this,ys(i),Pn.SHADING,e);const r=ys(i);if(r){const{width:l,height:c}=i.canvas,d=Ho.slice();he.axialAlignedBoundingBox([0,0,l,c],r,d);const[h,p,m,v]=d;this.ctx.fillRect(h,p,m-h,v-p)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,Bi.transform).recordDependencies(e,Bi.fill).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){nt("Should not call beginInlineImage")}beginImageData(){nt("Should not call beginImageData")}paintFormXObjectBegin(e,t,i){if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),t&&this.transform(e,...t),this.baseTransform=Lt(this.ctx),i)){he.axialAlignedBoundingBox(i,this.baseTransform,this.current.minMax);const[s,r,l,c]=i,d=new Path2D;d.rect(s,r,l-s,c-r),this.ctx.clip(d),this.dependencyTracker?.recordClipBox(e,this.ctx,s,l,r,c),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,t){if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const i=this.ctx;t.isolated||ef("TODO: Support non-isolated groups."),t.knockout&&Oe("Knockout groups not supported.");const s=Lt(i);if(t.matrix&&i.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let r=Ho.slice();he.axialAlignedBoundingBox(t.bbox,Lt(i),r);const l=[0,0,i.canvas.width,i.canvas.height];r=he.intersect(r,l)||[0,0,0,0];const c=Math.floor(r[0]),d=Math.floor(r[1]),h=Math.max(Math.ceil(r[2])-c,1),p=Math.max(Math.ceil(r[3])-d,1);this.current.startNewPathAndClipBox([0,0,h,p]);let m="groupAt"+this.groupLevel;t.smask&&(m+="_smask_"+this.smaskCounter++%2);const v=this.cachedCanvases.getCanvas(m,h,p),b=v.context;b.translate(-c,-d),b.transform(...s);let w=new Path2D;const[x,A,S,T]=t.bbox;if(w.rect(x,A,S-x,T-A),t.matrix){const E=new Path2D;E.addPath(w,new DOMMatrix(t.matrix)),w=E}b.clip(w),t.smask&&this.smaskStack.push({canvas:v.canvas,context:b,offsetX:c,offsetY:d,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}),(!t.smask||this.dependencyTracker)&&(i.setTransform(1,0,0,1,0,0),i.translate(c,d),i.save()),uc(i,b),this.ctx=b,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(i),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(i),this.groupLevel++}endGroup(e,t){if(!this.contentVisible)return;this.groupLevel--;const i=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),t.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const r=Lt(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...r);const l=Ho.slice();he.axialAlignedBoundingBox([0,0,i.canvas.width,i.canvas.height],r,l),this.ctx.drawImage(i.canvas,0,0),this.ctx.restore(),this.compose(l)}}beginAnnotation(e,t,i,s,r,l){if(this.#e(),Fd(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),i){const c=i[2]-i[0],d=i[3]-i[1];if(l&&this.annotationCanvasMap){s=s.slice(),s[4]-=i[0],s[5]-=i[1],i=i.slice(),i[0]=i[1]=0,i[2]=c,i[3]=d,he.singularValueDecompose2dScale(Lt(this.ctx),Si);const{viewportScale:h}=this,p=Math.ceil(c*this.outputScaleX*h),m=Math.ceil(d*this.outputScaleY*h);this.annotationCanvas=this.canvasFactory.create(p,m);const{canvas:v,context:b}=this.annotationCanvas;this.annotationCanvasMap.set(t,v),this.annotationCanvas.savedCtx=this.ctx,this.ctx=b,this.ctx.save(),this.ctx.setTransform(Si[0],0,0,-Si[1],0,d*Si[1]),Fd(this.ctx)}else{Fd(this.ctx),this.endPath(e);const h=new Path2D;h.rect(i[0],i[1],c,d),this.ctx.clip(h)}}this.current=new tE(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...s),this.transform(e,...r)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),this.#t(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,t){if(!this.contentVisible)return;const i=t.count;t=this.getObject(e,t.data,t),t.count=i;const s=this.ctx,r=this._createMaskCanvas(e,t),l=r.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(l,r.offsetX,r.offsetY),this.dependencyTracker?.resetBBox(e).recordBBox(e,this.ctx,r.offsetX,r.offsetX+l.width,r.offsetY,r.offsetY+l.height).recordOperation(e),s.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,i,s=0,r=0,l,c){if(!this.contentVisible)return;t=this.getObject(e,t.data,t);const d=this.ctx;d.save();const h=Lt(d);d.transform(i,s,r,l,0,0);const p=this._createMaskCanvas(e,t);d.setTransform(1,0,0,1,p.offsetX-h[4],p.offsetY-h[5]),this.dependencyTracker?.resetBBox(e);for(let m=0,v=c.length;m<v;m+=2){const b=he.transform(h,[i,s,r,l,c[m],c[m+1]]);d.drawImage(p.canvas,b[4],b[5]),this.dependencyTracker?.recordBBox(e,this.ctx,b[4],b[4]+p.canvas.width,b[5],b[5]+p.canvas.height)}d.restore(),this.compose(),this.dependencyTracker?.recordOperation(e)}paintImageMaskXObjectGroup(e,t){if(!this.contentVisible)return;const i=this.ctx,s=this.current.fillColor,r=this.current.patternFill;this.dependencyTracker?.resetBBox(e).recordDependencies(e,Bi.transformAndFill);for(const l of t){const{data:c,width:d,height:h,transform:p}=l,m=this.cachedCanvases.getCanvas("maskCanvas",d,h),v=m.context;v.save();const b=this.getObject(e,c,l);iE(v,b),v.globalCompositeOperation="source-in",v.fillStyle=r?s.getPattern(v,this,ys(i),Pn.FILL,e):s,v.fillRect(0,0,d,h),v.restore(),i.save(),i.transform(...p),i.scale(1,-1),Bd(i,m.canvas,0,0,d,h,0,-1,1,1),this.dependencyTracker?.recordBBox(e,i,0,d,0,h),i.restore()}this.compose(),this.dependencyTracker?.recordOperation(e)}paintImageXObject(e,t){if(!this.contentVisible)return;const i=this.getObject(e,t);if(!i){Oe("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e,i)}paintImageXObjectRepeat(e,t,i,s,r){if(!this.contentVisible)return;const l=this.getObject(e,t);if(!l){Oe("Dependent image isn't ready yet");return}const c=l.width,d=l.height,h=[];for(let p=0,m=r.length;p<m;p+=2)h.push({transform:[i,0,0,s,r[p],r[p+1]],x:0,y:0,w:c,h:d});this.paintInlineImageXObjectGroup(e,l,h)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:i,height:s}=e,r=this.cachedCanvases.getCanvas("inlineImage",i,s),l=r.context;return l.filter=this.current.transferMaps,l.drawImage(t,0,0),l.filter="none",r.canvas}paintInlineImageXObject(e,t){if(!this.contentVisible)return;const i=t.width,s=t.height,r=this.ctx;this.save(e);const{filter:l}=r;l!=="none"&&l!==""&&(r.filter="none"),r.scale(1/i,-1/s);let c;if(t.bitmap)c=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)c=t;else{const p=this.cachedCanvases.getCanvas("inlineImage",i,s).context;nE(p,t),c=this.applyTransferMapsToCanvas(p)}const d=this._scaleImage(c,ys(r));r.imageSmoothingEnabled=sE(Lt(r),t.interpolate),this.dependencyTracker?.resetBBox(e).recordBBox(e,r,0,i,-s,0).recordDependencies(e,Bi.imageXObject).recordOperation(e),Bd(r,d.img,0,0,d.paintWidth,d.paintHeight,0,-s,i,s),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,t,i){if(!this.contentVisible)return;const s=this.ctx;let r;if(t.bitmap)r=t.bitmap;else{const l=t.width,c=t.height,h=this.cachedCanvases.getCanvas("inlineImage",l,c).context;nE(h,t),r=this.applyTransferMapsToCanvas(h)}this.dependencyTracker?.resetBBox(e);for(const l of i)s.save(),s.transform(...l.transform),s.scale(1,-1),Bd(s,r,l.x,l.y,l.w,l.h,0,-1,1,1),this.dependencyTracker?.recordBBox(e,s,0,1,-1,0),s.restore();this.dependencyTracker?.recordOperation(e),this.compose()}paintSolidColorImageMask(e){this.contentVisible&&(this.dependencyTracker?.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,Bi.fill).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,t){}markPointProps(e,t,i){}beginMarkedContent(e,t){this.dependencyTracker?.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t,i){this.dependencyTracker?.beginMarkedContent(e),t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(i)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){this.dependencyTracker?.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,t,i){const s=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(i);const r=this.ctx;this.pendingClip?(s||(this.pendingClip===aE?r.clip(t,"evenodd"):r.clip(t)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):this.dependencyTracker?.recordOperation(e),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=Lt(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),i=Math.hypot(e[0],e[2]),s=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(i,s)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:i,c:s,d:r}=this.ctx.getTransform();let l,c;if(i===0&&s===0){const d=Math.abs(t),h=Math.abs(r);if(d===h)if(e===0)l=c=1/d;else{const p=d*e;l=c=p<1?1/p:1}else if(e===0)l=1/d,c=1/h;else{const p=d*e,m=h*e;l=p<1?1/p:1,c=m<1?1/m:1}}else{const d=Math.abs(t*r-i*s),h=Math.hypot(t,i),p=Math.hypot(s,r);if(e===0)l=p/d,c=h/d;else{const m=e*d;l=p>m?p/m:1,c=h>m?h/m:1}}this._cachedScaleForStroking[0]=l,this._cachedScaleForStroking[1]=c}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:i,current:{lineWidth:s}}=this,[r,l]=this.getScaleForStroking();if(r===l){i.lineWidth=(s||1)*r,i.stroke(e);return}const c=i.getLineDash();t&&i.save(),i.scale(r,l),gg.a=1/r,gg.d=1/l;const d=new Path2D;if(d.addPath(e,gg),c.length>0){const h=Math.max(r,l);i.setLineDash(c.map(p=>p/h)),i.lineDashOffset/=h}i.lineWidth=s||1,i.stroke(d),t&&i.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}}for(const n in Hc)Wo.prototype[n]!==void 0&&(Wo.prototype[Hc[n]]=Wo.prototype[n]);class Ko{static#e=null;static#t="";static get workerPort(){return this.#e}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");this.#e=e}static get workerSrc(){return this.#t}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");this.#t=e}}class l7{#e;#t;constructor({parsedData:e,rawData:t}){this.#e=e,this.#t=t}getRaw(){return this.#t}get(e){return this.#e.get(e)??null}[Symbol.iterator](){return this.#e.entries()}}const No=Symbol("INTERNAL");class c7{#e=!1;#t=!1;#i=!1;#n=!0;constructor(e,{name:t,intent:i,usage:s,rbGroups:r}){this.#e=!!(e&wi.DISPLAY),this.#t=!!(e&wi.PRINT),this.name=t,this.intent=i,this.usage=s,this.rbGroups=r}get visible(){if(this.#i)return this.#n;if(!this.#n)return!1;const{print:e,view:t}=this.usage;return this.#e?t?.viewState!=="OFF":this.#t?e?.printState!=="OFF":!0}_setVisible(e,t,i=!1){e!==No&&nt("Internal method `_setVisible` called."),this.#i=i,this.#n=t}}class u7{#e=null;#t=new Map;#i=null;#n=null;constructor(e,t=wi.DISPLAY){if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,this.#n=e.order;for(const i of e.groups)this.#t.set(i.id,new c7(t,i));if(e.baseState==="OFF")for(const i of this.#t.values())i._setVisible(No,!1);for(const i of e.on)this.#t.get(i)._setVisible(No,!0);for(const i of e.off)this.#t.get(i)._setVisible(No,!1);this.#i=this.getHash()}}#a(e){const t=e.length;if(t<2)return!0;const i=e[0];for(let s=1;s<t;s++){const r=e[s];let l;if(Array.isArray(r))l=this.#a(r);else if(this.#t.has(r))l=this.#t.get(r).visible;else return Oe(`Optional content group not found: ${r}`),!0;switch(i){case"And":if(!l)return!1;break;case"Or":if(l)return!0;break;case"Not":return!l;default:return!0}}return i==="And"}isVisible(e){if(this.#t.size===0)return!0;if(!e)return ef("Optional content group not defined."),!0;if(e.type==="OCG")return this.#t.has(e.id)?this.#t.get(e.id).visible:(Oe(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return this.#a(e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!this.#t.has(t))return Oe(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!this.#t.has(t))return Oe(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!this.#t.has(t))return Oe(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!this.#t.has(t))return Oe(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!1}return!0}return Oe(`Unknown optional content policy ${e.policy}.`),!0}return Oe(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,i=!0){const s=this.#t.get(e);if(!s){Oe(`Optional content group not found: ${e}`);return}if(i&&t&&s.rbGroups.length)for(const r of s.rbGroups)for(const l of r)l!==e&&this.#t.get(l)?._setVisible(No,!1,!0);s._setVisible(No,!!t,!0),this.#e=null}setOCGState({state:e,preserveRB:t}){let i;for(const s of e){switch(s){case"ON":case"OFF":case"Toggle":i=s;continue}const r=this.#t.get(s);if(r)switch(i){case"ON":this.setVisibility(s,!0,t);break;case"OFF":this.setVisibility(s,!1,t);break;case"Toggle":this.setVisibility(s,!r.visible,t);break}}this.#e=null}get hasInitialVisibility(){return this.#i===null||this.getHash()===this.#i}getOrder(){return this.#t.size?this.#n?this.#n.slice():[...this.#t.keys()]:null}getGroup(e){return this.#t.get(e)||null}getHash(){if(this.#e!==null)return this.#e;const e=new T2;for(const[t,i]of this.#t)e.update(`${t}:${i.visible}`);return this.#e=e.hexdigest()}[Symbol.iterator](){return this.#t.entries()}}class af{#e=null;#t=null;_fullReader=null;_rangeReaders=new Set;_source=null;constructor(e,t,i){this._source=e,this.#e=t,this.#t=i}get _progressiveDataLength(){return this._fullReader?._loaded??0}getFullReader(){return tt(!this._fullReader,"BasePDFStream.getFullReader can only be called once."),this._fullReader=new this.#e(this)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=new this.#t(this,e,t);return this._rangeReaders.add(i),i}cancelAllRequests(e){this._fullReader?.cancel(e);for(const t of new Set(this._rangeReaders))t.cancel(e)}}class rf{onProgress=null;_contentLength=0;_filename=null;_headersCapability=Promise.withResolvers();_isRangeSupported=!1;_isStreamingSupported=!1;_loaded=0;_stream=null;constructor(e){this._stream=e}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){nt("Abstract method `read` called")}cancel(e){nt("Abstract method `cancel` called")}}class of{_stream=null;constructor(e,t,i){this._stream=e}async read(){nt("Abstract method `read` called")}cancel(e){nt("Abstract method `cancel` called")}}function rE(n){return n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength?n.buffer:new Uint8Array(n).buffer}class d7 extends af{_progressiveDone=!1;_queuedChunks=[];constructor(e){super(e,h7,f7);const{pdfDataRangeTransport:t}=e,{initialData:i,progressiveDone:s}=t;if(i?.length>0){const r=rE(i);this._queuedChunks.push(r)}this._progressiveDone=s,t.addRangeListener((r,l)=>{this.#e(r,l)}),t.addProgressListener((r,l)=>{l!==void 0&&this._fullReader?.onProgress?.({loaded:r,total:l})}),t.addProgressiveReadListener(r=>{this.#e(void 0,r)}),t.addProgressiveDoneListener(()=>{this._fullReader?.progressiveDone(),this._progressiveDone=!0}),t.transportReady()}#e(e,t){const i=rE(t);if(e===void 0)this._fullReader?this._fullReader._enqueue(i):this._queuedChunks.push(i);else{const s=this._rangeReaders.keys().find(r=>r._begin===e);tt(s,"#onReceiveData - no `PDFDataTransportStreamRangeReader` instance found."),s._enqueue(i)}}getFullReader(){const e=super.getFullReader();return this._queuedChunks=null,e}getRangeReader(e,t){const i=super.getRangeReader(e,t);return i&&(i.onDone=()=>this._rangeReaders.delete(i),this._source.pdfDataRangeTransport.requestDataRange(e,t)),i}cancelAllRequests(e){super.cancelAllRequests(e),this._source.pdfDataRangeTransport.abort()}}class h7 extends rf{_done=!1;_queuedChunks=null;_requests=[];constructor(e){super(e);const{pdfDataRangeTransport:t,disableRange:i,disableStream:s}=e._source,{length:r,contentDispositionFilename:l}=t;this._queuedChunks=e._queuedChunks||[];for(const c of this._queuedChunks)this._loaded+=c.byteLength;this._done=e._progressiveDone,this._contentLength=r,this._isStreamingSupported=!s,this._isRangeSupported=!i,ky(l)&&(this._filename=l),this._headersCapability.resolve()}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||=!0}}class f7 extends of{onDone=null;_begin=-1;_done=!1;_queuedChunk=null;_requests=[];constructor(e,t,i){super(e,t,i),this._begin=t}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this.onDone?.()}}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this.onDone?.()}}function p7(n){let e=!0,t=i("filename\\*","i").exec(n);if(t){t=t[1];let p=c(t);return p=unescape(p),p=d(p),p=h(p),r(p)}if(t=l(n),t){const p=h(t);return r(p)}if(t=i("filename","i").exec(n),t){t=t[1];let p=c(t);return p=h(p),r(p)}function i(p,m){return new RegExp("(?:^|;)\\s*"+p+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',m)}function s(p,m){if(p){if(!/^[\x00-\xFF]+$/.test(m))return m;try{const v=new TextDecoder(p,{fatal:!0}),b=tf(m);m=v.decode(b),e=!1}catch{}}return m}function r(p){return e&&/[\x80-\xff]/.test(p)&&(p=s("utf-8",p),e&&(p=s("iso-8859-1",p))),p}function l(p){const m=[];let v;const b=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(v=b.exec(p))!==null;){let[,x,A,S]=v;if(x=parseInt(x,10),x in m){if(x===0)break;continue}m[x]=[A,S]}const w=[];for(let x=0;x<m.length&&x in m;++x){let[A,S]=m[x];S=c(S),A&&(S=unescape(S),x===0&&(S=d(S))),w.push(S)}return w.join("")}function c(p){if(p.startsWith('"')){const m=p.slice(1).split('\\"');for(let v=0;v<m.length;++v){const b=m[v].indexOf('"');b!==-1&&(m[v]=m[v].slice(0,b),m.length=v+1),m[v]=m[v].replaceAll(/\\(.)/g,"$1")}p=m.join('"')}return p}function d(p){const m=p.indexOf("'");if(m===-1)return p;const v=p.slice(0,m),w=p.slice(m+1).replace(/^[^']*'/,"");return s(v,w)}function h(p){return!p.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(p)?p:p.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(m,v,b,w){if(b==="q"||b==="Q")return w=w.replaceAll("_"," "),w=w.replaceAll(/=([0-9a-fA-F]{2})/g,function(x,A){return String.fromCharCode(parseInt(A,16))}),s(v,w);try{w=atob(w)}catch{}return s(v,w)})}return""}function N2(n,e){const t=new Headers;if(!n||!e||typeof e!="object")return t;for(const i in e){const s=e[i];s!==void 0&&t.append(i,s)}return t}function lf(n){return URL.parse(n)?.origin??null}function P2({responseHeaders:n,isHttp:e,rangeChunkSize:t,disableRange:i}){const s={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(n.get("Content-Length"),10);return!Number.isInteger(r)||(s.suggestedLength=r,r<=2*t)||i||!e||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function I2(n){const e=n.get("Content-Disposition");if(e){let t=p7(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(ky(t))return t}return null}function cf(n,e){return new Oh(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n,n===404||n===0&&e.startsWith("file:"))}function L2(n,e){if(n!==e)throw new Error(`Expected range response-origin "${n}" to match "${e}".`)}function z2(n,e,t,i){return fetch(n,{method:"GET",headers:e,signal:i.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"})}function j2(n,e){if(n!==200&&n!==206)throw cf(n,e)}function B2(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(Oe(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class m7 extends af{_responseOrigin=null;constructor(e){super(e,g7,v7),this.isHttp=/^https?:/i.test(e.url),this.headers=N2(this.isHttp,e.httpHeaders)}}class g7 extends rf{_abortController=new AbortController;_reader=null;constructor(e){super(e);const{disableRange:t,disableStream:i,length:s,rangeChunkSize:r,url:l,withCredentials:c}=e._source;this._contentLength=s,this._isStreamingSupported=!i,this._isRangeSupported=!t;const d=new Headers(e.headers);z2(l,d,c,this._abortController).then(h=>{e._responseOrigin=lf(h.url),j2(h.status,l),this._reader=h.body.getReader();const p=h.headers,{allowRangeRequests:m,suggestedLength:v}=P2({responseHeaders:p,isHttp:e.isHttp,rangeChunkSize:r,disableRange:t});this._isRangeSupported=m,this._contentLength=v||this._contentLength,this._filename=I2(p),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Ha("Streaming is disabled.")),this._headersCapability.resolve()}).catch(this._headersCapability.reject)}async read(){await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:B2(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}class v7 extends of{_abortController=new AbortController;_readCapability=Promise.withResolvers();_reader=null;constructor(e,t,i){super(e,t,i);const{url:s,withCredentials:r}=e._source,l=new Headers(e.headers);l.append("Range",`bytes=${t}-${i-1}`),z2(s,l,r,this._abortController).then(c=>{const d=lf(c.url);L2(d,e._responseOrigin),j2(c.status,s),this._reader=c.body.getReader(),this._readCapability.resolve()}).catch(this._readCapability.reject)}async read(){await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:{value:B2(e),done:!1}}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}const vg=200,oE=206;function y7(n){return typeof n!="string"?n:tf(n).buffer}class b7 extends af{#e=new WeakMap;_responseOrigin=null;constructor(e){super(e,x7,w7),this.url=e.url,this.isHttp=/^https?:/i.test(this.url),this.headers=N2(this.isHttp,e.httpHeaders)}_request(e){const t=new XMLHttpRequest,i={validateStatus:null,onHeadersReceived:e.onHeadersReceived,onDone:e.onDone,onError:e.onError,onProgress:e.onProgress};this.#e.set(t,i),t.open("GET",this.url),t.withCredentials=this._source.withCredentials;for(const[s,r]of this.headers)t.setRequestHeader(s,r);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),i.validateStatus=s=>s===oE||s===vg):i.validateStatus=s=>s===vg,t.responseType="arraybuffer",tt(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>e.onError(t.status),t.onreadystatechange=this.#i.bind(this,t),t.onprogress=this.#t.bind(this,t),t.send(null),t}#t(e,t){this.#e.get(e)?.onProgress?.(t)}#i(e,t){const i=this.#e.get(e);if(!i||(e.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),e.readyState!==4)||!this.#e.has(e))return;if(this.#e.delete(e),e.status===0&&this.isHttp){i.onError(e.status);return}const s=e.status||vg;if(!i.validateStatus(s)){i.onError(e.status);return}const r=y7(e.response);if(s===oE){const l=e.getResponseHeader("Content-Range");/bytes (\d+)-(\d+)\/(\d+)/.test(l)?i.onDone(r):(Oe('Missing or invalid "Content-Range" header.'),i.onError(0))}else r?i.onDone(r):i.onError(e.status)}_abortRequest(e){this.#e.has(e)&&(this.#e.delete(e),e.abort())}getRangeReader(e,t){const i=super.getRangeReader(e,t);return i&&(i.onClosed=()=>this._rangeReaders.delete(i)),i}}class x7 extends rf{_cachedChunks=[];_done=!1;_requests=[];_storedError=null;constructor(e){super(e);const{length:t}=e._source;this._contentLength=t,this._fullRequestXhr=e._request({onHeadersReceived:this.#e.bind(this),onDone:this.#t.bind(this),onError:this.#i.bind(this),onProgress:this.#n.bind(this)})}#e(){const e=this._stream,{disableRange:t,rangeChunkSize:i}=e._source,s=this._fullRequestXhr;e._responseOrigin=lf(s.responseURL);const r=s.getAllResponseHeaders(),l=new Headers(r?r.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(h=>{const[p,...m]=h.split(": ");return[p,m.join(": ")]}):[]),{allowRangeRequests:c,suggestedLength:d}=P2({responseHeaders:l,isHttp:e.isHttp,rangeChunkSize:i,disableRange:t});c&&(this._isRangeSupported=!0),this._contentLength=d||this._contentLength,this._filename=I2(l),this._isRangeSupported&&e._abortRequest(s),this._headersCapability.resolve()}#t(e){if(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._cachedChunks.push(e),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}#i(e){this._storedError=cf(e,this._stream.url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}#n(e){this.onProgress?.({loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._abortRequest(this._fullRequestXhr),this._fullRequestXhr=null}}class w7 extends of{onClosed=null;_done=!1;_queuedChunk=null;_requests=[];_storedError=null;constructor(e,t,i){super(e,t,i),this._requestXhr=e._request({begin:t,end:i,onHeadersReceived:this.#e.bind(this),onDone:this.#t.bind(this),onError:this.#i.bind(this),onProgress:null})}#e(){const e=lf(this._requestXhr?.responseURL);try{L2(e,this._stream._responseOrigin)}catch(t){this._storedError=t,this.#i(0)}}#t(e){this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this.onClosed?.()}#i(e){this._storedError??=cf(e,this._stream.url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._abortRequest(this._requestXhr),this.onClosed?.()}}const A7=/^[a-z][a-z0-9\-+.]+:/i;function S7(n){if(A7.test(n))return new URL(n);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(n))}function F2(n){const{Readable:e}=process.getBuiltinModule("stream");return typeof e.toWeb=="function"?e.toWeb(n):process.getBuiltinModule("module").createRequire(import.meta.url)("node-readable-to-web-readable-stream").makeDefaultReadableStreamFromNodeReadable(n)}function U2(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(Oe(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class _7 extends af{constructor(e){super(e,E7,T7),this.url=S7(e.url),tt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs.")}}class E7 extends rf{_reader=null;constructor(e){super(e);const{disableRange:t,disableStream:i,length:s,rangeChunkSize:r}=e._source;this._contentLength=s,this._isStreamingSupported=!i,this._isRangeSupported=!t;const l=e.url,c=process.getBuiltinModule("fs");c.promises.lstat(l).then(d=>{const h=c.createReadStream(l),p=F2(h);this._reader=p.getReader();const{size:m}=d;m<=2*r&&(this._isRangeSupported=!1),this._contentLength=m,!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Ha("Streaming is disabled.")),this._headersCapability.resolve()}).catch(d=>{d.code==="ENOENT"&&(d=cf(0,l.href)),this._headersCapability.reject(d)})}async read(){await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:U2(e),done:!1})}cancel(e){this._reader?.cancel(e)}}class T7 extends of{_readCapability=Promise.withResolvers();_reader=null;constructor(e,t,i){super(e,t,i);const s=e.url,r=process.getBuiltinModule("fs");try{const l=r.createReadStream(s,{start:t,end:i-1}),c=F2(l);this._reader=c.getReader(),this._readCapability.resolve()}catch(l){this._readCapability.reject(l)}}async read(){await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:{value:U2(e),done:!1}}cancel(e){this._reader?.cancel(e)}}const dc=Symbol("INITIAL_DATA");class V2{#e=Object.create(null);#t(e){return this.#e[e]||={...Promise.withResolvers(),data:dc}}get(e,t=null){if(t){const s=this.#t(e);return s.promise.then(()=>t(s.data)),null}const i=this.#e[e];if(!i||i.data===dc)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return i.data}has(e){const t=this.#e[e];return!!t&&t.data!==dc}delete(e){const t=this.#e[e];return!t||t.data===dc?!1:(delete this.#e[e],!0)}resolve(e,t=null){const i=this.#t(e);i.data=t,i.resolve()}clear(){for(const e in this.#e){const{data:t}=this.#e[e];t?.bitmap?.close()}this.#e=Object.create(null)}*[Symbol.iterator](){for(const e in this.#e){const{data:t}=this.#e[e];t!==dc&&(yield[e,t])}}}const C7=1e5,lE=30;class Ai{#e=Promise.withResolvers();#t=null;#i=!1;#n=!!globalThis.FontInspector?.enabled;#a=null;#r=null;#s=0;#o=0;#c=null;#l=null;#h=0;#d=0;#f=Object.create(null);#g=[];#m=null;#u=[];#p=new WeakMap;#v=null;static#b=new Map;static#y=new Map;static#E=new WeakMap;static#S=null;static#w=new Set;constructor({textContentSource:e,container:t,viewport:i}){if(e instanceof ReadableStream)this.#m=e;else if(typeof e=="object")this.#m=new ReadableStream({start(d){d.enqueue(e),d.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#t=this.#l=t,this.#d=i.scale*Rs.pixelRatio,this.#h=i.rotation,this.#r={div:null,properties:null,ctx:null};const{pageWidth:s,pageHeight:r,pageX:l,pageY:c}=i.rawDims;this.#v=[1,0,0,-1,-l,c+r],this.#o=s,this.#s=r,Ai.#M(),t.style.setProperty("--min-font-size",Ai.#S),Nr(t,i),this.#e.promise.finally(()=>{Ai.#w.delete(this),this.#r=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=mn.platform;return Ne(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{this.#c.read().then(({value:t,done:i})=>{if(i){this.#e.resolve();return}this.#a??=t.lang,Object.assign(this.#f,t.styles),this.#C(t.items),e()},this.#e.reject)};return this.#c=this.#m.getReader(),Ai.#w.add(this),e(),this.#e.promise}update({viewport:e,onBefore:t=null}){const i=e.scale*Rs.pixelRatio,s=e.rotation;if(s!==this.#h&&(t?.(),this.#h=s,Nr(this.#l,{rotation:s})),i!==this.#d){t?.(),this.#d=i;const r={div:null,properties:null,ctx:Ai.#R(this.#a)};for(const l of this.#u)r.properties=this.#p.get(l),r.div=l,this.#_(r)}}cancel(){const e=new Ha("TextLayer task cancelled.");this.#c?.cancel(e).catch(()=>{}),this.#c=null,this.#e.reject(e)}get textDivs(){return this.#u}get textContentItemsStr(){return this.#g}#C(e){if(this.#i)return;this.#r.ctx??=Ai.#R(this.#a);const t=this.#u,i=this.#g;for(const s of e){if(t.length>C7){Oe("Ignoring additional textDivs for performance reasons."),this.#i=!0;return}if(s.str===void 0){if(s.type==="beginMarkedContentProps"||s.type==="beginMarkedContent"){const r=this.#t;this.#t=document.createElement("span"),this.#t.classList.add("markedContent"),s.id&&this.#t.setAttribute("id",`${s.id}`),s.tag==="Artifact"&&(this.#t.ariaHidden=!0),r.append(this.#t)}else s.type==="endMarkedContent"&&(this.#t=this.#t.parentNode);continue}i.push(s.str),this.#x(s)}}#x(e){const t=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};this.#u.push(t);const s=he.transform(this.#v,e.transform);let r=Math.atan2(s[1],s[0]);const l=this.#f[e.fontName];l.vertical&&(r+=Math.PI/2);let c=this.#n&&l.fontSubstitution||l.fontFamily;c=Ai.fontFamilyMap.get(c)||c;const d=Math.hypot(s[2],s[3]),h=d*Ai.#z(c,l,this.#a);let p,m;r===0?(p=s[4],m=s[5]-h):(p=s[4]+h*Math.sin(r),m=s[5]-h*Math.cos(r));const v=t.style;v.left=`${(100*p/this.#o).toFixed(2)}%`,v.top=`${(100*m/this.#s).toFixed(2)}%`,v.setProperty("--font-height",`${d.toFixed(2)}px`),v.fontFamily=c,i.fontSize=d,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,this.#n&&(t.dataset.fontName=l.fontSubstitutionLoadedName||e.fontName),r!==0&&(i.angle=r*(180/Math.PI));let b=!1;if(e.str.length>1)b=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const w=Math.abs(e.transform[0]),x=Math.abs(e.transform[3]);w!==x&&Math.max(w,x)/Math.min(w,x)>1.5&&(b=!0)}if(b&&(i.canvasWidth=l.vertical?e.height:e.width),this.#p.set(t,i),this.#r.div=t,this.#r.properties=i,this.#_(this.#r),i.hasText&&this.#t.append(t),i.hasEOL){const w=document.createElement("br");w.setAttribute("role","presentation"),this.#t.append(w)}}#_(e){const{div:t,properties:i,ctx:s}=e,{style:r}=t;if(i.canvasWidth!==0&&i.hasText){const{fontFamily:l}=r,{canvasWidth:c,fontSize:d}=i;Ai.#k(s,d*this.#d,l);const{width:h}=s.measureText(t.textContent);h>0&&r.setProperty("--scale-x",c*this.#d/h)}i.angle!==0&&r.setProperty("--rotate",`${i.angle}deg`)}static cleanup(){if(!(this.#w.size>0)){this.#b.clear();for(const{canvas:e}of this.#y.values())e.remove();this.#y.clear()}}static#R(e=null){let t=this.#y.get(e||="");if(!t){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=e,document.body.append(i),t=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#y.set(e,t),this.#E.set(t,{size:0,family:""})}return t}static#k(e,t,i){const s=this.#E.get(e);t===s.size&&i===s.family||(e.font=`${t}px ${i}`,s.size=t,s.family=i)}static#M(){if(this.#S!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),this.#S=e.getBoundingClientRect().height,e.remove()}static#z(e,t,i){const s=this.#b.get(e);if(s)return s;const r=this.#R(i);r.canvas.width=r.canvas.height=lE,this.#k(r,lE,e);const l=r.measureText(""),c=l.fontBoundingBoxAscent,d=Math.abs(l.fontBoundingBoxDescent);r.canvas.width=r.canvas.height=0;let h=.8;return c?h=c/(c+d):(mn.platform.isFirefox&&Oe("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?h=t.ascent:t.descent&&(h=1+t.descent)),this.#b.set(e,h),h}}const k7=100;function $2(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const e=new Iy,{docId:t}=e,i=n.url?L9(n.url):null,s=n.data?z9(n.data):null,r=n.httpHeaders||null,l=n.withCredentials===!0,c=n.password??null,d=n.range instanceof H2?n.range:null,h=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:2**16;let p=n.worker instanceof qc?n.worker:null;const m=n.verbosity,v=typeof n.docBaseUrl=="string"&&!nf(n.docBaseUrl)?n.docBaseUrl:null,b=Id(n.cMapUrl),w=n.cMapPacked!==!1,x=n.CMapReaderFactory||($n?G9:q_),A=Id(n.iccUrl),S=Id(n.standardFontDataUrl),T=n.StandardFontDataFactory||($n?q9:Z_),E=Id(n.wasmUrl),M=n.WasmFactory||($n?Z9:Y_),R=n.stopAtErrors!==!0,O=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,L=n.isEvalSupported!==!1,D=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!$n,$=typeof n.isImageDecoderSupported=="boolean"?n.isImageDecoderSupported:!$n&&(mn.platform.isFirefox||!globalThis.chrome),ee=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,X=typeof n.disableFontFace=="boolean"?n.disableFontFace:$n,le=n.fontExtraProperties===!0,de=n.enableXfa===!0,ce=n.ownerDocument||globalThis.document,fe=n.disableRange===!0,N=n.disableStream===!0,U=n.disableAutoFetch===!0,B=n.pdfBug===!0,se=n.CanvasFactory||($n?H9:U9),ve=n.FilterFactory||($n?$9:V9),P=n.enableHWA===!0,q=n.useWasm!==!1,Z=d?d.length:n.length??NaN,ne=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!$n&&!X,ae=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:!!(x===q_&&T===Z_&&M===Y_&&b&&S&&E&&gc(b,document.baseURI)&&gc(S,document.baseURI)&&gc(E,document.baseURI)),pe=null;c9(m);const oe={canvasFactory:new se({ownerDocument:ce,enableHWA:P}),filterFactory:new ve({docId:t,ownerDocument:ce}),cMapReaderFactory:ae?null:new x({baseUrl:b,isCompressed:w}),standardFontDataFactory:ae?null:new T({baseUrl:S}),wasmFactory:ae?null:new M({baseUrl:E})};p||(p=qc.create({verbosity:m,port:Ko.workerPort}),e._worker=p);const Ee={docId:t,apiVersion:"5.4.624",data:s,password:c,disableAutoFetch:U,rangeChunkSize:h,length:Z,docBaseUrl:v,enableXfa:de,evaluatorOptions:{maxImageSize:O,disableFontFace:X,ignoreErrors:R,isEvalSupported:L,isOffscreenCanvasSupported:D,isImageDecoderSupported:$,canvasMaxAreaInBytes:ee,fontExtraProperties:le,useSystemFonts:ne,useWasm:q,useWorkerFetch:ae,cMapUrl:b,iccUrl:A,standardFontDataUrl:S,wasmUrl:E}},De={ownerDocument:ce,pdfBug:B,styleElement:pe,enableHWA:P,loadingParams:{disableAutoFetch:U,enableXfa:de}};return p.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const Nt=p.messageHandler.sendWithPromise("GetDocRequest",Ee,s?[s.buffer]:null);let wt;if(d)wt=new d7({pdfDataRangeTransport:d,disableRange:fe,disableStream:N});else if(!s){if(!i)throw new Error("getDocument - no `url` parameter provided.");const ft=gc(i)?m7:$n?_7:b7;wt=new ft({url:i,length:Z,httpHeaders:r,withCredentials:l,rangeChunkSize:h,disableRange:fe,disableStream:N})}return Nt.then(ft=>{if(e.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const Sn=new vc(t,ft,p.port),ln=new D7(Sn,e,wt,De,oe);e._transport=ln,Sn.send("Ready",null)})}).catch(e._capability.reject),e}class Iy{static#e=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${Iy.#e++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(e){throw this._worker?.port&&delete this._worker._pendingDestroy,e}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}class H2{#e=Promise.withResolvers();#t=[];#i=[];#n=[];#a=[];constructor(e,t,i=!1,s=null){this.length=e,this.initialData=t,this.progressiveDone=i,this.contentDispositionFilename=s}addRangeListener(e){this.#a.push(e)}addProgressListener(e){this.#n.push(e)}addProgressiveReadListener(e){this.#i.push(e)}addProgressiveDoneListener(e){this.#t.push(e)}onDataRange(e,t){for(const i of this.#a)i(e,t)}onDataProgress(e,t){this.#e.promise.then(()=>{for(const i of this.#n)i(e,t)})}onDataProgressiveRead(e){this.#e.promise.then(()=>{for(const t of this.#i)t(e)})}onDataProgressiveDone(){this.#e.promise.then(()=>{for(const e of this.#t)e()})}transportReady(){this.#e.resolve()}requestDataRange(e,t){nt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class M7{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Ne(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,t){return this._transport.getAnnotationsByType(e,t)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}extractPages(e){return this._transport.extractPages(e)}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class R7{#e=!1;#t=Qe.instance;constructor(e,t,i,s=!1){this._pageIndex=e,this._pageInfo=t,this._transport=i,this._stats=s?new B_:null,this._pdfBug=s,this.commonObjs=i.commonObjs,this.objs=new V2,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}set pageNumber(e){this._pageIndex=e-1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:i=0,offsetY:s=0,dontFlip:r=!1}={}){return new iu({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:i,offsetY:s,dontFlip:r})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Ne(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:e,canvas:t=e.canvas,viewport:i,intent:s="display",annotationMode:r=za.ENABLE,transform:l=null,background:c=null,optionalContentConfigPromise:d=null,annotationCanvasMap:h=null,pageColors:p=null,printAnnotationStorage:m=null,isEditing:v=!1,recordOperations:b=!1,operationsFilter:w=null}){this._stats?.time("Overall");const x=this._transport.getRenderingIntent(s,r,m,v),{renderingIntent:A,cacheKey:S}=x;this.#e=!1,d||=this._transport.getOptionalContentConfig(A);let T=this._intentStates.get(S);T||(T=Object.create(null),this._intentStates.set(S,T)),T.streamReaderCancelTimeout&&(clearTimeout(T.streamReaderCancelTimeout),T.streamReaderCancelTimeout=null);const E=!!(A&wi.PRINT);T.displayReadyCapability||(T.displayReadyCapability=Promise.withResolvers(),T.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(x));const M=!!(this._pdfBug&&globalThis.StepperManager?.enabled),R=!this.recordedBBoxes&&(b||M),O=$=>{if(T.renderTasks.delete(L),R){const ee=L.gfx?.dependencyTracker.take();ee&&(L.stepper&&L.stepper.setOperatorBBoxes(ee,L.gfx.dependencyTracker.takeDebugMetadata()),b&&(this.recordedBBoxes=ee))}E&&(this.#e=!0),this.#i(),$?(L.capability.reject($),this._abortOperatorList({intentState:T,reason:$ instanceof Error?$:new Error($)})):L.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},L=new Go({callback:O,params:{canvas:t,canvasContext:e,dependencyTracker:R?new X9(t,T.operatorList.length,M):null,viewport:i,transform:l,background:c},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:h,operatorList:T.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!E,pdfBug:this._pdfBug,pageColors:p,enableHWA:this._transport.enableHWA,operationsFilter:w});(T.renderTasks||=new Set).add(L);const D=L.task;return Promise.all([T.displayReadyCapability.promise,d]).then(([$,ee])=>{if(this.destroyed){O();return}if(this._stats?.time("Rendering"),!(ee.renderingIntent&A))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");L.initializeGraphics({transparency:$,optionalContentConfig:ee}),L.operatorListChanged()}).catch(O),D}getOperatorList({intent:e="display",annotationMode:t=za.ENABLE,printAnnotationStorage:i=null,isEditing:s=!1}={}){function r(){c.operatorList.lastChunk&&(c.opListReadCapability.resolve(c.operatorList),c.renderTasks.delete(d))}const l=this._transport.getRenderingIntent(e,t,i,s,!0);let c=this._intentStates.get(l.cacheKey);c||(c=Object.create(null),this._intentStates.set(l.cacheKey,c));let d;return c.opListReadCapability||(d=Object.create(null),d.operatorListChanged=r,c.opListReadCapability=Promise.withResolvers(),(c.renderTasks||=new Set).add(d),c.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(l)),c.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageId:this.#t.getPageId(this._pageIndex+1)-1,pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>Gc.textContent(i));const t=this.streamTextContent(e);return new Promise(function(i,s){function r(){l.read().then(function({value:d,done:h}){if(h){i(c);return}c.lang??=d.lang,Object.assign(c.styles,d.styles),c.items.push(...d.items),r()},s)}const l=t.getReader(),c={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const i of t.renderTasks)e.push(i.completed),i.cancel();return this.objs.clear(),this.#e=!1,Promise.all(e)}cleanup(e=!1){this.#e=!0;const t=this.#i();return e&&t&&(this._stats&&=new B_),t}#i(){if(!this.#e||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#e=!1,!0}_startRenderPage(e,t){const i=this._intentStates.get(t);i&&(this._stats?.timeEnd("Page Request"),i.displayReadyCapability?.resolve(e))}_renderPageChunk(e,t){for(let i=0,s=e.length;i<s;i++)t.operatorList.fnArray.push(e.fnArray[i]),t.operatorList.argsArray.push(e.argsArray[i]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const i of t.renderTasks)i.operatorListChanged();e.lastChunk&&this.#i()}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:i,modifiedIds:s}){const{map:r,transfer:l}=i,d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageId:this.#t.getPageId(this._pageIndex+1)-1,pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:r,modifiedIds:s},l).getReader(),h=this._intentStates.get(t);h.streamReader=d;const p=()=>{d.read().then(({value:m,done:v})=>{if(v){h.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(m,h),p())},m=>{if(h.streamReader=null,!this._transport.destroyed){if(h.operatorList){h.operatorList.lastChunk=!0;for(const v of h.renderTasks)v.operatorListChanged();this.#i()}if(h.displayReadyCapability)h.displayReadyCapability.reject(m);else if(h.opListReadCapability)h.opListReadCapability.reject(m);else throw m}})};p()}_abortOperatorList({intentState:e,reason:t,force:i=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!i){if(e.renderTasks.size>0)return;if(t instanceof Cy){let s=k7;t.extraDelay>0&&t.extraDelay<1e3&&(s+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},s);return}}if(e.streamReader.cancel(new Ha(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[s,r]of this._intentStates)if(r===e){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}var ja,ns,Qs,Tr,Lh,Cr,kr,qn,Qd,G2,q2,yc,Jo,eh;const Rt=class Rt{constructor({name:e=null,port:t=null,verbosity:i=u9()}={}){ps(this,qn);ps(this,ja,Promise.withResolvers());ps(this,ns,null);ps(this,Qs,null);ps(this,Tr,null);if(this.name=e,this.destroyed=!1,this.verbosity=i,t){if(Mt(Rt,kr).has(t))throw new Error("Cannot use more than one PDFWorker per port.");Mt(Rt,kr).set(t,this),ms(this,qn,G2).call(this,t)}else ms(this,qn,q2).call(this)}get promise(){return Mt(this,ja).promise}get port(){return Mt(this,Qs)}get messageHandler(){return Mt(this,ns)}destroy(){this.destroyed=!0,Mt(this,Tr)?.terminate(),ri(this,Tr,null),Mt(Rt,kr).delete(Mt(this,Qs)),ri(this,Qs,null),Mt(this,ns)?.destroy(),ri(this,ns,null)}static create(e){const t=Mt(this,kr).get(e?.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new Rt(e)}static get workerSrc(){if(Ko.workerSrc)return Ko.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Ne(this,"_setupFakeWorkerGlobal",(async()=>Mt(this,Jo,eh)?Mt(this,Jo,eh):(await import(this.workerSrc)).WorkerMessageHandler)())}};ja=new WeakMap,ns=new WeakMap,Qs=new WeakMap,Tr=new WeakMap,Lh=new WeakMap,Cr=new WeakMap,kr=new WeakMap,qn=new WeakSet,Qd=function(){Mt(this,ja).resolve(),Mt(this,ns).send("configure",{verbosity:this.verbosity})},G2=function(e){ri(this,Qs,e),ri(this,ns,new vc("main","worker",e)),Mt(this,ns).on("ready",()=>{}),ms(this,qn,Qd).call(this)},q2=function(){if(Mt(Rt,Cr)||Mt(Rt,Jo,eh)){ms(this,qn,yc).call(this);return}let{workerSrc:e}=Rt;try{Rt._isSameOrigin(window.location,e)||(e=Rt._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),i=new vc("main","worker",t),s=()=>{r.abort(),i.destroy(),t.terminate(),this.destroyed?Mt(this,ja).reject(new Error("Worker was destroyed")):ms(this,qn,yc).call(this)},r=new AbortController;t.addEventListener("error",()=>{Mt(this,Tr)||s()},{signal:r.signal}),i.on("test",c=>{if(r.abort(),this.destroyed||!c){s();return}ri(this,ns,i),ri(this,Qs,t),ri(this,Tr,t),ms(this,qn,Qd).call(this)}),i.on("ready",c=>{if(r.abort(),this.destroyed){s();return}try{l()}catch{ms(this,qn,yc).call(this)}});const l=()=>{const c=new Uint8Array;i.send("test",c,[c.buffer])};l();return}catch{ef("The worker has been disabled.")}ms(this,qn,yc).call(this)},yc=function(){Mt(Rt,Cr)||(Oe("Setting up fake worker."),ri(Rt,Cr,!0)),Rt._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){Mt(this,ja).reject(new Error("Worker was destroyed"));return}const t=new F9;ri(this,Qs,t);const i=`fake${Lw(Rt,Lh)._++}`,s=new vc(i+"_worker",i,t);e.setup(s,t),ri(this,ns,new vc(i,i+"_worker",t)),ms(this,qn,Qd).call(this)}).catch(e=>{Mt(this,ja).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},Jo=new WeakSet,eh=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},ps(Rt,Jo),ps(Rt,Lh,0),ps(Rt,Cr,!1),ps(Rt,kr,new WeakMap),$n&&(ri(Rt,Cr,!0),Ko.workerSrc||="./pdf.worker.mjs"),Rt._isSameOrigin=(e,t)=>{const i=URL.parse(e);if(!i?.origin||i.origin==="null")return!1;const s=new URL(t,i);return i.origin===s.origin},Rt._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},Rt.fromPort=e=>{if(A9("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!e?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return Rt.create(e)};let qc=Rt;class D7{downloadInfoCapability=Promise.withResolvers();#e=null;#t=new Map;#i=null;#n=new Map;#a=new Map;#r=new Map;#s=null;#o=Qe.instance;constructor(e,t,i,s,r){this.messageHandler=e,this.loadingTask=t,this.#i=i,this.commonObjs=new V2,this.fontLoader=new N9({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.enableHWA=s.enableHWA,this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.wasmFactory=r.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this.setupMessageHandler(),this.#o.addListener(this.#c.bind(this))}#c(){const e=new Map,t=new Map;for(let i=0,s=this.#o.pagesNumber;i<s;i++){const r=this.#o.getPrevPageNumber(i+1)-1,l=this.#n.get(r);l&&e.set(i,l);const c=this.#a.get(r);c&&t.set(i,c)}this.#n=e,this.#a=t}#l(e,t=null){const i=this.#t.get(e);if(i)return i;const s=this.messageHandler.sendWithPromise(e,t);return this.#t.set(e,s),s}#h({loaded:e,total:t}){this.loadingTask.onProgress?.({loaded:e,total:t,percent:Nn(Math.round(e/t*100),0,100)})}get annotationStorage(){return Ne(this,"annotationStorage",new Dy)}getRenderingIntent(e,t=za.ENABLE,i=null,s=!1,r=!1){let l=wi.DISPLAY,c=hv;switch(e){case"any":l=wi.ANY;break;case"display":break;case"print":l=wi.PRINT;break;default:Oe(`getRenderingIntent - invalid intent: ${e}`)}const d=l&wi.PRINT&&i instanceof C2?i:this.annotationStorage;switch(t){case za.DISABLE:l+=wi.ANNOTATIONS_DISABLE;break;case za.ENABLE:break;case za.ENABLE_FORMS:l+=wi.ANNOTATIONS_FORMS;break;case za.ENABLE_STORAGE:l+=wi.ANNOTATIONS_STORAGE,c=d.serializable;break;default:Oe(`getRenderingIntent - invalid annotationMode: ${t}`)}s&&(l+=wi.IS_EDITING),r&&(l+=wi.OPLIST);const{ids:h,hash:p}=d.modifiedIds,m=[l,c.hash,p];return{renderingIntent:l,cacheKey:m.join("_"),annotationStorageSerializable:c,modifiedIds:h}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#s?.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const i of this.#n.values())e.push(i._destroy());this.#n.clear(),this.#a.clear(),this.#r.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),Ai.cleanup(),this.#i?.cancelAllRequests(new Ha("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(i,s)=>{tt(this.#i,"GetReader - no `BasePDFStream` instance available."),this.#e=this.#i.getFullReader(),this.#e.onProgress=r=>this.#h(r),s.onPull=()=>{this.#e.read().then(function({value:r,done:l}){if(l){s.close();return}tt(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{s.error(r)})},s.onCancel=r=>{this.#e.cancel(r),s.ready.catch(l=>{if(!this.destroyed)throw l})}}),e.on("ReaderHeadersReady",async i=>{await this.#e.headersReady;const{isStreamingSupported:s,isRangeSupported:r,contentLength:l}=this.#e;return s&&r&&(this.#e.onProgress=null),{isStreamingSupported:s,isRangeSupported:r,contentLength:l}}),e.on("GetRangeReader",(i,s)=>{tt(this.#i,"GetRangeReader - no `BasePDFStream` instance available.");const r=this.#i.getRangeReader(i.begin,i.end);if(!r){s.close();return}s.onPull=()=>{r.read().then(function({value:l,done:c}){if(c){s.close();return}tt(l instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{s.error(l)})},s.onCancel=l=>{r.cancel(l),s.ready.catch(c=>{if(!this.destroyed)throw c})}}),e.on("GetDoc",({pdfInfo:i})=>{this.#o.pagesNumber=i.numPages,this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,t._capability.resolve(new M7(i,this))}),e.on("DocException",i=>{t._capability.reject(oi(i))}),e.on("PasswordRequest",i=>{this.#s=Promise.withResolvers();try{if(!t.onPassword)throw oi(i);const s=r=>{r instanceof Error?this.#s.reject(r):this.#s.resolve({password:r})};t.onPassword(s,i.code)}catch(s){this.#s.reject(s)}return this.#s.promise}),e.on("DataLoaded",i=>{this.#h({loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),e.on("StartRenderPage",i=>{if(this.destroyed)return;this.#n.get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),e.on("commonobj",([i,s,r])=>{if(this.destroyed||this.commonObjs.has(i))return null;switch(s){case"Font":if("error"in r){const m=r.error;Oe(`Error during font loading: ${m}`),this.commonObjs.resolve(i,m);break}const l=new dt(r),c=this._params.pdfBug&&globalThis.FontInspector?.enabled?(m,v)=>globalThis.FontInspector.fontAdded(m,v):null,d=new P9(l,c,r.extra,r.charProcOperatorList);this.fontLoader.bind(d).catch(()=>e.sendWithPromise("FontFallback",{id:i})).finally(()=>{!d.fontExtraProperties&&d.data&&d.clearData(),this.commonObjs.resolve(i,d)});break;case"CopyLocalImage":const{imageRef:h}=r;tt(h,"The imageRef must be defined.");for(const m of this.#n.values())for(const[,v]of m.objs)if(v?.ref===h)return v.dataLen?(this.commonObjs.resolve(i,structuredClone(v)),v.dataLen):null;break;case"FontPath":this.commonObjs.resolve(i,new I9(r));break;case"Image":this.commonObjs.resolve(i,r);break;case"Pattern":const p=new xn(r);this.commonObjs.resolve(i,p.getIR());break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),e.on("obj",([i,s,r,l])=>{if(this.destroyed)return;const c=this.#n.get(s);if(!c.objs.has(i)){if(c._intentStates.size===0){l?.bitmap?.close();return}switch(r){case"Image":case"Pattern":c.objs.resolve(i,l);break;default:throw new Error(`Got unknown object type ${r}`)}}}),e.on("DocProgress",i=>{this.destroyed||this.#h(i)}),e.on("FetchBinaryData",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");const s=this[i.type];if(!s)throw new Error(`${i.type} not initialized, see the \`useWorkerFetch\` parameter.`);return s.fetch(i)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&Oe("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:this.#e?.filename??null},t).finally(()=>{this.annotationStorage.resetModified()})}extractPages(e){return this.messageHandler.sendWithPromise("ExtractPages",{pageInfos:e})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this.#o.pagesNumber)return Promise.reject(new Error("Invalid page request."));const t=e-1,i=this.#o.getPageId(e)-1,s=this.#a.get(t);if(s)return s;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:i}).then(l=>{if(this.destroyed)throw new Error("Transport destroyed");l.refStr&&this.#r.set(l.refStr,i);const c=new R7(t,l,this,this._params.pdfBug);return this.#n.set(t,c),c});return this.#a.set(t,r),r}async getPageIndex(e){if(!fv(e))throw new Error("Invalid pageIndex request.");const t=await this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen});return this.#o.getPageNumber(t+1)-1}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:this.#o.getPageId(e+1)-1,intent:t})}getFieldObjects(){return this.#l("GetFieldObjects")}hasJSActions(){return this.#l("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,t){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:t})}getDocJSActions(){return this.#l("GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:this.#o.getPageId(e+1)-1})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:this.#o.getPageId(e+1)-1})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return this.#l("GetOptionalContentConfig").then(t=>new u7(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=this.#t.get(e);if(t)return t;const i=this.messageHandler.sendWithPromise(e,null).then(s=>({info:s[0],metadata:s[1]?new l7(s[1]):null,contentDispositionFilename:this.#e?.filename??null,contentLength:this.#e?.contentLength??null,hasStructTree:s[2]}));return this.#t.set(e,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of this.#n.values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0),Ai.cleanup()}}cachedPageNumber(e){if(!fv(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`,i=this.#r.get(t);return i>=0?this.#o.getPageNumber(i+1):null}}class O7{_internalRenderTask=null;onContinue=null;onError=null;constructor(e){this._internalRenderTask=e}get promise(){return this._internalRenderTask.capability.promise}cancel(e=0){this._internalRenderTask.cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=this._internalRenderTask.operatorList;if(!e)return!1;const{annotationCanvasMap:t}=this._internalRenderTask;return e.form||e.canvas&&t?.size>0}}class Go{#e=null;static#t=new WeakSet;constructor({callback:e,params:t,objs:i,commonObjs:s,annotationCanvasMap:r,operatorList:l,pageIndex:c,canvasFactory:d,filterFactory:h,useRequestAnimationFrame:p=!1,pdfBug:m=!1,pageColors:v=null,enableHWA:b=!1,operationsFilter:w=null}){this.callback=e,this.params=t,this.objs=i,this.commonObjs=s,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=l,this._pageIndex=c,this.canvasFactory=d,this.filterFactory=h,this._pdfBug=m,this.pageColors=v,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=p===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new O7(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvas,this._canvasContext=t.canvas?null:t.canvasContext,this._enableHWA=b,this._dependencyTracker=t.dependencyTracker,this._operationsFilter=w}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){if(this.cancelled)return;if(this._canvas){if(Go.#t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");Go.#t.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:i,transform:s,background:r,dependencyTracker:l}=this.params,c=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new Wo(c,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors,l),this.gfx.beginDrawing({transform:s,viewport:i,transparency:e,background:r}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(e=null,t=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#e&&(window.cancelAnimationFrame(this.#e),this.#e=null),Go.#t.delete(this._canvas),e||=new Cy(`Rendering cancelled, page ${this._pageIndex+1}`,t),this.callback(e),this.task.onError?.(e)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#e=window.requestAnimationFrame(()=>{this.#e=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),Go.#t.delete(this._canvas),this.callback())))}}const N7="5.4.624",P7="384c6208b";class Fi{#e=null;#t=null;#i;#n=null;#a=!1;#r=!1;#s=null;#o;#c=null;#l=null;static#h=null;static get _keyboardManager(){return Ne(this,"_keyboardManager",new au([[["Escape","mac+Escape"],Fi.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Fi.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Fi.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Fi.prototype._moveToPrevious],[["Home","mac+Home"],Fi.prototype._moveToBeginning],[["End","mac+End"],Fi.prototype._moveToEnd]]))}constructor({editor:e=null,uiManager:t=null}){e?(this.#r=!1,this.#s=e):this.#r=!0,this.#l=e?._uiManager||t,this.#o=this.#l._eventBus,this.#i=e?.color?.toUpperCase()||this.#l?.highlightColors.values().next().value||"#FFFF98",Fi.#h||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const e=this.#e=document.createElement("button");e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",this.#s&&(e.ariaControls=`${this.#s.id}_colorpicker_dropdown`);const t=this.#l._signal;e.addEventListener("click",this.#m.bind(this),{signal:t}),e.addEventListener("keydown",this.#g.bind(this),{signal:t});const i=this.#t=document.createElement("span");return i.className="swatch",i.ariaHidden="true",i.style.backgroundColor=this.#i,e.append(i),e}renderMainDropdown(){const e=this.#n=this.#d();return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}#d(){const e=document.createElement("div"),t=this.#l._signal;e.addEventListener("contextmenu",Hi,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#s&&(e.id=`${this.#s.id}_colorpicker_dropdown`);for(const[i,s]of this.#l.highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",s),r.title=i,r.setAttribute("data-l10n-id",Fi.#h[i]);const l=document.createElement("span");r.append(l),l.className="swatch",l.style.backgroundColor=s,r.ariaSelected=s===this.#i,r.addEventListener("click",this.#f.bind(this,s),{signal:t}),e.append(r)}return e.addEventListener("keydown",this.#g.bind(this),{signal:t}),e}#f(e,t){t.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:Ze.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)}_colorSelectFromKeyboard(e){if(e.target===this.#e){this.#m(e);return}const t=e.target.getAttribute("data-color");t&&this.#f(t,e)}_moveToNext(e){if(!this.#p){this.#m(e);return}if(e.target===this.#e){this.#n.firstElementChild?.focus();return}e.target.nextSibling?.focus()}_moveToPrevious(e){if(e.target===this.#n?.firstElementChild||e.target===this.#e){this.#p&&this._hideDropdownFromKeyboard();return}this.#p||this.#m(e),e.target.previousSibling?.focus()}_moveToBeginning(e){if(!this.#p){this.#m(e);return}this.#n.firstElementChild?.focus()}_moveToEnd(e){if(!this.#p){this.#m(e);return}this.#n.lastElementChild?.focus()}#g(e){Fi._keyboardManager.exec(this,e)}#m(e){if(this.#p){this.hideDropdown();return}if(this.#a=e.detail===0,this.#c||(this.#c=new AbortController,window.addEventListener("pointerdown",this.#u.bind(this),{signal:this.#l.combinedSignal(this.#c)})),this.#e.ariaExpanded="true",this.#n){this.#n.classList.remove("hidden");return}const t=this.#n=this.#d();this.#e.append(t)}#u(e){this.#n?.contains(e.target)||this.hideDropdown()}hideDropdown(){this.#n?.classList.add("hidden"),this.#e.ariaExpanded="false",this.#c?.abort(),this.#c=null}get#p(){return this.#n&&!this.#n.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#r){if(!this.#p){this.#s?.unselect();return}this.hideDropdown(),this.#e.focus({preventScroll:!0,focusVisible:this.#a})}}updateColor(e){if(this.#t&&(this.#t.style.backgroundColor=e),!this.#n)return;const t=this.#l.highlightColors.values();for(const i of this.#n.children)i.ariaSelected=t.next().value===e.toUpperCase()}destroy(){this.#e?.remove(),this.#e=null,this.#t=null,this.#n?.remove(),this.#n=null}}class Zc{#e=null;#t=null;#i=null;static#n=null;constructor(e){this.#t=e,this.#i=e._uiManager,Zc.#n||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#e)return this.#e;const{editorType:e,colorType:t,color:i}=this.#t,s=this.#e=document.createElement("input");return s.type="color",s.value=i||"#000000",s.className="basicColorPicker",s.tabIndex=0,s.setAttribute("data-l10n-id",Zc.#n[e]),s.addEventListener("input",()=>{this.#i.updateParams(t,s.value)},{signal:this.#i._signal}),s}update(e){this.#e&&(this.#e.value=e)}destroy(){this.#e?.remove(),this.#e=null}hideDropdown(){}}function cE(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function hc(n){return Math.max(0,Math.min(255,255*n))}class uE{static CMYK_G([e,t,i,s]){return["G",1-Math.min(1,.3*e+.59*i+.11*t+s)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=hc(e),[e,e,e]}static G_HTML([e]){const t=cE(e);return`#${t}${t}${t}`}static RGB_G([e,t,i]){return["G",.3*e+.59*t+.11*i]}static RGB_rgb(e){return e.map(hc)}static RGB_HTML(e){return`#${e.map(cE).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,i,s]){return["RGB",1-Math.min(1,e+s),1-Math.min(1,i+s),1-Math.min(1,t+s)]}static CMYK_rgb([e,t,i,s]){return[hc(1-Math.min(1,e+s)),hc(1-Math.min(1,i+s)),hc(1-Math.min(1,t+s))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,i]){const s=1-e,r=1-t,l=1-i,c=Math.min(s,r,l);return["CMYK",s,r,l,c]}}class I7{create(e,t,i=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),i||(s.setAttribute("width",`${e}px`),s.setAttribute("height",`${t}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${e} ${t}`),s}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){nt("Abstract method `_createSVG` called.")}}class Ph extends I7{_createSVG(e){return document.createElementNS(Ks,e)}}const L7=9,Pr=new WeakSet,z7=new Date().getTimezoneOffset()*60*1e3;class yg{static create(e){switch(e.data.annotationType){case rn.LINK:return new Ly(e);case rn.TEXT:return new B7(e);case rn.WIDGET:switch(e.data.fieldType){case"Tx":return new F7(e);case"Btn":return e.data.radioButton?new Z2(e):e.data.checkBox?new V7(e):new $7(e);case"Ch":return new H7(e);case"Sig":return new U7(e)}return new Br(e);case rn.POPUP:return new gv(e);case rn.FREETEXT:return new Y2(e);case rn.LINE:return new q7(e);case rn.SQUARE:return new Z7(e);case rn.CIRCLE:return new Y7(e);case rn.POLYLINE:return new X2(e);case rn.CARET:return new W7(e);case rn.INK:return new zy(e);case rn.POLYGON:return new X7(e);case rn.HIGHLIGHT:return new W2(e);case rn.UNDERLINE:return new K7(e);case rn.SQUIGGLY:return new J7(e);case rn.STRIKEOUT:return new Q7(e);case rn.STAMP:return new K2(e);case rn.FILEATTACHMENT:return new eq(e);default:return new Bt(e)}}}class Bt{#e=null;#t=!1;#i=null;constructor(e,{isRenderable:t=!1,ignoreBorder:i=!1,createQuadrilaterals:s=!1}={}){this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,this.hasOwnCommentButton=!1,t&&(this.contentElement=this.container=this._createContainer(i)),s&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e?.str||t?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Bt._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){const{data:e}=this,t=this.annotationStorage?.getEditor(e.id);return t?t.getData():e}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){const e=this.annotationStorage?.getEditor(this.data.id);if(e)return e.commentButtonPositionInPage;const{quadPoints:t,inkLists:i,rect:s}=this.data;let r=-1/0,l=-1/0;if(t?.length>=8){for(let c=0;c<t.length;c+=8)t[c+1]>l?(l=t[c+1],r=t[c+2]):t[c+1]===l&&(r=Math.max(r,t[c+2]));return[r,l]}if(i?.length>=1){for(const c of i)for(let d=0,h=c.length;d<h;d+=2)c[d+1]>l?(l=c[d+1],r=c[d]):c[d+1]===l&&(r=Math.max(r,c[d]));if(r!==1/0)return[r,l]}return s?[s[2],s[3]]:null}_normalizePoint(e){const{page:{view:t},viewport:{rawDims:{pageWidth:i,pageHeight:s,pageX:r,pageY:l}}}=this.parent;return e[1]=t[3]-e[1]+t[1],e[0]=100*(e[0]-r)/i,e[1]=100*(e[1]-l)/s,e}get commentText(){const{data:e}=this;return this.annotationStorage.getRawValue(`${$c}${e.id}`)?.popup?.contents||e.contentsObj?.str||""}set commentText(e){const{data:t}=this,i={deleted:!e,contents:e||""};this.annotationStorage.updateEditor(t.id,{popup:i})||this.annotationStorage.setValue(`${$c}${t.id}`,{id:t.id,annotationType:t.annotationType,page:this.parent.page,popup:i,popupRef:t.popupRef,modificationDate:new Date}),e||this.removePopup()}removePopup(){(this.#i?.popup||this.popup)?.remove(),this.#i=this.popup=null}updateEdited(e){if(!this.container)return;e.rect&&(this.#e||={rect:this.data.rect.slice(0)});const{rect:t,popup:i}=e;t&&this.#n(t);let s=this.#i?.popup||this.popup;!s&&i?.text&&(this._createPopup(i),s=this.#i.popup),s&&(s.updateEdited(e),i?.deleted&&(s.remove(),this.#i=null,this.popup=null))}resetEdited(){this.#e&&(this.#n(this.#e.rect),this.#i?.popup.resetEdited(),this.#e=null)}#n(e){const{container:{style:t},data:{rect:i,rotation:s},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:l,pageX:c,pageY:d}}}}=this;i?.splice(0,4,...e),t.left=`${100*(e[0]-c)/r}%`,t.top=`${100*(l-e[3]+d)/l}%`,s===0?(t.width=`${100*(e[2]-e[0])/r}%`,t.height=`${100*(e[3]-e[1])/l}%`):this.setRotation(s)}_createContainer(e){const{data:t,parent:{page:i,viewport:s}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",t.id),!(this instanceof Br)&&!(this instanceof Ly)&&(r.tabIndex=0);const{style:l}=r;if(l.zIndex=this.parent.zIndex,this.parent.zIndex+=2,t.alternativeText&&(r.title=t.alternativeText),t.noRotate&&r.classList.add("norotate"),!t.rect||this instanceof gv){const{rotation:x}=t;return!t.hasOwnCanvas&&x!==0&&this.setRotation(x,r),r}const{width:c,height:d}=this;if(!e&&t.borderStyle.width>0){l.borderWidth=`${t.borderStyle.width}px`;const x=t.borderStyle.horizontalCornerRadius,A=t.borderStyle.verticalCornerRadius;if(x>0||A>0){const T=`calc(${x}px * var(--total-scale-factor)) / calc(${A}px * var(--total-scale-factor))`;l.borderRadius=T}else if(this instanceof Z2){const T=`calc(${c}px * var(--total-scale-factor)) / calc(${d}px * var(--total-scale-factor))`;l.borderRadius=T}switch(t.borderStyle.style){case Oo.SOLID:l.borderStyle="solid";break;case Oo.DASHED:l.borderStyle="dashed";break;case Oo.BEVELED:Oe("Unimplemented border style: beveled");break;case Oo.INSET:Oe("Unimplemented border style: inset");break;case Oo.UNDERLINE:l.borderBottomStyle="solid";break}const S=t.borderColor||null;S?(this.#t=!0,l.borderColor=he.makeHexColor(S[0]|0,S[1]|0,S[2]|0)):l.borderWidth=0}const h=he.normalizeRect([t.rect[0],i.view[3]-t.rect[1]+i.view[1],t.rect[2],i.view[3]-t.rect[3]+i.view[1]]),{pageWidth:p,pageHeight:m,pageX:v,pageY:b}=s.rawDims;l.left=`${100*(h[0]-v)/p}%`,l.top=`${100*(h[1]-b)/m}%`;const{rotation:w}=t;return t.hasOwnCanvas||w===0?(l.width=`${100*c/p}%`,l.height=`${100*d/m}%`):this.setRotation(w,r),r}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:s}=this.parent.viewport.rawDims;let{width:r,height:l}=this;e%180!==0&&([r,l]=[l,r]),t.style.width=`${100*r/i}%`,t.style.height=`${100*l/s}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,i,s)=>{const r=s.detail[t],l=r[0],c=r.slice(1);s.target.style[i]=uE[`${l}_HTML`](c),this.annotationStorage.setValue(this.data.id,{[i]:uE[`${l}_rgb`](c)})};return Ne(this,"_commonActions",{display:t=>{const{display:i}=t.detail,s=i%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:i===1||i===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:i}=t.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const i=t.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(e,t){const i=this._commonActions;for(const s of Object.keys(t.detail))(e[s]||i[s])?.(t)}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const i=this._commonActions;for(const[s,r]of Object.entries(t)){const l=i[s];if(l){const c={detail:{[s]:r},target:e};l(c),delete t[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,i,s,r]=this.data.rect.map(x=>Math.fround(x));if(e.length===8){const[x,A,S,T]=e.subarray(2,6);if(s===x&&r===A&&t===S&&i===T)return}const{style:l}=this.container;let c;if(this.#t){const{borderColor:x,borderWidth:A}=l;l.borderWidth=0,c=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${x}" stroke-width="${A}">`],this.container.classList.add("hasBorder")}const d=s-t,h=r-i,{svgFactory:p}=this,m=p.createElement("svg");m.classList.add("quadrilateralsContainer"),m.setAttribute("width",0),m.setAttribute("height",0),m.role="none";const v=p.createElement("defs");m.append(v);const b=p.createElement("clipPath"),w=`clippath_${this.data.id}`;b.setAttribute("id",w),b.setAttribute("clipPathUnits","objectBoundingBox"),v.append(b);for(let x=2,A=e.length;x<A;x+=8){const S=e[x],T=e[x+1],E=e[x+2],M=e[x+3],R=p.createElement("rect"),O=(E-t)/d,L=(r-T)/h,D=(S-E)/d,$=(T-M)/h;R.setAttribute("x",O),R.setAttribute("y",L),R.setAttribute("width",D),R.setAttribute("height",$),b.append(R),c?.push(`<rect vector-effect="non-scaling-stroke" x="${O}" y="${L}" width="${D}" height="${$}"/>`)}this.#t&&(c.push("</g></svg>')"),l.backgroundImage=c.join("")),this.container.append(m),this.container.style.clipPath=`url(#${w})`}_createPopup(e=null){const{data:t}=this;let i,s;e?(i={str:e.text},s=e.date):(i=t.contentsObj,s=t.modificationDate),this.#i=new gv({data:{color:t.color,titleObj:t.titleObj,modificationDate:s,contentsObj:i,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]})}get hasPopupElement(){return!!(this.#i||this.popup||this.data.popupRef)}get extraPopupElement(){return this.#i}render(){nt("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const i=[];if(this._fieldObjects){const s=this._fieldObjects[e];if(s)for(const{page:r,id:l,exportValues:c}of s){if(r===-1||l===t)continue;const d=typeof c=="string"?c:null,h=document.querySelector(`[data-element-id="${l}"]`);if(h&&!Pr.has(h)){Oe(`_getElementsByName - element not allowed: ${l}`);continue}i.push({id:l,exportValue:d,domElement:h})}return i}for(const s of document.getElementsByName(e)){const{exportValue:r}=s,l=s.getAttribute("data-element-id");l!==t&&Pr.has(s)&&i.push({id:l,exportValue:r,domElement:s})}return i}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class j7 extends Bt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.editor=e.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:e}=this;e.hasComment&&this._createPopup(e.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(e){this.editor.comment=e,e||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}}class Ly extends Bt{constructor(e,t=null){super(e,{isRenderable:!0,ignoreBorder:!!t?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:t}=this,i=document.createElement("a");i.setAttribute("data-element-id",e.id);let s=!1;return e.url?(t.addLinkAttributes(i,e.url,e.newWindow),s=!0):e.action?(this._bindNamedAction(i,e.action,e.overlaidText),s=!0):e.attachment?(this.#t(i,e.attachment,e.overlaidText,e.attachmentDest),s=!0):e.setOCGState?(this.#i(i,e.setOCGState,e.overlaidText),s=!0):e.dest?(this._bindLink(i,e.dest,e.overlaidText),s=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,e),s=!0),e.resetForm?(this._bindResetFormAction(i,e.resetForm),s=!0):this.isTooltipOnly&&!s&&(this._bindLink(i,""),s=!0)),this.container.classList.add("linkAnnotation"),s&&(this.contentElement=i,this.container.append(i)),this.container}#e(){this.container.setAttribute("data-internal-link","")}_bindLink(e,t,i=""){e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.goToDestination(t),!1),(t||t==="")&&this.#e(),i&&(e.title=i)}_bindNamedAction(e,t,i=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),i&&(e.title=i),this.#e()}#t(e,t,i="",s=null){e.href=this.linkService.getAnchorUrl(""),t.description?e.title=t.description:i&&(e.title=i),e.onclick=()=>(this.downloadManager?.openOrDownloadData(t.content,t.filename,s),!1),this.#e()}#i(e,t,i=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(t),!1),i&&(e.title=i),this.#e()}_bindJSAction(e,t){e.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const s of Object.keys(t.actions)){const r=i.get(s);r&&(e[r]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t.id,name:s}}),!1))}t.overlaidText&&(e.title=t.overlaidText),e.onclick||(e.onclick=()=>!1),this.#e()}_bindResetFormAction(e,t){const i=e.onclick;if(i||(e.href=this.linkService.getAnchorUrl("")),this.#e(),!this._fieldObjects){Oe('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(e.onclick=()=>!1);return}e.onclick=()=>{i?.();const{fields:s,refs:r,include:l}=t,c=[];if(s.length!==0||r.length!==0){const p=new Set(r);for(const m of s){const v=this._fieldObjects[m]||[];for(const{id:b}of v)p.add(b)}for(const m of Object.values(this._fieldObjects))for(const v of m)p.has(v.id)===l&&c.push(v)}else for(const p of Object.values(this._fieldObjects))c.push(...p);const d=this.annotationStorage,h=[];for(const p of c){const{id:m}=p;switch(h.push(m),p.type){case"text":{const b=p.defaultValue||"";d.setValue(m,{value:b});break}case"checkbox":case"radiobutton":{const b=p.defaultValue===p.exportValues;d.setValue(m,{value:b});break}case"combobox":case"listbox":{const b=p.defaultValue||"";d.setValue(m,{value:b});break}default:continue}const v=document.querySelector(`[data-element-id="${m}"]`);if(v){if(!Pr.has(v)){Oe(`_bindResetFormAction - element not allowed: ${m}`);continue}}else continue;v.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:h,name:"ResetForm"}}),!1}}}class B7 extends Bt{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(e),this.container}}class Br extends Bt{render(){return this.container}showElementAndHideCanvas(e){this.data.hasOwnCanvas&&(e.previousSibling?.nodeName==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return mn.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,i,s,r){i.includes("mouse")?e.addEventListener(i,l=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:r(l),shift:l.shiftKey,modifier:this._getKeyModifier(l)}})}):e.addEventListener(i,l=>{if(i==="blur"){if(!t.focused||!l.relatedTarget)return;t.focused=!1}else if(i==="focus"){if(t.focused)return;t.focused=!0}r&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:r(l)}})})}_setEventListeners(e,t,i,s){for(const[r,l]of i)(l==="Action"||this.data.actions?.[l])&&((l==="Focus"||l==="Blur")&&(t||={focused:!1}),this._setEventListener(e,t,r,l,s),l==="Focus"&&!this.data.actions?.Blur?this._setEventListener(e,t,"blur","Blur",null):l==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":he.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||L7,r=e.style;let l;const c=2,d=h=>Math.round(10*h)/10;if(this.data.multiLine){const h=Math.abs(this.data.rect[3]-this.data.rect[1]-c),p=Math.round(h/(dg*s))||1,m=h/p;l=Math.min(s,d(m/dg))}else{const h=Math.abs(this.data.rect[3]-this.data.rect[1]-c);l=Math.min(s,d(h/dg))}r.fontSize=`calc(${l}px * var(--total-scale-factor))`,r.color=he.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(r.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class F7 extends Br{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,i,s){const r=this.annotationStorage;for(const l of this._getElementsByName(e.name,e.id))l.domElement&&(l.domElement[t]=i),r.setValue(l.id,{[s]:i})}render(){const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const s=e.getValue(t,{value:this.data.fieldValue});let r=s.value||"";const l=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;l&&r.length>l&&(r=r.slice(0,l));let c=s.formattedValue||this.data.textContent?.join(`
`)||null;c&&this.data.comb&&(c=c.replaceAll(/\s+/g,""));const d={userValue:r,formattedValue:c,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=c??r,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type=this.data.password?"password":"text",i.setAttribute("value",c??r),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),Pr.add(i),this.contentElement=i,i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=0;const{datetimeFormat:h,datetimeType:p,timeStep:m}=this.data,v=!!p&&this.enableScripting;h&&(i.title=h),this._setRequired(i,this.data.required),l&&(i.maxLength=l),i.addEventListener("input",w=>{e.setValue(t,{value:w.target.value}),this.setPropertyOnSiblings(i,"value",w.target.value,"value"),d.formattedValue=null}),i.addEventListener("resetform",w=>{const x=this.data.defaultFieldValue??"";i.value=d.userValue=x,d.formattedValue=null});let b=w=>{const{formattedValue:x}=d;x!=null&&(w.target.value=x),w.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",x=>{if(d.focused)return;const{target:A}=x;if(v&&(A.type=p,m&&(A.step=m)),d.userValue){const S=d.userValue;if(v)if(p==="time"){const T=new Date(S),E=[T.getHours(),T.getMinutes(),T.getSeconds()];A.value=E.map(M=>M.toString().padStart(2,"0")).join(":")}else A.value=new Date(S-z7).toISOString().split(p==="date"?"T":".",1)[0];else A.value=S}d.lastCommittedValue=A.value,d.commitKey=1,this.data.actions?.Focus||(d.focused=!0)}),i.addEventListener("updatefromsandbox",x=>{this.showElementAndHideCanvas(x.target);const A={value(S){d.userValue=S.detail.value??"",v||e.setValue(t,{value:d.userValue.toString()}),S.target.value=d.userValue},formattedValue(S){const{formattedValue:T}=S.detail;d.formattedValue=T,T!=null&&S.target!==document.activeElement&&(S.target.value=T);const E={formattedValue:T};v&&(E.value=T),e.setValue(t,E)},selRange(S){S.target.setSelectionRange(...S.detail.selRange)},charLimit:S=>{const{charLimit:T}=S.detail,{target:E}=S;if(T===0){E.removeAttribute("maxLength");return}E.setAttribute("maxLength",T);let M=d.userValue;!M||M.length<=T||(M=M.slice(0,T),E.value=d.userValue=M,e.setValue(t,{value:M}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:M,willCommit:!0,commitKey:1,selStart:E.selectionStart,selEnd:E.selectionEnd}}))}};this._dispatchEventFromSandbox(A,x)}),i.addEventListener("keydown",x=>{d.commitKey=1;let A=-1;if(x.key==="Escape"?A=0:x.key==="Enter"&&!this.data.multiLine?A=2:x.key==="Tab"&&(d.commitKey=3),A===-1)return;const{value:S}=x.target;d.lastCommittedValue!==S&&(d.lastCommittedValue=S,d.userValue=S,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:S,willCommit:!0,commitKey:A,selStart:x.target.selectionStart,selEnd:x.target.selectionEnd}}))});const w=b;b=null,i.addEventListener("blur",x=>{if(!d.focused||!x.relatedTarget)return;this.data.actions?.Blur||(d.focused=!1);const{target:A}=x;let{value:S}=A;if(v){if(S&&p==="time"){const T=S.split(":").map(E=>parseInt(E,10));S=new Date(2e3,0,1,T[0],T[1],T[2]||0).valueOf(),A.step=""}else S.includes("T")||(S=`${S}T00:00`),S=new Date(S).valueOf();A.type="text"}d.userValue=S,d.lastCommittedValue!==S&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:S,willCommit:!0,commitKey:d.commitKey,selStart:x.target.selectionStart,selEnd:x.target.selectionEnd}}),w(x)}),this.data.actions?.Keystroke&&i.addEventListener("beforeinput",x=>{d.lastCommittedValue=null;const{data:A,target:S}=x,{value:T,selectionStart:E,selectionEnd:M}=S;let R=E,O=M;switch(x.inputType){case"deleteWordBackward":{const L=T.substring(0,E).match(/\w*[^\w]*$/);L&&(R-=L[0].length);break}case"deleteWordForward":{const L=T.substring(E).match(/^[^\w]*\w*/);L&&(O+=L[0].length);break}case"deleteContentBackward":E===M&&(R-=1);break;case"deleteContentForward":E===M&&(O+=1);break}x.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:T,change:A||"",willCommit:!1,selStart:R,selEnd:O}})}),this._setEventListeners(i,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],x=>x.target.value)}if(b&&i.addEventListener("blur",b),this.data.comb){const x=(this.data.rect[2]-this.data.rect[0])/l;i.classList.add("comb"),i.style.letterSpacing=`calc(${x}px * var(--total-scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class U7 extends Br{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class V7 extends Br{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,i=t.id;let s=e.getValue(i,{value:t.exportValue===t.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",e.setValue(i,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return Pr.add(r),r.setAttribute("data-element-id",i),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=t.fieldName,s&&r.setAttribute("checked",!0),r.setAttribute("exportValue",t.exportValue),r.tabIndex=0,r.addEventListener("change",l=>{const{name:c,checked:d}=l.target;for(const h of this._getElementsByName(c,i)){const p=d&&h.exportValue===t.exportValue;h.domElement&&(h.domElement.checked=p),e.setValue(h.id,{value:p})}e.setValue(i,{value:d})}),r.addEventListener("resetform",l=>{const c=t.defaultFieldValue||"Off";l.target.checked=c===t.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",l=>{const c={value(d){d.target.checked=d.detail.value!=="Off",e.setValue(i,{value:d.target.checked})}};this._dispatchEventFromSandbox(c,l)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class Z2 extends Br{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,i=t.id;let s=e.getValue(i,{value:t.fieldValue===t.buttonValue}).value;if(typeof s=="string"&&(s=s!==t.buttonValue,e.setValue(i,{value:s})),s)for(const l of this._getElementsByName(t.fieldName,i))e.setValue(l.id,{value:!1});const r=document.createElement("input");if(Pr.add(r),r.setAttribute("data-element-id",i),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=t.fieldName,s&&r.setAttribute("checked",!0),r.tabIndex=0,r.addEventListener("change",l=>{const{name:c,checked:d}=l.target;for(const h of this._getElementsByName(c,i))e.setValue(h.id,{value:!1});e.setValue(i,{value:d})}),r.addEventListener("resetform",l=>{const c=t.defaultFieldValue;l.target.checked=c!=null&&c===t.buttonValue}),this.enableScripting&&this.hasJSActions){const l=t.buttonValue;r.addEventListener("updatefromsandbox",c=>{const d={value:h=>{const p=l===h.detail.value;for(const m of this._getElementsByName(h.target.name)){const v=p&&m.id===i;m.domElement&&(m.domElement.checked=v),e.setValue(m.id,{value:v})}}};this._dispatchEventFromSandbox(d,c)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class $7 extends Ly{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),e}}class H7 extends Br{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,i=e.getValue(t,{value:this.data.fieldValue}),s=document.createElement("select");Pr.add(s),s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=0;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",p=>{const m=this.data.defaultFieldValue;for(const v of s.options)v.selected=v.value===m});for(const p of this.data.options){const m=document.createElement("option");m.textContent=p.displayValue,m.value=p.exportValue,i.value.includes(p.exportValue)&&(m.setAttribute("selected",!0),r=!1),s.append(m)}let l=null;if(r){const p=document.createElement("option");p.value=" ",p.setAttribute("hidden",!0),p.setAttribute("selected",!0),s.prepend(p),l=()=>{p.remove(),s.removeEventListener("input",l),l=null},s.addEventListener("input",l)}const c=p=>{const m=p?"value":"textContent",{options:v,multiple:b}=s;return b?Array.prototype.filter.call(v,w=>w.selected).map(w=>w[m]):v.selectedIndex===-1?null:v[v.selectedIndex][m]};let d=c(!1);const h=p=>{const m=p.target.options;return Array.prototype.map.call(m,v=>({displayValue:v.textContent,exportValue:v.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",p=>{const m={value(v){l?.();const b=v.detail.value,w=new Set(Array.isArray(b)?b:[b]);for(const x of s.options)x.selected=w.has(x.value);e.setValue(t,{value:c(!0)}),d=c(!1)},multipleSelection(v){s.multiple=!0},remove(v){const b=s.options,w=v.detail.remove;b[w].selected=!1,s.remove(w),b.length>0&&Array.prototype.findIndex.call(b,A=>A.selected)===-1&&(b[0].selected=!0),e.setValue(t,{value:c(!0),items:h(v)}),d=c(!1)},clear(v){for(;s.length!==0;)s.remove(0);e.setValue(t,{value:null,items:[]}),d=c(!1)},insert(v){const{index:b,displayValue:w,exportValue:x}=v.detail.insert,A=s.children[b],S=document.createElement("option");S.textContent=w,S.value=x,A?A.before(S):s.append(S),e.setValue(t,{value:c(!0),items:h(v)}),d=c(!1)},items(v){const{items:b}=v.detail;for(;s.length!==0;)s.remove(0);for(const w of b){const{displayValue:x,exportValue:A}=w,S=document.createElement("option");S.textContent=x,S.value=A,s.append(S)}s.options.length>0&&(s.options[0].selected=!0),e.setValue(t,{value:c(!0),items:h(v)}),d=c(!1)},indices(v){const b=new Set(v.detail.indices);for(const w of v.target.options)w.selected=b.has(w.index);e.setValue(t,{value:c(!0)}),d=c(!1)},editable(v){v.target.disabled=!v.detail.editable}};this._dispatchEventFromSandbox(m,p)}),s.addEventListener("input",p=>{const m=c(!0),v=c(!1);e.setValue(t,{value:m}),p.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:d,change:v,changeEx:m,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],p=>p.target.value)):s.addEventListener("input",function(p){e.setValue(t,{value:c(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class gv extends Bt{constructor(e){const{data:t,elements:i,parent:s}=e,r=!!s._commentManager;if(super(e,{isRenderable:!r&&Bt._hasPopupData(t)}),this.elements=i,r&&Bt._hasPopupData(t)){const l=this.popup=this.#e();for(const c of i)c.popup=l}else this.popup=null}#e(){return new G7({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const t=this.popup=this.#e(),i=[];for(const s of this.elements)s.popup=t,s.container.ariaHasPopup="dialog",i.push(s.data.id),s.addHighlightArea();return this.container.setAttribute("aria-controls",i.map(s=>`${$o}${s}`).join(",")),this.container}}class G7{#e=null;#t=this.#H.bind(this);#i=this.#B.bind(this);#n=this.#N.bind(this);#a=this.#A.bind(this);#r=null;#s=null;#o=null;#c=null;#l=null;#h=null;#d=null;#f=!1;#g=null;#m=null;#u=null;#p=null;#v=null;#b=null;#y=null;#E=null;#S=null;#w=null;#C=!1;#x=null;#_=null;constructor({container:e,color:t,elements:i,titleObj:s,modificationDate:r,contentsObj:l,richText:c,parent:d,rect:h,parentRect:p,open:m,commentManager:v=null}){this.#s=e,this.#S=s,this.#o=l,this.#E=c,this.#h=d,this.#r=t,this.#y=h,this.#d=p,this.#l=i,this.#e=v,this.#x=i[0],this.#c=cv.toDateObject(r),this.trigger=i.flatMap(b=>b.getElementsToTriggerPopup()),v||(this.#R(),this.#s.hidden=!0,m&&this.#A())}#R(){if(this.#m)return;this.#m=new AbortController;const{signal:e}=this.#m;for(const t of this.trigger)t.addEventListener("click",this.#a,{signal:e}),t.addEventListener("pointerenter",this.#n,{signal:e}),t.addEventListener("pointerleave",this.#i,{signal:e}),t.classList.add("popupTriggerArea");for(const t of this.#l)t.container?.addEventListener("keydown",this.#t,{signal:e})}#k(){const e=this.#l.find(t=>t.hasCommentButton);e&&(this.#v=e._normalizePoint(e.commentButtonPosition))}renderCommentButton(){if(this.#p){this.#p.parentNode||this.#x.container.after(this.#p);return}if(this.#v||this.#k(),!this.#v)return;const{signal:e}=this.#m=new AbortController,t=this.#x.hasOwnCommentButton,i=()=>{this.#e.toggleCommentPopup(this,!0,void 0,!t)},s=()=>{this.#e.toggleCommentPopup(this,!1,!0,!t)},r=()=>{this.#e.toggleCommentPopup(this,!1,!1)};if(t){this.#p=this.#x.container;for(const l of this.trigger)l.ariaHasPopup="dialog",l.ariaControls="commentPopup",l.addEventListener("keydown",this.#t,{signal:e}),l.addEventListener("click",i,{signal:e}),l.addEventListener("pointerenter",s,{signal:e}),l.addEventListener("pointerleave",r,{signal:e}),l.classList.add("popupTriggerArea")}else{const l=this.#p=document.createElement("button");l.className="annotationCommentButton";const c=this.#x.container;l.style.zIndex=c.style.zIndex+1,l.tabIndex=0,l.ariaHasPopup="dialog",l.ariaControls="commentPopup",l.setAttribute("data-l10n-id","pdfjs-show-comment-button"),this.#z(),this.#M(),l.addEventListener("keydown",this.#t,{signal:e}),l.addEventListener("click",i,{signal:e}),l.addEventListener("pointerenter",s,{signal:e}),l.addEventListener("pointerleave",r,{signal:e}),c.after(l)}}#M(){if(this.#x.extraPopupElement&&!this.#x.editor)return;this.#p||this.renderCommentButton();const[e,t]=this.#v,{style:i}=this.#p;i.left=`calc(${e}%)`,i.top=`calc(${t}% - var(--comment-button-dim))`}#z(){this.#x.extraPopupElement||(this.#p||this.renderCommentButton(),this.#p.style.backgroundColor=this.commentButtonColor||"")}get commentButtonColor(){const{color:e,opacity:t}=this.#x.commentData;return e?this.#h._commentManager.makeCommentColor(e,t):null}focusCommentButton(){setTimeout(()=>{this.#p?.focus()},0)}getData(){const{richText:e,color:t,opacity:i,creationDate:s,modificationDate:r}=this.#x.commentData;return{contentsObj:{str:this.comment},richText:e,color:t,opacity:i,creationDate:s,modificationDate:r}}get elementBeforePopup(){return this.#p}get comment(){return this.#_||=this.#x.commentText,this.#_}set comment(e){e!==this.comment&&(this.#x.commentText=this.#_=e)}focus(){this.#x.container?.focus()}get parentBoundingClientRect(){return this.#x.layer.getBoundingClientRect()}setCommentButtonStates({selected:e,hasPopup:t}){this.#p&&(this.#p.classList.toggle("selected",e),this.#p.ariaExpanded=t)}setSelectedCommentButton(e){this.#p.classList.toggle("selected",e)}get commentPopupPosition(){if(this.#b)return this.#b;const{x:e,y:t,height:i}=this.#p.getBoundingClientRect(),{x:s,y:r,width:l,height:c}=this.#x.layer.getBoundingClientRect();return[(e-s)/l,(t+i-r)/c]}set commentPopupPosition(e){this.#b=e}hasDefaultPopupPosition(){return this.#b===null}get commentButtonPosition(){return this.#v}get commentButtonWidth(){return this.#p.getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(e){const[t,i]=this.#b||this.commentButtonPosition.map(h=>h/100),s=this.parentBoundingClientRect,{x:r,y:l,width:c,height:d}=s;this.#e.showDialog(null,this,r+t*c,l+i*d,{...e,parentDimensions:s})}render(){if(this.#g)return;const e=this.#g=document.createElement("div");if(e.className="popup",this.#r){const i=e.style.outlineColor=he.makeHexColor(...this.#r);e.style.backgroundColor=`color-mix(in srgb, ${i} 30%, white)`}const t=document.createElement("span");if(t.className="header",this.#S?.str){const i=document.createElement("span");i.className="title",t.append(i),{dir:i.dir,str:i.textContent}=this.#S}if(e.append(t),this.#c){const i=document.createElement("time");i.className="popupDate",i.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),i.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),i.dateTime=this.#c.toISOString(),t.append(i)}S2({html:this.#O||this.#o.str,dir:this.#o?.dir,className:"popupContent"},e),this.#s.append(e)}get#O(){const e=this.#E,t=this.#o;return e?.str&&(!t?.str||t.str===e.str)&&this.#E.html||null}get#P(){return this.#O?.attributes?.style?.fontSize||0}get#j(){return this.#O?.attributes?.style?.color||null}#I(e){const t=[],i={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},s={style:{color:this.#j,fontSize:this.#P?`calc(${this.#P}px * var(--total-scale-factor))`:""}};for(const r of e.split(`
`))t.push({name:"span",value:r,attributes:s});return i}#H(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&this.#f)&&this.#A()}updateEdited({rect:e,popup:t,deleted:i}){if(this.#e){i?(this.remove(),this.#_=null):t&&(t.deleted?this.remove():(this.#z(),this.#_=t.text)),e&&(this.#v=null,this.#k(),this.#M());return}if(i||t?.deleted){this.remove();return}this.#R(),this.#w||={contentsObj:this.#o,richText:this.#E},e&&(this.#u=null),t&&t.text&&(this.#E=this.#I(t.text),this.#c=cv.toDateObject(t.date),this.#o=null),this.#g?.remove(),this.#g=null}resetEdited(){this.#w&&({contentsObj:this.#o,richText:this.#E}=this.#w,this.#w=null,this.#g?.remove(),this.#g=null,this.#u=null)}remove(){if(this.#m?.abort(),this.#m=null,this.#g?.remove(),this.#g=null,this.#C=!1,this.#f=!1,this.#p?.remove(),this.#p=null,this.trigger)for(const e of this.trigger)e.classList.remove("popupTriggerArea")}#T(){if(this.#u!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:i,pageX:s,pageY:r}}}=this.#h;let l=!!this.#d,c=l?this.#d:this.#y;for(const w of this.#l)if(!c||he.intersect(w.data.rect,c)!==null){c=w.data.rect,l=!0;break}const d=he.normalizeRect([c[0],e[3]-c[1]+e[1],c[2],e[3]-c[3]+e[1]]),p=l?c[2]-c[0]+5:0,m=d[0]+p,v=d[1];this.#u=[100*(m-s)/t,100*(v-r)/i];const{style:b}=this.#s;b.left=`${this.#u[0]}%`,b.top=`${this.#u[1]}%`}#A(){if(this.#e){this.#e.toggleCommentPopup(this,!1);return}this.#f=!this.#f,this.#f?(this.#N(),this.#s.addEventListener("click",this.#a),this.#s.addEventListener("keydown",this.#t)):(this.#B(),this.#s.removeEventListener("click",this.#a),this.#s.removeEventListener("keydown",this.#t))}#N(){this.#g||this.render(),this.isVisible?this.#f&&this.#s.classList.add("focused"):(this.#T(),this.#s.hidden=!1,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)+1e3)}#B(){this.#s.classList.remove("focused"),!(this.#f||!this.isVisible)&&(this.#s.hidden=!0,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)-1e3)}forceHide(){this.#C=this.isVisible,this.#C&&(this.#s.hidden=!0)}maybeShow(){this.#e||(this.#R(),this.#C&&(this.#g||this.#N(),this.#C=!1,this.#s.hidden=!1))}get isVisible(){return this.#e?!1:this.#s.hidden===!1}}class Y2 extends Bt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Le.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=this.contentElement=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const i=document.createElement("span");i.textContent=t,e.append(i)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}class q7 extends Bt{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:e,width:t,height:i}=this,s=this.svgFactory.create(t,i,!0),r=this.#e=this.svgFactory.createElement("svg:line");return r.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),r.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),r.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),r.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),r.setAttribute("stroke-width",e.borderStyle.width||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),s.append(r),this.container.append(s),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class Z7 extends Bt{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:e,width:t,height:i}=this,s=this.svgFactory.create(t,i,!0),r=e.borderStyle.width,l=this.#e=this.svgFactory.createElement("svg:rect");return l.setAttribute("x",r/2),l.setAttribute("y",r/2),l.setAttribute("width",t-r),l.setAttribute("height",i-r),l.setAttribute("stroke-width",r||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),s.append(l),this.container.append(s),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class Y7 extends Bt{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:e,width:t,height:i}=this,s=this.svgFactory.create(t,i,!0),r=e.borderStyle.width,l=this.#e=this.svgFactory.createElement("svg:ellipse");return l.setAttribute("cx",t/2),l.setAttribute("cy",i/2),l.setAttribute("rx",t/2-r/2),l.setAttribute("ry",i/2-r/2),l.setAttribute("stroke-width",r||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),s.append(l),this.container.append(s),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class X2 extends Bt{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:t,borderStyle:i,popupRef:s},width:r,height:l}=this;if(!t)return this.container;const c=this.svgFactory.create(r,l,!0);let d=[];for(let p=0,m=t.length;p<m;p+=2){const v=t[p]-e[0],b=e[3]-t[p+1];d.push(`${v},${b}`)}d=d.join(" ");const h=this.#e=this.svgFactory.createElement(this.svgElementName);return h.setAttribute("points",d),h.setAttribute("stroke-width",i.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),c.append(h),this.container.append(c),!s&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class X7 extends X2{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class W7 extends Bt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}}class zy extends Bt{#e=null;#t=[];constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Le.HIGHLIGHT:Le.INK}#i(e,t){switch(e){case 90:return{transform:`rotate(90) translate(${-t[0]},${t[1]}) scale(1,-1)`,width:t[3]-t[1],height:t[2]-t[0]};case 180:return{transform:`rotate(180) translate(${-t[2]},${t[1]}) scale(1,-1)`,width:t[2]-t[0],height:t[3]-t[1]};case 270:return{transform:`rotate(270) translate(${-t[2]},${t[3]}) scale(1,-1)`,width:t[3]-t[1],height:t[2]-t[0]};default:return{transform:`translate(${-t[0]},${t[3]}) scale(1,-1)`,width:t[2]-t[0],height:t[3]-t[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:t,inkLists:i,borderStyle:s,popupRef:r}}=this,{transform:l,width:c,height:d}=this.#i(t,e),h=this.svgFactory.create(c,d,!0),p=this.#e=this.svgFactory.createElement("svg:g");h.append(p),p.setAttribute("stroke-width",s.width||1),p.setAttribute("stroke-linecap","round"),p.setAttribute("stroke-linejoin","round"),p.setAttribute("stroke-miterlimit",10),p.setAttribute("stroke","transparent"),p.setAttribute("fill","transparent"),p.setAttribute("transform",l);for(let m=0,v=i.length;m<v;m++){const b=this.svgFactory.createElement(this.svgElementName);this.#t.push(b),b.setAttribute("points",i[m].join(",")),p.append(b)}return!r&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(h),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:t,points:i,rect:s}=e,r=this.#e;if(t>=0&&r.setAttribute("stroke-width",t||1),i)for(let l=0,c=this.#t.length;l<c;l++)this.#t[l].setAttribute("points",i[l].join(","));if(s){const{transform:l,width:c,height:d}=this.#i(this.data.rotation,s);r.parentElement.setAttribute("viewBox",`0 0 ${c} ${d}`),r.setAttribute("transform",l)}}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class W2 extends Bt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Le.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const i=document.createElement("mark");i.classList.add("overlaidText"),i.textContent=e,this.container.append(i)}return this.container}}class K7 extends Bt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),e){const i=document.createElement("u");i.classList.add("overlaidText"),i.textContent=e,this.container.append(i)}return this.container}}class J7 extends Bt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),e){const i=document.createElement("u");i.classList.add("overlaidText"),i.textContent=e,this.container.append(i)}return this.container}}class Q7 extends Bt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),e){const i=document.createElement("s");i.classList.add("overlaidText"),i.textContent=e,this.container.append(i)}return this.container}}class K2 extends Bt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Le.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}class eq extends Bt{#e=null;constructor(e){super(e,{isRenderable:!0});const{file:t}=this.data;this.filename=t.filename,this.content=t.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...t})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:t}=this;let i;t.hasAppearance||t.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(t.name)?"paperclip":"pushpin"}.svg`,t.fillAlpha&&t.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(t.fillAlpha*100)}%);`)),i.addEventListener("dblclick",this.#t.bind(this)),this.#e=i;const{isMac:s}=mn.platform;return e.addEventListener("keydown",r=>{r.key==="Enter"&&(s?r.metaKey:r.ctrlKey)&&this.#t()}),!t.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):i.classList.add("popupTriggerArea"),e.append(i),e}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}#t(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class jy{#e=null;#t=null;#i=null;#n=new Map;#a=null;#r=null;#s=[];#o=!1;constructor({div:e,accessibilityManager:t,annotationCanvasMap:i,annotationEditorUIManager:s,page:r,viewport:l,structTreeLayer:c,commentManager:d,linkService:h,annotationStorage:p}){this.div=e,this.#e=t,this.#t=i,this.#a=c||null,this.#r=h||null,this.#i=p||new Dy,this.page=r,this.viewport=l,this.zIndex=0,this._annotationEditorUIManager=s,this._commentManager=d||null}hasEditableAnnotations(){return this.#n.size>0}async render(e){const{annotations:t}=e,i=this.div;Nr(i,this.viewport);const s=new Map,r=[],l={data:null,layer:i,linkService:this.#r,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new Ph,annotationStorage:this.#i,enableComment:e.enableComment===!0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const c of t){if(c.noHTML)continue;const d=c.annotationType===rn.POPUP;if(d){const m=s.get(c.id);if(!m)continue;if(!this._commentManager){r.push(c);continue}l.elements=m}else if(c.rect[2]===c.rect[0]||c.rect[3]===c.rect[1])continue;l.data=c;const h=yg.create(l);if(!h.isRenderable)continue;if(!d&&(this.#s.push(h),c.popupRef)){const m=s.get(c.popupRef);m?m.push(h):s.set(c.popupRef,[h])}const p=h.render();c.hidden&&(p.style.visibility="hidden"),h._isEditable&&(this.#n.set(h.data.id,h),this._annotationEditorUIManager?.renderAnnotationElement(h))}await this.#c();for(const c of r){const d=l.elements=s.get(c.id);l.data=c;const h=yg.create(l);if(!h.isRenderable)continue;const p=h.render();h.contentElement.id=`${$o}${c.id}`,c.hidden&&(p.style.visibility="hidden"),d.at(-1).container.after(p)}this.#l()}async#c(){if(this.#s.length===0)return;this.div.replaceChildren();const e=[];if(!this.#o){this.#o=!0;for(const{contentElement:i,data:{id:s}}of this.#s){const r=i.id=`${$o}${s}`;e.push(this.#a?.getAriaAttributes(r).then(l=>{if(l)for(const[c,d]of l)i.setAttribute(c,d)}))}}this.#s.sort(({data:{rect:[i,s,r,l]}},{data:{rect:[c,d,h,p]}})=>{if(i===r&&s===l)return 1;if(c===h&&d===p)return-1;const m=l,v=s,b=(s+l)/2,w=p,x=d,A=(d+p)/2;if(b>=w&&A<=v)return-1;if(A>=m&&b<=x)return 1;const S=(i+r)/2,T=(c+h)/2;return S-T});const t=document.createDocumentFragment();for(const i of this.#s)t.append(i.container),this._commentManager?(i.extraPopupElement?.popup||i.popup)?.renderCommentButton():i.extraPopupElement&&t.append(i.extraPopupElement.render());if(this.div.append(t),await Promise.all(e),this.#e)for(const i of this.#s)this.#e.addPointerInTextLayer(i.contentElement,!1)}async addLinkAnnotations(e){const t={data:null,layer:this.div,linkService:this.#r,svgFactory:new Ph,parent:this};for(const i of e){i.borderStyle||=jy._defaultBorderStyle,t.data=i;const s=yg.create(t);s.isRenderable&&(s.render(),s.contentElement.id=`${$o}${i.id}`,this.#s.push(s))}await this.#c()}update({viewport:e}){const t=this.div;this.viewport=e,Nr(t,{rotation:e.rotation}),this.#l(),t.hidden=!1}#l(){if(!this.#t)return;const e=this.div;for(const[t,i]of this.#t){const s=e.querySelector(`[data-annotation-id="${t}"]`);if(!s)continue;i.className="annotationContent";const{firstChild:r}=s;r?r.nodeName==="CANVAS"?r.replaceWith(i):r.classList.contains("annotationContent")?r.after(i):r.before(i):s.append(i);const l=this.#n.get(t);l&&(l._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(t,s.id,i),l._hasNoCanvas=!1):l.canvas=i)}this.#t.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(e){return this.#n.get(e)}addFakeAnnotation(e){const{div:t}=this,{id:i,rotation:s}=e,r=new j7({data:{id:i,rect:e.getPDFRect(),rotation:s},editor:e,layer:t,parent:this,enableComment:!!this._commentManager,linkService:this.#r,annotationStorage:this.#i});return r.render(),r.contentElement.id=`${$o}${i}`,r.createOrUpdatePopup(),this.#s.push(r),r}removeAnnotation(e){const t=this.#s.findIndex(s=>s.data.id===e);if(t<0)return;const[i]=this.#s.splice(t,1);this.#e?.removePointerInTextLayer(i.contentElement)}updateFakeAnnotations(e){if(e.length!==0){for(const t of e)t.updateFakeAnnotationElement(this);this.#c()}}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}static get _defaultBorderStyle(){return Ne(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Oo.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}}const Ud=/\r\n?|\n/g;class wn extends Ce{#e="";#t=`${this.id}-editor`;#i=null;#n;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const e=wn.prototype,t=r=>r.isEmpty(),i=Ga.TRANSLATE_SMALL,s=Ga.TRANSLATE_BIG;return Ne(this,"_keyboardManager",new au([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-s,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[s,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-s],checker:t}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,s],checker:t}]]))}static _type="freetext";static _editorType=Le.FREETEXT;constructor(e){super({...e,name:"freeTextEditor"}),this.color=e.color||wn._defaultColor||Ce._defaultLineColor,this.#n=e.fontSize||wn._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static initialize(e,t){Ce.initialize(e,t);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,t){switch(e){case Ze.FREETEXT_SIZE:wn._defaultFontSize=t;break;case Ze.FREETEXT_COLOR:wn._defaultColor=t;break}}updateParams(e,t){switch(e){case Ze.FREETEXT_SIZE:this.#a(t);break;case Ze.FREETEXT_COLOR:this.#r(t);break}}static get defaultPropertiesToUpdate(){return[[Ze.FREETEXT_SIZE,wn._defaultFontSize],[Ze.FREETEXT_COLOR,wn._defaultColor||Ce._defaultLineColor]]}get propertiesToUpdate(){return[[Ze.FREETEXT_SIZE,this.#n],[Ze.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||=new Zc(this),[["colorPicker",this._colorPicker]]}get colorType(){return Ze.FREETEXT_COLOR}#a(e){const t=s=>{this.editorDiv.style.fontSize=`calc(${s}px * var(--total-scale-factor))`,this.translate(0,-(s-this.#n)*this.parentScale),this.#n=s,this.#o()},i=this.#n;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ze.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}#r(e){const t=s=>{this.color=s,this.onUpdatedColor()},i=this.color;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ze.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(e,t){this._uiManager.translateSelectedEditors(e,t,!0)}getInitialTranslation(){const e=this.parentScale;return[-wn._internalPadding*e,-(wn._internalPadding+this.#n)*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#i=new AbortController;const e=this._uiManager.combinedSignal(this.#i);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#t),this._isDraggable=!0,this.#i?.abort(),this.#i=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#s(){const e=[];this.editorDiv.normalize();let t=null;for(const i of this.editorDiv.childNodes)t?.nodeType===Node.TEXT_NODE&&i.nodeName==="BR"||(e.push(wn.#c(i)),t=i);return e.join(`
`)}#o(){const[e,t]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:s,div:r}=this,l=r.style.display,c=r.classList.contains("hidden");r.classList.remove("hidden"),r.style.display="hidden",s.div.append(this.div),i=r.getBoundingClientRect(),r.remove(),r.style.display=l,r.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=i.width/e,this.height=i.height/t):(this.width=i.height/e,this.height=i.width/t),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=this.#e,t=this.#e=this.#s().trimEnd();if(e===t)return;const i=s=>{if(this.#e=s,!s){this.remove();return}this.#l(),this._uiManager.rebuild(this),this.#o()};this.addCommands({cmd:()=>{i(t)},undo:()=>{i(e)},mustExec:!1}),this.#o()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){wn._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let e,t;(this._isCopy||this.annotationElementId)&&(e=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#t),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,i.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[s,r]=this.parentDimensions;if(this.annotationElementId){const{position:l}=this._initialData;let[c,d]=this.getInitialTranslation();[c,d]=this.pageTranslationToScreen(c,d);const[h,p]=this.pageDimensions,[m,v]=this.pageTranslation;let b,w;switch(this.rotation){case 0:b=e+(l[0]-m)/h,w=t+this.height-(l[1]-v)/p;break;case 90:b=e+(l[0]-m)/h,w=t-(l[1]-v)/p,[c,d]=[d,-c];break;case 180:b=e-this.width+(l[0]-m)/h,w=t-(l[1]-v)/p,[c,d]=[-c,-d];break;case 270:b=e+(l[0]-m-this.height*p)/h,w=t+(l[1]-v-this.width*h)/p,[c,d]=[-d,c];break}this.setAt(b*s,w*r,c,d)}else this._moveAfterPaste(e,t);this.#l(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(Ud,"")}editorDivPaste(e){const t=e.clipboardData||window.clipboardData,{types:i}=t;if(i.length===1&&i[0]==="text/plain")return;e.preventDefault();const s=wn.#d(t.getData("text")||"").replaceAll(Ud,`
`);if(!s)return;const r=window.getSelection();if(!r.rangeCount)return;this.editorDiv.normalize(),r.deleteFromDocument();const l=r.getRangeAt(0);if(!s.includes(`
`)){l.insertNode(document.createTextNode(s)),this.editorDiv.normalize(),r.collapseToStart();return}const{startContainer:c,startOffset:d}=l,h=[],p=[];if(c.nodeType===Node.TEXT_NODE){const b=c.parentElement;if(p.push(c.nodeValue.slice(d).replaceAll(Ud,"")),b!==this.editorDiv){let w=h;for(const x of this.editorDiv.childNodes){if(x===b){w=p;continue}w.push(wn.#c(x))}}h.push(c.nodeValue.slice(0,d).replaceAll(Ud,""))}else if(c===this.editorDiv){let b=h,w=0;for(const x of this.editorDiv.childNodes)w++===d&&(b=p),b.push(wn.#c(x))}this.#e=`${h.join(`
`)}${s}${p.join(`
`)}`,this.#l();const m=new Range;let v=Math.sumPrecise(h.map(b=>b.length));for(const{firstChild:b}of this.editorDiv.childNodes)if(b.nodeType===Node.TEXT_NODE){const w=b.nodeValue.length;if(v<=w){m.setStart(b,v),m.setEnd(b,v);break}v-=w}r.removeAllRanges(),r.addRange(m)}#l(){if(this.editorDiv.replaceChildren(),!!this.#e)for(const e of this.#e.split(`
`)){const t=document.createElement("div");t.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(t)}}#h(){return this.#e.replaceAll(""," ")}static#d(e){return e.replaceAll(" ","")}get contentDiv(){return this.editorDiv}getPDFRect(){const e=wn._internalPadding*this.parentScale;return this.getRect(e,e)}static async deserialize(e,t,i){let s=null;if(e instanceof Y2){const{data:{defaultAppearanceData:{fontSize:l,fontColor:c},rect:d,rotation:h,id:p,popupRef:m,richText:v,contentsObj:b,creationDate:w,modificationDate:x},textContent:A,textPosition:S,parent:{page:{pageNumber:T}}}=e;if(!A||A.length===0)return null;s=e={annotationType:Le.FREETEXT,color:Array.from(c),fontSize:l,value:A.join(`
`),position:S,pageIndex:T-1,rect:d.slice(0),rotation:h,annotationElementId:p,id:p,deleted:!1,popupRef:m,comment:b?.str||null,richText:v,creationDate:w,modificationDate:x}}const r=await super.deserialize(e,t,i);return r.#n=e.fontSize,r.color=he.makeHexColor(...e.color),r.#e=wn.#d(e.value),r._initialData=s,e.comment&&r.setCommentData(e),r}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const t=Ce._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),i=Object.assign(super.serialize(e),{color:t,fontSize:this.#n,value:this.#h()});return this.addComment(i),e?(i.isCopy=!0,i):this.annotationElementId&&!this.#f(i)?null:(i.id=this.annotationElementId,i)}#f(e){const{value:t,fontSize:i,color:s,pageIndex:r}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||e.value!==t||e.fontSize!==i||e.color.some((l,c)=>l!==s[c])||e.pageIndex!==r}renderAnnotationElement(e){const t=super.renderAnnotationElement(e);if(!t)return null;const{style:i}=t;i.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,i.color=this.color,t.replaceChildren();for(const s of this.#e.split(`
`)){const r=document.createElement("div");r.append(s?document.createTextNode(s):document.createElement("br")),t.append(r)}return e.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:this.#e}}),t}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}}class me{static PRECISION=1e-4;toSVGPath(){nt("Abstract method `toSVGPath` must be implemented.")}get box(){nt("Abstract getter `box` must be implemented.")}serialize(e,t){nt("Abstract method `serialize` must be implemented.")}static _rescale(e,t,i,s,r,l){l||=new Float32Array(e.length);for(let c=0,d=e.length;c<d;c+=2)l[c]=t+e[c]*s,l[c+1]=i+e[c+1]*r;return l}static _rescaleAndSwap(e,t,i,s,r,l){l||=new Float32Array(e.length);for(let c=0,d=e.length;c<d;c+=2)l[c]=t+e[c+1]*s,l[c+1]=i+e[c]*r;return l}static _translate(e,t,i,s){s||=new Float32Array(e.length);for(let r=0,l=e.length;r<l;r+=2)s[r]=t+e[r],s[r+1]=i+e[r+1];return s}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,i,s,r){switch(r){case 90:return[1-t/i,e/s];case 180:return[1-e/i,1-t/s];case 270:return[t/i,1-e/s];default:return[e/i,t/s]}}static _normalizePagePoint(e,t,i){switch(i){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,i,s,r,l){return[(e+5*i)/6,(t+5*s)/6,(5*i+r)/6,(5*s+l)/6,(i+r)/2,(s+l)/2]}}class Er{#e;#t=[];#i;#n;#a=[];#r=new Float32Array(18);#s;#o;#c;#l;#h;#d;#f=[];static#g=8;static#m=2;static#u=Er.#g+Er.#m;constructor({x:e,y:t},i,s,r,l,c=0){this.#e=i,this.#d=r*s,this.#n=l,this.#r.set([NaN,NaN,NaN,NaN,e,t],6),this.#i=c,this.#l=Er.#g*s,this.#c=Er.#u*s,this.#h=s,this.#f.push(e,t)}isEmpty(){return isNaN(this.#r[8])}#p(){const e=this.#r.subarray(4,6),t=this.#r.subarray(16,18),[i,s,r,l]=this.#e;return[(this.#s+(e[0]-t[0])/2-i)/r,(this.#o+(e[1]-t[1])/2-s)/l,(this.#s+(t[0]-e[0])/2-i)/r,(this.#o+(t[1]-e[1])/2-s)/l]}add({x:e,y:t}){this.#s=e,this.#o=t;const[i,s,r,l]=this.#e;let[c,d,h,p]=this.#r.subarray(8,12);const m=e-h,v=t-p,b=Math.hypot(m,v);if(b<this.#c)return!1;const w=b-this.#l,x=w/b,A=x*m,S=x*v;let T=c,E=d;c=h,d=p,h+=A,p+=S,this.#f?.push(e,t);const M=-S/w,R=A/w,O=M*this.#d,L=R*this.#d;return this.#r.set(this.#r.subarray(2,8),0),this.#r.set([h+O,p+L],4),this.#r.set(this.#r.subarray(14,18),12),this.#r.set([h-O,p-L],16),isNaN(this.#r[6])?(this.#a.length===0&&(this.#r.set([c+O,d+L],2),this.#a.push(NaN,NaN,NaN,NaN,(c+O-i)/r,(d+L-s)/l),this.#r.set([c-O,d-L],14),this.#t.push(NaN,NaN,NaN,NaN,(c-O-i)/r,(d-L-s)/l)),this.#r.set([T,E,c,d,h,p],6),!this.isEmpty()):(this.#r.set([T,E,c,d,h,p],6),Math.abs(Math.atan2(E-d,T-c)-Math.atan2(S,A))<Math.PI/2?([c,d,h,p]=this.#r.subarray(2,6),this.#a.push(NaN,NaN,NaN,NaN,((c+h)/2-i)/r,((d+p)/2-s)/l),[c,d,T,E]=this.#r.subarray(14,18),this.#t.push(NaN,NaN,NaN,NaN,((T+c)/2-i)/r,((E+d)/2-s)/l),!0):([T,E,c,d,h,p]=this.#r.subarray(0,6),this.#a.push(((T+5*c)/6-i)/r,((E+5*d)/6-s)/l,((5*c+h)/6-i)/r,((5*d+p)/6-s)/l,((c+h)/2-i)/r,((d+p)/2-s)/l),[h,p,c,d,T,E]=this.#r.subarray(12,18),this.#t.push(((T+5*c)/6-i)/r,((E+5*d)/6-s)/l,((5*c+h)/6-i)/r,((5*d+p)/6-s)/l,((c+h)/2-i)/r,((d+p)/2-s)/l),!0))}toSVGPath(){if(this.isEmpty())return"";const e=this.#a,t=this.#t;if(isNaN(this.#r[6])&&!this.isEmpty())return this.#v();const i=[];i.push(`M${e[4]} ${e[5]}`);for(let s=6;s<e.length;s+=6)isNaN(e[s])?i.push(`L${e[s+4]} ${e[s+5]}`):i.push(`C${e[s]} ${e[s+1]} ${e[s+2]} ${e[s+3]} ${e[s+4]} ${e[s+5]}`);this.#y(i);for(let s=t.length-6;s>=6;s-=6)isNaN(t[s])?i.push(`L${t[s+4]} ${t[s+5]}`):i.push(`C${t[s]} ${t[s+1]} ${t[s+2]} ${t[s+3]} ${t[s+4]} ${t[s+5]}`);return this.#b(i),i.join(" ")}#v(){const[e,t,i,s]=this.#e,[r,l,c,d]=this.#p();return`M${(this.#r[2]-e)/i} ${(this.#r[3]-t)/s} L${(this.#r[4]-e)/i} ${(this.#r[5]-t)/s} L${r} ${l} L${c} ${d} L${(this.#r[16]-e)/i} ${(this.#r[17]-t)/s} L${(this.#r[14]-e)/i} ${(this.#r[15]-t)/s} Z`}#b(e){const t=this.#t;e.push(`L${t[4]} ${t[5]} Z`)}#y(e){const[t,i,s,r]=this.#e,l=this.#r.subarray(4,6),c=this.#r.subarray(16,18),[d,h,p,m]=this.#p();e.push(`L${(l[0]-t)/s} ${(l[1]-i)/r} L${d} ${h} L${p} ${m} L${(c[0]-t)/s} ${(c[1]-i)/r}`)}newFreeDrawOutline(e,t,i,s,r,l){return new J2(e,t,i,s,r,l)}getOutlines(){const e=this.#a,t=this.#t,i=this.#r,[s,r,l,c]=this.#e,d=new Float32Array((this.#f?.length??0)+2);for(let m=0,v=d.length-2;m<v;m+=2)d[m]=(this.#f[m]-s)/l,d[m+1]=(this.#f[m+1]-r)/c;if(d[d.length-2]=(this.#s-s)/l,d[d.length-1]=(this.#o-r)/c,isNaN(i[6])&&!this.isEmpty())return this.#E(d);const h=new Float32Array(this.#a.length+24+this.#t.length);let p=e.length;for(let m=0;m<p;m+=2){if(isNaN(e[m])){h[m]=h[m+1]=NaN;continue}h[m]=e[m],h[m+1]=e[m+1]}p=this.#w(h,p);for(let m=t.length-6;m>=6;m-=6)for(let v=0;v<6;v+=2){if(isNaN(t[m+v])){h[p]=h[p+1]=NaN,p+=2;continue}h[p]=t[m+v],h[p+1]=t[m+v+1],p+=2}return this.#S(h,p),this.newFreeDrawOutline(h,d,this.#e,this.#h,this.#i,this.#n)}#E(e){const t=this.#r,[i,s,r,l]=this.#e,[c,d,h,p]=this.#p(),m=new Float32Array(36);return m.set([NaN,NaN,NaN,NaN,(t[2]-i)/r,(t[3]-s)/l,NaN,NaN,NaN,NaN,(t[4]-i)/r,(t[5]-s)/l,NaN,NaN,NaN,NaN,c,d,NaN,NaN,NaN,NaN,h,p,NaN,NaN,NaN,NaN,(t[16]-i)/r,(t[17]-s)/l,NaN,NaN,NaN,NaN,(t[14]-i)/r,(t[15]-s)/l],0),this.newFreeDrawOutline(m,e,this.#e,this.#h,this.#i,this.#n)}#S(e,t){const i=this.#t;return e.set([NaN,NaN,NaN,NaN,i[4],i[5]],t),t+=6}#w(e,t){const i=this.#r.subarray(4,6),s=this.#r.subarray(16,18),[r,l,c,d]=this.#e,[h,p,m,v]=this.#p();return e.set([NaN,NaN,NaN,NaN,(i[0]-r)/c,(i[1]-l)/d,NaN,NaN,NaN,NaN,h,p,NaN,NaN,NaN,NaN,m,v,NaN,NaN,NaN,NaN,(s[0]-r)/c,(s[1]-l)/d],t),t+=24}}class J2 extends me{#e;#t=new Float32Array(4);#i;#n;#a;#r;#s;constructor(e,t,i,s,r,l){super(),this.#s=e,this.#a=t,this.#e=i,this.#r=s,this.#i=r,this.#n=l,this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],this.#o(l);const[c,d,h,p]=this.#t;for(let m=0,v=e.length;m<v;m+=2)e[m]=(e[m]-c)/h,e[m+1]=(e[m+1]-d)/p;for(let m=0,v=t.length;m<v;m+=2)t[m]=(t[m]-c)/h,t[m+1]=(t[m+1]-d)/p}toSVGPath(){const e=[`M${this.#s[4]} ${this.#s[5]}`];for(let t=6,i=this.#s.length;t<i;t+=6){if(isNaN(this.#s[t])){e.push(`L${this.#s[t+4]} ${this.#s[t+5]}`);continue}e.push(`C${this.#s[t]} ${this.#s[t+1]} ${this.#s[t+2]} ${this.#s[t+3]} ${this.#s[t+4]} ${this.#s[t+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,t,i,s],r){const l=i-e,c=s-t;let d,h;switch(r){case 0:d=me._rescale(this.#s,e,s,l,-c),h=me._rescale(this.#a,e,s,l,-c);break;case 90:d=me._rescaleAndSwap(this.#s,e,t,l,c),h=me._rescaleAndSwap(this.#a,e,t,l,c);break;case 180:d=me._rescale(this.#s,i,t,-l,c),h=me._rescale(this.#a,i,t,-l,c);break;case 270:d=me._rescaleAndSwap(this.#s,i,s,-l,-c),h=me._rescaleAndSwap(this.#a,i,s,-l,-c);break}return{outline:Array.from(d),points:[Array.from(h)]}}#o(e){const t=this.#s;let i=t[4],s=t[5];const r=[i,s,i,s];let l=i,c=s,d=i,h=s;const p=e?Math.max:Math.min,m=new Float32Array(4);for(let b=6,w=t.length;b<w;b+=6){const x=t[b+4],A=t[b+5];isNaN(t[b])?(he.pointBoundingBox(x,A,r),c>A?(l=x,c=A):c===A&&(l=p(l,x)),h<A?(d=x,h=A):h===A&&(d=p(d,x))):(m[0]=m[1]=1/0,m[2]=m[3]=-1/0,he.bezierBoundingBox(i,s,...t.slice(b,b+6),m),he.rectBoundingBox(m[0],m[1],m[2],m[3],r),c>m[1]?(l=m[0],c=m[1]):c===m[1]&&(l=p(l,m[0])),h<m[3]?(d=m[2],h=m[3]):h===m[3]&&(d=p(d,m[2]))),i=x,s=A}const v=this.#t;v[0]=r[0]-this.#i,v[1]=r[1]-this.#i,v[2]=r[2]-r[0]+2*this.#i,v[3]=r[3]-r[1]+2*this.#i,this.firstPoint=[l,c],this.lastPoint=[d,h]}get box(){return this.#t}newOutliner(e,t,i,s,r,l=0){return new Er(e,t,i,s,r,l)}getNewOutline(e,t){const[i,s,r,l]=this.#t,[c,d,h,p]=this.#e,m=r*h,v=l*p,b=i*h+c,w=s*p+d,x=this.newOutliner({x:this.#a[0]*m+b,y:this.#a[1]*v+w},this.#e,this.#r,e,this.#n,t??this.#i);for(let A=2;A<this.#a.length;A+=2)x.add({x:this.#a[A]*m+b,y:this.#a[A+1]*v+w});return x.getOutlines()}}class vv{#e;#t;#i;#n=[];#a=[];constructor(e,t=0,i=0,s=!0){const r=[1/0,1/0,-1/0,-1/0],l=10**-4;for(const{x,y:A,width:S,height:T}of e){const E=Math.floor((x-t)/l)*l,M=Math.ceil((x+S+t)/l)*l,R=Math.floor((A-t)/l)*l,O=Math.ceil((A+T+t)/l)*l,L=[E,R,O,!0],D=[M,R,O,!1];this.#n.push(L,D),he.rectBoundingBox(E,R,M,O,r)}const c=r[2]-r[0]+2*i,d=r[3]-r[1]+2*i,h=r[0]-i,p=r[1]-i;let m=s?-1/0:1/0,v=1/0;const b=this.#n.at(s?-1:-2),w=[b[0],b[2]];for(const x of this.#n){const[A,S,T,E]=x;!E&&s?S<v?(v=S,m=A):S===v&&(m=Math.max(m,A)):E&&!s&&(S<v?(v=S,m=A):S===v&&(m=Math.min(m,A))),x[0]=(A-h)/c,x[1]=(S-p)/d,x[2]=(T-p)/d}this.#e=new Float32Array([h,p,c,d]),this.#t=[m,v],this.#i=w}getOutlines(){this.#n.sort((t,i)=>t[0]-i[0]||t[1]-i[1]||t[2]-i[2]);const e=[];for(const t of this.#n)t[3]?(e.push(...this.#l(t)),this.#o(t)):(this.#c(t),e.push(...this.#l(t)));return this.#r(e)}#r(e){const t=[],i=new Set;for(const l of e){const[c,d,h]=l;t.push([c,d,l],[c,h,l])}t.sort((l,c)=>l[1]-c[1]||l[0]-c[0]);for(let l=0,c=t.length;l<c;l+=2){const d=t[l][2],h=t[l+1][2];d.push(h),h.push(d),i.add(d),i.add(h)}const s=[];let r;for(;i.size>0;){const l=i.values().next().value;let[c,d,h,p,m]=l;i.delete(l);let v=c,b=d;for(r=[c,h],s.push(r);;){let w;if(i.has(p))w=p;else if(i.has(m))w=m;else break;i.delete(w),[c,d,h,p,m]=w,v!==c&&(r.push(v,b,c,b===d?d:h),v=c),b=b===d?h:d}r.push(v,b)}return new tq(s,this.#e,this.#t,this.#i)}#s(e){const t=this.#a;let i=0,s=t.length-1;for(;i<=s;){const r=i+s>>1,l=t[r][0];if(l===e)return r;l<e?i=r+1:s=r-1}return s+1}#o([,e,t]){const i=this.#s(e);this.#a.splice(i,0,[e,t])}#c([,e,t]){const i=this.#s(e);for(let s=i;s<this.#a.length;s++){const[r,l]=this.#a[s];if(r!==e)break;if(r===e&&l===t){this.#a.splice(s,1);return}}for(let s=i-1;s>=0;s--){const[r,l]=this.#a[s];if(r!==e)break;if(r===e&&l===t){this.#a.splice(s,1);return}}}#l(e){const[t,i,s]=e,r=[[t,i,s]],l=this.#s(s);for(let c=0;c<l;c++){const[d,h]=this.#a[c];for(let p=0,m=r.length;p<m;p++){const[,v,b]=r[p];if(!(h<=v||b<=d)){if(v>=d){if(b>h)r[p][1]=h;else{if(m===1)return[];r.splice(p,1),p--,m--}continue}r[p][2]=d,b>h&&r.push([t,h,b])}}}return r}}class tq extends me{#e;#t;constructor(e,t,i,s){super(),this.#t=e,this.#e=t,this.firstPoint=i,this.lastPoint=s}toSVGPath(){const e=[];for(const t of this.#t){let[i,s]=t;e.push(`M${i} ${s}`);for(let r=2;r<t.length;r+=2){const l=t[r],c=t[r+1];l===i?(e.push(`V${c}`),s=c):c===s&&(e.push(`H${l}`),i=l)}e.push("Z")}return e.join(" ")}serialize([e,t,i,s],r){const l=[],c=i-e,d=s-t;for(const h of this.#t){const p=new Array(h.length);for(let m=0;m<h.length;m+=2)p[m]=e+h[m]*c,p[m+1]=s-h[m+1]*d;l.push(p)}return l}get box(){return this.#e}get classNamesForOutlining(){return["highlightOutline"]}}class yv extends Er{newFreeDrawOutline(e,t,i,s,r,l){return new nq(e,t,i,s,r,l)}}class nq extends J2{newOutliner(e,t,i,s,r,l=0){return new yv(e,t,i,s,r,l)}}class Xt extends Ce{#e=null;#t=0;#i;#n=null;#a=null;#r=null;#s=null;#o=0;#c=null;#l=null;#h=null;#d=!1;#f=null;#g=null;#m=null;#u="";#p;#v="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=Le.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const e=Xt.prototype;return Ne(this,"_keyboardManager",new au([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}constructor(e){super({...e,name:"highlightEditor"}),this.color=e.color||Xt._defaultColor,this.#p=e.thickness||Xt._defaultThickness,this.opacity=e.opacity||Xt._defaultOpacity,this.#i=e.boxes||null,this.#v=e.methodOfCreation||"",this.#u=e.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(this.#d=!0,this.#y(e),this.#x()):this.#i&&(this.#e=e.anchorNode,this.#t=e.anchorOffset,this.#s=e.focusNode,this.#o=e.focusOffset,this.#b(),this.#x(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#d?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#p,methodOfCreation:this.#v}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}#b(){const e=new vv(this.#i,.001);this.#l=e.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;const t=new vv(this.#i,.0025,.001,this._uiManager.direction==="ltr");this.#r=t.getOutlines();const{firstPoint:i}=this.#l;this.#f=[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height];const{lastPoint:s}=this.#r;this.#g=[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height]}#y({highlightOutlines:e,highlightId:t,clipPathId:i}){this.#l=e;const s=1.5;if(this.#r=e.getNewOutline(this.#p/2+s,.0025),t>=0)this.#h=t,this.#n=i,this.parent.drawLayer.finalizeDraw(t,{bbox:e.box,path:{d:e.toSVGPath()}}),this.#m=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#r.box,path:{d:this.#r.toSVGPath()}},!0);else if(this.parent){const m=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#h,{bbox:Xt.#_(this.#l.box,(m-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#m,{bbox:Xt.#_(this.#r.box,m),path:{d:this.#r.toSVGPath()}})}const[r,l,c,d]=e.box;switch(this.rotation){case 0:this.x=r,this.y=l,this.width=c,this.height=d;break;case 90:{const[m,v]=this.parentDimensions;this.x=l,this.y=1-r,this.width=c*v/m,this.height=d*m/v;break}case 180:this.x=1-r,this.y=1-l,this.width=c,this.height=d;break;case 270:{const[m,v]=this.parentDimensions;this.x=1-l,this.y=r,this.width=c*v/m,this.height=d*m/v;break}}const{firstPoint:h}=e;this.#f=[(h[0]-r)/c,(h[1]-l)/d];const{lastPoint:p}=this.#r;this.#g=[(p[0]-r)/c,(p[1]-l)/d]}static initialize(e,t){Ce.initialize(e,t),Xt._defaultColor||=t.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(e,t){switch(e){case Ze.HIGHLIGHT_COLOR:Xt._defaultColor=t;break;case Ze.HIGHLIGHT_THICKNESS:Xt._defaultThickness=t;break}}translateInPage(e,t){}get toolbarPosition(){return this.#g}get commentButtonPosition(){return this.#f}updateParams(e,t){switch(e){case Ze.HIGHLIGHT_COLOR:this.#E(t);break;case Ze.HIGHLIGHT_THICKNESS:this.#S(t);break}}static get defaultPropertiesToUpdate(){return[[Ze.HIGHLIGHT_COLOR,Xt._defaultColor],[Ze.HIGHLIGHT_THICKNESS,Xt._defaultThickness]]}get propertiesToUpdate(){return[[Ze.HIGHLIGHT_COLOR,this.color||Xt._defaultColor],[Ze.HIGHLIGHT_THICKNESS,this.#p||Xt._defaultThickness],[Ze.HIGHLIGHT_FREE,this.#d]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(this.#h,{root:{fill:this.color,"fill-opacity":this.opacity}}),this.#a?.updateColor(this.color),super.onUpdatedColor()}#E(e){const t=(r,l)=>{this.color=r,this.opacity=l,this.onUpdatedColor()},i=this.color,s=this.opacity;this.addCommands({cmd:t.bind(this,e,Xt._defaultOpacity),undo:t.bind(this,i,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ze.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(e)},!0)}#S(e){const t=this.#p,i=s=>{this.#p=s,this.#w(s)};this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ze.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#a=new Fi({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#M())}getBaseTranslation(){return[0,0]}getRect(e,t){return super.getRect(e,t,this.#M())}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){this.#C(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#x(),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;this.parent&&!e?this.#C():e&&(this.#x(e),t=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),this.show(this._isVisible),t&&this.select()}#w(e){this.#d&&(this.#y({highlightOutlines:this.#l.getNewOutline(e/2)}),this.fixAndSetPosition(),this.setDims())}#C(){this.#h===null||!this.parent||(this.parent.drawLayer.remove(this.#h),this.#h=null,this.parent.drawLayer.remove(this.#m),this.#m=null)}#x(e=this.parent){this.#h===null&&({id:this.#h,clipPathId:this.#n}=e.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:this.#d},path:{d:this.#l.toSVGPath()}},!1,!0),this.#m=e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#d},bbox:this.#r.box,path:{d:this.#r.toSVGPath()}},this.#d),this.#c&&(this.#c.style.clipPath=this.#n))}static#_([e,t,i,s],r){switch(r){case 90:return[1-t-s,e,s,i];case 180:return[1-e-i,1-t-s,i,s];case 270:return[t,1-e-i,s,i]}return[e,t,i,s]}rotate(e){const{drawLayer:t}=this.parent;let i;this.#d?(e=(e-this.rotation+360)%360,i=Xt.#_(this.#l.box,e)):i=Xt.#_([this.x,this.y,this.width,this.height],e),t.updateProperties(this.#h,{bbox:i,root:{"data-main-rotation":e}}),t.updateProperties(this.#m,{bbox:Xt.#_(this.#r.box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();this.#u&&(e.setAttribute("aria-label",this.#u),e.setAttribute("role","mark")),this.#d?e.classList.add("free"):this.div.addEventListener("keydown",this.#R.bind(this),{signal:this._uiManager._signal});const t=this.#c=document.createElement("div");return e.append(t),t.setAttribute("aria-hidden","true"),t.className="internal",t.style.clipPath=this.#n,this.setDims(),E2(this,this.#c,["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!1}})}#R(e){Xt._keyboardManager.exec(this,e)}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:this.#k(!0);break;case 1:case 3:this.#k(!1);break}}#k(e){if(!this.#e)return;const t=window.getSelection();e?t.setPosition(this.#e,this.#t):t.setPosition(this.#s,this.#o)}select(){super.select(),this.#m&&this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#m&&(this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{selected:!1}}),this.#d||this.#k(!1))}get _mustFixPosition(){return!this.#d}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(this.#h,{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(this.#m,{rootClass:{hidden:!e}}))}#M(){return this.#d?this.rotation:0}#z(){if(this.#d)return null;const[e,t]=this.pageDimensions,[i,s]=this.pageTranslation,r=this.#i,l=new Float32Array(r.length*8);let c=0;for(const{x:d,y:h,width:p,height:m}of r){const v=d*e+i,b=(1-h)*t+s;l[c]=l[c+4]=v,l[c+1]=l[c+3]=b,l[c+2]=l[c+6]=v+p*e,l[c+5]=l[c+7]=b-m*t,c+=8}return l}#O(e){return this.#l.serialize(e,this.#M())}static startHighlighting(e,t,{target:i,x:s,y:r}){const{x:l,y:c,width:d,height:h}=i.getBoundingClientRect(),p=new AbortController,m=e.combinedSignal(p),v=b=>{p.abort(),this.#j(e,b)};window.addEventListener("blur",v,{signal:m}),window.addEventListener("pointerup",v,{signal:m}),window.addEventListener("pointerdown",Gt,{capture:!0,passive:!1,signal:m}),window.addEventListener("contextmenu",Hi,{signal:m}),i.addEventListener("pointermove",this.#P.bind(this,e),{signal:m}),this._freeHighlight=new yv({x:s,y:r},[l,c,d,h],e.scale,this._defaultThickness/2,t,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#P(e,t){this._freeHighlight.add(t)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#j(e,t){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(t,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(e,t,i){let s=null;if(e instanceof W2){const{data:{quadPoints:w,rect:x,rotation:A,id:S,color:T,opacity:E,popupRef:M,richText:R,contentsObj:O,creationDate:L,modificationDate:D},parent:{page:{pageNumber:$}}}=e;s=e={annotationType:Le.HIGHLIGHT,color:Array.from(T),opacity:E,quadPoints:w,boxes:null,pageIndex:$-1,rect:x.slice(0),rotation:A,annotationElementId:S,id:S,deleted:!1,popupRef:M,richText:R,comment:O?.str||null,creationDate:L,modificationDate:D}}else if(e instanceof zy){const{data:{inkLists:w,rect:x,rotation:A,id:S,color:T,borderStyle:{rawWidth:E},popupRef:M,richText:R,contentsObj:O,creationDate:L,modificationDate:D},parent:{page:{pageNumber:$}}}=e;s=e={annotationType:Le.HIGHLIGHT,color:Array.from(T),thickness:E,inkLists:w,boxes:null,pageIndex:$-1,rect:x.slice(0),rotation:A,annotationElementId:S,id:S,deleted:!1,popupRef:M,richText:R,comment:O?.str||null,creationDate:L,modificationDate:D}}const{color:r,quadPoints:l,inkLists:c,opacity:d}=e,h=await super.deserialize(e,t,i);h.color=he.makeHexColor(...r),h.opacity=d||1,c&&(h.#p=e.thickness),h._initialData=s,e.comment&&h.setCommentData(e);const[p,m]=h.pageDimensions,[v,b]=h.pageTranslation;if(l){const w=h.#i=[];for(let x=0;x<l.length;x+=8)w.push({x:(l[x]-v)/p,y:1-(l[x+1]-b)/m,width:(l[x+2]-l[x])/p,height:(l[x+1]-l[x+5])/m});h.#b(),h.#x(),h.rotate(h.rotation)}else if(c){h.#d=!0;const w=c[0],x={x:w[0]-v,y:m-(w[1]-b)},A=new yv(x,[0,0,p,m],1,h.#p/2,!0,.001);for(let E=0,M=w.length;E<M;E+=2)x.x=w[E]-v,x.y=m-(w[E+1]-b),A.add(x);const{id:S,clipPathId:T}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:h.color,"fill-opacity":h._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:A.toSVGPath()}},!0,!0);h.#y({highlightOutlines:A.getOutlines(),highlightId:S,clipPathId:T}),h.#x(),h.rotate(h.parentRotation)}return h}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const t=Ce._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),i=super.serialize(e);return Object.assign(i,{color:t,opacity:this.opacity,thickness:this.#p,quadPoints:this.#z(),outlines:this.#O(i.rect)}),this.addComment(i),this.annotationElementId&&!this.#I(i)?null:(i.id=this.annotationElementId,i)}#I(e){const{color:t}=this._initialData;return this.hasEditedComment||e.color.some((i,s)=>i!==t[s])}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}}class Q2{#e=Object.create(null);updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,i]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,i)}updateSVGProperty(e,t){this.#e[e]=t}toSVGProperties(){const e=this.#e;return this.#e=Object.create(null),{root:e}}reset(){this.#e=Object.create(null)}updateAll(e=this){this.updateProperties(e)}clone(){nt("Not implemented")}}class Je extends Ce{#e=null;#t;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#i=null;static#n=null;static#a=null;static _INNER_MARGIN=3;constructor(e){super(e),this.#t=e.mustBeCommitted||!1,this._addOutlines(e)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(e){e.drawOutlines&&(this.#r(e),this.#c())}#r({drawOutlines:e,drawId:t,drawingOptions:i}){this.#e=e,this._drawingOptions||=i,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),t>=0?(this._drawId=t,this.parent.drawLayer.finalizeDraw(t,e.defaultProperties)):this._drawId=this.#s(e,this.parent),this.#d(e.box)}#s(e,t){const{id:i}=t.drawLayer.draw(Je._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return i}static _mergeSVGProperties(e,t){const i=new Set(Object.keys(e));for(const[s,r]of Object.entries(t))i.has(s)?Object.assign(e[s],r):e[s]=r;return e}static getDefaultDrawingOptions(e){nt("Not implemented")}static get typesMap(){nt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,t){const i=this.typesMap.get(e);i&&this._defaultDrawingOptions.updateProperty(i,t),this._currentParent&&(Je.#i.updateProperty(i,t),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,t){const i=this.constructor.typesMap.get(e);i&&this._updateProperty(e,i,t)}static get defaultPropertiesToUpdate(){const e=[],t=this._defaultDrawingOptions;for(const[i,s]of this.typesMap)e.push([i,t[s]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:t}=this;for(const[i,s]of this.constructor.typesMap)e.push([i,t[s]]);return e}_updateProperty(e,t,i){const s=this._drawingOptions,r=s[t],l=c=>{s.updateProperty(t,c);const d=this.#e.updateProperty(t,c);d&&this.#d(d),this.parent?.drawLayer.updateProperties(this._drawId,s.toSVGProperties()),e===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:l.bind(this,i),undo:l.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,Je._mergeSVGProperties(this.#e.getPathResizingSVGProperties(this.#h()),{bbox:this.#f()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,Je._mergeSVGProperties(this.#e.getPathResizedSVGProperties(this.#h()),{bbox:this.#f()}))}_onTranslating(e,t){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#f()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,Je._mergeSVGProperties(this.#e.getPathTranslatedSVGProperties(this.#h(),this.parentDimensions),{bbox:this.#f()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#t&&(this.#t=!1,this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){this.#o(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#c(),this.#d(this.#e.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),this.#o()):e&&(this._uiManager.addShouldRescale(this),this.#c(e),t=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),t&&this.select()}#o(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#c(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#s(this.#e,e)}}#l([e,t,i,s]){const{parentDimensions:[r,l],rotation:c}=this;switch(c){case 90:return[t,1-e,i*(l/r),s*(r/l)];case 180:return[1-e,1-t,i,s];case 270:return[1-t,e,i*(l/r),s*(r/l)];default:return[e,t,i,s]}}#h(){const{x:e,y:t,width:i,height:s,parentDimensions:[r,l],rotation:c}=this;switch(c){case 90:return[1-t,e,i*(r/l),s*(l/r)];case 180:return[1-e,1-t,i,s];case 270:return[t,1-e,i*(r/l),s*(l/r)];default:return[e,t,i,s]}}#d(e){[this.x,this.y,this.width,this.height]=this.#l(e),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}#f(){const{x:e,y:t,width:i,height:s,rotation:r,parentRotation:l,parentDimensions:[c,d]}=this;switch((r*4+l)/90){case 1:return[1-t-s,e,s,i];case 2:return[1-e-i,1-t-s,i,s];case 3:return[t,1-e-i,s,i];case 4:return[e,t-i*(c/d),s*(d/c),i*(c/d)];case 5:return[1-t,e,i*(c/d),s*(d/c)];case 6:return[1-e-s*(d/c),1-t,s*(d/c),i*(c/d)];case 7:return[t-i*(c/d),1-e-s*(d/c),i*(c/d),s*(d/c)];case 8:return[e-i,t-s,i,s];case 9:return[1-t,e-i,s,i];case 10:return[1-e,1-t,i,s];case 11:return[t-s,1-e,s,i];case 12:return[e-s*(d/c),t,s*(d/c),i*(c/d)];case 13:return[1-t-i*(c/d),e-s*(d/c),i*(c/d),s*(d/c)];case 14:return[1-e,1-t-i*(c/d),s*(d/c),i*(c/d)];case 15:return[t,1-e,i*(c/d),s*(d/c)];default:return[e,t,i,s]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Je._mergeSVGProperties({bbox:this.#f()},this.#e.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#d(this.#e.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,t;this._isCopy&&(e=this.x,t=this.y);const i=super.render();i.classList.add("draw");const s=document.createElement("div");return i.append(s),s.setAttribute("aria-hidden","true"),s.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,t),i}static createDrawerInstance(e,t,i,s,r){nt("Not implemented")}static startDrawing(e,t,i,s){const{target:r,offsetX:l,offsetY:c,pointerId:d,pointerType:h}=s;if(et.isInitializedAndDifferentPointerType(h))return;const{viewport:{rotation:p}}=e,{width:m,height:v}=r.getBoundingClientRect(),b=Je.#n=new AbortController,w=e.combinedSignal(b);if(et.setPointer(h,d),window.addEventListener("pointerup",x=>{et.isSamePointerIdOrRemove(x.pointerId)&&this._endDraw(x)},{signal:w}),window.addEventListener("pointercancel",x=>{et.isSamePointerIdOrRemove(x.pointerId)&&this._currentParent.endDrawingSession()},{signal:w}),window.addEventListener("pointerdown",x=>{et.isSamePointerType(x.pointerType)&&(et.initializeAndAddPointerId(x.pointerId),Je.#i.isCancellable()&&(Je.#i.removeLastElement(),Je.#i.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:w}),window.addEventListener("contextmenu",Hi,{signal:w}),r.addEventListener("pointermove",this._drawMove.bind(this),{signal:w}),r.addEventListener("touchmove",x=>{et.isSameTimeStamp(x.timeStamp)&&Gt(x)},{signal:w}),e.toggleDrawing(),t._editorUndoBar?.hide(),Je.#i){e.drawLayer.updateProperties(this._currentDrawId,Je.#i.startNew(l,c,m,v,p));return}t.updateUIForDefaultProperties(this),Je.#i=this.createDrawerInstance(l,c,m,v,p),Je.#a=this.getDefaultDrawingOptions(),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(Je.#a.toSVGProperties(),Je.#i.defaultSVGProperties),!0,!1)}static _drawMove(e){if(et.isSameTimeStamp(e.timeStamp),!Je.#i)return;const{offsetX:t,offsetY:i,pointerId:s}=e;if(et.isSamePointerId(s)){if(et.isUsingMultiplePointers()){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,Je.#i.add(t,i)),et.setTimeStamp(e.timeStamp),Gt(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,Je.#i=null,Je.#a=null,et.clearTimeStamp()),Je.#n&&(Je.#n.abort(),Je.#n=null,et.clearPointerIds())}static _endDraw(e){const t=this._currentParent;if(t){if(t.toggleDrawing(!0),this._cleanup(!1),e?.target===t.div&&t.drawLayer.updateProperties(this._currentDrawId,Je.#i.end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const i=Je.#i,s=this._currentDrawId,r=i.getLastElement();t.addCommands({cmd:()=>{t.drawLayer.updateProperties(s,i.setLastElement(r))},undo:()=>{t.drawLayer.updateProperties(s,i.removeLastElement())},mustExec:!1,type:Ze.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const t=this._currentParent;if(!t)return null;if(t.toggleDrawing(!0),t.cleanUndoStack(Ze.DRAW_STEP),!Je.#i.isEmpty()){const{pageDimensions:[i,s],scale:r}=t,l=t.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:Je.#i.getOutlines(i*r,s*r,r,this._INNER_MARGIN),drawingOptions:Je.#a,mustBeCommitted:!e});return this._cleanup(!0),l}return t.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,t,i,s,r,l){nt("Not implemented")}static async deserialize(e,t,i){const{rawDims:{pageWidth:s,pageHeight:r,pageX:l,pageY:c}}=t.viewport,d=this.deserializeDraw(l,c,s,r,this._INNER_MARGIN,e),h=await super.deserialize(e,t,i);return h.createDrawingOptions(e),h.#r({drawOutlines:d}),h.#c(),h.onScaleChanging(),h.rotate(),h}serializeDraw(e){const[t,i]=this.pageTranslation,[s,r]=this.pageDimensions;return this.#e.serialize([t,i,s,r],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}class iq{#e=new Float64Array(6);#t;#i;#n;#a;#r;#s="";#o=0;#c=new ru;#l;#h;constructor(e,t,i,s,r,l){this.#l=i,this.#h=s,this.#n=r,this.#a=l,[e,t]=this.#d(e,t);const c=this.#t=[NaN,NaN,NaN,NaN,e,t];this.#r=[e,t],this.#i=[{line:c,points:this.#r}],this.#e.set(c,0)}updateProperty(e,t){e==="stroke-width"&&(this.#a=t)}#d(e,t){return me._normalizePoint(e,t,this.#l,this.#h,this.#n)}isEmpty(){return!this.#i||this.#i.length===0}isCancellable(){return this.#r.length<=10}add(e,t){[e,t]=this.#d(e,t);const[i,s,r,l]=this.#e.subarray(2,6),c=e-r,d=t-l;return Math.hypot(this.#l*c,this.#h*d)<=2?null:(this.#r.push(e,t),isNaN(i)?(this.#e.set([r,l,e,t],2),this.#t.push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(this.#e[0])&&this.#t.splice(6,6),this.#e.set([i,s,r,l,e,t],0),this.#t.push(...me.createBezierPoints(i,s,r,l,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const i=this.add(e,t);return i||(this.#r.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,i,s,r){this.#l=i,this.#h=s,this.#n=r,[e,t]=this.#d(e,t);const l=this.#t=[NaN,NaN,NaN,NaN,e,t];this.#r=[e,t];const c=this.#i.at(-1);return c&&(c.line=new Float32Array(c.line),c.points=new Float32Array(c.points)),this.#i.push({line:l,points:this.#r}),this.#e.set(l,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#i.at(-1)}setLastElement(e){return this.#i?(this.#i.push(e),this.#t=e.line,this.#r=e.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#c.setLastElement(e)}removeLastElement(){if(!this.#i)return this.#c.removeLastElement();this.#i.pop(),this.#s="";for(let e=0,t=this.#i.length;e<t;e++){const{line:i,points:s}=this.#i[e];this.#t=i,this.#r=s,this.#o=0,this.toSVGPath()}return{path:{d:this.#s}}}toSVGPath(){const e=me.svgRound(this.#t[4]),t=me.svgRound(this.#t[5]);if(this.#r.length===2)return this.#s=`${this.#s} M ${e} ${t} Z`,this.#s;if(this.#r.length<=6){const s=this.#s.lastIndexOf("M");this.#s=`${this.#s.slice(0,s)} M ${e} ${t}`,this.#o=6}if(this.#r.length===4){const s=me.svgRound(this.#t[10]),r=me.svgRound(this.#t[11]);return this.#s=`${this.#s} L ${s} ${r}`,this.#o=12,this.#s}const i=[];this.#o===0&&(i.push(`M ${e} ${t}`),this.#o=6);for(let s=this.#o,r=this.#t.length;s<r;s+=6){const[l,c,d,h,p,m]=this.#t.slice(s,s+6).map(me.svgRound);i.push(`C${l} ${c} ${d} ${h} ${p} ${m}`)}return this.#s+=i.join(" "),this.#o=this.#t.length,this.#s}getOutlines(e,t,i,s){const r=this.#i.at(-1);return r.line=new Float32Array(r.line),r.points=new Float32Array(r.points),this.#c.build(this.#i,e,t,i,this.#n,this.#a,s),this.#e=null,this.#t=null,this.#i=null,this.#s=null,this.#c}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class ru extends me{#e;#t=0;#i;#n;#a;#r;#s;#o;#c;build(e,t,i,s,r,l,c){this.#a=t,this.#r=i,this.#s=s,this.#o=r,this.#c=l,this.#i=c??0,this.#n=e,this.#d()}get thickness(){return this.#c}setLastElement(e){return this.#n.push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#n.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:t}of this.#n){if(e.push(`M${me.svgRound(t[4])} ${me.svgRound(t[5])}`),t.length===6){e.push("Z");continue}if(t.length===12&&isNaN(t[6])){e.push(`L${me.svgRound(t[10])} ${me.svgRound(t[11])}`);continue}for(let i=6,s=t.length;i<s;i+=6){const[r,l,c,d,h,p]=t.subarray(i,i+6).map(me.svgRound);e.push(`C${r} ${l} ${c} ${d} ${h} ${p}`)}}return e.join("")}serialize([e,t,i,s],r){const l=[],c=[],[d,h,p,m]=this.#h();let v,b,w,x,A,S,T,E,M;switch(this.#o){case 0:M=me._rescale,v=e,b=t+s,w=i,x=-s,A=e+d*i,S=t+(1-h-m)*s,T=e+(d+p)*i,E=t+(1-h)*s;break;case 90:M=me._rescaleAndSwap,v=e,b=t,w=i,x=s,A=e+h*i,S=t+d*s,T=e+(h+m)*i,E=t+(d+p)*s;break;case 180:M=me._rescale,v=e+i,b=t,w=-i,x=s,A=e+(1-d-p)*i,S=t+h*s,T=e+(1-d)*i,E=t+(h+m)*s;break;case 270:M=me._rescaleAndSwap,v=e+i,b=t+s,w=-i,x=-s,A=e+(1-h-m)*i,S=t+(1-d-p)*s,T=e+(1-h)*i,E=t+(1-d)*s;break}for(const{line:R,points:O}of this.#n)l.push(M(R,v,b,w,x,r?new Array(R.length):null)),c.push(M(O,v,b,w,x,r?new Array(O.length):null));return{lines:l,points:c,rect:[A,S,T,E]}}static deserialize(e,t,i,s,r,{paths:{lines:l,points:c},rotation:d,thickness:h}){const p=[];let m,v,b,w,x;switch(d){case 0:x=me._rescale,m=-e/i,v=t/s+1,b=1/i,w=-1/s;break;case 90:x=me._rescaleAndSwap,m=-t/s,v=-e/i,b=1/s,w=1/i;break;case 180:x=me._rescale,m=e/i+1,v=-t/s,b=-1/i,w=1/s;break;case 270:x=me._rescaleAndSwap,m=t/s+1,v=e/i+1,b=-1/s,w=-1/i;break}if(!l){l=[];for(const S of c){const T=S.length;if(T===2){l.push(new Float32Array([NaN,NaN,NaN,NaN,S[0],S[1]]));continue}if(T===4){l.push(new Float32Array([NaN,NaN,NaN,NaN,S[0],S[1],NaN,NaN,NaN,NaN,S[2],S[3]]));continue}const E=new Float32Array(3*(T-2));l.push(E);let[M,R,O,L]=S.subarray(0,4);E.set([NaN,NaN,NaN,NaN,M,R],0);for(let D=4;D<T;D+=2){const $=S[D],ee=S[D+1];E.set(me.createBezierPoints(M,R,O,L,$,ee),(D-2)*3),[M,R,O,L]=[O,L,$,ee]}}}for(let S=0,T=l.length;S<T;S++)p.push({line:x(l[S].map(E=>E??NaN),m,v,b,w),points:x(c[S].map(E=>E??NaN),m,v,b,w)});const A=new this.prototype.constructor;return A.build(p,i,s,1,d,h,r),A}#l(e=this.#c){const t=this.#i+e/2*this.#s;return this.#o%180===0?[t/this.#a,t/this.#r]:[t/this.#r,t/this.#a]}#h(){const[e,t,i,s]=this.#e,[r,l]=this.#l(0);return[e+r,t+l,i-2*r,s-2*l]}#d(){const e=this.#e=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:s}of this.#n){if(s.length<=12){for(let c=4,d=s.length;c<d;c+=6)he.pointBoundingBox(s[c],s[c+1],e);continue}let r=s[4],l=s[5];for(let c=6,d=s.length;c<d;c+=6){const[h,p,m,v,b,w]=s.subarray(c,c+6);he.bezierBoundingBox(r,l,h,p,m,v,b,w,e),r=b,l=w}}const[t,i]=this.#l();e[0]=Nn(e[0]-t,0,1),e[1]=Nn(e[1]-i,0,1),e[2]=Nn(e[2]+t,0,1),e[3]=Nn(e[3]+i,0,1),e[2]-=e[0],e[3]-=e[1]}get box(){return this.#e}updateProperty(e,t){return e==="stroke-width"?this.#f(t):null}#f(e){const[t,i]=this.#l();this.#c=e;const[s,r]=this.#l(),[l,c]=[s-t,r-i],d=this.#e;return d[0]-=l,d[1]-=c,d[2]+=2*l,d[3]+=2*c,d}updateParentDimensions([e,t],i){const[s,r]=this.#l();this.#a=e,this.#r=t,this.#s=i;const[l,c]=this.#l(),d=l-s,h=c-r,p=this.#e;return p[0]-=d,p[1]-=h,p[2]+=2*d,p[3]+=2*h,p}updateRotation(e){return this.#t=e,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#e.map(me.svgRound).join(" ")}get defaultProperties(){const[e,t]=this.#e;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${me.svgRound(e)} ${me.svgRound(t)}`}}}get rotationTransform(){const[,,e,t]=this.#e;let i=0,s=0,r=0,l=0,c=0,d=0;switch(this.#t){case 90:s=t/e,r=-e/t,c=e;break;case 180:i=-1,l=-1,c=e,d=t;break;case 270:s=-t/e,r=e/t,d=t;break;default:return""}return`matrix(${i} ${s} ${r} ${l} ${me.svgRound(c)} ${me.svgRound(d)})`}getPathResizingSVGProperties([e,t,i,s]){const[r,l]=this.#l(),[c,d,h,p]=this.#e;if(Math.abs(h-r)<=me.PRECISION||Math.abs(p-l)<=me.PRECISION){const x=e+i/2-(c+h/2),A=t+s/2-(d+p/2);return{path:{"transform-origin":`${me.svgRound(e)} ${me.svgRound(t)}`,transform:`${this.rotationTransform} translate(${x} ${A})`}}}const m=(i-2*r)/(h-2*r),v=(s-2*l)/(p-2*l),b=h/i,w=p/s;return{path:{"transform-origin":`${me.svgRound(c)} ${me.svgRound(d)}`,transform:`${this.rotationTransform} scale(${b} ${w}) translate(${me.svgRound(r)} ${me.svgRound(l)}) scale(${m} ${v}) translate(${me.svgRound(-r)} ${me.svgRound(-l)})`}}}getPathResizedSVGProperties([e,t,i,s]){const[r,l]=this.#l(),c=this.#e,[d,h,p,m]=c;if(c[0]=e,c[1]=t,c[2]=i,c[3]=s,Math.abs(p-r)<=me.PRECISION||Math.abs(m-l)<=me.PRECISION){const A=e+i/2-(d+p/2),S=t+s/2-(h+m/2);for(const{line:T,points:E}of this.#n)me._translate(T,A,S,T),me._translate(E,A,S,E);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${me.svgRound(e)} ${me.svgRound(t)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const v=(i-2*r)/(p-2*r),b=(s-2*l)/(m-2*l),w=-v*(d+r)+e+r,x=-b*(h+l)+t+l;if(v!==1||b!==1||w!==0||x!==0)for(const{line:A,points:S}of this.#n)me._rescale(A,w,x,v,b,A),me._rescale(S,w,x,v,b,S);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${me.svgRound(e)} ${me.svgRound(t)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,t],i){const[s,r]=i,l=this.#e,c=e-l[0],d=t-l[1];if(this.#a===s&&this.#r===r)for(const{line:h,points:p}of this.#n)me._translate(h,c,d,h),me._translate(p,c,d,p);else{const h=this.#a/s,p=this.#r/r;this.#a=s,this.#r=r;for(const{line:m,points:v}of this.#n)me._rescale(m,c,d,h,p,m),me._rescale(v,c,d,h,p,v);l[2]*=h,l[3]*=p}return l[0]=e,l[1]=t,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${me.svgRound(e)} ${me.svgRound(t)}`}}}get defaultSVGProperties(){const e=this.#e;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${me.svgRound(e[0])} ${me.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}class uf extends Q2{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:Ce._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??=this["stroke-width"],t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new uf(this._viewParameters);return e.updateAll(this),e}}class By extends Je{static _type="ink";static _editorType=Le.INK;static _defaultDrawingOptions=null;constructor(e){super({...e,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,t){Ce.initialize(e,t),this._defaultDrawingOptions=new uf(t.viewParameters)}static getDefaultDrawingOptions(e){const t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!0}static get typesMap(){return Ne(this,"typesMap",new Map([[Ze.INK_THICKNESS,"stroke-width"],[Ze.INK_COLOR,"stroke"],[Ze.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,t,i,s,r){return new iq(e,t,i,s,r,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,t,i,s,r,l){return ru.deserialize(e,t,i,s,r,l)}static async deserialize(e,t,i){let s=null;if(e instanceof zy){const{data:{inkLists:l,rect:c,rotation:d,id:h,color:p,opacity:m,borderStyle:{rawWidth:v},popupRef:b,richText:w,contentsObj:x,creationDate:A,modificationDate:S},parent:{page:{pageNumber:T}}}=e;s=e={annotationType:Le.INK,color:Array.from(p),thickness:v,opacity:m,paths:{points:l},boxes:null,pageIndex:T-1,rect:c.slice(0),rotation:d,annotationElementId:h,id:h,deleted:!1,popupRef:b,richText:w,comment:x?.str||null,creationDate:A,modificationDate:S}}const r=await super.deserialize(e,t,i);return r._initialData=s,e.comment&&r.setCommentData(e),r}get toolbarButtons(){return this._colorPicker||=new Zc(this),[["colorPicker",this._colorPicker]]}get colorType(){return Ze.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:t,parent:i}=this;t.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(e,t.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:t,opacity:i}){this._drawingOptions=By.getDefaultDrawingOptions({stroke:he.makeHexColor(...e),"stroke-width":t,"stroke-opacity":i})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:t,points:i}=this.serializeDraw(e),{_drawingOptions:{stroke:s,"stroke-opacity":r,"stroke-width":l}}=this,c=Object.assign(super.serialize(e),{color:Ce._colorManager.convert(s),opacity:r,thickness:l,paths:{lines:t,points:i}});return this.addComment(c),e?(c.isCopy=!0,c):this.annotationElementId&&!this.#e(c)?null:(c.id=this.annotationElementId,c)}#e(e){const{color:t,thickness:i,opacity:s,pageIndex:r}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||e.color.some((l,c)=>l!==t[c])||e.thickness!==i||e.opacity!==s||e.pageIndex!==r}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;const{points:t,rect:i}=this.serializeDraw(!1);return e.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:t,popup:this.comment}),null}}class bv extends ru{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const Vd=8,fc=3;class Po{static#e={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#t(e,t,i,s){return i-=e,s-=t,i===0?s>0?0:4:i===1?s+6:2-s}static#i=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#n(e,t,i,s,r,l,c){const d=this.#t(i,s,r,l);for(let h=0;h<8;h++){const p=(-h+d-c+16)%8,m=this.#i[2*p],v=this.#i[2*p+1];if(e[(i+m)*t+(s+v)]!==0)return p}return-1}static#a(e,t,i,s,r,l,c){const d=this.#t(i,s,r,l);for(let h=0;h<8;h++){const p=(h+d+c+16)%8,m=this.#i[2*p],v=this.#i[2*p+1];if(e[(i+m)*t+(s+v)]!==0)return p}return-1}static#r(e,t,i,s){const r=e.length,l=new Int32Array(r);for(let p=0;p<r;p++)l[p]=e[p]<=s?1:0;for(let p=1;p<i-1;p++)l[p*t]=l[p*t+t-1]=0;for(let p=0;p<t;p++)l[p]=l[t*i-1-p]=0;let c=1,d;const h=[];for(let p=1;p<i-1;p++){d=1;for(let m=1;m<t-1;m++){const v=p*t+m,b=l[v];if(b===0)continue;let w=p,x=m;if(b===1&&l[v-1]===0)c+=1,x-=1;else if(b>=1&&l[v+1]===0)c+=1,x+=1,b>1&&(d=b);else{b!==1&&(d=Math.abs(b));continue}const A=[m,p],S=x===m+1,T={isHole:S,points:A,id:c,parent:0};h.push(T);let E;for(const X of h)if(X.id===d){E=X;break}E?E.isHole?T.parent=S?E.parent:d:T.parent=S?d:E.parent:T.parent=S?d:0;const M=this.#n(l,t,p,m,w,x,0);if(M===-1){l[v]=-c,l[v]!==1&&(d=Math.abs(l[v]));continue}let R=this.#i[2*M],O=this.#i[2*M+1];const L=p+R,D=m+O;w=L,x=D;let $=p,ee=m;for(;;){const X=this.#a(l,t,$,ee,w,x,1);R=this.#i[2*X],O=this.#i[2*X+1];const le=$+R,de=ee+O;A.push(de,le);const ce=$*t+ee;if(l[ce+1]===0?l[ce]=-c:l[ce]===1&&(l[ce]=c),le===p&&de===m&&$===L&&ee===D){l[v]!==1&&(d=Math.abs(l[v]));break}else w=$,x=ee,$=le,ee=de}}}return h}static#s(e,t,i,s){if(i-t<=4){for(let L=t;L<i-2;L+=2)s.push(e[L],e[L+1]);return}const r=e[t],l=e[t+1],c=e[i-4]-r,d=e[i-3]-l,h=Math.hypot(c,d),p=c/h,m=d/h,v=p*l-m*r,b=d/c,w=1/h,x=Math.atan(b),A=Math.cos(x),S=Math.sin(x),T=w*(Math.abs(A)+Math.abs(S)),E=w*(1-T+T**2),M=Math.max(Math.atan(Math.abs(S+A)*E),Math.atan(Math.abs(S-A)*E));let R=0,O=t;for(let L=t+2;L<i-2;L+=2){const D=Math.abs(v-p*e[L+1]+m*e[L]);D>R&&(O=L,R=D)}R>(h*M)**2?(this.#s(e,t,O+2,s),this.#s(e,O,i,s)):s.push(r,l)}static#o(e){const t=[],i=e.length;return this.#s(e,0,i,t),t.push(e[i-2],e[i-1]),t.length<=4?null:t}static#c(e,t,i,s,r,l){const c=new Float32Array(l**2),d=-2*s**2,h=l>>1;for(let x=0;x<l;x++){const A=(x-h)**2;for(let S=0;S<l;S++)c[x*l+S]=Math.exp((A+(S-h)**2)/d)}const p=new Float32Array(256),m=-2*r**2;for(let x=0;x<256;x++)p[x]=Math.exp(x**2/m);const v=e.length,b=new Uint8Array(v),w=new Uint32Array(256);for(let x=0;x<i;x++)for(let A=0;A<t;A++){const S=x*t+A,T=e[S];let E=0,M=0;for(let O=0;O<l;O++){const L=x+O-h;if(!(L<0||L>=i))for(let D=0;D<l;D++){const $=A+D-h;if($<0||$>=t)continue;const ee=e[L*t+$],X=c[O*l+D]*p[Math.abs(ee-T)];E+=ee*X,M+=X}}const R=b[S]=Math.round(E/M);w[R]++}return[b,w]}static#l(e){const t=new Uint32Array(256);for(const i of e)t[i]++;return t}static#h(e){const t=e.length,i=new Uint8ClampedArray(t>>2);let s=-1/0,r=1/0;for(let c=0,d=i.length;c<d;c++){const h=i[c]=e[c<<2];s=Math.max(s,h),r=Math.min(r,h)}const l=255/(s-r);for(let c=0,d=i.length;c<d;c++)i[c]=(i[c]-r)*l;return i}static#d(e){let t,i=-1/0,s=-1/0;const r=e.findIndex(d=>d!==0);let l=r,c=r;for(t=r;t<256;t++){const d=e[t];d>i&&(t-l>s&&(s=t-l,c=t-1),i=d,l=t)}for(t=c-1;t>=0&&!(e[t]>e[t+1]);t--);return t}static#f(e){const t=e,{width:i,height:s}=e,{maxDim:r}=this.#e;let l=i,c=s;if(i>r||s>r){let v=i,b=s,w=Math.log2(Math.max(i,s)/r);const x=Math.floor(w);w=w===x?x-1:x;for(let S=0;S<w;S++){l=Math.ceil(v/2),c=Math.ceil(b/2);const T=new OffscreenCanvas(l,c);T.getContext("2d").drawImage(e,0,0,v,b,0,0,l,c),v=l,b=c,e!==t&&e.close(),e=T.transferToImageBitmap()}const A=Math.min(r/l,r/c);l=Math.round(l*A),c=Math.round(c*A)}const h=new OffscreenCanvas(l,c).getContext("2d",{willReadFrequently:!0});h.fillStyle="white",h.fillRect(0,0,l,c),h.filter="grayscale(1)",h.drawImage(e,0,0,e.width,e.height,0,0,l,c);const p=h.getImageData(0,0,l,c).data;return[this.#h(p),l,c]}static extractContoursFromText(e,{fontFamily:t,fontStyle:i,fontWeight:s},r,l,c,d){let h=new OffscreenCanvas(1,1),p=h.getContext("2d",{alpha:!1});const m=200,v=p.font=`${i} ${s} ${m}px ${t}`,{actualBoundingBoxLeft:b,actualBoundingBoxRight:w,actualBoundingBoxAscent:x,actualBoundingBoxDescent:A,fontBoundingBoxAscent:S,fontBoundingBoxDescent:T,width:E}=p.measureText(e),M=1.5,R=Math.ceil(Math.max(Math.abs(b)+Math.abs(w)||0,E)*M),O=Math.ceil(Math.max(Math.abs(x)+Math.abs(A)||m,Math.abs(S)+Math.abs(T)||m)*M);h=new OffscreenCanvas(R,O),p=h.getContext("2d",{alpha:!0,willReadFrequently:!0}),p.font=v,p.filter="grayscale(1)",p.fillStyle="white",p.fillRect(0,0,R,O),p.fillStyle="black",p.fillText(e,R*(M-1)/2,O*(3-M)/2);const L=this.#h(p.getImageData(0,0,R,O).data),D=this.#l(L),$=this.#d(D),ee=this.#r(L,R,O,$);return this.processDrawnLines({lines:{curves:ee,width:R,height:O},pageWidth:r,pageHeight:l,rotation:c,innerMargin:d,mustSmooth:!0,areContours:!0})}static process(e,t,i,s,r){const[l,c,d]=this.#f(e),[h,p]=this.#c(l,c,d,Math.hypot(c,d)*this.#e.sigmaSFactor,this.#e.sigmaR,this.#e.kernelSize),m=this.#d(p),v=this.#r(h,c,d,m);return this.processDrawnLines({lines:{curves:v,width:c,height:d},pageWidth:t,pageHeight:i,rotation:s,innerMargin:r,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:i,rotation:s,innerMargin:r,mustSmooth:l,areContours:c}){s%180!==0&&([t,i]=[i,t]);const{curves:d,width:h,height:p}=e,m=e.thickness??0,v=[],b=Math.min(t/h,i/p),w=b/t,x=b/i,A=[];for(const{points:T}of d){const E=l?this.#o(T):T;if(!E)continue;A.push(E);const M=E.length,R=new Float32Array(M),O=new Float32Array(3*(M===2?2:M-2));if(v.push({line:O,points:R}),M===2){R[0]=E[0]*w,R[1]=E[1]*x,O.set([NaN,NaN,NaN,NaN,R[0],R[1]],0);continue}let[L,D,$,ee]=E;L*=w,D*=x,$*=w,ee*=x,R.set([L,D,$,ee],0),O.set([NaN,NaN,NaN,NaN,L,D],0);for(let X=4;X<M;X+=2){const le=R[X]=E[X]*w,de=R[X+1]=E[X+1]*x;O.set(me.createBezierPoints(L,D,$,ee,le,de),(X-2)*3),[L,D,$,ee]=[$,ee,le,de]}}if(v.length===0)return null;const S=c?new bv:new ru;return S.build(v,t,i,1,s,c?0:m,r),{outline:S,newCurves:A,areContours:c,thickness:m,width:h,height:p}}static async compressSignature({outlines:e,areContours:t,thickness:i,width:s,height:r}){let l=1/0,c=-1/0,d=0;for(const E of e){d+=E.length;for(let M=2,R=E.length;M<R;M++){const O=E[M]-E[M-2];l=Math.min(l,O),c=Math.max(c,O)}}let h;l>=-128&&c<=127?h=Int8Array:l>=-32768&&c<=32767?h=Int16Array:h=Int32Array;const p=e.length,m=Vd+fc*p,v=new Uint32Array(m);let b=0;v[b++]=m*Uint32Array.BYTES_PER_ELEMENT+(d-2*p)*h.BYTES_PER_ELEMENT,v[b++]=0,v[b++]=s,v[b++]=r,v[b++]=t?0:1,v[b++]=Math.max(0,Math.floor(i??0)),v[b++]=p,v[b++]=h.BYTES_PER_ELEMENT;for(const E of e)v[b++]=E.length-2,v[b++]=E[0],v[b++]=E[1];const w=new CompressionStream("deflate-raw"),x=w.writable.getWriter();await x.ready,x.write(v);const A=h.prototype.constructor;for(const E of e){const M=new A(E.length-2);for(let R=2,O=E.length;R<O;R++)M[R-2]=E[R]-E[R-2];x.write(M)}x.close();const S=await new Response(w.readable).arrayBuffer();return new Uint8Array(S).toBase64()}static async decompressSignature(e){try{const t=Uint8Array.fromBase64(e),{readable:i,writable:s}=new DecompressionStream("deflate-raw"),r=s.getWriter();await r.ready,r.write(t).then(async()=>{await r.ready,await r.close()}).catch(()=>{});let l=null,c=0;for await(const E of i)l||=new Uint8Array(new Uint32Array(E.buffer,0,4)[0]),l.set(E,c),c+=E.length;const d=new Uint32Array(l.buffer,0,l.length>>2),h=d[1];if(h!==0)throw new Error(`Invalid version: ${h}`);const p=d[2],m=d[3],v=d[4]===0,b=d[5],w=d[6],x=d[7],A=[],S=(Vd+fc*w)*Uint32Array.BYTES_PER_ELEMENT;let T;switch(x){case Int8Array.BYTES_PER_ELEMENT:T=new Int8Array(l.buffer,S);break;case Int16Array.BYTES_PER_ELEMENT:T=new Int16Array(l.buffer,S);break;case Int32Array.BYTES_PER_ELEMENT:T=new Int32Array(l.buffer,S);break}c=0;for(let E=0;E<w;E++){const M=d[fc*E+Vd],R=new Float32Array(M+2);A.push(R);for(let O=0;O<fc-1;O++)R[O]=d[fc*E+Vd+O+1];for(let O=0;O<M;O++)R[O+2]=R[O]+T[c++]}return{areContours:v,thickness:b,outlines:A,width:p,height:m}}catch(t){return Oe(`decompressSignature: ${t}`),null}}}class Fy extends Q2{constructor(){super(),super.updateProperties({fill:Ce._defaultLineColor,"stroke-width":0})}clone(){const e=new Fy;return e.updateAll(this),e}}class Uy extends uf{constructor(e){super(e),super.updateProperties({stroke:Ce._defaultLineColor,"stroke-width":1})}clone(){const e=new Uy(this._viewParameters);return e.updateAll(this),e}}class As extends Je{#e=!1;#t=null;#i=null;#n=null;static _type="signature";static _editorType=Le.SIGNATURE;static _defaultDrawingOptions=null;constructor(e){super({...e,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#i=e.signatureData||null,this.#t=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,t){Ce.initialize(e,t),this._defaultDrawingOptions=new Fy,this._defaultDrawnSignatureOptions=new Uy(t.viewParameters)}static getDefaultDrawingOptions(e){const t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!1}static get typesMap(){return Ne(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#t}}static computeTelemetryFinalData(e){const t=e.get("hasDescription");return{hasAltText:t.get(!0)??0,hasNoAltText:t.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,t;const{_isCopy:i}=this;if(i&&(this._isCopy=!1,e=this.x,t=this.y),super.render(),this._drawId===null)if(this.#i){const{lines:s,mustSmooth:r,areContours:l,description:c,uuid:d,heightInPage:h}=this.#i,{rawDims:{pageWidth:p,pageHeight:m},rotation:v}=this.parent.viewport,b=Po.processDrawnLines({lines:s,pageWidth:p,pageHeight:m,rotation:v,innerMargin:As._INNER_MARGIN,mustSmooth:r,areContours:l});this.addSignature(b,h,c,d)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#t||""}));return i&&(this._isCopy=!0,this._moveAfterPaste(e,t)),this.div}setUuid(e){this.#n=e,this.addEditToolbar()}getUuid(){return this.#n}get description(){return this.#t}set description(e){this.#t=e,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:e})),super.addEditToolbar().then(t=>{t?.updateEditSignatureButton(e)}))}getSignaturePreview(){const{newCurves:e,areContours:t,thickness:i,width:s,height:r}=this.#i,l=Math.max(s,r),c=Po.processDrawnLines({lines:{curves:e.map(d=>({points:d})),thickness:i,width:s,height:r},pageWidth:l,pageHeight:l,rotation:0,innerMargin:0,mustSmooth:!1,areContours:t});return{areContours:t,outline:c.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(e,t,i,s){const{x:r,y:l}=this,{outline:c}=this.#i=e;this.#e=c instanceof bv,this.description=i;let d;this.#e?d=As.getDefaultDrawingOptions():(d=As._defaultDrawnSignatureOptions.clone(),d.updateProperties({"stroke-width":c.thickness})),this._addOutlines({drawOutlines:c,drawingOptions:d});const[,h]=this.pageDimensions;let p=t/h;p=p>=1?.5:p,this.width*=p/this.height,this.width>=1&&(p*=.9/this.width,this.width=.9),this.height=p,this.setDims(),this.x=r,this.y=l,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(s),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!s,hasDescription:!!i}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:t,pageHeight:i},rotation:s}=this.parent.viewport;return Po.process(e,t,i,s,As._INNER_MARGIN)}getFromText(e,t){const{rawDims:{pageWidth:i,pageHeight:s},rotation:r}=this.parent.viewport;return Po.extractContoursFromText(e,t,i,s,r,As._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:t,pageHeight:i},rotation:s}=this.parent.viewport;return Po.processDrawnLines({lines:e,pageWidth:t,pageHeight:i,rotation:s,innerMargin:As._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:t}){e?this._drawingOptions=As.getDefaultDrawingOptions():(this._drawingOptions=As._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":t}))}serialize(e=!1){if(this.isEmpty())return null;const{lines:t,points:i}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":s}}=this,r=Object.assign(super.serialize(e),{isSignature:!0,areContours:this.#e,color:[0,0,0],thickness:this.#e?0:s});return this.addComment(r),e?(r.paths={lines:t,points:i},r.uuid=this.#n,r.isCopy=!0):r.lines=t,this.#t&&(r.accessibilityData={type:"Figure",alt:this.#t}),r}static deserializeDraw(e,t,i,s,r,l){return l.areContours?bv.deserialize(e,t,i,s,r,l):ru.deserialize(e,t,i,s,r,l)}static async deserialize(e,t,i){const s=await super.deserialize(e,t,i);return s.#e=e.areContours,s.description=e.accessibilityData?.alt||"",s.#n=e.uuid,s}}class sq extends Ce{#e=null;#t=null;#i=null;#n=null;#a=null;#r="";#s=null;#o=!1;#c=null;#l=!1;#h=!1;static _type="stamp";static _editorType=Le.STAMP;constructor(e){super({...e,name:"stampEditor"}),this.#n=e.bitmapUrl,this.#a=e.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,t){Ce.initialize(e,t)}static isHandlingMimeForPasting(e){return uv.includes(e)}static paste(e,t){t.pasteEditor({mode:Le.STAMP},{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(e){const t=e.get("hasAltText");return{hasAltText:t.get(!0)??0,hasNoAltText:t.get(!1)??0}}#d(e,t=!1){if(!e){this.remove();return}this.#e=e.bitmap,t||(this.#t=e.id,this.#l=e.isSvg),e.file&&(this.#r=e.file.name),this.#m()}#f(){if(this.#i=null,this._uiManager.enableWaiting(!1),!!this.#s){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(e=null,t=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:s,width:r,height:l}=e||this.copyCanvas(null,null,!0).imageData,c=await i.guess({name:"altText",request:{data:s,width:r,height:l,channels:s.length/(r*l)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const d=c.output;return await this.setGuessedAltText(d),t&&!this.hasAltTextData()&&(this.altTextData={alt:d,decorative:!1}),d}#g(){if(this.#t){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#t).then(i=>this.#d(i,!0)).finally(()=>this.#f());return}if(this.#n){const i=this.#n;this.#n=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromUrl(i).then(s=>this.#d(s)).finally(()=>this.#f());return}if(this.#a){const i=this.#a;this.#a=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromFile(i).then(s=>this.#d(s)).finally(()=>this.#f());return}const e=document.createElement("input");e.type="file",e.accept=uv.join(",");const t=this._uiManager._signal;this.#i=new Promise(i=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const s=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#d(s)}i()},{signal:t}),e.addEventListener("cancel",()=>{this.remove(),i()},{signal:t})}).finally(()=>this.#f()),e.click()}remove(){this.#t&&(this.#e=null,this._uiManager.imageManager.deleteId(this.#t),this.#s?.remove(),this.#s=null,this.#c&&(clearTimeout(this.#c),this.#c=null)),super.remove()}rebuild(){if(!this.parent){this.#t&&this.#g();return}super.rebuild(),this.div!==null&&(this.#t&&this.#s===null&&this.#g(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(this.#i||this.#e||this.#n||this.#a||this.#t||this.#o)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let e,t;return this._isCopy&&(e=this.x,t=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#o||(this.#e?this.#m():this.#g()),this._isCopy&&this._moveAfterPaste(e,t),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,t){const{id:i,bitmap:s}=this._uiManager.imageManager.getFromCanvas(e,t);t.remove(),i&&this._uiManager.imageManager.isValidId(i)&&(this.#t=i,s&&(this.#e=s),this.#o=!1,this.#m())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#c!==null&&clearTimeout(this.#c);const e=200;this.#c=setTimeout(()=>{this.#c=null,this.#p()},e)}#m(){const{div:e}=this;let{width:t,height:i}=this.#e;const[s,r]=this.pageDimensions,l=.75;if(this.width)t=this.width*s,i=this.height*r;else if(t>l*s||i>l*r){const d=Math.min(l*s/t,l*r/i);t*=d,i*=d}this._uiManager.enableWaiting(!1);const c=this.#s=document.createElement("canvas");c.setAttribute("role","img"),this.addContainer(c),this.width=t/s,this.height=i/r,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),this.#p(),this.#h||(this.parent.addUndoableEditor(this),this.#h=!0),this._reportTelemetry({action:"inserted_image"}),this.#r&&this.div.setAttribute("aria-description",this.#r),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(e,t,i=!1){e||(e=224);const{width:s,height:r}=this.#e,l=new Rs;let c=this.#e,d=s,h=r,p=null;if(t){if(s>t||r>t){const O=Math.min(t/s,t/r);d=Math.floor(s*O),h=Math.floor(r*O)}p=document.createElement("canvas");const v=p.width=Math.ceil(d*l.sx),b=p.height=Math.ceil(h*l.sy);this.#l||(c=this.#u(v,b));const w=p.getContext("2d");w.filter=this._uiManager.hcmFilter;let x="white",A="#cfcfd8";this._uiManager.hcmFilter!=="none"?A="black":E9.isDarkMode&&(x="#8f8f9d",A="#42414d");const S=15,T=S*l.sx,E=S*l.sy,M=new OffscreenCanvas(T*2,E*2),R=M.getContext("2d");R.fillStyle=x,R.fillRect(0,0,T*2,E*2),R.fillStyle=A,R.fillRect(0,0,T,E),R.fillRect(T,E,T,E),w.fillStyle=w.createPattern(M,"repeat"),w.fillRect(0,0,v,b),w.drawImage(c,0,0,c.width,c.height,0,0,v,b)}let m=null;if(i){let v,b;if(l.symmetric&&c.width<e&&c.height<e)v=c.width,b=c.height;else if(c=this.#e,s>e||r>e){const A=Math.min(e/s,e/r);v=Math.floor(s*A),b=Math.floor(r*A),this.#l||(c=this.#u(v,b))}const x=new OffscreenCanvas(v,b).getContext("2d",{willReadFrequently:!0});x.drawImage(c,0,0,c.width,c.height,0,0,v,b),m={width:v,height:b,data:x.getImageData(0,0,v,b).data}}return{canvas:p,width:d,height:h,imageData:m}}#u(e,t){const{width:i,height:s}=this.#e;let r=i,l=s,c=this.#e;for(;r>2*e||l>2*t;){const d=r,h=l;r>2*e&&(r=r>=16384?Math.floor(r/2)-1:Math.ceil(r/2)),l>2*t&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const p=new OffscreenCanvas(r,l);p.getContext("2d").drawImage(c,0,0,d,h,0,0,r,l),c=p.transferToImageBitmap()}return c}#p(){const[e,t]=this.parentDimensions,{width:i,height:s}=this,r=new Rs,l=Math.ceil(i*e*r.sx),c=Math.ceil(s*t*r.sy),d=this.#s;if(!d||d.width===l&&d.height===c)return;d.width=l,d.height=c;const h=this.#l?this.#e:this.#u(l,c),p=d.getContext("2d");p.filter=this._uiManager.hcmFilter,p.drawImage(h,0,0,h.width,h.height,0,0,l,c)}#v(e){if(e){if(this.#l){const s=this._uiManager.imageManager.getSvgUrl(this.#t);if(s)return s}const t=document.createElement("canvas");return{width:t.width,height:t.height}=this.#e,t.getContext("2d").drawImage(this.#e,0,0),t.toDataURL()}if(this.#l){const[t,i]=this.pageDimensions,s=Math.round(this.width*t*rl.PDF_TO_CSS_UNITS),r=Math.round(this.height*i*rl.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(s,r);return l.getContext("2d").drawImage(this.#e,0,0,this.#e.width,this.#e.height,0,0,s,r),l.transferToImageBitmap()}return structuredClone(this.#e)}static async deserialize(e,t,i){let s=null,r=!1;if(e instanceof K2){const{data:{rect:x,rotation:A,id:S,structParent:T,popupRef:E,richText:M,contentsObj:R,creationDate:O,modificationDate:L},container:D,parent:{page:{pageNumber:$}},canvas:ee}=e;let X,le;ee?(delete e.canvas,{id:X,bitmap:le}=i.imageManager.getFromCanvas(D.id,ee),ee.remove()):(r=!0,e._hasNoCanvas=!0);const de=(await t._structTree.getAriaAttributes(`${$o}${S}`))?.get("aria-label")||"";s=e={annotationType:Le.STAMP,bitmapId:X,bitmap:le,pageIndex:$-1,rect:x.slice(0),rotation:A,annotationElementId:S,id:S,deleted:!1,accessibilityData:{decorative:!1,altText:de},isSvg:!1,structParent:T,popupRef:E,richText:M,comment:R?.str||null,creationDate:O,modificationDate:L}}const l=await super.deserialize(e,t,i),{rect:c,bitmap:d,bitmapUrl:h,bitmapId:p,isSvg:m,accessibilityData:v}=e;r?(i.addMissingCanvas(e.id,l),l.#o=!0):p&&i.imageManager.isValidId(p)?(l.#t=p,d&&(l.#e=d)):l.#n=h,l.#l=m;const[b,w]=l.pageDimensions;return l.width=(c[2]-c[0])/b,l.height=(c[3]-c[1])/w,v&&(l.altTextData=v),l._initialData=s,e.comment&&l.setCommentData(e),l.#h=!!s,l}serialize(e=!1,t=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=Object.assign(super.serialize(e),{bitmapId:this.#t,isSvg:this.#l});if(this.addComment(i),e)return i.bitmapUrl=this.#v(!0),i.accessibilityData=this.serializeAltText(!0),i.isCopy=!0,i;const{decorative:s,altText:r}=this.serializeAltText(!1);if(!s&&r&&(i.accessibilityData={type:"Figure",alt:r}),this.annotationElementId){const c=this.#b(i);return c.isSame?null:(c.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1,i.id=this.annotationElementId,delete i.bitmapId,i)}if(t===null)return i;t.stamps||=new Map;const l=this.#l?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!t.stamps.has(this.#t))t.stamps.set(this.#t,{area:l,serialized:i}),i.bitmap=this.#v(!1);else if(this.#l){const c=t.stamps.get(this.#t);l>c.area&&(c.area=l,c.serialized.bitmap.close(),c.serialized.bitmap=this.#v(!1))}return i}#b(e){const{pageIndex:t,accessibilityData:{altText:i}}=this._initialData,s=e.pageIndex===t,r=(e.accessibilityData?.alt||"")===i;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&s&&r,isSameAltText:r}}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}class Js{#e;#t=!1;#i=null;#n=null;#a=null;#r=new Map;#s=!1;#o=!1;#c=!1;#l=null;#h=null;#d=null;#f=null;#g=null;#m=-1;#u;static _initialized=!1;static#p=new Map([wn,By,sq,Xt,As].map(e=>[e._editorType,e]));constructor({uiManager:e,pageIndex:t,div:i,structTreeLayer:s,accessibilityManager:r,annotationLayer:l,drawLayer:c,textLayer:d,viewport:h,l10n:p}){const m=[...Js.#p.values()];if(!Js._initialized){Js._initialized=!0;for(const v of m)v.initialize(p,e)}e.registerEditorTypes(m),this.#u=e,this.pageIndex=t,this.div=i,this.#e=r,this.#i=l,this.viewport=h,this.#d=d,this.drawLayer=c,this._structTree=s,this.#u.addLayer(this)}updatePageIndex(e){this.pageIndex=e}get isEmpty(){return this.#r.size===0}get isInvisible(){return this.isEmpty&&this.#u.getMode()===Le.NONE}updateToolbar(e){this.#u.updateToolbar(e)}updateMode(e=this.#u.getMode()){switch(this.#w(),e){case Le.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Le.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Le.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;if(t.toggle("nonEditing",!1),e===Le.POPUP)t.toggle("commentEditing",!0);else{t.toggle("commentEditing",!1);for(const i of Js.#p.values())t.toggle(`${i._type}Editing`,e===i._editorType)}this.div.hidden=!1}hasTextLayer(e){return e===this.#d?.div}setEditingState(e){this.#u.setEditingState(e)}addCommands(e){this.#u.addCommands(e)}cleanUndoStack(e){this.#u.cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){this.#i?.togglePointerEvents(e)}get#v(){return this.#r.size!==0?this.#r.values():this.#u.getEditors(this.pageIndex)}async enable(){this.#c=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),this.#g?.abort(),this.#g=null;const e=new Set;for(const i of this.#v)i.enableEditing(),i.show(!0),i.annotationElementId&&(this.#u.removeChangedExistingAnnotation(i),e.add(i.annotationElementId));const t=this.#i;if(t)for(const i of t.getEditableAnnotations()){if(i.hide(),this.#u.isDeletedAnnotationElement(i.data.id)||e.has(i.data.id))continue;const s=await this.deserialize(i);s&&(this.addOrRebuild(s),s.enableEditing())}this.#c=!1,this.#u._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),this.#d&&!this.#g){this.#g=new AbortController;const s=this.#u.combinedSignal(this.#g);this.#d.div.addEventListener("pointerdown",r=>{const{clientX:c,clientY:d,timeStamp:h}=r,p=this.#m;if(h-p>500){this.#m=h;return}this.#m=-1;const{classList:m}=this.div;m.toggle("getElements",!0);const v=document.elementsFromPoint(c,d);if(m.toggle("getElements",!1),!this.div.contains(v[0]))return;let b;const w=new RegExp(`^${$c}[0-9]+$`);for(const A of v)if(w.test(A.id)){b=A.id;break}if(!b)return;const x=this.#r.get(b);x?.annotationElementId===null&&(r.stopPropagation(),r.preventDefault(),x.dblclick(r))},{signal:s,capture:!0})}const e=this.#i,t=[];if(e){const s=new Map,r=new Map;for(const c of this.#v){if(c.disableEditing(),!c.annotationElementId){t.push(c);continue}if(c.serialize()!==null){s.set(c.annotationElementId,c);continue}else r.set(c.annotationElementId,c);this.getEditableAnnotation(c.annotationElementId)?.show(),c.remove()}const l=e.getEditableAnnotations();for(const c of l){const{id:d}=c.data;if(this.#u.isDeletedAnnotationElement(d)){c.updateEdited({deleted:!0});continue}let h=r.get(d);if(h){h.resetAnnotationElement(c),h.show(!1),c.show();continue}h=s.get(d),h&&(this.#u.addChangedExistingAnnotation(h),h.renderAnnotationElement(c)&&h.show(!1)),c.show()}}this.#w(),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const s of Js.#p.values())i.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),e?.updateFakeAnnotations(t),this.#o=!1}getEditableAnnotation(e){return this.#i?.getEditableAnnotation(e)||null}setActiveEditor(e){this.#u.getActive()!==e&&this.#u.setActiveEditor(e)}enableTextSelection(){if(this.div.tabIndex=-1,this.#d?.div&&!this.#f){this.#f=new AbortController;const e=this.#u.combinedSignal(this.#f);this.#d.div.addEventListener("pointerdown",this.#b.bind(this),{signal:e}),this.#d.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#d?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#d.div.classList.remove("highlighting"))}#b(e){this.#u.unselectAll();const{target:t}=e;if(t===this.#d.div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&this.#d.div.contains(t)){const{isMac:i}=mn.platform;if(e.button!==0||e.ctrlKey&&i)return;this.#u.showAllEditors("highlight",!0,!0),this.#d.div.classList.add("free"),this.toggleDrawing(),Xt.startHighlighting(this,this.#u.direction==="ltr",{target:this.#d.div,x:e.x,y:e.y}),this.#d.div.addEventListener("pointerup",()=>{this.#d.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#u._signal}),e.preventDefault()}}enableClick(){if(this.#n)return;this.#n=new AbortController;const e=this.#u.combinedSignal(this.#n);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){this.#n?.abort(),this.#n=null}attach(e){this.#r.set(e.id,e);const{annotationElementId:t}=e;t&&this.#u.isDeletedAnnotationElement(t)&&this.#u.removeDeletedAnnotationElement(e)}detach(e){this.#r.delete(e.id),this.#e?.removePointerInTextLayer(e.contentDiv),!this.#o&&e.annotationElementId&&this.#u.addDeletedAnnotationElement(e)}remove(e){this.detach(e),this.#u.removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){e.parent!==this&&(e.parent&&e.annotationElementId&&(this.#u.addDeletedAnnotationElement(e),Ce.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),e.parent?.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),this.#u.addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!this.#c),this.#u.addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!this.#a&&(e._focusEventsAllowed=!1,this.#a=setTimeout(()=>{this.#a=null,e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this.#u._signal}),t.focus())},0)),e._structTreeParentId=this.#e?.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||=this,e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),i=()=>{e.remove()};this.addCommands({cmd:t,undo:i,mustExec:!1})}getEditorByUID(e){for(const t of this.#r.values())if(t.uid===e)return t;return null}getNextId(){return this.#u.getId()}get#y(){return Js.#p.get(this.#u.getMode())}combinedSignal(e){return this.#u.combinedSignal(e)}#E(e){const t=this.#y;return t?new t.prototype.constructor(e):null}canCreateNewEmptyEditor(){return this.#y?.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await this.#u.updateMode(e.mode);const{offsetX:i,offsetY:s}=this.#S(),r=this.getNextId(),l=this.#E({parent:this,id:r,x:i,y:s,uiManager:this.#u,isCentered:!0,...t});l&&this.add(l)}async deserialize(e){return await Js.#p.get(e.annotationType??e.annotationEditorType)?.deserialize(e,this,this.#u)||null}createAndAddNewEditor(e,t,i={}){const s=this.getNextId(),r=this.#E({parent:this,id:s,x:e.offsetX,y:e.offsetY,uiManager:this.#u,isCentered:t,...i});return r&&this.add(r),r}get boundingClientRect(){return this.div.getBoundingClientRect()}#S(){const{x:e,y:t,width:i,height:s}=this.boundingClientRect,r=Math.max(0,e),l=Math.max(0,t),c=Math.min(window.innerWidth,e+i),d=Math.min(window.innerHeight,t+s),h=(r+c)/2-e,p=(l+d)/2-t,[m,v]=this.viewport.rotation%180===0?[h,p]:[p,h];return{offsetX:m,offsetY:v}}addNewEditor(e={}){this.createAndAddNewEditor(this.#S(),!0,e)}setSelected(e){this.#u.setSelected(e)}toggleSelected(e){this.#u.toggleSelected(e)}unselect(e){this.#u.unselect(e)}pointerup(e){const{isMac:t}=mn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!this.#s||(this.#s=!1,this.#y?.isDrawer&&this.#y.supportMultipleDrawings))return;if(!this.#t){this.#t=!0;return}const i=this.#u.getMode();if(i===Le.STAMP||i===Le.SIGNATURE){this.#u.unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){if(this.#u.getMode()===Le.HIGHLIGHT&&this.enableTextSelection(),this.#s){this.#s=!1;return}const{isMac:t}=mn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(this.#s=!0,this.#y?.isDrawer){this.startDrawingSession(e);return}const i=this.#u.getActive();this.#t=!i||i.isEmpty()}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),this.#l){this.#y.startDrawing(this,this.#u,!1,e);return}this.#u.setCurrentDrawingSession(this),this.#l=new AbortController;const t=this.#u.combinedSignal(this.#l);this.div.addEventListener("blur",({relatedTarget:i})=>{i&&!this.div.contains(i)&&(this.#h=null,this.commitOrRemove())},{signal:t}),this.#y.startDrawing(this,this.#u,!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&(this.#h=t);return}this.#h&&setTimeout(()=>{this.#h?.focus(),this.#h=null},0)}endDrawingSession(e=!1){return this.#l?(this.#u.setCurrentDrawingSession(null),this.#l.abort(),this.#l=null,this.#h=null,this.#y.endDrawing(e)):null}findNewParent(e,t,i){const s=this.#u.findParent(t,i);return s===null||s===this?!1:(s.changeParent(e),!0)}commitOrRemove(){return this.#l?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#l&&this.#y.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#u.getActive()?.parent===this&&(this.#u.commitOrRemove(),this.#u.setActiveEditor(null)),this.#a&&(clearTimeout(this.#a),this.#a=null);for(const e of this.#r.values())this.#e?.removePointerInTextLayer(e.contentDiv),e.setParent(null),e.isAttachedToDOM=!1,e.div.remove();this.div=null,this.#r.clear(),this.#u.removeLayer(this)}#w(){for(const e of this.#r.values())e.isEmpty()&&e.remove()}render({viewport:e}){this.viewport=e,Nr(this.div,e);for(const t of this.#u.getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){this.#u.commitOrRemove(),this.#w();const t=this.viewport.rotation,i=e.rotation;if(this.viewport=e,Nr(this.div,{rotation:i}),t!==i)for(const s of this.#r.values())s.rotate(i)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return this.#u.viewParameters.realScale}}class Dn{#e=null;#t=new Map;#i=new Map;static#n=0;setParent(e){if(!this.#e){this.#e=e;return}if(this.#e!==e){if(this.#t.size>0)for(const t of this.#t.values())t.remove(),e.append(t);this.#e=e}}static get _svgFactory(){return Ne(this,"_svgFactory",new Ph)}static#a(e,[t,i,s,r]){const{style:l}=e;l.top=`${100*i}%`,l.left=`${100*t}%`,l.width=`${100*s}%`,l.height=`${100*r}%`}#r(){const e=Dn._svgFactory.create(1,1,!0);return this.#e.append(e),e.setAttribute("aria-hidden",!0),e}#s(e,t){const i=Dn._svgFactory.createElement("clipPath");e.append(i);const s=`clip_${t}`;i.setAttribute("id",s),i.setAttribute("clipPathUnits","objectBoundingBox");const r=Dn._svgFactory.createElement("use");return i.append(r),r.setAttribute("href",`#${t}`),r.classList.add("clip"),s}#o(e,t){for(const[i,s]of Object.entries(t))s===null?e.removeAttribute(i):e.setAttribute(i,s)}draw(e,t=!1,i=!1){const s=Dn.#n++,r=this.#r(),l=Dn._svgFactory.createElement("defs");r.append(l);const c=Dn._svgFactory.createElement("path");l.append(c);const d=`path_${s}`;c.setAttribute("id",d),c.setAttribute("vector-effect","non-scaling-stroke"),t&&this.#i.set(s,c);const h=i?this.#s(l,d):null,p=Dn._svgFactory.createElement("use");return r.append(p),p.setAttribute("href",`#${d}`),this.updateProperties(r,e),this.#t.set(s,r),{id:s,clipPathId:`url(#${h})`}}drawOutline(e,t){const i=Dn.#n++,s=this.#r(),r=Dn._svgFactory.createElement("defs");s.append(r);const l=Dn._svgFactory.createElement("path");r.append(l);const c=`path_${i}`;l.setAttribute("id",c),l.setAttribute("vector-effect","non-scaling-stroke");let d;if(t){const m=Dn._svgFactory.createElement("mask");r.append(m),d=`mask_${i}`,m.setAttribute("id",d),m.setAttribute("maskUnits","objectBoundingBox");const v=Dn._svgFactory.createElement("rect");m.append(v),v.setAttribute("width","1"),v.setAttribute("height","1"),v.setAttribute("fill","white");const b=Dn._svgFactory.createElement("use");m.append(b),b.setAttribute("href",`#${c}`),b.setAttribute("stroke","none"),b.setAttribute("fill","black"),b.setAttribute("fill-rule","nonzero"),b.classList.add("mask")}const h=Dn._svgFactory.createElement("use");s.append(h),h.setAttribute("href",`#${c}`),d&&h.setAttribute("mask",`url(#${d})`);const p=h.cloneNode();return s.append(p),h.classList.add("mainOutline"),p.classList.add("secondaryOutline"),this.updateProperties(s,e),this.#t.set(i,s),i}finalizeDraw(e,t){this.#i.delete(e),this.updateProperties(e,t)}updateProperties(e,t){if(!t)return;const{root:i,bbox:s,rootClass:r,path:l}=t,c=typeof e=="number"?this.#t.get(e):e;if(c){if(i&&this.#o(c,i),s&&Dn.#a(c,s),r){const{classList:d}=c;for(const[h,p]of Object.entries(r))d.toggle(h,p)}if(l){const h=c.firstElementChild.firstElementChild;this.#o(h,l)}}}updateParent(e,t){if(t===this)return;const i=this.#t.get(e);i&&(t.#e.append(i),this.#t.delete(e),t.#t.set(e,i))}remove(e){this.#i.delete(e),this.#e!==null&&(this.#t.get(e).remove(),this.#t.delete(e))}destroy(){this.#e=null;for(const e of this.#t.values())e.remove();this.#t.clear(),this.#i.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:vv};globalThis.pdfjsLib={AbortException:Ha,AnnotationEditorLayer:Js,AnnotationEditorParamsType:Ze,AnnotationEditorType:Le,AnnotationEditorUIManager:Ga,AnnotationLayer:jy,AnnotationMode:za,AnnotationType:rn,applyOpacity:C9,build:P7,ColorPicker:Fi,createValidAbsoluteUrl:b2,CSSConstants:T9,DOMSVGFactory:Ph,DrawLayer:Dn,FeatureTest:mn,fetchData:nu,findContrastColor:k9,getDocument:$2,getFilenameFromUrl:x9,getPdfFilenameFromUrl:w9,getRGB:su,getUuid:w2,getXfaPageViewport:S9,GlobalWorkerOptions:Ko,ImageKind:Jd,InvalidPDFException:lv,isDataScheme:nf,isPdfFile:ky,isValidExplicitDest:B9,MathClamp:Nn,noContextMenu:Hi,normalizeUnicode:y9,OPS:Hc,OutputScale:Rs,PagesMapper:Qe,PasswordResponses:l9,PDFDataRangeTransport:H2,PDFDateString:cv,PDFWorker:qc,PermissionFlag:o9,PixelsPerInch:rl,RenderingCancelledException:Cy,renderRichText:S2,ResponseException:Oh,setLayerDimensions:Nr,shadow:Ne,SignatureExtractor:Po,stopEvent:Gt,SupportedImageMimeTypes:uv,TextLayer:Ai,TouchManager:sf,updateUrlHash:x2,Util:he,VerbosityLevel:Jh,version:N7,XfaLayer:A2};const aq=""+new URL("pdf.worker.min-wgc6bjNh.mjs",import.meta.url).href;Ko.workerSrc=aq;const rq=[{id:"text",icon:hG,label:"Editor"},{id:"file",icon:e2,label:"File"}];function oq(){const{content:n,setContent:e,setStep:t}=la(),[i,s]=I.useState(n||""),[r,l]=I.useState("text"),[c,d]=I.useState(!1),h=I.useCallback(async w=>{const x=w[0];if(x){if(x.type==="text/plain"){const A=await x.text();s(A),l("text"),ui.success("Text file imported");return}if(x.type==="application/pdf"){try{d(!0);const A=await x.arrayBuffer(),S=await $2(A).promise;let T="";for(let E=1;E<=S.numPages;E++){const O=(await(await S.getPage(E)).getTextContent()).items.map(L=>L.str).join(" ");T+=O+"\\n"}s(T),l("text"),ui.success("PDF content extracted")}catch(A){console.error("PDF extraction failed:",A),ui.error("Failed to extract text from PDF")}finally{d(!1)}return}ui.error("Only .txt and .pdf files are supported")}},[]),{getRootProps:p,getInputProps:m,isDragActive:v}=y2({onDrop:h,noClick:!0,accept:{"text/plain":[".txt"],"application/pdf":[".pdf"]}}),b=()=>{if(!i.trim()){ui.error("Please provide content to analyze.");return}e(i,"text"),t("persona-selection")};return k.jsxs("div",{className:"h-full",...p(),children:[k.jsx("input",{...m()}),k.jsxs("div",{className:"h-full flex flex-col fade-in-up",children:[k.jsxs("section",{className:"surface-panel p-5 lg:p-7",children:[k.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-5",children:[k.jsxs("div",{children:[k.jsx("p",{className:"text-xs uppercase tracking-[0.2em] text-primary",children:"Input Pipeline"}),k.jsx("h2",{className:"mt-1 text-3xl lg:text-4xl",children:"Feed Your Content"}),k.jsx("p",{className:"mt-2 text-sm text-muted-foreground max-w-2xl leading-relaxed",children:"Paste text or drop a plain text/PDF file. We keep this step lightweight so you can move quickly during demos."})]}),k.jsxs(kh,{variant:"secondary",className:"self-start lg:self-center",children:[i.length," characters"]})]}),k.jsx("div",{className:"mt-6 inline-flex rounded-2xl p-1.5 bg-secondary/75 border border-border/80",children:rq.map(w=>{const x=w.icon,A=r===w.id;return k.jsxs("button",{type:"button",onClick:()=>l(w.id),className:Et("relative rounded-xl px-4 py-2.5 text-sm font-medium transition-colors flex items-center gap-2",A?"text-foreground":"text-muted-foreground hover:text-foreground"),children:[A&&k.jsx(Cs.div,{layoutId:"input-mode",className:"absolute inset-0 rounded-xl bg-white border border-border",transition:{type:"spring",stiffness:360,damping:30}}),k.jsx(x,{className:"relative z-10 size-4"}),k.jsx("span",{className:"relative z-10",children:w.label})]},w.id)})})]}),k.jsxs("section",{className:Et("relative mt-5 flex-1 surface-panel p-5 lg:p-7 transition-all",v&&"soft-ring"),children:[k.jsx(BT,{children:v&&k.jsx(Cs.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-4 rounded-2xl border-2 border-dashed border-primary/55 bg-primary/10 z-30 flex items-center justify-center",children:k.jsxs("div",{className:"text-center",children:[k.jsx(e2,{className:"mx-auto size-9 text-primary"}),k.jsx("p",{className:"mt-3 text-sm text-primary",children:"Drop text file to import"})]})})}),r==="text"&&k.jsx("div",{className:"h-full flex flex-col",children:k.jsx(o2,{placeholder:"Paste the script, launch copy, social post, or transcript...",className:"h-full min-h-[360px] resize-none text-[15px] leading-7 rounded-2xl bg-white",value:i,onChange:w=>s(w.target.value),spellCheck:!1})}),r==="file"&&k.jsxs("div",{className:"h-full min-h-[320px] grid place-items-center",children:[k.jsx("div",{onClick:()=>document.getElementById("hidden-file-input")?.click(),className:"w-full max-w-lg cursor-pointer rounded-2xl border-2 border-dashed border-border bg-white/70 p-10 text-center hover:border-primary/45 transition-colors",role:"button",tabIndex:0,children:c?k.jsxs(k.Fragment,{children:[k.jsx("div",{className:"mx-auto size-14 rounded-2xl bg-primary/10 text-primary flex items-center justify-center animate-pulse",children:k.jsx(Eh,{className:"size-6 animate-spin"})}),k.jsx("h3",{className:"mt-4 text-xl",children:"Processing PDF..."}),k.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"Extracting text, please wait."})]}):k.jsxs(k.Fragment,{children:[k.jsx("div",{className:"mx-auto size-12 rounded-xl bg-primary/10 text-primary flex items-center justify-center",children:k.jsx(Ay,{className:"size-5"})}),k.jsx("h3",{className:"mt-4 text-xl",children:"Import File"}),k.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"Drop a file or click to browse (.txt, .pdf)."})]})}),k.jsx("input",{type:"file",id:"hidden-file-input",className:"hidden",accept:".txt, .pdf",onChange:w=>{const x=w.target.files?.[0];x&&(h([x]),w.target.value="")}})]})]}),k.jsx("div",{className:"mt-5 flex justify-end",children:k.jsxs(sl,{onClick:b,disabled:!i.trim(),size:"lg",className:"h-12 px-6",children:[k.jsx(JM,{className:"size-4"})," Continue to Persona Setup"]})})]})]})}function lq({persona:n,isSelected:e,onToggle:t,isWildcard:i}){const r=(c=>{const d=["bg-red-100 text-red-600","bg-orange-100 text-orange-600","bg-amber-100 text-amber-600","bg-green-100 text-green-600","bg-emerald-100 text-emerald-600","bg-teal-100 text-teal-600","bg-cyan-100 text-cyan-600","bg-sky-100 text-sky-600","bg-blue-100 text-blue-600","bg-indigo-100 text-indigo-600","bg-violet-100 text-violet-600","bg-purple-100 text-purple-600","bg-fuchsia-100 text-fuchsia-600","bg-pink-100 text-pink-600","bg-rose-100 text-rose-600"];let h=0;for(let p=0;p<c.length;p++)h=c.charCodeAt(p)+((h<<5)-h);return d[Math.abs(h)%d.length]})(n.name),l=n.name.split(" ").map(c=>c[0]).join("").substring(0,2).toUpperCase();return k.jsx(Cs.div,{layout:!0,whileHover:{y:-2},whileTap:{scale:.995},className:"h-full",children:k.jsxs("div",{className:Et("surface-panel h-full flex flex-col cursor-pointer transition-all duration-200 relative overflow-hidden border-2",e?"border-blue-500 bg-blue-50/10 soft-ring":"border-border/60 hover:border-blue-300/50"),onClick:()=>t(n),children:[e&&k.jsx("div",{className:"absolute top-3 right-3 z-20 rounded-lg bg-blue-600 text-white p-1.5 shadow-sm ring-2 ring-white",children:k.jsx(VH,{className:"size-3.5"})}),i&&k.jsx("div",{className:"absolute top-3 left-3 z-20",children:k.jsxs(kh,{className:"gap-1 bg-amber-500/10 text-amber-700 border-amber-300/60",children:[k.jsx(JM,{className:"size-3"})," Wildcard"]})}),k.jsxs(_r,{className:"flex flex-row items-center gap-3 pb-1 pt-6 px-5 space-y-0",children:[k.jsx("div",{className:Et("size-12 rounded-full flex items-center justify-center shrink-0 font-bold text-sm overflow-hidden border border-border/70",r),children:n.avatar?k.jsx("img",{src:n.avatar,alt:n.name,className:"w-full h-full object-cover"}):l}),k.jsxs("div",{className:"flex flex-col min-w-0",children:[k.jsx("h3",{className:"font-serif text-lg leading-tight truncate pr-6",children:n.name}),k.jsx("p",{className:"text-[11px] text-muted-foreground uppercase tracking-[0.18em] truncate",children:n.role})]})]}),k.jsx(ea,{className:"px-5 py-3 flex-grow",children:k.jsx("p",{className:"text-sm text-foreground/80 leading-relaxed line-clamp-3",children:n.description})}),k.jsx(_y,{className:"px-5 pb-5 pt-0 flex flex-col items-start gap-2.5",children:n.painPoints&&n.painPoints.length>0&&k.jsxs("div",{className:"w-full space-y-2",children:[k.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] font-semibold text-rose-700 uppercase tracking-[0.2em]",children:[k.jsx(QM,{className:"size-3"})," Pain points"]}),k.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[n.painPoints.slice(0,3).map((c,d)=>k.jsx(kh,{variant:"secondary",className:"rounded-md text-[10px] py-0.5 px-1.5",children:c},d)),n.painPoints.length>3&&k.jsxs("span",{className:"text-[10px] text-muted-foreground self-center",children:["+",n.painPoints.length-3]})]})]})})]})})}const eR=I.forwardRef(({className:n,checked:e,onCheckedChange:t,...i},s)=>k.jsx("button",{type:"button",role:"switch","aria-checked":e,onClick:()=>t?.(!e),className:Et("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border border-primary/20 transition-colors duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",e?"bg-primary":"bg-secondary",n),ref:s,...i,children:k.jsx("span",{className:Et("pointer-events-none block h-5 w-5 rounded-full bg-white shadow-sm ring-0 transition-transform duration-200",e?"translate-x-5":"translate-x-0")})}));eR.displayName="Switch";function Ro({className:n,...e}){return k.jsx("div",{className:Et("animate-pulse rounded-md bg-muted",n),...e})}function cq(){const{generatedPersonas:n,selectedPersonas:e,togglePersonaSelection:t,setStep:i,generateWildcardPersona:s,generateInitialPersonas:r,isGeneratingPersonas:l,isGeneratingWildcard:c,contentMode:d,setContentMode:h}=la();I.useEffect(()=>{r()},[r]);const p=()=>{if(e.length===0){ui.error("Pick at least one persona.");return}i("analysis")},m=async()=>{try{await s(),ui.success("Wildcard persona generated")}catch{ui.error("Failed to generate wildcard persona.")}};return k.jsxs("div",{className:"h-full flex flex-col gap-5 fade-in-up",children:[k.jsx("section",{className:"surface-panel p-5 lg:p-7",children:k.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center xl:justify-between gap-4",children:[k.jsxs("div",{children:[k.jsx("p",{className:"text-xs uppercase tracking-[0.2em] text-primary",children:"Persona Deck"}),k.jsx("h2",{className:"mt-1 text-3xl",children:"Choose Your Reviewers"}),k.jsx("p",{className:"mt-2 text-sm text-muted-foreground max-w-2xl",children:"Select the voices that should evaluate your content. Combine customer lenses, skeptics, and a wildcard to stress-test your message."})]}),k.jsxs("div",{className:Et("rounded-2xl border px-4 py-3 flex items-center gap-3",d==="crisis"?"border-rose-300 bg-rose-50":"border-border bg-white/70"),children:[k.jsxs("div",{className:"text-right",children:[k.jsx(Ey,{htmlFor:"crisis-mode",className:"text-sm font-semibold",children:d==="crisis"?"Crisis Simulation":"Standard Mode"}),k.jsx("p",{className:"text-[10px] uppercase tracking-[0.16em] text-muted-foreground",children:d==="crisis"?"High-hostility prompts":"Balanced prompts"})]}),k.jsx(eR,{id:"crisis-mode",checked:d==="crisis",onCheckedChange:v=>h(v?"crisis":"standard"),className:"data-[state=checked]:bg-rose-600"}),d==="crisis"&&k.jsx(QM,{className:"size-4 text-rose-600"})]})]})}),k.jsxs("section",{className:"relative flex-1 surface-panel p-5 lg:p-7 min-h-[420px]",children:[l?k.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Array.from({length:4}).map((v,b)=>k.jsxs("div",{className:"rounded-2xl border border-border/70 bg-white/65 p-5 space-y-4",children:[k.jsxs("div",{className:"flex items-center gap-3",children:[k.jsx(Ro,{className:"size-12 rounded-full"}),k.jsxs("div",{className:"space-y-2 w-full",children:[k.jsx(Ro,{className:"h-4 w-28"}),k.jsx(Ro,{className:"h-3 w-40"})]})]}),k.jsx(Ro,{className:"h-3.5 w-full"}),k.jsx(Ro,{className:"h-3.5 w-5/6"}),k.jsx(Ro,{className:"h-3.5 w-3/4"})]},b))}):k.jsxs(k.Fragment,{children:[k.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pb-20",children:[n.map(v=>k.jsx(lq,{persona:v,isSelected:e.some(b=>b.id===v.id),onToggle:()=>t(v),isWildcard:v.id.startsWith("wildcard")},v.id)),k.jsxs(Cs.button,{type:"button",whileHover:{y:-2},whileTap:{scale:.995},onClick:m,disabled:c,className:"surface-panel h-full min-h-[240px] rounded-2xl border border-dashed border-primary/35 hover:border-primary/55 transition-colors flex flex-col items-center justify-center gap-3",children:[k.jsx("div",{className:"size-14 rounded-2xl bg-primary/10 flex items-center justify-center text-primary",children:c?k.jsx(Eh,{className:"size-6 animate-spin"}):k.jsx(nG,{className:"size-6"})}),k.jsx("h3",{className:"text-xl",children:"Summon Wildcard"}),k.jsx("p",{className:"text-sm text-muted-foreground",children:"Generate one additional random persona."})]})]}),k.jsx("div",{className:"sticky bottom-0 pt-5 bg-gradient-to-t from-background via-background/92 to-transparent",children:k.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[k.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.length," selected",e.length>0?": ready for analysis.":", select at least one persona."]}),k.jsxs(sl,{onClick:p,disabled:e.length===0,size:"lg",className:"h-12 px-6",children:["Start Analysis ",k.jsx(wy,{className:"size-4"})]})]})})]}),l&&k.jsx("div",{className:"absolute inset-0 bg-background/45 backdrop-blur-[2px] grid place-items-center rounded-2xl",children:k.jsxs("div",{className:"surface-panel px-5 py-4 flex items-center gap-3",children:[k.jsx(Eh,{className:"size-5 animate-spin text-primary"}),k.jsx("p",{className:"text-sm",children:"Generating personas..."})]})})]})]})}function uq(){const{content:n,selectedPersonas:e,setInterviewResults:t,setFinalReport:i,isAnalyzing:s,setIsAnalyzing:r,setStep:l,contentMode:c}=la(),{getApiKey:d}=Sh(),[h,p]=I.useState([]),[m,v]=I.useState("Initializing analysis..."),[b,w]=I.useState(0),x=I.useCallback(async()=>{const A=d();if(!A)return;r(!0),p([]);const S=[];try{for(let T=0;T<e.length;T++){const E=e[T];v(`Interviewing ${E.name}...`),await new Promise(M=>setTimeout(M,500));try{const M=await R$(n,E,A,c);S.push(M),p(R=>[...R,E.id])}catch(M){console.error(`Error interviewing ${E.name}:`,M),ui.error(`Failed to interview ${E.name}`)}w((T+1)/e.length*82)}if(t(S),S.length>0){v("Synthesizing final report..."),await new Promise(E=>setTimeout(E,700));const T=await D$(S,A,c);i(T),w(100),setTimeout(()=>{l("report")},600)}else ui.error("No interviews completed successfully."),l("persona-selection")}catch(T){console.error(T),ui.error("Analysis failed")}finally{r(!1)}},[n,c,d,e,i,t,r,l]);return I.useEffect(()=>{!s&&e.length>0&&h.length===0&&x()},[h.length,s,x,e.length]),k.jsxs("div",{className:"h-full flex flex-col gap-5 fade-in-up",children:[k.jsx("section",{className:"surface-panel p-5 lg:p-7",children:k.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-end lg:justify-between gap-3",children:[k.jsxs("div",{children:[k.jsx("p",{className:"text-xs uppercase tracking-[0.2em] text-primary",children:"Live Processing"}),k.jsx("h2",{className:"mt-1 text-3xl lg:text-4xl",children:c==="crisis"?"Stress Testing Narrative":"Running Resonance Analysis"}),k.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"We are interviewing selected personas and generating a consolidated report."})]}),k.jsxs("div",{className:"rounded-xl border border-primary/30 bg-primary/10 px-3 py-2 text-sm text-primary inline-flex items-center gap-2",children:[k.jsx(XM,{className:"size-4"})," ",h.length,"/",e.length," complete"]})]})}),k.jsxs("section",{className:"grid grid-cols-1 xl:grid-cols-5 gap-5 flex-1",children:[k.jsxs(_s,{className:"xl:col-span-2 p-6 flex items-center justify-center relative overflow-hidden",children:[k.jsx("div",{className:"absolute -top-16 -right-16 size-48 bg-primary/15 rounded-full blur-3xl"}),k.jsxs("div",{className:"text-center relative z-10",children:[k.jsx("div",{className:"mx-auto size-44 rounded-full border-8 border-primary/15 bg-white grid place-items-center ambient-loader",children:k.jsx("div",{className:"size-28 rounded-full bg-primary/10 text-primary grid place-items-center",children:k.jsx(FH,{className:"size-11"})})}),k.jsxs(Cs.p,{className:"mt-5 text-5xl font-bold text-primary",initial:{opacity:.5,y:3},animate:{opacity:1,y:0},children:[Math.round(b),"%"]},Math.round(b)),k.jsx("p",{className:"text-xs uppercase tracking-[0.2em] text-muted-foreground mt-1",children:"Pipeline Progress"})]})]}),k.jsx(_s,{className:"xl:col-span-3 p-0 overflow-hidden",children:k.jsxs(ea,{className:"p-0 h-full flex flex-col",children:[k.jsx("div",{className:"px-5 py-4 border-b border-border bg-white/70 flex items-center justify-between",children:k.jsxs("p",{className:"text-sm text-foreground flex items-center gap-2",children:[k.jsx(Eh,{className:"size-4 animate-spin text-primary"})," ",m]})}),k.jsx("div",{className:"p-4 sm:p-5 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:e.map(A=>{const S=h.includes(A.id),T=!S&&m.includes(A.name);return k.jsx("div",{className:`rounded-xl border p-3 transition-colors ${S?"border-emerald-300 bg-emerald-50":T?"border-primary/50 bg-primary/10":"border-border bg-white/75"}`,children:k.jsxs("div",{className:"flex items-center gap-2",children:[k.jsx("div",{className:"size-9 rounded-lg bg-secondary flex items-center justify-center overflow-hidden",children:A.avatar?k.jsx("img",{src:A.avatar,alt:A.name,className:"size-full object-cover"}):k.jsx(jH,{className:"size-4 text-muted-foreground"})}),k.jsxs("div",{className:"min-w-0",children:[k.jsx("p",{className:"text-sm font-medium truncate",children:A.name}),k.jsx("p",{className:"text-[11px] text-muted-foreground uppercase tracking-[0.15em] truncate",children:S?"Complete":T?"In progress":"Queued"})]}),S&&k.jsx(WM,{className:"size-4 text-emerald-600 ml-auto"})]})},A.id)})})]})})]})]})}function ia(n,e,{checkForDefaultPrevented:t=!0}={}){return function(s){if(n?.(s),t===!1||!s.defaultPrevented)return e?.(s)}}function Vy(n,e=[]){let t=[];function i(r,l){const c=I.createContext(l),d=t.length;t=[...t,l];const h=m=>{const{scope:v,children:b,...w}=m,x=v?.[n]?.[d]||c,A=I.useMemo(()=>w,Object.values(w));return k.jsx(x.Provider,{value:A,children:b})};h.displayName=r+"Provider";function p(m,v){const b=v?.[n]?.[d]||c,w=I.useContext(b);if(w)return w;if(l!==void 0)return l;throw new Error(`\`${m}\` must be used within \`${r}\``)}return[h,p]}const s=()=>{const r=t.map(l=>I.createContext(l));return function(c){const d=c?.[n]||r;return I.useMemo(()=>({[`__scope${n}`]:{...c,[n]:d}}),[c,d])}};return s.scopeName=n,[i,dq(s,...e)]}function dq(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const i=n.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(r){const l=i.reduce((c,{useScope:d,scopeName:h})=>{const m=d(r)[`__scope${h}`];return{...c,...m}},{});return I.useMemo(()=>({[`__scope${e.scopeName}`]:l}),[l])}};return t.scopeName=e.scopeName,t}function dE(n){const e=hq(n),t=I.forwardRef((i,s)=>{const{children:r,...l}=i,c=I.Children.toArray(r),d=c.find(pq);if(d){const h=d.props.children,p=c.map(m=>m===d?I.Children.count(h)>1?I.Children.only(null):I.isValidElement(h)?h.props.children:null:m);return k.jsx(e,{...l,ref:s,children:I.isValidElement(h)?I.cloneElement(h,void 0,p):null})}return k.jsx(e,{...l,ref:s,children:r})});return t.displayName=`${n}.Slot`,t}function hq(n){const e=I.forwardRef((t,i)=>{const{children:s,...r}=t;if(I.isValidElement(s)){const l=gq(s),c=mq(r,s.props);return s.type!==I.Fragment&&(c.ref=i?Kh(i,l):l),I.cloneElement(s,c)}return I.Children.count(s)>1?I.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var fq=Symbol("radix.slottable");function pq(n){return I.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===fq}function mq(n,e){const t={...e};for(const i in e){const s=n[i],r=e[i];/^on[A-Z]/.test(i)?s&&r?t[i]=(...c)=>{const d=r(...c);return s(...c),d}:s&&(t[i]=s):i==="style"?t[i]={...s,...r}:i==="className"&&(t[i]=[s,r].filter(Boolean).join(" "))}return{...n,...t}}function gq(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function vq(n){const e=n+"CollectionProvider",[t,i]=Vy(e),[s,r]=t(e,{collectionRef:{current:null},itemMap:new Map}),l=x=>{const{scope:A,children:S}=x,T=re.useRef(null),E=re.useRef(new Map).current;return k.jsx(s,{scope:A,itemMap:E,collectionRef:T,children:S})};l.displayName=e;const c=n+"CollectionSlot",d=dE(c),h=re.forwardRef((x,A)=>{const{scope:S,children:T}=x,E=r(c,S),M=Th(A,E.collectionRef);return k.jsx(d,{ref:M,children:T})});h.displayName=c;const p=n+"CollectionItemSlot",m="data-radix-collection-item",v=dE(p),b=re.forwardRef((x,A)=>{const{scope:S,children:T,...E}=x,M=re.useRef(null),R=Th(A,M),O=r(p,S);return re.useEffect(()=>(O.itemMap.set(M,{ref:M,...E}),()=>{O.itemMap.delete(M)})),k.jsx(v,{[m]:"",ref:R,children:T})});b.displayName=p;function w(x){const A=r(n+"CollectionConsumer",x);return re.useCallback(()=>{const T=A.collectionRef.current;if(!T)return[];const E=Array.from(T.querySelectorAll(`[${m}]`));return Array.from(A.itemMap.values()).sort((O,L)=>E.indexOf(O.ref.current)-E.indexOf(L.ref.current))},[A.collectionRef,A.itemMap])}return[{Provider:l,Slot:h,ItemSlot:b},w,i]}var Ih=globalThis?.document?I.useLayoutEffect:()=>{},yq=Av[" useId ".trim().toString()]||(()=>{}),bq=0;function tR(n){const[e,t]=I.useState(yq());return Ih(()=>{t(i=>i??String(bq++))},[n]),e?`radix-${e}`:""}function xq(n){const e=wq(n),t=I.forwardRef((i,s)=>{const{children:r,...l}=i,c=I.Children.toArray(r),d=c.find(Sq);if(d){const h=d.props.children,p=c.map(m=>m===d?I.Children.count(h)>1?I.Children.only(null):I.isValidElement(h)?h.props.children:null:m);return k.jsx(e,{...l,ref:s,children:I.isValidElement(h)?I.cloneElement(h,void 0,p):null})}return k.jsx(e,{...l,ref:s,children:r})});return t.displayName=`${n}.Slot`,t}function wq(n){const e=I.forwardRef((t,i)=>{const{children:s,...r}=t;if(I.isValidElement(s)){const l=Eq(s),c=_q(r,s.props);return s.type!==I.Fragment&&(c.ref=i?Kh(i,l):l),I.cloneElement(s,c)}return I.Children.count(s)>1?I.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var Aq=Symbol("radix.slottable");function Sq(n){return I.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===Aq}function _q(n,e){const t={...e};for(const i in e){const s=n[i],r=e[i];/^on[A-Z]/.test(i)?s&&r?t[i]=(...c)=>{const d=r(...c);return s(...c),d}:s&&(t[i]=s):i==="style"?t[i]={...s,...r}:i==="className"&&(t[i]=[s,r].filter(Boolean).join(" "))}return{...n,...t}}function Eq(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var Tq=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],fl=Tq.reduce((n,e)=>{const t=xq(`Primitive.${e}`),i=I.forwardRef((s,r)=>{const{asChild:l,...c}=s,d=l?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),k.jsx(d,{...c,ref:r})});return i.displayName=`Primitive.${e}`,{...n,[e]:i}},{});function Cq(n){const e=I.useRef(n);return I.useEffect(()=>{e.current=n}),I.useMemo(()=>(...t)=>e.current?.(...t),[])}var kq=Av[" useInsertionEffect ".trim().toString()]||Ih;function nR({prop:n,defaultProp:e,onChange:t=()=>{},caller:i}){const[s,r,l]=Mq({defaultProp:e,onChange:t}),c=n!==void 0,d=c?n:s;{const p=I.useRef(n!==void 0);I.useEffect(()=>{const m=p.current;m!==c&&console.warn(`${i} is changing from ${m?"controlled":"uncontrolled"} to ${c?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),p.current=c},[c,i])}const h=I.useCallback(p=>{if(c){const m=Rq(p)?p(n):p;m!==n&&l.current?.(m)}else r(p)},[c,n,r,l]);return[d,h]}function Mq({defaultProp:n,onChange:e}){const[t,i]=I.useState(n),s=I.useRef(t),r=I.useRef(e);return kq(()=>{r.current=e},[e]),I.useEffect(()=>{s.current!==t&&(r.current?.(t),s.current=t)},[t,s]),[t,i,r]}function Rq(n){return typeof n=="function"}var Dq=I.createContext(void 0);function iR(n){const e=I.useContext(Dq);return n||e||"ltr"}var bg="rovingFocusGroup.onEntryFocus",Oq={bubbles:!1,cancelable:!0},ou="RovingFocusGroup",[xv,sR,Nq]=vq(ou),[Pq,aR]=Vy(ou,[Nq]),[Iq,Lq]=Pq(ou),rR=I.forwardRef((n,e)=>k.jsx(xv.Provider,{scope:n.__scopeRovingFocusGroup,children:k.jsx(xv.Slot,{scope:n.__scopeRovingFocusGroup,children:k.jsx(zq,{...n,ref:e})})}));rR.displayName=ou;var zq=I.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:i,loop:s=!1,dir:r,currentTabStopId:l,defaultCurrentTabStopId:c,onCurrentTabStopIdChange:d,onEntryFocus:h,preventScrollOnEntryFocus:p=!1,...m}=n,v=I.useRef(null),b=Th(e,v),w=iR(r),[x,A]=nR({prop:l,defaultProp:c??null,onChange:d,caller:ou}),[S,T]=I.useState(!1),E=Cq(h),M=sR(t),R=I.useRef(!1),[O,L]=I.useState(0);return I.useEffect(()=>{const D=v.current;if(D)return D.addEventListener(bg,E),()=>D.removeEventListener(bg,E)},[E]),k.jsx(Iq,{scope:t,orientation:i,dir:w,loop:s,currentTabStopId:x,onItemFocus:I.useCallback(D=>A(D),[A]),onItemShiftTab:I.useCallback(()=>T(!0),[]),onFocusableItemAdd:I.useCallback(()=>L(D=>D+1),[]),onFocusableItemRemove:I.useCallback(()=>L(D=>D-1),[]),children:k.jsx(fl.div,{tabIndex:S||O===0?-1:0,"data-orientation":i,...m,ref:b,style:{outline:"none",...n.style},onMouseDown:ia(n.onMouseDown,()=>{R.current=!0}),onFocus:ia(n.onFocus,D=>{const $=!R.current;if(D.target===D.currentTarget&&$&&!S){const ee=new CustomEvent(bg,Oq);if(D.currentTarget.dispatchEvent(ee),!ee.defaultPrevented){const X=M().filter(N=>N.focusable),le=X.find(N=>N.active),de=X.find(N=>N.id===x),fe=[le,de,...X].filter(Boolean).map(N=>N.ref.current);cR(fe,p)}}R.current=!1}),onBlur:ia(n.onBlur,()=>T(!1))})})}),oR="RovingFocusGroupItem",lR=I.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:i=!0,active:s=!1,tabStopId:r,children:l,...c}=n,d=tR(),h=r||d,p=Lq(oR,t),m=p.currentTabStopId===h,v=sR(t),{onFocusableItemAdd:b,onFocusableItemRemove:w,currentTabStopId:x}=p;return I.useEffect(()=>{if(i)return b(),()=>w()},[i,b,w]),k.jsx(xv.ItemSlot,{scope:t,id:h,focusable:i,active:s,children:k.jsx(fl.span,{tabIndex:m?0:-1,"data-orientation":p.orientation,...c,ref:e,onMouseDown:ia(n.onMouseDown,A=>{i?p.onItemFocus(h):A.preventDefault()}),onFocus:ia(n.onFocus,()=>p.onItemFocus(h)),onKeyDown:ia(n.onKeyDown,A=>{if(A.key==="Tab"&&A.shiftKey){p.onItemShiftTab();return}if(A.target!==A.currentTarget)return;const S=Fq(A,p.orientation,p.dir);if(S!==void 0){if(A.metaKey||A.ctrlKey||A.altKey||A.shiftKey)return;A.preventDefault();let E=v().filter(M=>M.focusable).map(M=>M.ref.current);if(S==="last")E.reverse();else if(S==="prev"||S==="next"){S==="prev"&&E.reverse();const M=E.indexOf(A.currentTarget);E=p.loop?Uq(E,M+1):E.slice(M+1)}setTimeout(()=>cR(E))}}),children:typeof l=="function"?l({isCurrentTabStop:m,hasTabStop:x!=null}):l})})});lR.displayName=oR;var jq={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Bq(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function Fq(n,e,t){const i=Bq(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(i))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(i)))return jq[i]}function cR(n,e=!1){const t=document.activeElement;for(const i of n)if(i===t||(i.focus({preventScroll:e}),document.activeElement!==t))return}function Uq(n,e){return n.map((t,i)=>n[(e+i)%n.length])}var Vq=rR,$q=lR;function Hq(n,e){return I.useReducer((t,i)=>e[t][i]??t,n)}var uR=n=>{const{present:e,children:t}=n,i=Gq(e),s=typeof t=="function"?t({present:i.isPresent}):I.Children.only(t),r=Th(i.ref,qq(s));return typeof t=="function"||i.isPresent?I.cloneElement(s,{ref:r}):null};uR.displayName="Presence";function Gq(n){const[e,t]=I.useState(),i=I.useRef(null),s=I.useRef(n),r=I.useRef("none"),l=n?"mounted":"unmounted",[c,d]=Hq(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return I.useEffect(()=>{const h=$d(i.current);r.current=c==="mounted"?h:"none"},[c]),Ih(()=>{const h=i.current,p=s.current;if(p!==n){const v=r.current,b=$d(h);n?d("MOUNT"):b==="none"||h?.display==="none"?d("UNMOUNT"):d(p&&v!==b?"ANIMATION_OUT":"UNMOUNT"),s.current=n}},[n,d]),Ih(()=>{if(e){let h;const p=e.ownerDocument.defaultView??window,m=b=>{const x=$d(i.current).includes(CSS.escape(b.animationName));if(b.target===e&&x&&(d("ANIMATION_END"),!s.current)){const A=e.style.animationFillMode;e.style.animationFillMode="forwards",h=p.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=A)})}},v=b=>{b.target===e&&(r.current=$d(i.current))};return e.addEventListener("animationstart",v),e.addEventListener("animationcancel",m),e.addEventListener("animationend",m),()=>{p.clearTimeout(h),e.removeEventListener("animationstart",v),e.removeEventListener("animationcancel",m),e.removeEventListener("animationend",m)}}else d("ANIMATION_END")},[e,d]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:I.useCallback(h=>{i.current=h?getComputedStyle(h):null,t(h)},[])}}function $d(n){return n?.animationName||"none"}function qq(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var df="Tabs",[Zq]=Vy(df,[aR]),dR=aR(),[Yq,$y]=Zq(df),hR=I.forwardRef((n,e)=>{const{__scopeTabs:t,value:i,onValueChange:s,defaultValue:r,orientation:l="horizontal",dir:c,activationMode:d="automatic",...h}=n,p=iR(c),[m,v]=nR({prop:i,onChange:s,defaultProp:r??"",caller:df});return k.jsx(Yq,{scope:t,baseId:tR(),value:m,onValueChange:v,orientation:l,dir:p,activationMode:d,children:k.jsx(fl.div,{dir:p,"data-orientation":l,...h,ref:e})})});hR.displayName=df;var fR="TabsList",pR=I.forwardRef((n,e)=>{const{__scopeTabs:t,loop:i=!0,...s}=n,r=$y(fR,t),l=dR(t);return k.jsx(Vq,{asChild:!0,...l,orientation:r.orientation,dir:r.dir,loop:i,children:k.jsx(fl.div,{role:"tablist","aria-orientation":r.orientation,...s,ref:e})})});pR.displayName=fR;var mR="TabsTrigger",gR=I.forwardRef((n,e)=>{const{__scopeTabs:t,value:i,disabled:s=!1,...r}=n,l=$y(mR,t),c=dR(t),d=bR(l.baseId,i),h=xR(l.baseId,i),p=i===l.value;return k.jsx($q,{asChild:!0,...c,focusable:!s,active:p,children:k.jsx(fl.button,{type:"button",role:"tab","aria-selected":p,"aria-controls":h,"data-state":p?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:d,...r,ref:e,onMouseDown:ia(n.onMouseDown,m=>{!s&&m.button===0&&m.ctrlKey===!1?l.onValueChange(i):m.preventDefault()}),onKeyDown:ia(n.onKeyDown,m=>{[" ","Enter"].includes(m.key)&&l.onValueChange(i)}),onFocus:ia(n.onFocus,()=>{const m=l.activationMode!=="manual";!p&&!s&&m&&l.onValueChange(i)})})})});gR.displayName=mR;var vR="TabsContent",yR=I.forwardRef((n,e)=>{const{__scopeTabs:t,value:i,forceMount:s,children:r,...l}=n,c=$y(vR,t),d=bR(c.baseId,i),h=xR(c.baseId,i),p=i===c.value,m=I.useRef(p);return I.useEffect(()=>{const v=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(v)},[]),k.jsx(uR,{present:s||p,children:({present:v})=>k.jsx(fl.div,{"data-state":p?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":d,hidden:!v,id:h,tabIndex:0,...l,ref:e,style:{...n.style,animationDuration:m.current?"0s":void 0},children:v&&r})})});yR.displayName=vR;function bR(n,e){return`${n}-trigger-${e}`}function xR(n,e){return`${n}-content-${e}`}var Xq=hR,wR=pR,AR=gR,SR=yR;const Wq=Xq,_R=I.forwardRef(({className:n,...e},t)=>k.jsx(wR,{ref:t,className:Et("inline-flex items-center justify-center rounded-xl bg-secondary/70 p-1 text-muted-foreground",n),...e}));_R.displayName=wR.displayName;const ER=I.forwardRef(({className:n,...e},t)=>k.jsx(AR,{ref:t,className:Et("inline-flex items-center justify-center whitespace-nowrap rounded-lg px-3 py-1.5 text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-white data-[state=active]:text-foreground data-[state=active]:shadow-sm hover:text-foreground",n),...e}));ER.displayName=AR.displayName;const TR=I.forwardRef(({className:n,...e},t)=>k.jsx(SR,{ref:t,className:Et("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n),...e}));TR.displayName=SR.displayName;const Kq=n=>Array.from({length:n},()=>Math.random()*.8+.2);function Jq(){const{finalReport:n,interviewResults:e,reset:t,contentMode:i}=la(),[s,r]=I.useState(e?.[0]?.personaName),[l]=I.useState(()=>Kq(34)),c=Qv(0),d=n?.overallScore||0,h=d<=1?d*10:d,p=Hz(c,{damping:22,stiffness:95}),m=QT(p,w=>w.toFixed(1));I.useEffect(()=>{n&&c.set(h)},[n,c,h]);const v=()=>{if(!n)return;const w=[`VIBECHECK SIMULATOR REPORT - ${i==="crisis"?"CRISIS MODE":"STANDARD MODE"}`,`Generated: ${new Date().toLocaleString()}`,`Overall Score: ${n.overallScore}/10`,`Executive Summary:
${n.executiveSummary}`,`
--- AUDIENCE ALIGNMENT ---`,...n.audienceAlignment.map(T=>`- ${T.audience}: ${T.alignmentScore}/10
  Takeaway: ${T.keyTakeaway}`),`
--- STRATEGIC ANALYSIS ---`,`Strengths:
${n.topStrengths.map(T=>`- ${T}`).join(`
`)}`,`Weaknesses:
${n.topWeaknesses.map(T=>`- ${T}`).join(`
`)}`,`
--- ACTIONABLE RECOMMENDATIONS ---`,...n.actionableRecommendations.map(T=>`[${T.impact}] ${T.area}: ${T.suggestion}`),`
--- TONE ANALYSIS ---`,`Defensiveness: ${n.toneAnalysis.defensiveness}/10`,`Corporate Speak: ${n.toneAnalysis.corporatespeak}/10`,`Empathy: ${n.toneAnalysis.empathy}/10`,`Clarity: ${n.toneAnalysis.clarity}/10`,`
--- GO/NO-GO DECISION ---`,`Decision: ${n.goNoGo.decision} (${n.goNoGo.confidenceScore}% Confidence)`,`Reasoning: ${n.goNoGo.reasoning}`,`
=== PERSONA DEEP DIVES ===`,...e.map(T=>`
[${T.personaName} - ${T.personaRole}]
Score: ${T.resonanceScore}/10
Summary: ${T.summary}
Strengths: ${T.strengths.join(", ")}
Friction: ${T.confusionPoints.join(", ")}
Suggestions: ${T.suggestions.join(", ")}`)],x=new Blob([w.join(`

`)],{type:"text/plain"}),A=URL.createObjectURL(x),S=document.createElement("a");S.href=A,S.download=`vibecheck-report-${new Date().toISOString().split("T")[0]}.txt`,document.body.appendChild(S),S.click(),document.body.removeChild(S),URL.revokeObjectURL(A),ui.success("Report downloaded as text file")};if(!n)return null;const b=w=>w>=8?"text-emerald-600":w>=5?"text-amber-600":"text-rose-600";return k.jsxs("div",{id:"report-content",className:"h-full flex flex-col gap-5 fade-in-up pb-4",children:[k.jsxs("section",{className:"surface-panel p-5 lg:p-7 flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[k.jsxs("div",{children:[k.jsxs("div",{className:"flex items-center gap-2",children:[k.jsx("h2",{className:"text-3xl",children:i==="crisis"?"Risk Assessment":"Resonance Report"}),k.jsx(kh,{variant:i==="crisis"?"destructive":"default",children:i==="crisis"?"Crisis Mode":"Standard Mode"})]}),k.jsxs("p",{className:"mt-2 text-sm text-muted-foreground",children:["Generated ",new Date().toLocaleDateString(),"  ",e.length," personas evaluated"]})]}),k.jsxs("div",{className:"flex flex-wrap gap-2 no-export",children:[k.jsxs(sl,{variant:"outline",onClick:t,children:[k.jsx(rG,{className:"size-4"})," Run Again"]}),k.jsxs(sl,{onClick:v,children:[k.jsx(Ay,{className:"size-4"})," Export Report"]})]})]}),k.jsxs("section",{className:"grid grid-cols-1 xl:grid-cols-12 gap-5",children:[k.jsxs("div",{className:"xl:col-span-7 space-y-5",children:[k.jsx(_s,{className:"overflow-hidden",children:k.jsxs(ea,{className:"p-6",children:[k.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[k.jsxs("div",{children:[k.jsx("p",{className:"text-xs uppercase tracking-[0.2em] text-muted-foreground",children:"Overall Resonance"}),k.jsxs("div",{className:"flex items-end gap-2 mt-1",children:[k.jsx(Cs.span,{className:`text-7xl leading-none font-bold ${b(h)}`,children:m}),k.jsx("span",{className:"text-xl text-muted-foreground pb-2",children:"/ 10"})]})]}),n.goNoGo&&k.jsxs("div",{className:`rounded-xl border px-4 py-3 text-center ${n.goNoGo.decision==="GO"?"bg-emerald-50 border-emerald-300 text-emerald-700":n.goNoGo.decision==="NO-GO"?"bg-rose-50 border-rose-300 text-rose-700":"bg-amber-50 border-amber-300 text-amber-700"}`,children:[k.jsx("p",{className:"text-xl font-semibold",children:n.goNoGo.decision}),k.jsxs("p",{className:"text-xs uppercase tracking-[0.16em]",children:[n.goNoGo.confidenceScore,"% confidence"]})]})]}),k.jsxs("div",{className:"mt-6",children:[k.jsxs("p",{className:"text-xs uppercase tracking-[0.18em] text-muted-foreground flex items-center gap-1.5",children:[k.jsx(XM,{className:"size-3.5"})," Sentiment Distribution"]}),k.jsx("div",{className:"h-24 mt-3 flex items-end gap-1.5",children:l.map((w,x)=>k.jsx(Cs.div,{initial:{height:0},animate:{height:`${w*100}%`},transition:{delay:x*.015,duration:.45},className:`flex-1 rounded-full ${w>.7?"bg-emerald-500/80":w>.4?"bg-primary/80":"bg-rose-500/75"}`},x))})]})]})}),k.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:n.toneAnalysis&&[{label:"Defense",value:n.toneAnalysis.defensiveness,color:"text-rose-600"},{label:"Jargon",value:n.toneAnalysis.corporatespeak,color:"text-blue-600"},{label:"Empathy",value:n.toneAnalysis.empathy,color:"text-purple-600"},{label:"Clarity",value:n.toneAnalysis.clarity,color:"text-emerald-600"}].map((w,x)=>k.jsxs(_s,{className:"p-4 text-center",children:[k.jsx("p",{className:"text-[10px] uppercase tracking-[0.18em] text-muted-foreground",children:w.label}),k.jsx("p",{className:`text-2xl mt-2 font-bold ${w.color}`,children:w.value})]},x))})]}),k.jsx("div",{className:"xl:col-span-5",children:k.jsxs(_s,{className:"h-full",children:[k.jsx(_r,{className:"pb-2",children:k.jsxs(Vo,{className:"flex items-center gap-2",children:[k.jsx(sG,{className:"size-4 text-primary"})," Executive Summary"]})}),k.jsxs(ea,{children:[k.jsx("p",{className:"text-sm leading-7 text-foreground/90",children:n.executiveSummary}),n.goNoGo&&k.jsxs("div",{className:"mt-5 rounded-xl border border-border bg-secondary/55 p-4",children:[k.jsxs("p",{className:"text-xs uppercase tracking-[0.18em] text-muted-foreground flex items-center gap-1.5",children:[k.jsx(cG,{className:"size-3.5"})," Strategic Direction"]}),k.jsx("p",{className:"text-sm mt-2 leading-6",children:n.goNoGo.reasoning})]})]})]})})]}),k.jsxs("section",{className:"surface-panel p-5 lg:p-6",children:[k.jsx("h3",{className:"text-2xl",children:"Persona Deep Dive"}),k.jsxs(Wq,{defaultValue:s,onValueChange:r,className:"w-full mt-4",children:[k.jsx("div",{className:"overflow-x-auto pb-2",children:k.jsx(_R,{className:"w-max",children:e.map(w=>k.jsx(ER,{value:w.personaName,children:w.personaName},w.personaName))})}),e.map(w=>k.jsx(TR,{value:w.personaName,className:"mt-4",children:k.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[k.jsxs(_s,{className:"border-emerald-300/70 bg-emerald-50/70",children:[k.jsx(_r,{className:"pb-2",children:k.jsxs(Vo,{className:"text-sm font-medium text-emerald-700 flex items-center gap-2",children:[k.jsx(WM,{className:"size-4"})," What Resonated"]})}),k.jsx(ea,{children:k.jsx("ul",{className:"space-y-2.5",children:w.strengths.map((x,A)=>k.jsxs("li",{className:"text-sm flex gap-2",children:[k.jsx("span",{className:"text-emerald-700 mt-1",children:""}),x]},A))})})]}),k.jsxs(_s,{className:"border-rose-300/70 bg-rose-50/75",children:[k.jsx(_r,{className:"pb-2",children:k.jsxs(Vo,{className:"text-sm font-medium text-rose-700 flex items-center gap-2",children:[k.jsx(GH,{className:"size-4"})," Friction Points"]})}),k.jsx(ea,{children:k.jsx("ul",{className:"space-y-2.5",children:w.confusionPoints.map((x,A)=>k.jsxs("li",{className:"text-sm flex gap-2",children:[k.jsx("span",{className:"text-rose-700 mt-1",children:""}),x]},A))})})]}),k.jsxs(_s,{className:"border-primary/30 bg-primary/5",children:[k.jsx(_r,{className:"pb-2",children:k.jsxs(Vo,{className:"text-sm font-medium text-primary flex items-center gap-2",children:[k.jsx(KH,{className:"size-4"})," Suggestions"]})}),k.jsx(ea,{children:k.jsx("ul",{className:"space-y-2.5",children:w.suggestions.map((x,A)=>k.jsxs("li",{className:"text-sm flex gap-2",children:[k.jsx(wy,{className:"size-4 mt-0.5 text-primary"}),x]},A))})})]})]})},w.personaName))]})]})]})}const Qq=({...n})=>k.jsx(r8,{theme:"light",className:"toaster group",toastOptions:{classNames:{toast:"group toast border border-border bg-white text-foreground shadow-lg rounded-xl",description:"text-muted-foreground",actionButton:"bg-primary text-primary-foreground",cancelButton:"bg-secondary text-secondary-foreground"}},...n});function eZ(){const{currentStep:n}=la(),e=()=>{switch(n){case"api-key":return k.jsx(x_,{});case"content-input":return k.jsx(oq,{});case"persona-selection":return k.jsx(cq,{});case"analysis":return k.jsx(uq,{});case"report":return k.jsx(Jq,{});default:return k.jsx(x_,{})}};return k.jsxs(k.Fragment,{children:[k.jsx(yG,{children:k.jsx(BT,{mode:"wait",children:k.jsx(Cs.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},className:"h-full",children:e()},n)})}),k.jsx(Qq,{})]})}ZO.createRoot(document.getElementById("root")).render(k.jsx(I.StrictMode,{children:k.jsx(eZ,{})}));
